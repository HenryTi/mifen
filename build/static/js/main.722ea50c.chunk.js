(this.webpackJsonpmifen=this.webpackJsonpmifen||[]).push([[0],{121:function(e,t){},122:function(e,t){},123:function(e,t,n){"use strict";n.d(t,"a",(function(){return q}));var r,a,i,c,s,o,u,l,p,d,h,f=n(21),b=n(52),v=n(1),m=n.n(v),j=n(23),g=n(2),x=n(15),y=n(6),O=n(7),k=n(13),w=n(10),N=n(9),S=n(12),A=(n(34),n(5)),T=n(3),C=n(36),I=n(8),D=n(47),P=(n(4),n(16)),F=n(18),L=n(0),E=function(e){Object(w.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(y.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).onSelect=function(t,n,r){e.controller.onClickSelectTag(t,n)},e.onEditTag=function(t,n){n.preventDefault(),e.controller.onEditTag(t)},e.renderTag=function(t){var n=Object(L.jsx)("div",{className:"px-3 py-2 cursor-pointer",children:t.name}),r=t.name===F.b||t.name===F.c?"":Object(L.jsx)("div",{className:"px-3 py-2 cursor-pointer",onClick:function(n){return e.onEditTag(t,n)},children:"\u7f16\u8f91"});return Object(L.jsx)(T.LMR,{className:"mx-3 my-2",left:n,right:r})},e.page=Object(P.d)((function(){var t=e.controller.selectedTags,n=e.controller.cApp.tags,r=n.length>=10?"":Object(L.jsxs)("div",{className:"px-3 py-2 cursor-pointer",onClick:e.controller.onNewTag,children:[Object(L.jsx)(T.FA,{name:"plus",className:"text-primary"})," \xa0 \u65b0\u5efa\u5206\u7ec4"]});return Object(L.jsxs)(T.Page,{header:"\u9009\u62e9\u5206\u7ec4",headerClassName:"bg-primary",children:[r,Object(L.jsx)(T.List,{items:n,item:{onSelect:e.onSelect,render:e.renderTag},selectedItems:t})]})})),e}return Object(O.a)(n,[{key:"open",value:function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(T.VPage),R=[{name:"name",type:"string",required:!0,maxLength:10},{name:"id",type:"id"},{name:"submit",type:"submit"}],M={items:{name:{widget:"text",label:null,placeholder:"\u5206\u7ec4\u540d\u79f0"},id:{widget:"id",visible:!1},submit:{widget:"button",label:"\u4fdd\u5b58",className:"btn btn-primary"}}},V=function(e){Object(w.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(y.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).onFormButtonClick=function(){var t=Object(g.a)(m.a.mark((function t(n,r){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.controller.onSaveNewTag(r.data);case 2:if(!t.sent){t.next=4;break}e.controller.closePage();case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.page=function(){return Object(L.jsx)(T.Page,{header:"\u65b0\u5efa\u5206\u7ec4",headerClassName:"bg-primary",children:Object(L.jsx)("div",{className:"px-3 py-3",children:Object(L.jsx)(T.Form,{schema:R,uiSchema:M,formData:void 0,onButtonClick:e.onFormButtonClick})})})},e}return Object(O.a)(n,[{key:"open",value:function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(T.VPage),_=function(e){Object(w.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(y.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).onFormButtonClick=function(){var t=Object(g.a)(m.a.mark((function t(n,r){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.controller.onSaveTag(r.data);case 2:if(!t.sent){t.next=4;break}e.controller.closePage();case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.page=function(t){var n={id:t.id,name:t.name};return Object(L.jsx)(T.Page,{header:"\u7f16\u8f91\u5206\u7ec4",headerClassName:"bg-primary",children:Object(L.jsx)("div",{className:"px-3 py-3",children:Object(L.jsx)(T.Form,{schema:R,uiSchema:M,formData:n,onButtonClick:e.onFormButtonClick})})})},e}return Object(O.a)(n,[{key:"open",value:function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page,t);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(T.VPage),W=n(25),B=n(49),q=(r=function(e){Object(w.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(y.a)(this,n);for(var r=arguments.length,f=new Array(r),v=0;v<r;v++)f[v]=arguments[v];return e=t.call.apply(t,[this].concat(f)),Object(x.a)(e,"baseItem",a,Object(k.a)(e)),Object(x.a)(e,"loaded",i,Object(k.a)(e)),Object(x.a)(e,"price",c,Object(k.a)(e)),Object(x.a)(e,"stockTags",s,Object(k.a)(e)),e.selectedTags=void 0,e.exrightForEarning=[],e.exrightInfo=[],Object(x.a)(e,"seasonData",o,Object(k.a)(e)),Object(x.a)(e,"predictSeasonData",u,Object(k.a)(e)),Object(x.a)(e,"predictSeasonDataFull",l,Object(k.a)(e)),Object(x.a)(e,"predictData",p,Object(k.a)(e)),Object(x.a)(e,"ypredict",d,Object(k.a)(e)),Object(x.a)(e,"historyData",h,Object(k.a)(e)),e.historyDataOrg=[],e._capitalearning=A.observable.array([],{deep:!0}),e._bonus=A.observable.array([],{deep:!0}),e._divideInfo=A.observable.array([],{deep:!0}),e.loadData=function(){e.loading()},e.loading=Object(g.a)(m.a.mark((function t(){var n,r,a,i,c,s,o,u,l,p,d,h;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.baseItem){t.next=2;break}return t.abrupt("return");case 2:return n=e.baseItem,r=n.id,a=n.day,t.next=5,Promise.all([e.cApp.miApi.query("q_stockallinfo",[r,a]),e.cApp.miApi.query("t_tagstock$query",[e.user.id,void 0,r])]);case 5:if(i=t.sent,e.stockTags=i[1],c=i[0],!Array.isArray(c[0])){t.next=26;break}return s=c[1],Array.isArray(s)&&(e.price=s[0]),e._capitalearning.length>0&&e._capitalearning.clear(),o=c[2],Array.isArray(o)&&(u=e._capitalearning).push.apply(u,Object(j.a)(o)),e._bonus.clear(),l=c[3],Array.isArray(l)&&(p=e._bonus).push.apply(p,Object(j.a)(l)),e._divideInfo.clear(),d=c[4],Array.isArray(d)&&(h=e._divideInfo).push.apply(h,Object(j.a)(d)),e.exrightForEarning=c[5],t.next=23,e.loadTTMEarning(c[6]);case 23:e.exrightInfo=c[7],e.historyDataOrg=c[8],e.LoadHistoryData(!1);case 26:e.loaded=!0;case 27:case"end":return t.stop()}}),t)}))),e.openMetaView=function(){},e.onSelectTag=Object(g.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.selectedTags=e.cApp.tags.filter((function(t){return e.stockTags.findIndex((function(e){return e.tag===t.id}))>=0})),e.openVPage(E);case 2:case"end":return t.stop()}}),t)}))),e.onNewTag=function(){e.openVPage(V)},e.onEditTag=function(t){e.openVPage(_,t)},e.onSaveNewTag=function(){var t=Object(g.a)(m.a.mark((function t(n){var r,a,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.name,t.next=3,e.cApp.miApi.call("t_tag$save",[e.user.id,void 0,r]);case 3:if(a=t.sent,!((i=a.retId)<0)){t.next=8;break}return alert(r+" \u5df2\u7ecf\u88ab\u4f7f\u7528\u4e86"),t.abrupt("return",!1);case 8:return e.cApp.tags.push({id:i,name:r}),t.abrupt("return",!0);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onSaveTag=function(){var t=Object(g.a)(m.a.mark((function t(n){var r,a,i,c,s;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.id,a=n.name,{id:r,name:a},!((i=e.cApp.tags.findIndex((function(e){return e.id!==r&&e.name===a})))>=0)){t.next=6;break}return alert(a+" \u5df2\u7ecf\u88ab\u4f7f\u7528\u4e86"),t.abrupt("return",!1);case 6:return t.next=8,e.cApp.miApi.call("t_tag$save",[e.user.id,void 0,a]);case 8:if(c=t.sent,!(void 0===(s=c.retId)||s<0)){t.next=13;break}return alert(a+" \u5df2\u7ecf\u88ab\u4f7f\u7528\u4e86"),t.abrupt("return",!1);case 13:return(i=e.cApp.tags.findIndex((function(e){return e.id===r})))>=0&&(e.cApp.tags[i].name=a),t.abrupt("return",!0);case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onClickSelectTag=function(){var t=Object(g.a)(m.a.mark((function t(n,r){var a,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if({user:T.nav.user.id,tag:n.id,arr1:[{stock:e.baseItem.id}]},!0!==r){t.next=11;break}return t.next=4,e.cApp.miApi.call("t_tagstock$add",[e.user.id,n.id,e.baseItem.id]);case 4:return t.sent,a={tag:{id:n.id}},e.stockTags.push(a),t.next=9,e.cApp.AddTagStockID(n.id,e.baseItem.id);case 9:t.next=18;break;case 11:return t.next=13,e.cApp.miApi.call("t_tagstock$del",[e.user.id,n.id,e.baseItem.id]);case 13:return t.sent,i=e.stockTags.findIndex((function(e){return e.tag.id===n.id})),e.stockTags.splice(i,1),t.next=18,e.cApp.RemoveTagStockID(n.id,e.baseItem.id);case 18:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.onClickDefaultTag=function(){var t=Object(g.a)(m.a.mark((function t(n){var r,a,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.cApp.defaultListTagID,!0!==n){t.next=11;break}return t.next=4,e.cApp.miApi.call("t_tagstock$add",[e.user.id,r,e.baseItem.id]);case 4:return t.sent,a={tag:{id:r}},e.stockTags.push(a),t.next=9,e.cApp.AddTagStockID(r,e.baseItem.id);case 9:t.next=18;break;case 11:return t.next=13,e.cApp.miApi.call("t_tagstock$del",[e.user.id,r,e.baseItem.id]);case 13:return t.sent,i=e.stockTags.findIndex((function(e){return e.tag.id===r})),e.stockTags.splice(i,1),t.next=18,e.cApp.RemoveTagStockID(r,e.baseItem.id);case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.showSelectStock=function(){var t=Object(g.a)(m.a.mark((function t(n){var r,a,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new B.a(e.cApp),t.next=3,r.call();case 3:return a=t.sent,(i=Object(b.a)({},a)).day=n,e.baseItem=i,e.loaded=!1,t.next=10,e.loading();case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.changeDay=function(){var t=Object(g.a)(m.a.mark((function t(n){var r,a,i,c,s,o;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.baseItem.day!==n){t.next=2;break}return t.abrupt("return");case 2:return r=e.baseItem,a=r.id,i=r.name,c=r.code,s=r.symbol,o={id:a,name:i,code:c,symbol:s,day:0===n?void 0:n},e.baseItem=o,e.loaded=!1,t.next=8,e.loading();case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(O.a)(n,[{key:"capitalearning",get:function(){if(!1!==this.loaded)return this._capitalearning}},{key:"bonus",get:function(){if(!1!==this.loaded)return this._bonus}},{key:"divideInfo",get:function(){if(!1!==this.loaded)return this._divideInfo}},{key:"loadTTMEarning",value:function(){var e=Object(g.a)(m.a.mark((function e(t){var n,r,a,i,c,s,o,u,l,p,d,h,b,v,j,g,x,y,O,k,w,N,S,A;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.seasonData.splice(0),n={},!((r=t.length)<=0)){e.next=5;break}return e.abrupt("return");case 5:a=t[r-1].seasonno,i=t[0],c=i.seasonno,s=I.a.SeasonnoToBeginEnd(c),o=s.end,u=Object(f.a)(t);try{for(u.s();!(l=u.n()).done;)p=l.value,d=p.seasonno,h={season:d,c:p.capital,e:p.es,esum:p.earning,corg:p.capital,eorg:p.es,esumorg:p.earning},this.ExrightEarning(o,d,h),n[d]=h}catch(m){u.e(m)}finally{u.f()}b=0,v=0,j=a;case 14:if(!(j<=c)){e.next=24;break}if(void 0!==(g=n[j])){e.next=18;break}return e.abrupt("continue",21);case 18:v+=g.e,b<3?g.esum=void 0:(g.esum=v,void 0!==(x=n[j-3])&&(v-=x.e)),this.seasonData.splice(0,0,g);case 21:++j,++b,e.next=14;break;case 24:if(y=c-19,this.predictData=void 0,this.predictSeasonData.splice(0),this.predictSeasonDataFull.splice(0),!(y<a)){e.next=30;break}return e.abrupt("return");case 30:y+=3,this.ypredict=[],O=y;case 33:if(!(O<=c)){e.next=42;break}if(void 0!==(k=n[O])){e.next=37;break}return e.abrupt("break",42);case 37:this.predictSeasonData.splice(0,0,k),this.ypredict.push(k.esum);case 39:O+=4,e.next=33;break;case 42:w=c;case 43:if(!(w>=a)){e.next=51;break}if(void 0!==(N=n[w])){e.next=47;break}return e.abrupt("break",51);case 47:this.predictSeasonDataFull.push(N);case 48:w-=4,e.next=43;break;case 51:5===this.ypredict.length?(S=new W.a(this.ypredict),A=new W.b(this.ypredict),this.predictData={e:this.ypredict[4],b:S.B,r2:S.r2,epre:S.predict(4),l:A.slopeR,lr2:A.r2,lpre:A.predict(4)}):this.predictSeasonData.splice(0);case 52:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"ExrightEarning",value:function(e,t,n){for(var r=I.a.SeasonnoToBeginEnd(t).end,a=0;a<this.exrightForEarning.length;++a){var i=this.exrightForEarning[a],c=i.day;if(c>e)break;if(!(c<r)){var s=i.factor;n.c=n.c*s,n.e=n.e*s,n.esum=n.esum*s}}}},{key:"LoadHistoryData",value:function(e){var t=this.historyDataOrg,n=t.length;if(n<=10)this.historyData=[];else{if(!e){var r=this.baseItem.day;if(void 0!==r){for(var a=n-1;a>=0;--a){if(t[a].day<=r)break}n=a+1}}var i=n-1,c=t[i],s=c.dayno;if(void 0===s)for(;i>0&&void 0===(s=(c=t[--i]).dayno););for(var o=c.day,u=s%5,l=[],p=0;p<=i;++p){var d=t[p],h=d.day,f=d.price;d.dayno%5===u&&l.push({day:h,price:this.RestorePrice(f,h,o),ttm:this.CalculateHistoryPE(f,h)})}this.historyData=l}}},{key:"RestorePrice",value:function(e,t,n){var r=0,a=e;if(t<n){for(var i=0;i<this.exrightInfo.length;++i){var c=this.exrightInfo[i],s=c.day,o=c.bonus,u=c.factor,l=c.factore;if(!(s<=t)){if(s>n)break;a*=u,r=(r+o)*l}}a-=r}else{for(var p=0;p<this.exrightInfo.length;++p){var d=this.exrightInfo[p],h=d.day,f=d.bonus,b=d.factor,v=d.factore;if(!(h<=n)){if(h>t)break;a/=b,r=r/v+f}}a+=r}return a}},{key:"CalculateHistoryPE",value:function(e,t){for(var n=I.a.SeasonnoFromDay(t),r=this.seasonData.length,a=0;a<r;++a){var i=this.seasonData[a];if(!(i.season>=n)){if(void 0===i.esumorg)return;var c=I.a.SeasonnoToBeginEnd(i.season).end;return this.RestorePrice(e,t,c)/i.esumorg}}}},{key:"internalStart",value:function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.baseItem=t,this.loadData(),this.openVPage(D.a);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(C.b),a=Object(S.a)(r.prototype,"baseItem",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),i=Object(S.a)(r.prototype,"loaded",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),c=Object(S.a)(r.prototype,"price",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),s=Object(S.a)(r.prototype,"stockTags",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),o=Object(S.a)(r.prototype,"seasonData",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),u=Object(S.a)(r.prototype,"predictSeasonData",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),l=Object(S.a)(r.prototype,"predictSeasonDataFull",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),p=Object(S.a)(r.prototype,"predictData",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=Object(S.a)(r.prototype,"ypredict",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),h=Object(S.a)(r.prototype,"historyData",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Object(S.a)(r.prototype,"capitalearning",[A.computed],Object.getOwnPropertyDescriptor(r.prototype,"capitalearning"),r.prototype),Object(S.a)(r.prototype,"bonus",[A.computed],Object.getOwnPropertyDescriptor(r.prototype,"bonus"),r.prototype),Object(S.a)(r.prototype,"divideInfo",[A.computed],Object.getOwnPropertyDescriptor(r.prototype,"divideInfo"),r.prototype),r)},124:function(e,t,n){"use strict";n.r(t),n.d(t,"fieldArr",(function(){return i})),n.d(t,"ui",(function(){return c})),n.d(t,"res",(function(){return s})),n.d(t,"render",(function(){return o}));var r=n(0),a={id:{name:"id",type:"id",isKey:!1,label:"Id"},no:{name:"no",type:"string",isKey:!0,widget:"string",label:"No"},name:{name:"name",type:"string",isKey:!1,widget:"string",label:"Name"}},i=[a.no,a.name],c={label:"Account",fieldArr:i,fields:a},s={zh:{},en:{}};function o(e){return Object(r.jsx)(r.Fragment,{children:JSON.stringify(e)})}},125:function(e,t,n){"use strict";n.r(t),n.d(t,"fieldArr",(function(){return i})),n.d(t,"ui",(function(){return c})),n.d(t,"res",(function(){return s})),n.d(t,"render",(function(){return o}));var r=n(0),a={id:{name:"id",type:"id",isKey:!1,label:"Id"},account:{name:"account",type:"id",isKey:!0,label:"Account"},stock:{name:"stock",type:"id",isKey:!0,label:"Stock"}},i=[a.account,a.stock],c={label:"Holding",fieldArr:i,fields:a},s={zh:{},en:{}};function o(e){return Object(r.jsx)(r.Fragment,{children:JSON.stringify(e)})}},126:function(e,t,n){"use strict";n.r(t),n.d(t,"fieldArr",(function(){return i})),n.d(t,"ui",(function(){return c})),n.d(t,"res",(function(){return s})),n.d(t,"render",(function(){return o}));var r=n(0),a={id:{name:"id",type:"id",isKey:!1,label:"Id"},holding:{name:"holding",type:"id",isKey:!0,label:"Holding"},tick:{name:"tick",isKey:!0,label:"Tick"},price:{name:"price",type:"integer",isKey:!1,widget:"updown",label:"Price"},quantity:{name:"quantity",type:"integer",isKey:!1,widget:"updown",label:"Quantity"},amount:{name:"amount",type:"integer",isKey:!1,widget:"updown",label:"Amount"}},i=[a.holding,a.tick,a.price,a.quantity,a.amount],c={label:"Transaction",fieldArr:i,fields:a},s={zh:{},en:{}};function o(e){return Object(r.jsx)(r.Fragment,{children:JSON.stringify(e)})}},127:function(e,t,n){"use strict";n.r(t),n.d(t,"fieldArr",(function(){return i})),n.d(t,"ui",(function(){return c})),n.d(t,"res",(function(){return s})),n.d(t,"render",(function(){return o}));var r=n(0),a={id:{name:"id",type:"id",isKey:!1,label:"Id"},market:{name:"market",type:"id",isKey:!0,label:"Market"},code:{name:"code",type:"string",isKey:!0,widget:"string",label:"Code"},name:{name:"name",type:"string",isKey:!1,widget:"string",label:"Name"}},i=[a.market,a.code,a.name],c={label:"Stock",fieldArr:i,fields:a},s={zh:{},en:{}};function o(e){return Object(r.jsx)(r.Fragment,{children:JSON.stringify(e)})}},128:function(e,t,n){"use strict";n.r(t),n.d(t,"fieldArr",(function(){return i})),n.d(t,"ui",(function(){return c})),n.d(t,"res",(function(){return s})),n.d(t,"render",(function(){return o}));var r=n(0),a={id:{name:"id",type:"id",isKey:!1,label:"Id"},name:{name:"name",type:"string",isKey:!0,widget:"string",label:"Name"},currency:{name:"currency",type:"string",isKey:!1,widget:"string",label:"Currency"}},i=[a.name,a.currency],c={label:"Market",fieldArr:i,fields:a},s={zh:{},en:{}};function o(e){return Object(r.jsx)(r.Fragment,{children:JSON.stringify(e)})}},129:function(e,t,n){"use strict";n.r(t),n.d(t,"fieldArr",(function(){return i})),n.d(t,"ui",(function(){return c})),n.d(t,"res",(function(){return s})),n.d(t,"render",(function(){return o}));var r=n(0),a={id:{name:"id",type:"id",isKey:!1,label:"Id"},quantity:{name:"quantity",type:"integer",isKey:!1,widget:"updown",label:"Quantity"}},i=[a.quantity],c={label:"Portfolio",fieldArr:i,fields:a},s={zh:{},en:{}};function o(e){return Object(r.jsx)(r.Fragment,{children:JSON.stringify(e)})}},130:function(e,t,n){"use strict";n.r(t),n.d(t,"fieldArr",(function(){return i})),n.d(t,"ui",(function(){return c})),n.d(t,"res",(function(){return s})),n.d(t,"render",(function(){return o}));var r=n(0),a={id:{name:"id",type:"id",isKey:!1,label:"Id"},miRate:{name:"miRate",type:"integer",isKey:!1,widget:"updown",label:"MiRate"},ttm:{name:"ttm",type:"integer",isKey:!1,widget:"updown",label:"Ttm"},divident:{name:"divident",type:"integer",isKey:!1,widget:"updown",label:"Divident"},price:{name:"price",type:"integer",isKey:!1,widget:"updown",label:"Price"},roe:{name:"roe",type:"integer",isKey:!1,widget:"updown",label:"Roe"},inc1:{name:"inc1",type:"integer",isKey:!1,widget:"updown",label:"Inc1"},inc2:{name:"inc2",type:"integer",isKey:!1,widget:"updown",label:"Inc2"},inc3:{name:"inc3",type:"integer",isKey:!1,widget:"updown",label:"Inc3"},inc4:{name:"inc4",type:"integer",isKey:!1,widget:"updown",label:"Inc4"},preInc:{name:"preInc",type:"integer",isKey:!1,widget:"updown",label:"PreInc"},marketValue:{name:"marketValue",type:"integer",isKey:!1,widget:"updown",label:"MarketValue"}},i=[a.miRate,a.ttm,a.divident,a.price,a.roe,a.inc1,a.inc2,a.inc3,a.inc4,a.preInc,a.marketValue],c={label:"StockValue",fieldArr:i,fields:a},s={zh:{},en:{}};function o(e){return Object(r.jsx)(r.Fragment,{children:JSON.stringify(e)})}},131:function(e,t,n){"use strict";n.r(t),n.d(t,"fieldArr",(function(){return i})),n.d(t,"ui",(function(){return c})),n.d(t,"res",(function(){return s})),n.d(t,"render",(function(){return o}));var r=n(0),a={id:{name:"id",type:"id",isKey:!1,label:"Id"},mi:{name:"mi",type:"integer",isKey:!1,widget:"updown",label:"Mi"},market:{name:"market",type:"integer",isKey:!1,widget:"updown",label:"Market"},count:{name:"count",type:"integer",isKey:!1,widget:"updown",label:"Count"}},i=[a.mi,a.market,a.count],c={label:"AccountValue",fieldArr:i,fields:a},s={zh:{},en:{}};function o(e){return Object(r.jsx)(r.Fragment,{children:JSON.stringify(e)})}},132:function(e,t,n){"use strict";n.r(t),n.d(t,"fieldArr",(function(){return a})),n.d(t,"ui",(function(){return i})),n.d(t,"res",(function(){return c})),n.d(t,"render",(function(){return s}));var r=n(0),a=[],i={label:"UserAccount",fieldArr:a,fields:{id:{name:"id",type:"id",isKey:!1,label:"Id"},id2:{name:"id2",type:"id",isKey:!1,label:"Id2"}}},c={zh:{},en:{}};function s(e){return Object(r.jsx)(r.Fragment,{children:JSON.stringify(e)})}},138:function(e,t,n){},18:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return i}));var r={uqBasedata:"bruce/mi",appIcon:"https://tv.jkchemical.com/imgs/Bear-icon.png",miApiHost:"https://mi.jjol.cn/",miApiHostDebug:"http://localhost:6010/",isDevelopment:!1},a="\u81ea\u9009\u80a1",i="\u9ed1\u540d\u5355"},245:function(e,t,n){},25:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return c}));var r=n(6),a=n(7),i=function(){function e(t){Object(r.a)(this,e),this.slope=void 0,this.intercept=void 0,this.y=void 0,this.slopeR=void 0,this.endY=void 0,this.r2=void 0,this.y=t,this.regress();var n=this.score();this.r2=n.r2}return Object(a.a)(e,[{key:"regress",value:function(){for(var e=this.y.length,t=0,n=0,r=0,a=0,i=0;i<e;++i)t+=i,n+=this.y[i],r+=i*i,a+=i*this.y[i];var c=e*a-t*n;this.slope=c/(e*r-t*t),this.intercept=1/e*n-this.slope*(1/e)*t;var s=this.slope>0?this.predict(e-2):this.predict(1);this.slopeR=s<.01?void 0:this.slope/s}},{key:"score",value:function(){for(var e=this.y.length,t=new Array(e),n=0;n<e;n++)t[n]=this.predict(n);for(var r=0,a=0,i=0,c=0,s=0,o=0,u=0,l=0;l<e;l++){var p=t[l];r+=p;var d=this.y[l];a+=d,s+=p*p,o+=d*d,u+=p*d;var h=d-p;0!==d&&(i+=h*h/d),c+=h*h}var f=(e*u-r*a)/Math.sqrt((e*s-r*r)*(e*o-a*a));return{r:f,r2:f*f,chi2:i,rmsd:Math.sqrt(c/e)}}},{key:"predict",value:function(e){return this.slope*e+this.intercept}},{key:"computeX",value:function(e){return(e-this.intercept)/this.slope}}]),e}(),c=function(){function e(t){Object(r.a)(this,e),this.A=void 0,this.B=void 0,this.y=void 0,this.r2=void 0,this.y=t,this.regress();var n=this.score();this.r2=n.r2}return Object(a.a)(e,[{key:"regress",value:function(){for(var e=this.y.length,t=0,n=0,r=0,a=0,i=0;i<e;++i){t+=i;var c=Math.log(this.y[i]);n+=c,r+=i*i,a+=i*c}var s=(e*a-t*n)/(e*r-t*t),o=1/e*n-s*(1/e)*t;this.A=Math.exp(o),this.B=s}},{key:"score",value:function(){for(var e=this.y.length,t=new Array(e),n=0;n<e;n++)t[n]=this.predict(n);for(var r=0,a=0,i=0,c=0,s=0,o=0,u=0,l=0;l<e;l++){var p=t[l];r+=p;var d=this.y[l];a+=d,s+=p*p,o+=d*d,u+=p*d;var h=d-p;0!==d&&(i+=h*h/d),c+=h*h}var f=(e*u-r*a)/Math.sqrt((e*s-r*r)*(e*o-a*a));return{r:f,r2:f*f,chi2:i,rmsd:Math.sqrt(c/e)}}},{key:"predict",value:function(e){return this.A*Math.exp(e*this.B)}}]),e}()},251:function(e,t,n){"use strict";n.r(t);var r=n(4),a=n.n(r),i=n(46),c=n.n(i),s=(n(137),n(138),n(1)),o=n.n(s),u=n(2),l=n(6),p=n(7),d=n(10),h=n(9),f=n(3),b=(n(245),n(36)),v=n(37),m=n(0),j=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).onLogined=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.start)(b.a,v.a);case 2:case"end":return e.stop()}}),e)}))),e}return Object(p.a)(n,[{key:"render",value:function(){return Object(m.jsx)(f.NavView,{onLogined:this.onLogined})}}]),n}(a.a.Component),g=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,252)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),i(e),c(e)}))};c.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(j,{})}),document.getElementById("root")),g()},36:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return Ve}));var r=n(7),a=n(6),i=n(10),c=n(9),s=n(3),o=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return n}(s.CBase),u=(s.CSub,function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"newC",value:function(e){var t=new e(this);return t.init(),t}}]),n}(s.CAppBase)),l=n(23),p=n(1),d=n.n(p),h=n(2),f=n(21),b=n(15),v=n(13),m=n(12),j=(n(34),n(5)),g=n(25),x=n(51),y=n(4),O=n.p+"static/media/logo.2d27ead7.svg",k=n(0),w=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){s.FA;var e=Object(k.jsx)("img",{className:"m-1",src:O,alt:"logo",style:{height:"3rem",width:"3rem"}});return Object(k.jsx)(s.LMR,{className:"mb-3 align-items-center bg-white",left:e,right:undefined,children:Object(k.jsx)("div",{className:"",children:this.controller.renderSearchHeader("md")})})}}]),n}(s.View),N=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).onSearch=function(){var e=Object(h.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e}return Object(r.a)(n,[{key:"render",value:function(e){return Object(k.jsx)(s.SearchBox,{className:"px-1 w-100",size:e,onSearch:this.onSearch,placeholder:"\u529f\u80fd..."})}}]),n}(s.View),S=n(11);function A(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return Object(k.jsxs)("label",{className:"btn btn-outline-info mb-0",children:[Object(k.jsx)("input",{type:"radio",className:"btn-sm btn-check mr-1",name:e,defaultChecked:a,onClick:function(){return r(t)}}),n]})}function T(e,t){return Object(k.jsx)("div",{className:"my-1 justify-content-end mr-2",children:Object(k.jsxs)("div",{className:"btn-group",role:"group","aria-label":"Basic radio toggle button group",children:[A(e,"tagv","\u7c73\u606f\u7387",t,!0),A(e,"tagpe","TTM",t),A(e,"tagdp","\u80a1\u606f\u7387",t)]})})}function C(e,t,n){var r,a,i="px-2 mb-2 text-right ",c=i+"c5";switch(n){case"p0":r=void 0===(a=t)||isNaN(a)?"":(100*a).toFixed(0)+"%";break;case"p1":r=function(e){return void 0===e||isNaN(e)?"":(100*e).toFixed(1)+"%"}(t);break;case"n1":r=P(t,1);break;case"n2":r=P(t,2);break;case"yi":r=function(e){return void 0===e||isNaN(e)?"":Math.round(e/1e4).toString()}(t),c="px-2 mb-2 text-right c5"}return Object(k.jsxs)("div",{className:c,children:[Object(k.jsx)("span",{className:"text-muted small",children:e}),Object(k.jsx)("br",{}),r]},e)}function I(e,t,n,r){e.id;var a,i=e.name,c=e.code,o=e.pe,u=e.roe,l=e.price,p=e.divyield,d=e.v,h=e.order,f=(e.symbol,e.l),b=(e.e,e.ep,e.e3,e.total),v=function(e){var t=[void 0,void 0,void 0,void 0];if(void 0===e)return t;if(e.length<5)return t;for(var n=function(e,t){if(!(t<=0||e<=0))return e/t-1},r=0;r<4;++r)t[r]=n(e[r+1],e[r]);return t}(e.dataArr),m=Object(k.jsxs)("div",{className:"cursor-pointer",onClick:function(){return t(e)},children:[Object(k.jsx)("span",{className:"text-primary",children:i}),"\xa0",Object(k.jsx)("span",{className:"text-info",children:c}),"\xa0",Object(k.jsx)("small",{className:"small ml-1",children:Object(k.jsx)("span",{className:"text-danger",children:h})})]}),j=[["\u7c73\u606f\u7387",d,"n1"],["TTM",o,"n1"],["\u80a1\u606f\u7387",100*p,"n1"],["\u4ef7\u683c",l,"n2"],["ROE",100*u,"n1"],["\u589e1",v[0],"p0"],["\u589e2",v[1],"p0"],["\u589e3",v[2],"p0"],["\u589e4",v[3],"p0"],["\u9884\u589e",f,"p0"],["\u5e02\u503c",b*l,"yi"]];return n&&(a=Object(k.jsx)("span",{className:"ml-4",children:n})),Object(k.jsxs)("div",{className:"d-block border-top",children:[Object(k.jsx)(s.LMR,{className:"px-2 py-1 bg-light",left:m,right:r,children:a}),Object(k.jsx)("div",{className:"d-flex flex-wrap",children:j.map((function(e){return C(e[0],e[1],e[2])}))})]})}function D(e){var t=e.symbol;return Object(k.jsx)("a",{className:"text-info",href:"https://finance.sina.com.cn/realstock/company/".concat(t,"/nc.shtml"),target:"_blank",rel:"noopener noreferrer",onClick:function(e){e.stopPropagation()},children:Object(k.jsx)(s.FA,{name:"angle-double-right"})})}function P(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return void 0===e?"":e.toFixed(t)}var F,L,E,R,M=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).setSortType=function(t){e.controller.setSortType(t)},e.renderRow=function(t,n){return e.rowContent(t)},e.rowContent=function(t){var n=D(t);return I(t,e.onClickName,null,n)},e.rowKey=function(e){return e.id},e.onClickName=function(t){e.controller.openStockInfo(t)},e.onSelected=function(){var e=Object(h.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:0;case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.clickRow=function(t){e.callOnSelected(t)},e}return Object(r.a)(n,[{key:"header",value:function(){return"\u9996\u9875"}},{key:"right",value:function(){var e=this;return Object(k.jsx)("button",{className:"btn btn-sm btn-info mr-2",onClick:function(){e.controller.openMarketPE()},children:"\u5e02\u573a\u5e73\u5747PE"})}},{key:"onPageScrollBottom",value:function(e){this.controller.onPage()}},{key:"content",value:function(){var e=this;return y.createElement(Object(S.observer)((function(){var t=e.controller.cApp.config.tagName,n=e.controller.items,r=e.controller,a=r.onSelectTag,i=r.onAddStock,c=Object(k.jsxs)("div",{className:"d-flex",children:[Object(k.jsx)("div",{className:"btn cursor-pointer",onClick:i,children:Object(k.jsx)(s.FA,{name:"plus",inverse:!1})}),Object(k.jsx)("div",{className:"btn cursor-pointer ml-2",onClick:a,children:Object(k.jsx)(s.FA,{name:"bars",inverse:!1})})]}),o=Object(k.jsx)("div",{className:"align-self-center",children:t});return Object(k.jsxs)("div",{children:[Object(k.jsx)(s.LMR,{className:"px-2 py-1",left:o,right:c}),Object(k.jsx)(s.List,{header:T("radioHome",e.setSortType),items:n,item:{render:e.renderRow,key:e.rowKey},before:"\u641c\u7d22",none:Object(k.jsx)("small",{className:"px-2 py-3 text-info",children:"\u65e0\u81ea\u9009\u80a1, \u8bf7\u9009\u80a1"})})]})})))}},{key:"callOnSelected",value:function(e){void 0!==this.onSelected?this.onSelected(e):alert("onSelect is undefined")}}]),n}(s.VPage),V=n(16),_=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).renderTag=function(e){return Object(k.jsx)("div",{className:"px-3 py-2 cursor-pointer",children:e.name})},e.page=Object(V.d)((function(){var t=e.controller.cApp.tags,n=e.controller.onClickTag;return Object(k.jsx)(s.Page,{header:"\u9009\u62e9\u5206\u7ec4",headerClassName:"bg-primary",children:Object(k.jsx)(s.List,{items:t,item:{onClick:n,render:e.renderTag}})})})),e}return Object(r.a)(n,[{key:"open",value:function(){var e=Object(h.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(s.VPage),W=n(8),B=n(30),q=n.n(B),K=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e,r=this;Object(a.a)(this,n);for(var i=arguments.length,c=new Array(i),o=0;o<i;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).input=void 0,e.key=void 0,e.checkLimitShow=function(t){var n=t.target.checked?1:0;e.controller.onLongShortFlag(n)},e.page=Object(S.observer)((function(){var e=Object(k.jsx)("div",{children:""});return Object(k.jsx)(s.Page,{header:e,headerClassName:"bg-primary",children:Object(k.jsx)(r.pageContent,{})})})),e.pageContent=Object(S.observer)((function(){return Object(k.jsx)(k.Fragment,{children:Object(k.jsx)(r.historyChart,{})})})),e.historyChart=Object(S.observer)((function(){var t=e.controller.historyData;if(void 0===t)return Object(k.jsx)(k.Fragment,{});var n,r=k.Fragment,a=[],i=[],c=[],o=Object(f.a)(t);try{for(o.s();!(n=o.n()).done;){var u=n.value,l=u.day,p=u.pe,d=u.e;a.push(l),i.push(W.a.numberToPrecision(p,4)),c.push(d)}}catch(v){o.e(v)}finally{o.f()}var h={labels:a,datasets:[{label:"PE",data:i,borderColor:"blue",backgroundColor:"skyBlue",borderWidth:1,fill:!1,yAxisID:"y-axis-1"},{label:"e",data:c,borderColor:"red",backgroundColor:"pink",borderWidth:1,fill:!1,yAxisID:"y-axis-2"}]};r=Object(k.jsx)(q.a,{data:h,type:"line",options:{scales:{yAxes:[{type:"linear",display:!0,position:"right",id:"y-axis-1"},{type:"linear",display:!0,position:"left",id:"y-axis-2",gridLines:{drawOnChartArea:!1}}]}}});var b=k.Fragment;return b=Object(k.jsxs)("label",{className:"px-3",children:[" ",Object(k.jsx)("input",{type:"checkbox",name:"selectType",defaultChecked:!1,onChange:e.checkLimitShow}),"\u957f\u671f"]}),Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(s.LMR,{className:"px-3 py-2 bg-white",left:"\u5e02\u573aPE\u5386\u53f2\u8d70\u52bf",right:b}),Object(k.jsx)("div",{className:"px-3",style:{width:"95%"},children:r})]})})),e}return Object(r.a)(n,[{key:"open",value:function(){var e=Object(h.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(e){return Object(k.jsx)(this.page,{})}}]),n}(s.VPage),H=(F=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return e=t.call.apply(t,[this].concat(i)),Object(b.a)(e,"historyData",L,Object(v.a)(e)),e.longshortFlag=0,e.loadData=Object(h.a)(d.a.mark((function t(){var n,r,a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new Date,r=[1e4*n.getFullYear()+100*(n.getMonth()+1)+n.getDate(),750,e.longshortFlag],t.next=4,e.cApp.miApi.query("q_marketpe",r);case 4:a=t.sent,e.historyData=a.reverse();case 6:case"end":return t.stop()}}),t)}))),e}return Object(r.a)(n,[{key:"internalStart",value:function(){var e=Object(h.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.loadData(),this.openVPage(K);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onLongShortFlag",value:function(e){e!==this.longshortFlag&&(this.longshortFlag=e,this.loadData())}}]),n}(o),L=Object(m.a)(F.prototype,"historyData",[j.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),F),z=n(49),$=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).lastLoadTick=void 0,e.items=j.observable.array([],{deep:!0}),e.userTag=void 0,e.oldSortType=void 0,e.onSelectTag=Object(h.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.openVPage(_);case 1:case"end":return t.stop()}}),t)}))),e.onAddStock=Object(h.a)(d.a.mark((function t(){var n,r,a,i;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new z.a(e.cApp),t.next=3,n.call();case 3:if(void 0===(r=t.sent)){t.next=14;break}if(!((a=r.id)>0)){t.next=14;break}return i=e.cApp.defaultListTagID,t.next=10,e.cApp.miApi.call("t_tagstock$add",[e.user.id,i,a]);case 10:return t.next=12,e.cApp.AddTagStockID(i,a);case 12:return t.next=14,e.loadItems();case 14:case"end":return t.stop()}}),t)}))),e.onClickTag=function(){var t=Object(h.a)(d.a.mark((function t(n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.cApp.selectTag(n);case 2:e.closePage();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onPage=Object(h.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),e.onWarningConfg=function(){e.cApp.cWarning.onWarningConfg()},e.load=Object(h.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.cApp.tagID>0)){t.next=6;break}if(!(e.lastLoadTick&&Date.now()-e.lastLoadTick<3e5)){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,e.loadItems();case 6:case"end":return t.stop()}}),t)}))),e.setSortType=function(t){e.cApp.setUserSortType(t);var n=e.items.slice();e.cApp.sortStocks(n),e.items.replace(n)},e.renderSiteHeader=function(){return e.renderView(w)},e.renderSearchHeader=function(t){return e.renderView(N,t)},e.renderHome=function(){return e.renderView(M)},e.openMetaView=function(){},e.tab=function(){return e.renderHome()},e.openStockInfo=function(t){e.newC(x.CStockInfo).start(t)},e.openMarketPE=function(){e.newC(H).start()},e}return Object(r.a)(n,[{key:"AddTagStockID",value:function(e,t){this.userTag&&this.userTag.tagID===e&&this.loadItems()}},{key:"RemoveTagStockID",value:function(e,t){if(this.userTag&&this.userTag.tagID===e){var n=this.items.findIndex((function(e){return e.id===t}));n>=0&&this.items.splice(n,1)}}},{key:"internalStart",value:function(){var e=Object(h.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadItems",value:function(){var e=Object(h.a)(d.a.mark((function e(){var t,n,r,a,i,c,s,o,u,p,h,b=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"taguser",t={name:"taguser",pageStart:0,pageSize:1e3,user:this.user.id,tag:this.cApp.tagID,yearlen:1},e.next=4,this.cApp.miApi.process(t,[]);case 4:if(n=e.sent,!1!==Array.isArray(n)){e.next=7;break}return e.abrupt("return");case 7:r=n,a=Object(f.a)(r);try{for(a.s();!(i=a.n()).done;)c=i.value,s=JSON.parse(c.data),c.dataArr=s,o=new g.b(s),c.ep=(o.predict(4)+c.e)/2,c.e3=o.predict(7),c.v=W.a.calculateVN(o.slopeR,c.ep,c.divyield*c.price,c.exprice),c.predictpe=c.price/c.e3}catch(d){a.e(d)}finally{a.f()}this.cApp.sortStocks(r),u=1,p=Object(f.a)(r);try{for(p.s();!(h=p.n()).done;)h.value.order=u,++u}catch(d){p.e(d)}finally{p.f()}Object(j.runInAction)((function(){var e;b.items.clear(),(e=b.items).push.apply(e,Object(l.a)(r)),b.lastLoadTick=Date.now()}));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(o),J=(E=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(e){var r;Object(a.a)(this,n),(r=t.call(this,e)).schema=[{name:"nick",type:"string"},{name:"icon",type:"image"}],r.uiSchema={items:{nick:{widget:"text",label:"\u522b\u540d",placeholder:"\u597d\u7684\u522b\u540d\u66f4\u65b9\u4fbf\u8bb0\u5fc6"},icon:{widget:"image",label:"\u5934\u50cf"}}},Object(b.a)(r,"data",R,Object(v.a)(r)),r.onItemChanged=function(){var e=Object(h.a)(d.a.mark((function e(t,n,a){var i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.name,e.next=3,s.userApi.userSetProp(i,n);case 3:r.data[i]=n,s.nav.user.name=n,s.nav.saveLocalUser();case 6:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),r.page=function(){var e=Object(v.a)(r),t=e.schema,n=e.uiSchema,a=e.data,i=e.onItemChanged;return Object(k.jsx)(s.Page,{header:"\u4e2a\u4eba\u4fe1\u606f",children:Object(k.jsx)(s.Edit,{schema:t,uiSchema:n,data:a,onItemChanged:i})})};var i=s.nav.user,c=i.nick,o=i.icon;return r.data={nick:c,icon:o},r}return Object(r.a)(n,[{key:"open",value:function(){var e=Object(h.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(s.VPage),R=Object(m.a)(E.prototype,"data",[j.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E),U=n(37),Y=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"header",value:function(){return"\u57fa\u672c\u6982\u5ff5"}},{key:"content",value:function(){return Object(k.jsxs)("ul",{children:[Object(k.jsxs)("li",{className:"my-3",children:[Object(k.jsx)("div",{className:"my-2",children:"\u57fa\u672c\u516c\u7406"}),Object(k.jsxs)("ul",{className:"px-3 text-info",children:[Object(k.jsxs)("li",{children:[Object(k.jsx)("span",{className:"mr-3",children:"\u516c\u74061: "}),"\u8fdb\u6b65\u662f\u793e\u4f1a\u7684\u5fc5\u7136"]}),Object(k.jsxs)("li",{children:[Object(k.jsx)("span",{className:"mr-3",children:"\u516c\u74062: "}),"\u4fe1\u4efb\u662f\u7ecf\u6d4e\u7684\u57fa\u77f3"]}),Object(k.jsxs)("li",{children:[Object(k.jsx)("span",{className:"mr-3",children:"\u516c\u74063: "}),"\u4ef7\u503c\u662f\u4ef7\u683c\u7684\u51c6\u5fc3"]}),Object(k.jsxs)("li",{children:[Object(k.jsx)("span",{className:"mr-3",children:"\u516c\u74064: "}),"\u53d1\u5c55\u662f\u4f01\u4e1a\u7684\u57fa\u56e0"]})]})]}),Object(k.jsxs)("li",{className:"my-3",children:[Object(k.jsx)("div",{className:"my-2",children:"\u7c73\u6295\u5b9a\u5f8b"}),Object(k.jsx)("ul",{className:"px-3 text-info",children:Object(k.jsxs)("li",{children:[Object(k.jsx)("span",{className:"mr-3",children:"\u5b9a\u5f8b1: "}),"\u6295\u8d44\u65e0\u98ce\u9669"]})})]}),Object(k.jsxs)("li",{className:"my-3",children:[Object(k.jsx)("div",{className:"my-2",children:"\u7c73\u6295\u539f\u5219"}),Object(k.jsxs)("ul",{className:"px-3 text-info",children:[Object(k.jsxs)("li",{children:[Object(k.jsx)("span",{className:"mr-3",children:"\u539f\u52191: "}),"\u4f4e\u4f30"]}),Object(k.jsxs)("li",{children:[Object(k.jsx)("span",{className:"mr-3",children:"\u539f\u52192: "}),"\u5206\u6563"]}),Object(k.jsxs)("li",{children:[Object(k.jsx)("span",{className:"mr-3",children:"\u539f\u52193: "}),"\u4e0d\u6df1\u7814"]})]})]}),Object(k.jsxs)("li",{className:"my-3",children:[Object(k.jsx)("div",{className:"my-2",children:"\u7c73\u606f\u5b9a\u4e49"}),Object(k.jsxs)("ul",{className:"px-3 text-info",children:[Object(k.jsxs)("li",{children:[Object(k.jsx)("span",{className:"mr-3",children:"\u5b9a\u4e491: "}),"\u7c73\u606f = \u589e\u606f + \u80a1\u606f"]}),Object(k.jsxs)("li",{children:[Object(k.jsx)("span",{className:"mr-3",children:"\u5b9a\u4e492: "}),"\u589e\u606f = \u4f01\u4e1a\u672a\u6765\u4e09\u5e74\u5229\u6da6\u589e\u957f\u503c"]}),Object(k.jsxs)("li",{children:[Object(k.jsx)("span",{className:"mr-3",children:"\u5b9a\u4e493: "}),"\u7c73\u606f\u7387 = \u7c73\u606f / PE"]}),Object(k.jsxs)("li",{children:[Object(k.jsx)("span",{className:"mr-3",children:"\u5b9a\u4e494: "}),"PE = \u80a1\u4ef7 / \u5229\u6da6"]})]})]})]})}}]),n}(s.VPage),G=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).onExit=function(){s.nav.showLogout()},e.changePassword=Object(h.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.nav.changePassword();case 2:case"end":return e.stop()}}),e)}))),e.meInfo=Object(S.observer)((function(){var t=s.nav.user;if(void 0===t)return null;var n=t.id,r=t.name,a=t.nick,i=t.icon;return Object(k.jsx)(s.LMR,{className:"py-2 cursor-pointer w-100",left:Object(k.jsx)(s.Image,{className:"w-3c h-3c mr-3",src:i||".user-o"}),right:Object(k.jsx)(s.FA,{className:"align-self-end",name:"angle-right"}),onClick:e.controller.showEditMe,children:Object(k.jsxs)("div",{children:[Object(k.jsx)("div",{children:X(r,a)}),Object(k.jsxs)("div",{className:"small",children:[Object(k.jsx)("span",{className:"text-muted",children:"ID:"})," ",n>1e4?n:String(n+1e4).substr(1)]})]})})})),e.faq=function(){e.openVPage(Y)},e}return Object(r.a)(n,[{key:"header",value:function(){return this.t("me")}},{key:"content",value:function(){var e,t,n=s.nav.user,r=["",{type:"component",component:Object(k.jsx)(s.LMR,{className:"w-100",onClick:this.faq,right:Object(k.jsx)(s.FA,{className:"align-self-center",name:"angle-right"}),children:Object(k.jsx)(s.IconText,{iconClass:"text-info mr-2",icon:"comments-o",text:this.t("\u57fa\u672c\u6982\u5ff5")})})},{type:"component",component:Object(k.jsxs)("div",{className:"w-100 d-flex justify-content-between",children:[Object(k.jsx)(s.IconText,{iconClass:"text-info mr-2",icon:"smile-o",text:this.t("aboutTheApp")}),Object(k.jsxs)("div",{className:"py-2 small",children:["V",null===U.a||void 0===U.a||null===(e=U.a.app)||void 0===e?void 0:e.version]})]})}];if(void 0===n)(t=r).push({type:"component",component:Object(k.jsxs)("button",{className:"btn btn-success w-100 my-2",onClick:function(){return s.nav.logout()},children:[Object(k.jsx)(s.FA,{name:"sign-out",size:"lg"})," ",this.t("pleaseLogin")]})});else{var a,i=["",{type:"component",bk:"",component:Object(k.jsxs)("button",{className:"btn btn-danger w-100",onClick:this.onExit,children:[Object(k.jsx)(s.FA,{name:"sign-out",size:"lg"})," ",this.t("logout")]})}];(a=t=["",{type:"component",component:Object(k.jsx)(this.meInfo,{})},"",{type:"component",component:Object(k.jsx)(s.IconText,{iconClass:"text-info mr-2",icon:"key",text:this.t("changePassword")}),onClick:this.changePassword}]).push.apply(a,r.concat(i))}return Object(k.jsx)(s.PropGrid,{rows:Object(l.a)(t),values:{}})}}]),n}(s.VPage);function X(e,t){return t?Object(k.jsx)(k.Fragment,{children:Object(k.jsxs)("b",{children:[t," \xa0 ",Object(k.jsx)("small",{className:"muted",children:e})]})}):Object(k.jsx)("b",{children:e})}var Q=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).role=void 0,e.unitOwner=void 0,e.rootUnits=void 0,e.tab=function(){return e.renderView(G)},e.showEditMe=Object(h.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.role=void 0,e.openVPage(J);case 2:case"end":return t.stop()}}),t)}))),e}return Object(r.a)(n,[{key:"internalStart",value:function(){var e=Object(h.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),n}(o),Z=n(18),ee=n(22),te=n.n(ee);var ne=function(){function e(t,n,r){var i=this;Object(a.a)(this,e),this.hostUrl=void 0,this.apiToken=void 0,this.ui=void 0,this.timeout=void 0,this.startWait=function(){void 0!==i.ui&&i.ui.startWait()},this.endWait=function(e,t){void 0!==i.ui&&i.ui.endWait(),void 0!==t&&t("\u8bbf\u95eewebapi\u8d85\u65f6 "+e)},this.showError=function(){var e=Object(h.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===i.ui){e.next=3;break}return e.next=3,i.ui.showError(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.hostUrl=t,this.apiToken=n,this.ui=r,this.timeout=!0===Z.a.isDevelopment?5e5:2e4}return Object(r.a)(e,[{key:"used",value:function(){this.post("",{})}},{key:"get",value:function(){var e=Object(h.a)(d.a.mark((function e(t){var n,r,a,i,c,s,o,u=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=u.length>1&&void 0!==u[1]?u[1]:void 0)){e.next=25;break}if(!((r=Object.keys(n)).length>0)){e.next=25;break}a="?",i=Object(f.a)(r),e.prev=6,i.s();case 8:if((c=i.n()).done){e.next=17;break}if(s=c.value,void 0!==n[s]){e.next=13;break}return e.abrupt("continue",15);case 13:t+=a+s+"="+n[s],a="&";case 15:e.next=8;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(6),i.e(e.t0);case 22:return e.prev=22,i.f(),e.finish(22);case 25:return(o=this.buildOptions()).method="GET",e.next=29,this.innerFetch(t,o);case 29:return e.abrupt("return",e.sent);case 30:case"end":return e.stop()}}),e,this,[[6,19,22,25]])})));return function(t){return e.apply(this,arguments)}}()},{key:"post",value:function(){var e=Object(h.a)(d.a.mark((function e(t,n){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=this.buildOptions()).method="POST",r.body=JSON.stringify(n),e.next=5,this.innerFetch(t,r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"put",value:function(){var e=Object(h.a)(d.a.mark((function e(t,n){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=this.buildOptions()).method="PUT",r.body=JSON.stringify(n),e.next=5,this.innerFetch(t,r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(h.a)(d.a.mark((function e(t,n){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=this.buildOptions()).method="DELETE",r.body=JSON.stringify(n),e.next=5,this.innerFetch(t,r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetch",value:function(e){function t(t,n,r,a){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e=Object(h.a)(d.a.mark((function e(t,n,r,a){var i,c,o,u,l,p,f;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=function(e){return{channel:i,url:c,options:n,resolve:r,reject:a,error:e}},i=this,this.startWait(),c=t,e.prev=4,console.log("%s %s",n.method,c),u=setTimeout((function(){return i.endWait(t,a)}),this.timeout),e.next=9,fetch(encodeURI(c),n);case 9:if(!1!==(l=e.sent).ok){e.next=15;break}throw clearTimeout(u),i.endWait(),console.log("call error %s",l.statusText),l.statusText;case 15:if(!((p=l.headers.get("content-type"))&&p.indexOf("json")>=0)){e.next=20;break}return e.abrupt("return",l.json().then(function(){var e=Object(h.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(clearTimeout(u),i.endWait(),!0!==t.ok){e.next=4;break}return e.abrupt("return",r(t.res));case 4:if(void 0!==t.error){e.next=9;break}return e.next=7,i.showError(o("not valid tonva json"));case 7:e.next=12;break;case 9:return e.next=11,i.showError(o(t.error));case 11:a(t.error);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch(function(){var e=Object(h.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.showError(o(t.message));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 20:return e.next=22,l.text();case 22:f=e.sent,clearTimeout(u),i.endWait(),r(f);case 26:e.next=36;break;case 28:if(e.prev=28,e.t0=e.catch(4),"string"!==typeof e.t0){e.next=34;break}if(!0!==e.t0.toLowerCase().startsWith("unauthorized")){e.next=34;break}return s.nav.logout(),e.abrupt("return");case 34:return e.next=36,this.showError(o(e.t0.message));case 36:case 37:case"end":return e.stop()}}),e,this,[[4,28]])})));return function(t,n,r,a){return e.apply(this,arguments)}}())},{key:"innerFetch",value:function(){var e=Object(h.a)(d.a.mark((function e(t,n){var r,a=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.hostUrl+t,e.next=3,new Promise(function(){var e=Object(h.a)(d.a.mark((function e(t,i){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.fetch(r,n,t,i);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"callFetch",value:function(){var e=Object(h.a)(d.a.mark((function e(t,n,r){var a,i=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=this.buildOptions()).method=n,a.body=r,e.next=5,new Promise(function(){var e=Object(h.a)(d.a.mark((function e(n,r){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.fetch(t,a,n,r);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"buildOptions",value:function(){var e=s.nav.language,t=s.nav.culture,n=new Headers;n.append("Content-Type","application/json;charset=UTF-8");var r=e;return t&&(r+="-"+t),n.append("Accept-Language",r),this.apiToken&&n.append("Authorization",this.apiToken),{headers:n}}}]),e}(),re=function(){function e(){Object(a.a)(this,e)}return Object(r.a)(e,[{key:"startWait",value:function(){s.nav.startWait()}},{key:"endWait",value:function(){s.nav.endWait()}},{key:"showError",value:function(){var e=Object(h.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.nav.endWait(),e.next=3,s.nav.onError(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();var ae,ie,ce,se,oe,ue,le,pe,de,he,fe={},be={},ve=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(e,r,i,c,s){var o;return Object(a.a)(this,n),(o=t.call(this,r,s)).apiName=void 0,o.url=void 0,o.showWaiting=s,o.apiName=i,o.token=c,o.url=e,o}return Object(r.a)(n,[{key:"getHttpChannel",value:function(){var e=Object(h.a)(d.a.mark((function e(){var t,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0===this.showWaiting||void 0===this.showWaiting?(t=fe,n=new re):t=be,void 0===(r=t[this.apiName])){e.next=4;break}return e.abrupt("return",r);case 4:return r=new ne(this.url,this.token,n),e.abrupt("return",t[this.apiName]=r);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(function(){function e(t,n){Object(a.a)(this,e),this.token=void 0,this.path=void 0,this.showWaiting=void 0,this.path=t||"",this.showWaiting=n}return Object(r.a)(e,[{key:"call",value:function(){var e=Object(h.a)(d.a.mark((function e(t,n,r){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getHttpChannel();case 2:return a=e.sent,e.next=5,a.callFetch(t,n,r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=Object(h.a)(d.a.mark((function e(t){var n,r,a=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:void 0,e.next=3,this.getHttpChannel();case 3:return r=e.sent,e.next=6,r.get(this.path+t,n);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"post",value:function(){var e=Object(h.a)(d.a.mark((function e(t,n){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getHttpChannel();case 2:return r=e.sent,e.next=5,r.post(this.path+t,n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"put",value:function(){var e=Object(h.a)(d.a.mark((function e(t,n){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getHttpChannel();case 2:return r=e.sent,e.next=5,r.put(this.path+t,n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(h.a)(d.a.mark((function e(t,n){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getHttpChannel();case 2:return r=e.sent,e.next=5,r.delete(this.path+t,n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}()),me=function(){function e(t,n,r,i,c){Object(a.a)(this,e),this.channel=void 0,this.channel=new ve(t,n,r,i,c)}return Object(r.a)(e,[{key:"call",value:function(){var e=Object(h.a)(d.a.mark((function e(t,n){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={call:t,params:n},e.next=3,this.channel.post("sql/call",r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"query",value:function(){var e=Object(h.a)(d.a.mark((function e(t,n){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={call:t,params:n},e.next=3,this.channel.post("sql/call",r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"page",value:function(){var e=Object(h.a)(d.a.mark((function e(t,n,r,a){var i,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=typeof n,e.next="undefined"===e.t0?3:5;break;case 3:return i=[],e.abrupt("break",7);case 5:return i=te.a.clone(n),e.abrupt("break",7);case 7:return i.push(r),i.push(a),c={call:t,params:i},e.next=12,this.channel.post("sql/call",c);case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"process",value:function(){var e=Object(h.a)(d.a.mark((function e(t,n){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={proc:t,params:n},e.next=3,this.channel.post("sql/query",r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),je=function(e){return!0===e?"text-primary":"text-muted"},ge=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).render=function(t){var n=e.controller,r=n.cHome,a=n.cHolding,i=n.cExporer,c=n.cMe,o=[{name:"home",label:"\u9996\u9875",icon:"home",content:r.tab,notify:void 0,onShown:r.load},{name:"explorer",label:"\u6301\u4ed3",icon:"money",content:a.tab,load:a.load},{name:"explorer",label:"\u9009\u80a1",icon:"search",content:i.tab,load:i.load},{name:"me",label:"\u6211\u7684",icon:"user",content:c.tab,onShown:void 0}].map((function(e){var t=e.name,n=e.label,r=e.icon;return{name:t,caption:function(e){return Object(s.TabCaptionComponent)(n,r,je(e))},content:e.content,notify:e.notify,load:e.load,onShown:e.onShown}}));return Object(k.jsx)(s.Page,{header:!1,tabsProps:{tabs:o}})},e}return Object(r.a)(n,[{key:"open",value:function(){var e=Object(h.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.render);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(s.VPage),xe=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){s.FA;var e=Object(k.jsx)("img",{className:"m-1",src:O,alt:"logo",style:{height:"3rem",width:"3rem"}});return Object(k.jsx)(s.LMR,{className:"mb-3 align-items-center bg-white",left:e,right:undefined,children:Object(k.jsx)("div",{className:"",children:this.controller.renderSiteHeader()})})}}]),n}(s.View),ye=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).onClickPredictAVG=function(){var t=e.controller,n=t.avgs,r={day:void 0,priceDay:t.lastTradeDay,avg20:n.avg20,avg50:n.avg50,avg100:n.avg100,avg:n.avg};e.controller.cApp.openPredictAVG(r)},e.renderRow=function(t,n){return e.rowContent(t)},e.rowContent=function(t){if(e.controller.cApp.blackList.findIndex((function(e){return e===r}))>=0)return null;var n=t,r=n.id,a=(n.symbol,"vexl_"+r),i=e.controller.cApp.defaultList.findIndex((function(e){return e===r})),c=Object(k.jsxs)("label",{className:"mb-0 cursor-pointer",children:[Object(k.jsx)("input",{className:"mr-1",type:"checkbox",value:"",id:a,defaultChecked:i>=0,onChange:function(n){return e.onSelect(t,n.target.checked)}}),Object(k.jsx)("small",{className:"text-muted",children:"\u81ea\u9009"})]}),s=Object(k.jsx)("div",{className:"d-flex",children:D(t)});return I(t,e.onClickName,c,s)},e.rowKey=function(e){return void 0!==e.item?e.item.id:e.id},e.setSortType=function(t){e.controller.setSortType(t)},e.onClickName=function(t){e.controller.openStockInfo(t)},e.onSelect=function(){var t=Object(h.a)(d.a.mark((function t(n,r){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.controller.onSelectItem(n,r);case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.onClickItem=function(){var t=Object(h.a)(d.a.mark((function t(n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.controller.openStockInfo(n);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(r.a)(n,[{key:"header",value:function(){return"\u80a1\u7968\u53d1\u73b0"}},{key:"onPageScrollBottom",value:function(e){this.controller.onPage()}},{key:"right",value:function(){var e=this.controller.onConfig;return Object(k.jsx)("div",{className:"btn align-self-center cursor-pointer ",onClick:e,children:Object(k.jsx)(s.FA,{name:"cog",size:"lg",inverse:!0})})}},{key:"content",value:function(){var e=this;return y.createElement(Object(S.observer)((function(){var t,n=e.controller,r=n.items,a=n.avgs,i=n.reload,c=Object(k.jsx)("div",{children:Object(k.jsx)("div",{className:"btn cursor-pointer py-3",onClick:i,children:"\u5237\u65b0"})});if(void 0!==a.avg20||void 0!==a.avg50||void 0!==a.avg100){var o=" top20 : "+W.a.numberToFixString(a.avg20)+"  -  top50 : "+W.a.numberToFixString(a.avg50)+"  -  top100 : "+W.a.numberToFixString(a.avg100)+"  -  all : "+W.a.numberToFixString(a.avg)+"  ...\u67e5\u770b\u5386\u53f2\u8d70\u52bf";t=Object(k.jsx)(s.LMR,{right:c,children:Object(k.jsxs)("div",{className:"px-3 cursor-pointer",onClick:e.onClickPredictAVG,children:[W.a.caption("\u4ef7\u503c\u6307\u6570\u5747\u503c"),o]})})}else t=Object(k.jsx)(s.LMR,{right:c});return Object(k.jsxs)(k.Fragment,{children:[t,Object(k.jsx)(s.List,{header:T("radioExplorer",e.setSortType),items:r,item:{render:e.renderRow,key:e.rowKey},before:"\u9009\u80a1"})]})})))}}]),n}(s.VPage),Oe=[{name:"irate",type:"number",required:!0},{name:"bmin",type:"number",required:!0},{name:"bmax",type:"number",required:!0},{name:"r2",type:"number",required:!0},{name:"lmin",type:"number",required:!0},{name:"lmax",type:"number",required:!0},{name:"lr2",type:"number",required:!0},{name:"mcount",type:"integer",required:!0},{name:"lr4",type:"number",required:!0},{name:"r210",type:"number",required:!0},{name:"submit",type:"submit"}],ke={items:{irate:{widget:"number",label:"\u65e0\u98ce\u9669\u6536\u76ca\u7387",placeholder:"0.04"},bmin:{widget:"number",label:"\u6307\u6570\u56de\u5f52\u6700\u5c0f\u503c",placeholder:"0.00"},bmax:{widget:"number",label:"\u6307\u6570\u56de\u5f52\u6700\u5927\u503c",placeholder:"0.00"},r2:{widget:"number",label:"\u6307\u6570\u56de\u5f52R2",placeholder:"0.00"},lmin:{widget:"number",label:"\u7ebf\u6027\u56de\u5f52\u6700\u5c0f\u503c",placeholder:"0.00"},lmax:{widget:"number",label:"\u7ebf\u6027\u56de\u5f52\u6700\u5927\u503c",placeholder:"0.00"},lr2:{widget:"number",label:"\u7ebf\u6027\u56de\u5f52R2",placeholder:"0.00"},lr4:{widget:"number",label:"\u672b\u5e74\u4e0e\u524d4\u5e74\u5747\u503c\u6700\u5927\u6bd4\u503c",placeholder:"0.00"},mcount:{widget:"number",label:"5\u5e74\u5185\u5355\u5b63\u4e8f\u635f\u6700\u591a\u5141\u8bb8\u51fa\u73b0\u6b21\u6570",placeholder:"0.00"},r210:{widget:"number",label:"\u5341\u5e74\u56de\u5f52R2",placeholder:"0.00"},submit:{widget:"button",label:"\u4fdd\u5b58",className:"btn btn-primary"}}},we=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).sortChage=function(t){var n=t.target.value;e.controller.cApp.setStockSortType(n)},e.selectChange=function(t){var n=t.target.value;e.controller.cApp.setStockSelectType(n)},e.onChange=function(e){var t=e.target;t.name,t.value},e.onFormButtonClick=function(){var t=Object(h.a)(d.a.mark((function t(n,r){var a,i,c,s,o,u,l,p,h,f,b,v;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=r.data,i=a.bmin,c=a.bmax,s=a.r2,o=a.lmin,u=a.lmax,l=a.lr2,p=a.mcount,h=a.lr4,f=a.r210,b=a.irate,v={bmin:i,bmax:c,r2:s,lmin:o,lmax:u,lr2:l,mcount:p,lr4:h,r210:f,irate:b},t.next=4,e.controller.cApp.setRegressionConfig(v);case 4:e.controller.closePage();case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.page=Object(S.observer)((function(){e.controller.cApp.findStockConfg;var t=e.controller.cApp.config.regression;return void 0===t.irate&&(t.irate=.04),Object(k.jsxs)(s.Page,{header:"\u9009\u80a1\u8bbe\u7f6e",headerClassName:"bg-primary",children:[Object(k.jsx)("div",{className:"px-3 py-2",children:"\u56de\u5f52\u53c2\u6570"}),Object(k.jsx)(s.Form,{schema:Oe,uiSchema:ke,formData:t,onButtonClick:e.onFormButtonClick})]})})),e}return Object(r.a)(n,[{key:"open",value:function(){var e=Object(h.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(s.VPage),Ne=(ae=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).items=j.observable.array([],{deep:!0}),Object(b.a)(e,"avgs",ie,Object(v.a)(e)),e.lastTradeDay=void 0,e.oldSelectType=void 0,e.selectedItems=[],e.disposeAutorun=Object(j.autorun)(Object(h.a)(d.a.mark((function t(){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((n=e.cApp.config.stockFind.selectType)!==e.oldSelectType){t.next=3;break}return t.abrupt("return");case 3:if(void 0!==e.oldSelectType){t.next=6;break}return e.oldSelectType=n,t.abrupt("return");case 6:return e.oldSelectType=n,t.next=9,e.load();case 9:case"end":return t.stop()}}),t)})))),e.onPage=Object(h.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),e.onConfig=Object(h.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.openVPage(we);case 1:case"end":return t.stop()}}),t)}))),e.reload=Object(h.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.load();case 2:case"end":return t.stop()}}),t)}))),e.load=Object(h.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.selectedItems=[],t.next=3,e.loadItems();case 3:case"end":return t.stop()}}),t)}))),e.onSelectItem=function(){var t=Object(h.a)(d.a.mark((function t(n,r){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.cApp.defaultListTagID,!0!==r){t.next=8;break}return t.next=4,e.cApp.miApi.call("t_tagstock$add",[e.user.id,a,n.id]);case 4:return t.next=6,e.cApp.AddTagStockID(a,n.id);case 6:t.next=12;break;case 8:return t.next=10,e.cApp.miApi.call("t_tagstock$del",[e.user.id,a,n.id]);case 10:return t.next=12,e.cApp.RemoveTagStockID(a,n.id);case 12:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.setSortType=function(t){e.cApp.setUserSortType(t);var n=e.items.slice();e.cApp.sortStocks(n),e.items.replace(n)},e.renderSiteHeader=function(){return e.renderView(xe)},e.renderHome=function(){return e.renderView(ye)},e.openMetaView=function(){},e.tab=function(){return e.renderHome()},e.openStockInfo=function(t){e.newC(x.CStockInfo).start(t)},e}return Object(r.a)(n,[{key:"internalStart",value:function(){var e=Object(h.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadItems",value:function(){var e=Object(h.a)(d.a.mark((function e(){var t,n,r,a,i,c,s,o,u,p,h,b,v,m,j,x,y,O,k,w,N,S;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="all",r=this.cApp.config.regression,a=r.bmin,i=r.bmax,c=r.r2,s=r.lmin,o=r.lmax,u=r.lr2,p=r.mcount,h=r.lr4,b=r.r210,r.irate,v={name:n,pageStart:0,pageSize:3e3,user:this.user.id,blackID:this.cApp.blackListTagID,bMin:a,bMax:i,r2:c,lMin:s,lMax:o,lr2:u,mcount:p,lr4:h,r210:b},e.next=5,Promise.all([this.cApp.miApi.process(v,[]),this.cApp.miApi.call("q_getlasttradeday",[])]);case 5:if(m=e.sent,j=m[1],Array.isArray(j)&&j.length>0?this.lastTradeDay=j[0].day:this.lastTradeDay=void 0,x=m[0],!1!==Array.isArray(x)){e.next=11;break}return e.abrupt("return");case 11:y=x,O=Object(f.a)(y);try{for(O.s();!(k=O.n()).done;)w=k.value,N=JSON.parse(w.data),w.dataArr=N,S=new g.b(N),w.ep=(S.predict(4)+w.e)/2,w.v=W.a.calculateVN(S.slopeR,w.ep,w.divyield*w.price,w.exprice),w.e3=S.predict(7)}catch(d){O.e(d)}finally{O.f()}"all"===n?(this.cApp.sortStocks(y),this.avgs=W.a.CalculateValueAvg(y)):this.avgs={},this.items.clear(),(t=this.items).push.apply(t,Object(l.a)(y));case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(o),ie=Object(m.a)(ae.prototype,"avgs",[j.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),ae),Se=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).onSelect=function(e,t,n){},e.page=Object(V.d)((function(){var t=e.controller.warnings,n=t.length>=100?"":Object(k.jsxs)("div",{className:"px-3 py-2 cursor-pointer",onClick:e.controller.onNewWarning,children:[Object(k.jsx)(s.FA,{name:"plus",className:"text-primary"})," \xa0 \u65b0\u5efa\u9884\u8b66"]});return Object(k.jsxs)(s.Page,{header:"\u9884\u8b66",headerClassName:"bg-primary",children:[n,Object(k.jsx)(s.List,{items:t,item:{render:e.renderWarning},none:"--"})]})})),e.renderWarning=function(e){var t=e.name,n=e.code,r=e.type,a=e.price,i=Object(k.jsxs)("div",{className:"px-3 cursor-pointer",children:[t,Object(k.jsx)("small",{className:" mx-3",children:n})]});return Object(k.jsx)(s.LMR,{className:"mx-3 my-2",left:i,children:Object(k.jsxs)("div",{className:"d-flex flex-wrap",children:[Object(k.jsx)("div",{className:"px-3 c6",children:W.a.warningTypeString(r)}),Object(k.jsx)("div",{className:"px-3 c6",children:W.a.numberToFixString(a)})]})})},e}return Object(r.a)(n,[{key:"open",value:function(){var e=Object(h.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(s.VPage),Ae=[{name:"id",type:"id"},{name:"type",type:"string",required:!0,maxLength:2},{name:"price",type:"number",required:!0},{name:"submit",type:"submit"}],Te={items:{id:{widget:"id",label:"\u80a1\u7968",visible:!0},type:{widget:"select",label:"\u7c7b\u578b",list:[{value:"gt",title:"\u5927\u4e8e"},{value:"lt",title:"\u5c0f\u4e8e"}]},price:{widget:"text",label:"\u4ef7\u683c",placeholder:"0.00"},submit:{widget:"button",label:"\u4fdd\u5b58",className:"btn btn-primary"}}},Ce=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).newuiSchema={items:{id:{widget:"id",label:"\u80a1\u7968",visible:!0,placeholder:Object(k.jsx)("small",{className:"text-muted",children:"\u8bf7\u9009\u62e9\u80a1\u7968"}),pickId:function(){var t=Object(h.a)(d.a.mark((function t(n,r,a){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.controller.showSelectStock(n,r,a);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),Templet:function(e){var t=e.name,n=e.code;return e?Object(k.jsxs)("div",{children:[t,Object(k.jsx)("small",{className:" mx-3",children:n})]}):Object(k.jsx)("small",{className:"text-muted",children:"\u8bf7\u9009\u62e9\u80a1\u7968"})}},type:{widget:"select",label:"\u7c7b\u578b",list:[{value:"gt",title:"\u5927\u4e8e"},{value:"lt",title:"\u5c0f\u4e8e"}]},price:{widget:"text",label:"\u4ef7\u683c",placeholder:"0.00"},submit:{widget:"button",label:"\u4fdd\u5b58",className:"btn btn-primary"}}},e.onFormButtonClick=function(){var t=Object(h.a)(d.a.mark((function t(n,r){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.controller.onSaveNewWarning(r.data);case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.page=function(){return Object(k.jsx)(s.Page,{header:"\u65b0\u5efa\u9884\u8b66",headerClassName:"bg-primary",children:Object(k.jsx)("div",{className:"px-3 py-3",children:Object(k.jsx)(s.Form,{schema:Ae,uiSchema:e.newuiSchema,formData:{type:"lt"},onButtonClick:e.onFormButtonClick})})})},e}return Object(r.a)(n,[{key:"open",value:function(){var e=Object(h.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(s.VPage),Ie=(s.VPage,ce=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return e=t.call.apply(t,[this].concat(i)),Object(b.a)(e,"warnings",se,Object(v.a)(e)),e.onNewWarning=function(){e.openVPage(Ce)},e.onWarningConfg=Object(h.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.loadWarnings();case 2:e.openVPage(Se);case 3:case"end":return t.stop()}}),t)}))),e.onSaveNewWarning=function(){var t=Object(h.a)(d.a.mark((function t(n){var r,a,i;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.id,a=n.type,i=n.price,t.next=3,e.cApp.miApi.call("t_stockwarning$add",[e.cApp.user.id,r.id,a,i]);case 3:e.closePage();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onSaveWarning=function(){var e=Object(h.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.showSelectStock=function(){var t=Object(h.a)(d.a.mark((function t(n,r,a){var i;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=new z.a(e.cApp),t.next=3,i.call();case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),e}return Object(r.a)(n,[{key:"cApp",get:function(){return this._cApp}},{key:"internalStart",value:function(){var e=Object(h.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:1;case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadWarnings",value:function(){var e=Object(h.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.cApp.miApi.call("t_stockwarning$all",[this.user.id]);case 2:t=e.sent,n=t,this.warnings=n;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(o),se=Object(m.a)(ce.prototype,"warnings",[j.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ce),De=n(52),Pe=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e,r=this;Object(a.a)(this,n);for(var i=arguments.length,c=new Array(i),o=0;o<i;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).page=Object(S.observer)((function(){return Object(k.jsx)(s.Page,{header:"\u9884\u671f\u6536\u76ca\u6bd4\u5747\u503c\u5386\u53f2",children:Object(k.jsx)(r.pageContent,{})})})),e.pageContent=Object(S.observer)((function(){return Object(k.jsx)(k.Fragment,{children:Object(k.jsx)(r.historyChart,{})})})),e.historyChart=Object(S.observer)((function(){var t=e.controller.items;if(void 0===t)return Object(k.jsx)(k.Fragment,{});var n,r=k.Fragment,a=[],i=[],c=[],o=[],u=Object(f.a)(t);try{for(u.s();!(n=u.n()).done;){var l=n.value,p=l.day,d=l.avg20,h=l.avg50,b=l.avg100;a.push(p),i.push(d),c.push(h),o.push(b)}}catch(m){u.e(m)}finally{u.f()}var v={labels:a,datasets:[{label:"avg20",data:i,borderColor:"blue",backgroundColor:"skyBlue",borderWidth:1,fill:!1,yAxisID:"y-axis-1"},{label:"avg50",data:c,borderColor:"red",backgroundColor:"pink",borderWidth:1,fill:!1,yAxisID:"y-axis-1"},{label:"avg100",data:o,borderColor:"DarkGreen",backgroundColor:"green",borderWidth:1,fill:!1,yAxisID:"y-axis-1"}]};return r=Object(k.jsx)(q.a,{data:v,type:"line",options:{scales:{yAxes:[{type:"linear",display:!0,position:"right",id:"y-axis-1"}]}}}),Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(s.LMR,{className:"px-3 py-2 bg-white",left:"\u5386\u53f2\u8d70\u52bf"}),Object(k.jsx)("div",{className:"px-3",style:{width:"95%"},children:r})]})})),e}return Object(r.a)(n,[{key:"open",value:function(){var e=Object(h.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(e){return Object(k.jsx)(this.page,{})}}]),n}(s.VPage),Fe=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).items=j.observable.array([],{deep:!0}),e.day=void 0,e.lastItem=void 0,e}return Object(r.a)(n,[{key:"internalStart",value:function(){var e=Object(h.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0!==(n=t)?(this.day=n.day,void 0!==n.priceDay?this.lastItem={day:n.priceDay,avg20:n.avg20,avg50:n.avg50,avg100:n.avg100}:this.lastItem=void 0):(this.day=void 0,this.lastItem=void 0),e.next=4,this.load();case 4:this.openVPage(Pe);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=Object(h.a)(d.a.mark((function e(){var t,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.cApp.miApi.call("t_toppredictavg$query",[this.day]);case 2:if(n=e.sent,this.items.clear(),Array.isArray(n)){e.next=6;break}return e.abrupt("return");case 6:(t=this.items).push.apply(t,Object(l.a)(n)),void 0!==this.lastItem&&(r=Object(De.a)({},this.lastItem),this.items.push(r));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(o),Le={$zh:{home:"\u9996\u9875",relation:"\u5173\u7cfb",discover:"\u53d1\u73b0",me:"\u6211\u7684",changePassword:"\u4fee\u6539\u5bc6\u7801",aboutTheApp:"\u5173\u4e8e\u672cAPP",logout:"\u9000\u51fa\u767b\u5f55",pleaseLogin:"\u767b\u5f55",notes:"\u5c0f\u5355",task:"\u4efb\u52a1",assign:"\u4f5c\u4e1a\u5355",noteSpace:"\u7fa4",noteText:"\u6587\u5b57\u5355",noteList:"\u5217\u8868\u5355",noteCheckable:"\u52fe\u9009\u5355",noteTask:"\u5e03\u7f6e\u4efb\u52a1",noteFolder:"\u5c0f\u5355\u5939",noteCreateSpace:"\u65b0\u5efa\u7fa4",content:"\u5185\u5bb9"},$en:{home:"Home",relation:"Relation",discover:"Discover",me:"Me",changePassword:"Change password",aboutTheApp:"About the APP",logout:"Logout",pleaseLogin:"Login",notes:"Notes",task:"Task",assign:"Assign",noteSpace:"Group",noteText:"Text",noteList:"List",noteCheckable:"Checkable",noteTask:"Task",noteFolder:"Folder",noteCreateSpace:"Create Group",content:"Content"}},Ee=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).renderAccount=function(e,t){function n(e,t){return Object(k.jsxs)("span",{className:"mr-3",children:[Object(k.jsxs)("small",{className:"text-muted",children:[e,": "]}),null!==t&&void 0!==t?t:0]})}e.id,e.no;var r=e.name,a=e.mi,i=e.market,c=e.count,o=Object(k.jsx)("div",{className:"px-2 d-flex align-items-center",children:Object(k.jsx)(s.FA,{className:"align-",name:"angle-right"})});return Object(k.jsx)(s.LMR,{right:o,children:Object(k.jsxs)("div",{className:"px-3 py-2 bg-white d-block",children:[Object(k.jsx)("div",{children:r}),Object(k.jsxs)("div",{className:"mt-2",children:[Object(k.jsxs)("span",{className:"mr-3 small",children:["\u5171",null!==c&&void 0!==c?c:0,"\u53ea"]}),n("\u603b\u7c73\u503c",a),n("\u603b\u5e02\u503c",i)]})]})})},e.onClickAccount=function(t){e.controller.showAccount(t)},e}return Object(r.a)(n,[{key:"header",value:function(){return Object(k.jsxs)("span",{className:"ml-3",children:["\u6301\u4ed3\u7ec4\u5408 ",Object(k.jsx)("small",{className:"text-muted",children:"\u6b63\u5728\u8bbe\u8ba1\u5b9e\u73b0\u4e2d..."})]})}},{key:"content",value:function(){return Object(k.jsx)("div",{children:Object(k.jsx)(s.List,{items:this.controller.accounts,item:{render:this.renderAccount,onClick:this.onClickAccount}})})}}]),n}(s.VPage),Re=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"header",value:function(){return this.controller.account.name}},{key:"content",value:function(){function e(e,t){return Object(k.jsxs)("span",{className:"mr-3",children:[Object(k.jsxs)("small",{className:"text-muted",children:[e,": "]}),null!==t&&void 0!==t?t:0]})}var t=this.controller.account,n=(t.id,t.no),r=t.name,a=t.mi,i=t.market,c=t.count;return Object(k.jsxs)("div",{className:"mt-3 px-3 py-2 bg-white d-block",children:[Object(k.jsx)(s.LMR,{right:Object(k.jsxs)("small",{className:"text-muted",children:["\u7ec4\u5408\u7f16\u53f7: ",n]}),children:r}),Object(k.jsxs)("div",{className:"mt-2",children:[Object(k.jsxs)("span",{className:"mr-3 small",children:["\u5171",null!==c&&void 0!==c?c:0,"\u53ea"]}),e("\u603b\u7c73\u503c",a),e("\u603b\u5e02\u503c",i)]})]})}}]),n}(s.VPage),Me=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).accounts=void 0,r.account=void 0,r.tab=function(){return r.renderView(Ee)},r.load=Object(h.a)(d.a.mark((function e(){var t,n,a,i,c,s,o,u;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.uqs.BruceYuMi,n=t.Account,a=t.UserAccount,i={ID:n,IX:a,id:r.user.id},e.next=5,t.IDinIX(i);case 5:if(0!==(c=e.sent).length){e.next=16;break}return e.next=9,t.IDNO({ID:n});case 9:return s=e.sent,e.next=12,t.IDActs({account:[{id:void 0,no:s,name:"\u6211\u7684\u6301\u4ed3\u7ec4\u5408"}]});case 12:return e.sent,e.next=15,t.IDinIX(i);case 15:c=e.sent;case 16:return o={IDX:t.AccountValue,id:c.map((function(e){return e.id}))},e.next=19,t.ID(o);case 19:u=e.sent,r.accounts=c,r.accounts.forEach((function(e){var t=e.id,n=u.find((function(e){return e.id===t}));n&&Object.assign(e,n)}));case 22:case"end":return e.stop()}}),e)}))),r.showAccount=function(){var e=Object(h.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.account=t,r.openVPage(Re);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Object(j.makeObservable)(Object(v.a)(r),{accounts:j.observable}),r}return Object(r.a)(n,[{key:"internalStart",value:function(){var e=Object(h.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),n}(o),Ve=(oe=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).cHome=void 0,e.cHolding=void 0,e.cExporer=void 0,e.cWarning=void 0,e.cMe=void 0,e.miApi=void 0,Object(b.a)(e,"config",ue,Object(v.a)(e)),Object(b.a)(e,"tags",le,Object(v.a)(e)),Object(b.a)(e,"blackList",pe,Object(v.a)(e)),Object(b.a)(e,"defaultList",de,Object(v.a)(e)),Object(b.a)(e,"accounts",he,Object(v.a)(e)),e.getsortFunc=function(){var t=e.config.userStock.sortType;return"tagpe"===t?function(e,t){return e.pe-t.pe}:"tagdp"===t?function(e,t){return t.divyield-e.divyield}:function(e,t){return t.v-e.v}},e.sortStocks=function(t){t.sort(e.getsortFunc());var n,r=1,a=Object(f.a)(t);try{for(a.s();!(n=a.n()).done;){n.value.order=r,++r}}catch(i){a.e(i)}finally{a.f()}},e.setStockSortType=function(){var t=Object(h.a)(d.a.mark((function t(n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.config.stockFind.sortType!==n){t.next=2;break}return t.abrupt("return");case 2:return e.config.stockFind.sortType=n,t.next=5,e.saveConfig();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.setStockSelectType=function(){var t=Object(h.a)(d.a.mark((function t(n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.config.stockFind.selectType!==n){t.next=2;break}return t.abrupt("return");case 2:return e.config.stockFind.selectType=n,t.next=5,e.saveConfig();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.setUserSortType=function(){var t=Object(h.a)(d.a.mark((function t(n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.config.userStock.sortType!==n){t.next=2;break}return t.abrupt("return");case 2:return e.config.userStock.sortType=n,t.next=5,e.saveConfig();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.selectTag=function(){var t=Object(h.a)(d.a.mark((function t(n){var r,a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=(r=n).name,r.id,e.tags.findIndex((function(e){return e.name===a}))>=0&&(e.config.tagName=a,e.saveConfig());case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.selectAccount=function(){var t=Object(h.a)(d.a.mark((function t(n){var r,a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=(r=n).name,r.id,e.accounts.findIndex((function(e){return e.name===a}))>=0&&(e.config.accountName=a,e.saveConfig());case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.setRegressionConfig=function(){var t=Object(h.a)(d.a.mark((function t(n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.config.regression=n,t.next=3,e.saveConfig();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(r.a)(n,[{key:"tagID",get:function(){if(void 0!==this.tags){var e=this.config.tagName,t=this.tags.findIndex((function(t){return t.name===e}));if(t>=0)return this.tags[t].id}return-1}},{key:"accountID",get:function(){var e=this.config.accountName;if(void 0!==e&&void 0!==this.accounts){var t=this.accounts.findIndex((function(t){return t.name===e}));if(t>=0)return this.accounts[t].id}return-1}},{key:"findStockConfg",get:function(){return this.config.stockFind}},{key:"blackListTagID",get:function(){if(void 0!==this.tags){this.config.tagName;var e=this.tags.findIndex((function(e){return e.name===Z.b}));if(e>=0)return this.tags[e].id}return-1}},{key:"defaultListTagID",get:function(){if(void 0!==this.tags){this.config.tagName;var e=this.tags.findIndex((function(e){return e.name===Z.c}));if(e>=0)return this.tags[e].id}return-1}},{key:"internalStart",value:function(){var e=Object(h.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setRes(Le),this.isLogined,t=this.user.token,n=Z.a.miApiHost,this.miApi=new me(n,"fsjs/","miapi",t,!1),this.cHome=this.newC($),this.cExporer=this.newC(Ne),this.cHolding=this.newC(Me),this.cMe=this.newC(Q),this.cWarning=this.newC(Ie),Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_CENTER_HOST:"https://tv.jkchemical.com",REACT_APP_RES_HOST:"https://tv.jkchemical.com"}),e.next=13,this.loadConfig();case 13:return e.next=15,this.cHome.load();case 15:this.openVPage(ge);case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"saveConfig",value:function(){var e=Object(h.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.stringify(this.config),e.next=3,this.miApi.call("t_usersettings$save",[this.user.id,"config",t]);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadConfig",value:function(){var e=Object(h.a)(d.a.mark((function e(){var t,n,r,a,i,c,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.miApi.query("t_usersettings$query",[this.user.id,"config"]),this.loadTags(),this.loadAccounts()]);case 2:if(t=e.sent,void 0!==(n=t[0])&&void 0!==(r=n)&&r.length>0&&(a=r[0].value,i=JSON.parse(a),void 0!==this.tags&&(c=i.tagName,(s=this.tags.findIndex((function(e){return e.name===c})))<0&&this.tags.length>0&&(s=this.tags.findIndex((function(e){return e.name===Z.c})),i.tagName=s>=0?Z.c:this.tags[0].name)),this.config=i),void 0!==this.config.stockFind){e.next=9;break}this.config.stockFind={sortType:"pe"},e.next=18;break;case 9:e.t0=this.config.stockFind.selectType,e.next="all"===e.t0?12:"peroe"===e.t0?13:"pe"===e.t0?14:"dp"===e.t0?15:16;break;case 12:case 13:case 14:case 15:return e.abrupt("break",18);case 16:return this.config.stockFind.selectType="all",e.abrupt("break",18);case 18:return void 0===this.config.userStock&&(this.config.userStock={sortType:"tagpe"}),void 0===this.config.regression?this.config.regression={bmin:0,bmax:.5,r2:.7,lmin:.01,lmax:.5,lr2:.7,mcount:2,lr4:3,r210:.6,irate:.04}:(void 0===this.config.regression.r210&&(this.config.regression.r210=.6),void 0===this.config.regression.irate&&(this.config.regression.irate=.04)),e.next=22,this.loadBlackList();case 22:return e.next=24,this.loadDefaultList();case 24:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadTags",value:function(){var e=Object(h.a)(d.a.mark((function e(){var t,n,r,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==this.tags){e.next=20;break}return e.next=3,this.miApi.query("t_tag$all",[this.user.id]);case 3:return t=e.sent,n=t,e.next=7,this.checkDefaultTags(n);case 7:if(!e.sent){e.next=13;break}return e.next=11,this.miApi.query("t_tag$all",[this.user.id]);case 11:t=e.sent,n=t;case 13:r=[],(a=n.findIndex((function(e){return e.name===Z.c})))>=0&&(r.push(n[a]),n.splice(a,1)),(a=n.findIndex((function(e){return e.name===Z.b})))>=0&&(r.push(n[a]),n.splice(a,1)),r.push.apply(r,Object(l.a)(n)),this.tags=r;case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"checkDefaultTags",value:function(){var e=Object(h.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!1,void 0!==t){e.next=9;break}return e.next=4,this.miApi.call("t_tag$save",[this.user.id,void 0,Z.c]);case 4:return e.next=6,this.miApi.call("t_tag$save",[this.user.id,void 0,Z.b]);case 6:n=!0,e.next=19;break;case 9:if(!(t.findIndex((function(e){return e.name===Z.c}))<0)){e.next=14;break}return e.next=13,this.miApi.call("t_tag$save",[this.user.id,void 0,Z.c]);case 13:n=!0;case 14:if(!(t.findIndex((function(e){return e.name===Z.b}))<0)){e.next=19;break}return e.next=18,this.miApi.call("t_tag$save",[this.user.id,void 0,Z.b]);case 18:n=!0;case 19:return e.abrupt("return",n);case 20:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadAccounts",value:function(){var e=Object(h.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.miApi.query("t_allaccounts",[this.user.id]);case 2:t=e.sent,Array.isArray(t)&&(this.accounts=t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadBlackList",value:function(){var e=Object(h.a)(d.a.mark((function e(){var t,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((t=this.blackListTagID)<=0)){e.next=4;break}return this.blackList=[],e.abrupt("return");case 4:return{user:this.user.id,tag:t},e.prev=5,e.next=8,this.miApi.call("t_tagstock$query",[this.user.id,t,void 0]);case 8:n=e.sent,r=n.map((function(e){return e.stock})),this.blackList=r,e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),e.t0;case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"loadDefaultList",value:function(){var e=Object(h.a)(d.a.mark((function e(){var t,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((t=this.defaultListTagID)<=0)){e.next=4;break}return this.defaultList=[],e.abrupt("return");case 4:return{user:this.user.id,tag:t},e.prev=5,e.next=8,this.miApi.call("t_tagstock$query",[this.user.id,t,void 0]);case 8:n=e.sent,r=n.map((function(e){return e.stock})),this.defaultList=r,e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),e.t0;case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"AddTagStockID",value:function(){var e=Object(h.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t===this.blackListTagID?this.AddBlackID(n):t===this.defaultListTagID&&this.AddDefaultID(n);case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"AddTagStockIDs",value:function(){var e=Object(h.a)(d.a.mark((function e(t,n){var r=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t===this.blackListTagID?n.map((function(e){return r.AddBlackID(e)})):t===this.defaultListTagID&&n.map((function(e){return r.AddDefaultID(e)}));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"RemoveTagStockID",value:function(){var e=Object(h.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t===this.blackListTagID?this.RemoveBlackID(n):t===this.defaultListTagID&&this.RemoveDefaultID(n),this.cHome.RemoveTagStockID(t,n);case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"AddBlackID",value:function(e){this.blackList.findIndex((function(t){return t===e}))<0&&this.blackList.push(e)}},{key:"RemoveBlackID",value:function(e){var t=this.blackList.findIndex((function(t){return t===e}));t>=0&&this.blackList.splice(t,1)}},{key:"AddDefaultID",value:function(e){this.defaultList.findIndex((function(t){return t===e}))<0&&this.defaultList.push(e)}},{key:"RemoveDefaultID",value:function(e){var t=this.defaultList.findIndex((function(t){return t===e}));t>=0&&this.defaultList.splice(t,1)}},{key:"showOneVPage",value:function(){var e=Object(h.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new t(this).open(n);case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onDispose",value:function(){}},{key:"openPredictAVG",value:function(e){this.newC(Fe).start(e)}}]),n}(u),ue=Object(m.a)(oe.prototype,"config",[j.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{tagName:Z.c,stockFind:{sortType:"pe"},userStock:{sortType:"tagpe"},regression:{bmin:0,bmax:.5,r2:.7,lmin:.01,lmax:.5,lr2:.7,mcount:2,lr4:3,r210:.6,irate:.04}}}}),le=Object(m.a)(oe.prototype,"tags",[j.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),pe=Object(m.a)(oe.prototype,"blackList",[j.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),de=Object(m.a)(oe.prototype,"defaultList",[j.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),he=Object(m.a)(oe.prototype,"accounts",[j.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),Object(m.a)(oe.prototype,"tagID",[j.computed],Object.getOwnPropertyDescriptor(oe.prototype,"tagID"),oe.prototype),Object(m.a)(oe.prototype,"accountID",[j.computed],Object.getOwnPropertyDescriptor(oe.prototype,"accountID"),oe.prototype),Object(m.a)(oe.prototype,"blackListTagID",[j.computed],Object.getOwnPropertyDescriptor(oe.prototype,"blackListTagID"),oe.prototype),Object(m.a)(oe.prototype,"defaultListTagID",[j.computed],Object.getOwnPropertyDescriptor(oe.prototype,"defaultListTagID"),oe.prototype),oe);n(48)},37:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={app:void 0,uqs:[{dev:{name:"bruce",alias:void 0},name:"yumi",alias:"YuMi",version:"0.1.0"}],noUnit:!0,tvs:{},oem:void 0,htmlTitle:"\u9c7c\u7c73\u4e61 - \u79c1\u4eab\u6295\u8d44\u5708"}},47:function(e,t,n){"use strict";n.d(t,"a",(function(){return N}));var r,a,i=n(21),c=n(1),s=n.n(c),o=n(2),u=n(15),l=n(6),p=n(7),d=n(13),h=n(10),f=n(9),b=n(12),v=(n(34),n(4)),m=n(3),j=n(5),g=n(11),x=n(30),y=n.n(x),O=n(8),k=n(25),w=n(0),N=(r=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,c=new Array(r),p=0;p<r;p++)c[p]=arguments[p];return(e=t.call.apply(t,[this].concat(c))).input=void 0,e.key=void 0,Object(u.a)(e,"ttmLimit",a,Object(d.a)(e)),e.checkLimitShow=function(t){var n=t.target.checked;e.ttmLimit=n},e.checkShowLater=function(t){var n=t.target.checked;e.controller.LoadHistoryData(n)},e.checkDefaultTag=function(t){var n=t.target.checked;e.controller.onClickDefaultTag(n)},e.page=Object(g.observer)((function(){var t=e.controller,n=t.openMetaView,r=t.baseItem,a=t.onSelectTag,i=t.stockTags,c=t.isLogined,s=r.name,o=r.code,u=r.day;w.Fragment;var l=i&&Object(w.jsx)("button",{className:"btn btn-sm mr-2 btn-outline-success bg-light align-self-center",onClick:a,children:0===i.length?"\u52a0\u81ea\u9009":"\u8bbe\u5206\u7ec4"}),p=s+" "+o;void 0!==u&&(p+=" - "+u);var d=Object(w.jsx)("div",{onClick:function(){return e.controller.showSelectStock(u)},children:p});return Object(w.jsx)(m.Page,{header:d,right:l,headerClassName:"bg-primary",children:v.createElement(e.pageContent)})})),e.pageContent=Object(g.observer)((function(){return Object(w.jsxs)(w.Fragment,{children:[e.dateHead(),v.createElement(e.baseInfo),v.createElement(e.historyChart),v.createElement(e.predictInfo),v.createElement(e.predictSeasonEarning),v.createElement(e.seasonEarning),v.createElement(e.capitalEarning),v.createElement(e.bonus)]})})),e.onChange=function(t){var n=t.target.value,r=Number(n);!0!==isNaN(r)&&Number.isInteger(r)?(e.key=t.target.value,void 0!==e.key&&(e.key=e.key.trim(),""===e.key&&(e.key=void 0))):e.input&&(e.input.value=e.key)},e.onSubmit=function(){var t=Object(o.a)(s.a.mark((function t(n){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),void 0===e.key&&(e.key=""),r=Number(e.key),isNaN(r)||!Number.isInteger(r)){t.next=7;break}if(!(0===r||r>=20000101&&r<30000101)){t.next=7;break}return t.next=7,e.controller.changeDay(r);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.dateHead=function(){var t=e.controller.baseItem.day,n=void 0===t||isNaN(t)?"":t.toString();return Object(w.jsx)("div",{className:"px-3 py-2",children:Object(w.jsx)("form",{className:"w-100",onSubmit:e.onSubmit,children:Object(w.jsxs)("div",{className:"input-group input-group-sm",children:[Object(w.jsx)("label",{className:"input-group-addon mr-2 mb-0 align-self-center",children:"\u65e5\u671f"}),Object(w.jsx)("input",{ref:function(t){return e.input=t},onChange:e.onChange,type:"text",name:"key",defaultValue:n,className:"form-control border-primary px-2",placeholder:"yyyymmdd",maxLength:8}),Object(w.jsx)("div",{className:"input-group-append",children:Object(w.jsxs)("button",{className:"btn btn-primary px-2",type:"submit",children:[Object(w.jsx)("i",{className:"fa fa-search"}),Object(w.jsx)("i",{className:"fa"}),"\u8df3\u8f6c"]})})]})})})},e.baseInfo=Object(g.observer)((function(){var t=e.controller.baseItem,n=t.id,r=(t.name,t.code,t.symbol),a=t.pe,i=t.roe,c=t.price,s=(t.order,t.divyield),o=(t.e,t.capital,t.bonus,e.controller.cApp.defaultList.findIndex((function(e){return e===n}))>=0),u=Object(w.jsxs)("label",{className:"align-self-center px-3",children:[" ",Object(w.jsx)("input",{type:"checkbox",name:"checkDefaultList",defaultChecked:o,onChange:e.checkDefaultTag}),"\u81ea\u9009\u80a1"]});return Object(w.jsxs)(m.LMR,{className:"bg-white",right:u,children:[" ",Object(w.jsx)("div",{className:"px-3 py-2",children:Object(w.jsxs)("div",{className:"d-flex flex-wrap",children:[Object(w.jsxs)("div",{className:"px-3 c8",children:[O.a.caption("TTM"),O.a.numberToFixString(a)]}),Object(w.jsxs)("div",{className:"px-3 c8",children:[O.a.caption("\u80a1\u606f\u7387"),O.a.percentToFixString(s)]}),Object(w.jsxs)("div",{className:"px-3 c8",children:[O.a.caption("ROE"),O.a.percentToFixString(i)]}),Object(w.jsxs)("div",{className:"px-3 c8",children:[O.a.caption("\u4ef7\u683c"),O.a.numberToFixString(c)]}),Object(w.jsx)("a",{className:"px-3 text-info",href:"https://finance.sina.com.cn/realstock/company/".concat(r,"/nc.shtml"),target:"_blank",rel:"noopener noreferrer",onClick:function(e){e.stopPropagation()},children:"\u65b0\u6d6a\u8d22\u7ecf"})]})})]})})),e.onClickName=function(){var e=Object(o.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.symbol,r="http://finance.sina.com.cn/realstock/company/".concat(n,"/nc.shtml"),window.open(r,"").opener=void 0;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.historyChart=Object(g.observer)((function(){var t=e.controller,n=t.historyData,r=t.baseItem;if(void 0===n)return Object(w.jsx)(w.Fragment,{});var a,c=w.Fragment,s=[],o=[],u=[],l=Object(i.a)(n);try{for(l.s();!(a=l.n()).done;){var p=a.value,d=p.day,h=p.price,f=p.ttm;s.push(d),o.push(O.a.numberToPrecision(h,4)),f<=0?u.push(void 0):e.ttmLimit&&f>=35?u.push(35):u.push(O.a.numberToPrecision(f,4))}}catch(j){l.e(j)}finally{l.f()}var b={labels:s,datasets:[{label:"\u4ef7\u683c",data:o,borderColor:"blue",backgroundColor:"skyBlue",borderWidth:1,fill:!1,yAxisID:"y-axis-1"},{label:"TTM",data:u,borderColor:"red",backgroundColor:"pink",borderWidth:1,fill:!1,yAxisID:"y-axis-2"}]};c=Object(w.jsx)(y.a,{data:b,type:"line",options:{scales:{yAxes:[{type:"linear",display:!0,position:"left",id:"y-axis-1"},{type:"linear",display:!0,position:"right",id:"y-axis-2",gridLines:{drawOnChartArea:!1}}]}}});var v=Object(w.jsx)(w.Fragment,{});return v=void 0!==r.day?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)("label",{className:"px-3",children:[" ",Object(w.jsx)("input",{type:"checkbox",name:"showLater",defaultChecked:!1,onChange:e.checkShowLater}),"\u663e\u793a\u540e\u9762\u6570\u636e"]}),Object(w.jsxs)("label",{className:"px-3",children:[" ",Object(w.jsx)("input",{type:"checkbox",name:"selectType",defaultChecked:e.ttmLimit,onChange:e.checkLimitShow}),"\u9650\u5236TTM\u663e\u793a\u8303\u56f4"]})]}):Object(w.jsxs)("label",{className:"px-3",children:[" ",Object(w.jsx)("input",{type:"checkbox",name:"selectType",defaultChecked:e.ttmLimit,onChange:e.checkLimitShow}),"\u9650\u5236TTM\u663e\u793a\u8303\u56f4"]}),Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(m.LMR,{className:"px-3 py-2 bg-white",left:"\u5386\u53f2\u8d70\u52bf",right:v}),Object(w.jsx)("div",{className:"px-3",style:{width:"95%"},children:c})]})})),e.predictInfo=Object(g.observer)((function(){var t=e.controller,n=t.predictData,r=t.ypredict;if(void 0===n)return Object(w.jsx)(w.Fragment,{});var a=n.e,i=n.b,c=n.r2,s=n.epre,o=n.l,u=n.lr2,l=n.lpre,p=Object(w.jsx)(w.Fragment,{});if(5===r.length){var d=new k.a(r),h={labels:["0","1","2","3","4"],datasets:[{label:"\u539f\u503c",data:r.map((function(e){return O.a.numberToPrecision(e)})),borderColor:"black",backgroundColor:"skyBlue",showLine:!1,pointStyle:"crossRot",borderWidth:1,pointRadius:5,fill:!1}]};if(!isNaN(d.B)&&!isNaN(d.A)){for(var f=[],b=0;b<5;++b)f.push(O.a.numberToPrecision(d.predict(b),4));h.datasets.push({label:"\u6307\u6570\u56de\u5f52",data:f,borderColor:"red",backgroundColor:"pink",borderWidth:1,fill:!1})}var v=new k.b(r);if(!isNaN(v.slope)&&!isNaN(v.intercept)){for(var m=[],j=0;j<5;++j)m.push(O.a.numberToPrecision(v.predict(j),4));h.datasets.push({label:"\u7ebf\u6027\u56de\u5f52",data:m,borderColor:"blue",backgroundColor:"pink",borderWidth:1,fill:!1})}p=Object(w.jsx)(y.a,{data:h,type:"line"})}var g=e.predictChartFullInfo(),x=e.predictChartROE();return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("div",{className:"px-3 py-2 bg-white",children:"\u6307\u6570\u56de\u5f52\u9884\u6d4b"}),Object(w.jsxs)("div",{className:"d-flex flex-wrap",children:[Object(w.jsxs)("div",{className:"px-3 c12",children:[O.a.caption("e"),O.a.numberToString(a,4)]}),Object(w.jsxs)("div",{className:"px-3 c12",children:[O.a.caption("\u6307\u6570b"),O.a.numberToString(i,4)]}),Object(w.jsxs)("div",{className:"px-3 c12",children:[O.a.caption("r2"),O.a.numberToString(c,4)]}),Object(w.jsxs)("div",{className:"px-3 c12",children:[O.a.caption("e\u9884\u6d4b"),O.a.numberToString(s)]})]}),Object(w.jsx)("div",{className:"px-3 py-2 bg-white",children:"\u7ebf\u6027\u56de\u5f52\u9884\u6d4b"}),Object(w.jsxs)("div",{className:"d-flex flex-wrap",children:[Object(w.jsxs)("div",{className:"px-3 c12",children:[O.a.caption("e"),O.a.numberToString(a,4)]}),Object(w.jsxs)("div",{className:"px-3 c12",children:[O.a.caption("\u589e\u957f\u7387"),O.a.numberToString(o,4)]}),Object(w.jsxs)("div",{className:"px-3 c12",children:[O.a.caption("r2"),O.a.numberToString(u,4)]}),Object(w.jsxs)("div",{className:"px-3 c12",children:[O.a.caption("e\u9884\u6d4b"),O.a.numberToString(l)]})]}),Object(w.jsxs)("div",{className:"d-flex",children:[Object(w.jsx)("div",{className:"px-2",style:{width:"50%"},children:p}),Object(w.jsx)("div",{className:"px-2",style:{width:"50%"},children:g})]}),Object(w.jsx)("div",{className:"d-flex",children:Object(w.jsx)("div",{className:"px-2",style:{width:"50%"},children:x})})]})})),e.predictChartFullInfo=function(){var t=e.controller.predictSeasonDataFull,n=t.length;if(n<=0)return Object(w.jsx)(w.Fragment,{});for(var r=[],a=[],i=n-1;i>=0;--i){var c=t[i];void 0!==c.esum&&(r.push(O.a.SeasonnoToYearMonth(c.season)),a.push(c.esum))}var s=new k.a(a),o={labels:r,datasets:[{label:"\u539f\u503c",data:a.map((function(e){return O.a.numberToPrecision(e)})),borderColor:"black",backgroundColor:"skyBlue",showLine:!1,pointStyle:"crossRot",borderWidth:1,pointRadius:5,fill:!1}]};if(!isNaN(s.B)&&!isNaN(s.A)){for(var u=[],l=0;l<n;++l)u.push(O.a.numberToPrecision(s.predict(l),4));o.datasets.push({label:"\u6307\u6570 R2:"+O.a.numberToString(s.r2,4),data:u,borderColor:"red",backgroundColor:"pink",borderWidth:1,fill:!1})}var p=new k.b(a);if(!isNaN(p.slope)&&!isNaN(p.intercept)){for(var d=[],h=0;h<n;++h)d.push(O.a.numberToPrecision(p.predict(h),4));o.datasets.push({label:"\u7ebf\u6027 R2:"+O.a.numberToString(p.r2,4),data:d,borderColor:"blue",backgroundColor:"pink",borderWidth:1,fill:!1})}return Object(w.jsx)(y.a,{data:o,type:"line"})},e.predictChartROE=function(){var t=e.controller.predictSeasonDataFull,n=t.length;if(n<=0)return Object(w.jsx)(w.Fragment,{});for(var r=[],a=[],i=n-1;i>=0;--i){var c=t[i];void 0!==c.esum&&(r.push(O.a.SeasonnoToYearMonth(c.season)),a.push(c.esumorg/c.corg))}var s={labels:r,datasets:[{label:"ROE\u539f\u503c",data:a.map((function(e){return O.a.numberToPrecision(e)})),borderColor:"black",backgroundColor:"skyBlue",showLine:!1,pointStyle:"crossRot",borderWidth:1,pointRadius:5,fill:!1}]},o=new k.b(a);if(!isNaN(o.slope)&&!isNaN(o.intercept)){for(var u=[],l=0;l<n;++l)u.push(Number.parseFloat(o.predict(l).toPrecision(4)));s.datasets.push({label:"\u7ebf\u6027 R2:"+O.a.numberToString(o.r2,4),data:u,borderColor:"blue",backgroundColor:"pink",borderWidth:1,fill:!1})}return Object(w.jsx)(y.a,{data:s,type:"line"})},e.predictSeasonEarning=Object(g.observer)((function(){var t=e.controller.predictSeasonData,n=Object(w.jsxs)("div",{className:"px-3",children:[Object(w.jsx)("div",{className:"px-3 c6",children:"\u5e74\u6708"}),Object(w.jsx)("div",{className:"px-3 c6 text-right",children:"\u80a1\u672c"}),Object(w.jsx)("div",{className:"px-3 c6 text-right",children:"\u5b63\u6536\u76ca"}),Object(w.jsx)("div",{className:"px-3 c6 text-right",children:"\u5e74\u6536\u76ca"}),Object(w.jsx)("div",{className:"px-3 c6 text-right",children:"ROE"}),Object(w.jsx)("div",{className:"px-3 c6 text-right",children:"\u80a1\u672co"}),Object(w.jsx)("div",{className:"px-3 c6 text-right",children:"\u5b63\u6536\u76cao"}),Object(w.jsx)("div",{className:"px-3 c6 text-right",children:"\u5e74\u6536\u76cao"})]});return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("div",{className:"px-3 py-1",children:"\u5386\u5e74\u80a1\u672c\u6536\u76ca-\u7528\u4e8e\u56de\u5f52\u8ba1\u7b97"}),Object(w.jsx)(m.List,{header:n,loading:"...",items:t,item:{render:function(e){var t=e.season,n=e.c,r=e.e,a=e.esum,i=e.corg,c=e.eorg,s=e.esumorg,o=O.a.SeasonnoToYearMonth(t);return Object(w.jsxs)("div",{className:"px-3 py-2 d-flex flex-wrap",children:[Object(w.jsx)("div",{className:"px-3 c6",children:o.toString()}),Object(w.jsx)("div",{className:"px-3 c6 text-right",children:O.a.numberToFixString(n)}),Object(w.jsx)("div",{className:"px-3 c6 text-right",children:O.a.numberToFixString(r)}),Object(w.jsx)("div",{className:"px-3 c6 text-right",children:O.a.numberToFixString(a)}),Object(w.jsx)("div",{className:"px-3 c6 text-right",children:O.a.percentToFixString(a/n)}),Object(w.jsx)("div",{className:"px-3 c6 text-right",children:O.a.numberToFixString(i)}),Object(w.jsx)("div",{className:"px-3 c6 text-right",children:O.a.numberToFixString(c)}),Object(w.jsx)("div",{className:"px-3 c6 text-right",children:O.a.numberToFixString(s)})]})}}})]})})),e.seasonEarning=Object(g.observer)((function(){var t=e.controller.seasonData,n=Object(w.jsxs)("div",{className:"px-3",children:[Object(w.jsx)("div",{className:"px-3 c6",children:"\u5e74\u6708"}),Object(w.jsx)("div",{className:"px-3 c6 text-right",children:"\u80a1\u672c"}),Object(w.jsx)("div",{className:"px-3 c6 text-right",children:"\u5b63\u6536\u76ca"}),Object(w.jsx)("div",{className:"px-3 c6 text-right",children:"\u5e74\u6536\u76ca"}),Object(w.jsx)("div",{className:"px-3 c6 text-right",children:"ROE"}),Object(w.jsx)("div",{className:"px-3 c6 text-right",children:"\u80a1\u672co"}),Object(w.jsx)("div",{className:"px-3 c6 text-right",children:"\u5b63\u6536\u76cao"}),Object(w.jsx)("div",{className:"px-3 c6 text-right",children:"\u5e74\u6536\u76cao"})]});return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("div",{className:"px-3 py-1",children:"\u5386\u5e74\u80a1\u672c\u6536\u76ca"}),Object(w.jsx)(m.List,{header:n,loading:"...",items:t,item:{render:function(e){var t=e.season,n=e.c,r=e.e,a=e.esum,i=e.corg,c=e.eorg,s=e.esumorg,o=O.a.SeasonnoToYearMonth(t);return Object(w.jsxs)("div",{className:"px-3 py-2 d-flex flex-wrap",children:[Object(w.jsx)("div",{className:"px-3 c6",children:o.toString()}),Object(w.jsx)("div",{className:"px-3 c6 text-right",children:O.a.numberToFixString(n)}),Object(w.jsx)("div",{className:"px-3 c6 text-right",children:O.a.numberToFixString(r)}),Object(w.jsx)("div",{className:"px-3 c6 text-right",children:O.a.numberToFixString(a)}),Object(w.jsx)("div",{className:"px-3 c6 text-right",children:O.a.percentToFixString(a/n)}),Object(w.jsx)("div",{className:"px-3 c6 text-right",children:O.a.numberToFixString(i)}),Object(w.jsx)("div",{className:"px-3 c6 text-right",children:O.a.numberToFixString(c)}),Object(w.jsx)("div",{className:"px-3 c6 text-right",children:O.a.numberToFixString(s)})]})}}})]})})),e.capitalEarning=Object(g.observer)((function(){var t=e.controller.capitalearning,n=Object(w.jsxs)("div",{className:"px-3",children:[Object(w.jsx)("div",{className:"px-3 c6",children:"\u5e74"}),Object(w.jsx)("div",{className:"px-3 c6 text-right",children:"\u80a1\u672c"}),Object(w.jsx)("div",{className:"px-3 c6 text-right",children:"\u6536\u76ca"}),Object(w.jsx)("div",{className:"px-3 c6 text-right",children:"ROE"})]});return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("div",{className:"px-3 py-1",children:"\u5386\u5e74\u80a1\u672c\u6536\u76ca"}),Object(w.jsx)(m.List,{header:n,loading:"...",items:t,item:{render:function(e){var t=e.capital,n=e.earning;return Object(w.jsxs)("div",{className:"px-3 py-2 d-flex flex-wrap",children:[Object(w.jsx)("div",{className:"px-3 c6",children:e.year}),Object(w.jsxs)("div",{className:"px-3 c6 text-right",children:[" ",t.toFixed(2)]}),Object(w.jsxs)("div",{className:"px-3 c6 text-right",children:[" ",n.toFixed(2)]}),Object(w.jsxs)("div",{className:"px-3 c6 text-right",children:[" ",(n/t*100).toFixed(1),"%"]})]})}}})]})})),e.bonus=Object(g.observer)((function(){var t=e.controller.bonus,n=Object(w.jsxs)("div",{className:"px-3",children:[Object(w.jsx)("div",{className:"px-3 c8",children:"\u65e5\u671f"}),Object(w.jsx)("div",{className:"px-3 c6 text-right",children:"\u5206\u7ea2"})]});return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("div",{className:"px-3 py-1",children:"\u5386\u5e74\u5206\u7ea2"}),Object(w.jsx)(m.List,{header:n,loading:"...",items:t,item:{render:function(e){return Object(w.jsxs)("div",{className:"px-3 py-2 d-flex flex-wrap",children:[Object(w.jsx)("div",{className:"px-3 c8",children:e.day}),Object(w.jsxs)("div",{className:"px-3 c6 text-right",children:[" ",e.bonus.toFixed(2)]})]})}}})]})})),e}return Object(p.a)(n,[{key:"open",value:function(){var e=Object(o.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(e){return this.page()}}]),n}(m.VPage),a=Object(b.a)(r.prototype,"ttmLimit",[j.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),r)},48:function(e,t,n){"use strict";n.d(t,"setUI",(function(){return d}));var r=n(124),a=n(125),i=n(126),c=n(127),s=n(128),o=n(129),u=n(130),l=n(131),p=n(132);n(122);function d(e){Object.assign(e.Account,r),Object.assign(e.Holding,a),Object.assign(e.Transaction,i),Object.assign(e.Stock,c),Object.assign(e.Market,s),Object.assign(e.Portfolio,o),Object.assign(e.StockValue,u),Object.assign(e.AccountValue,l),Object.assign(e.UserAccount,p)}},49:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var r,a,i=n(15),c=n(13),s=n(12),o=(n(34),n(1)),u=n.n(o),l=n(2),p=n(6),d=n(7),h=n(10),f=n(9),b=n(5),v=n(3),m=n(36),j=(n(4),n(16)),g=n(0),x=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(p.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).onClickStock=function(){var t=Object(l.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.controller.returnStock(n);case 2:e.closePage();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.page=Object(j.d)((function(t){var n=e.controller,r=n.pageItems,a=n.onPage,i=Object(g.jsx)("div",{className:"my-3 mx-2 text-warning",children:"\u8bf7\u641c\u7d22\u80a1\u7968\uff01"});return Object(g.jsxs)(v.Page,{header:"\u9009\u62e9\u80a1\u7968",headerClassName:"bg-primary",onScrollBottom:a,children:[Object(g.jsx)(v.SearchBox,{className:"px-1 w-100  mt-2 mr-2",size:"md",allowEmptySearch:!0,onSearch:function(t){return e.controller.searchByKey(t)},placeholder:"\u641c\u7d22\u80a1\u7968"}),Object(g.jsx)(v.List,{before:"",none:i,items:r,item:{render:e.renderStock,onClick:e.onClickStock}})]})})),e}return Object(d.a)(n,[{key:"open",value:function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page,t);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"renderStock",value:function(e,t){var n=e.name,r=e.code;return Object(g.jsxs)(v.LMR,{className:"px-3 py-2 ",children:[Object(g.jsx)("div",{className:"font-weight-bold"}),Object(g.jsx)("div",{children:n+" "+r})]})}}]),n}(v.VPage),y=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e){var r;return Object(p.a)(this,n),(r=t.call(this,!0)).cStock=void 0,r.cStock=e,r.firstSize=r.pageSize=30,r}return Object(d.a)(n,[{key:"loadResults",value:function(){var e=Object(l.a)(u.a.mark((function e(t,n,r){var a,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n=0),a=["%"+t.key+"%"],e.prev=2,e.next=5,this.cStock.cApp.miApi.page("q_stocks$page",a,n,r);case 5:return i=e.sent,e.abrupt("return",i);case 9:return e.prev=9,e.t0=e.catch(2),e.t0,e.abrupt("return",void 0);case 13:case"end":return e.stop()}}),e,this,[[2,9]])})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"setPageStart",value:function(e){this.pageStart=void 0===e?0:e.id}}]),n}(v.PageItems),O=(r=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(p.a)(this,n);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return e=t.call.apply(t,[this].concat(s)),Object(i.a)(e,"pageItems",a,Object(c.a)(e)),e.searchByKey=function(){var t=Object(l.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.pageItems=new y(Object(c.a)(e)),e.pageItems.first({key:n});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.returnStock=function(){var t=Object(l.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.returnCall(n);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onPage=Object(l.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.pageItems.more();case 2:case"end":return t.stop()}}),t)}))),e}return Object(d.a)(n,[{key:"internalStart",value:function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openVPage(x);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(m.b),a=Object(s.a)(r.prototype,"pageItems",[b.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new y(this)}}),r)},51:function(e,t,n){"use strict";n(121);var r=n(123);n.d(t,"CStockInfo",(function(){return r.a}));n(47)},8:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(6),a=n(7),i=(n(4),n(0)),c=function(){function e(){Object(r.a)(this,e)}return Object(a.a)(e,null,[{key:"numberToFixString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return void 0===e?"":e.toFixed(t)}},{key:"number",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return void 0===e?"":e.toFixed(t)}},{key:"numberToMarketValue",value:function(e){return void 0===e||isNaN(e)?"":Math.round(e/1e4).toString()}},{key:"numberToString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return void 0===e?"":e.toPrecision(t)}},{key:"numberToPrecision",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return void 0===e?void 0:Number.parseFloat(e.toPrecision(t))}},{key:"percentToFixString",value:function(e){return void 0===e||isNaN(e)?"":(100*e).toFixed(2)+"%"}},{key:"percent0",value:function(e){return void 0===e||isNaN(e)?"":(100*e).toFixed(0)+"%"}},{key:"percent1",value:function(e){return void 0===e||isNaN(e)?"":(100*e).toFixed(1)+"%"}},{key:"warningTypeString",value:function(e){switch(e){case"gt":return"\u5927\u4e8e";case"lt":return"\u5c0f\u4e8e";default:return e}}},{key:"predictCutRatio",value:function(e){return 2*e-e*e}},{key:"evaluatePricePrice",value:function(e,t,n,r){var a=1+e,i=a*a,c=i*a;return(t/a+n/i+r/c+r/e/c)/2}},{key:"calculateV",value:function(e,t,n){if(void 0!==n&&!isNaN(n)){var r=0;return void 0!==e&&(e>.25&&(e=.25),r+=100*e),void 0!==t&&(r+=100*t),r/n}}},{key:"calculateVN",value:function(e,t,n,r){if(void 0!==r&&!isNaN(r)&&void 0!==t&&!isNaN(t)){var a=0;return void 0!==e&&t>0&&(e>.25&&(e=.24+Math.pow(100*(e-.24),.6667)/100),a+=(e=(e=1+e)*e*e-1)*t*100),void 0===n||isNaN(n)||(a+=100*n),a/r}}},{key:"calculateZZ3",value:function(e){var t=[void 0,void 0,void 0,void 0];if(void 0===e)return t;if(e.length<5)return t;for(var n=function(e,t){if(!(t<=0||e<=0))return e/t-1},r=0;r<4;++r)t[r]=n(e[r+1],e[r]);return t}},{key:"MonthnoFromDay",value:function(e){return 12*(Math.floor(e/1e4)-1995)+(Math.floor(e%1e4/100)-1)}},{key:"SeasonnoFromDay",value:function(e){var t=Math.floor(e/1e4),n=Math.floor(e%1e4/100)-1;return 4*(t-1995)+Math.floor(n/3)}},{key:"SeasonnoFromYearMonth",value:function(e,t){return 4*(e-1995)+Math.floor((t-1)/3)}},{key:"SeasonnoToYearMonth",value:function(e){return 100*(Math.floor(e/4)+1995)+3*(Math.floor(e%4)+1)}},{key:"SeasonnoToBeginEnd",value:function(e){var t=1e4*(1995+Math.floor(e/4)),n=e%4;return 0===n?{begin:t+101,end:t+331}:1===n?{begin:t+401,end:t+630}:2===n?{begin:t+701,end:t+930}:{begin:t+1001,end:t+1231}}},{key:"CalculatePredictAvg",value:function(e){var t={avg20:void 0,avg50:void 0,avg100:void 0},n=e.length,r=function(t){var r=t;if(r>n&&(r=n),r>=10){for(var a=0,i=3;i<r;++i)a+=e[i].predictpe;return a/(r-3)}};return t.avg20=r(20),t.avg50=r(50),t.avg100=r(100),t}},{key:"CalculateValueAvg",value:function(e){var t={avg20:void 0,avg50:void 0,avg100:void 0,avg:void 0},n=e.length,r=function(t){var r=t;if((0===t||r>n)&&(r=n),r>=10){for(var a=0,i=3;i<r;++i)a+=e[i].v;return a/(r-3)}};return t.avg20=r(20),t.avg50=r(50),t.avg100=r(100),t.avg=r(0),t}}]),e}();c.caption=function(e){return Object(i.jsx)("span",{className:"text-muted small",children:e})}}},[[251,1,2]]]);
//# sourceMappingURL=main.722ea50c.chunk.js.map