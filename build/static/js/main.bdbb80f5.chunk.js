(this.webpackJsonpmifen=this.webpackJsonpmifen||[]).push([[0],{113:function(e,t){},114:function(e,t,r){"use strict";r.d(t,"a",(function(){return B}));var n,a,i,c,s,o,u,l,p,d,h,b=r(21),f=r(36),v=r(1),m=r.n(v),j=r(23),g=r(2),x=r(15),y=r(5),O=r(6),k=r(14),w=r(11),N=r(10),S=r(13),T=(r(30),r(4)),A=r(3),C=r(31),I=r(7),D=r(50),P=(r(8),r(18)),F=r(0),L=function(e){Object(w.a)(r,e);var t=Object(N.a)(r);function r(){var e;Object(y.a)(this,r);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).onSelect=function(t,r,n){e.controller.onClickSelectTag(t,r)},e.onEditTag=function(t,r){r.preventDefault(),e.controller.onEditTag(t)},e.renderTag=function(t){var r=Object(F.jsx)("div",{className:"px-3 py-2 cursor-pointer",children:t.name}),n=t.name===C.e||t.name===C.f?"":Object(F.jsx)("div",{className:"px-3 py-2 cursor-pointer",onClick:function(r){return e.onEditTag(t,r)},children:"\u7f16\u8f91"});return Object(F.jsx)(A.LMR,{className:"mx-3 my-2",left:r,right:n})},e.page=Object(P.c)((function(){var t=e.controller.selectedTags,r=e.controller.cApp.tags,n=r.length>=10?"":Object(F.jsxs)("div",{className:"px-3 py-2 cursor-pointer",onClick:e.controller.onNewTag,children:[Object(F.jsx)(A.FA,{name:"plus",className:"text-primary"})," \xa0 \u65b0\u5efa\u5206\u7ec4"]});return Object(F.jsxs)(A.Page,{header:"\u9009\u62e9\u5206\u7ec4",headerClassName:"bg-primary",children:[n,Object(F.jsx)(A.List,{items:r,item:{onSelect:e.onSelect,render:e.renderTag},selectedItems:t})]})})),e}return Object(O.a)(r,[{key:"open",value:function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(A.VPage),R=[{name:"name",type:"string",required:!0,maxLength:10},{name:"id",type:"id"},{name:"submit",type:"submit"}],E={items:{name:{widget:"text",label:null,placeholder:"\u5206\u7ec4\u540d\u79f0"},id:{widget:"id",visible:!1},submit:{widget:"button",label:"\u4fdd\u5b58",className:"btn btn-primary"}}},V=function(e){Object(w.a)(r,e);var t=Object(N.a)(r);function r(){var e;Object(y.a)(this,r);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).onFormButtonClick=function(){var t=Object(g.a)(m.a.mark((function t(r,n){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.controller.onSaveNewTag(n.data);case 2:if(!t.sent){t.next=4;break}e.controller.closePage();case 4:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),e.page=function(){return Object(F.jsx)(A.Page,{header:"\u65b0\u5efa\u5206\u7ec4",headerClassName:"bg-primary",children:Object(F.jsx)("div",{className:"px-3 py-3",children:Object(F.jsx)(A.Form,{schema:R,uiSchema:E,formData:void 0,onButtonClick:e.onFormButtonClick})})})},e}return Object(O.a)(r,[{key:"open",value:function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(A.VPage),M=function(e){Object(w.a)(r,e);var t=Object(N.a)(r);function r(){var e;Object(y.a)(this,r);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).onFormButtonClick=function(){var t=Object(g.a)(m.a.mark((function t(r,n){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.controller.onSaveTag(n.data);case 2:if(!t.sent){t.next=4;break}e.controller.closePage();case 4:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),e.page=function(t){var r={id:t.id,name:t.name};return Object(F.jsx)(A.Page,{header:"\u7f16\u8f91\u5206\u7ec4",headerClassName:"bg-primary",children:Object(F.jsx)("div",{className:"px-3 py-3",children:Object(F.jsx)(A.Form,{schema:R,uiSchema:E,formData:r,onButtonClick:e.onFormButtonClick})})})},e}return Object(O.a)(r,[{key:"open",value:function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page,t);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(A.VPage),_=r(25),W=r(51),B=(n=function(e){Object(w.a)(r,e);var t=Object(N.a)(r);function r(){var e;Object(y.a)(this,r);for(var n=arguments.length,b=new Array(n),v=0;v<n;v++)b[v]=arguments[v];return e=t.call.apply(t,[this].concat(b)),Object(x.a)(e,"baseItem",a,Object(k.a)(e)),Object(x.a)(e,"loaded",i,Object(k.a)(e)),Object(x.a)(e,"price",c,Object(k.a)(e)),Object(x.a)(e,"stockTags",s,Object(k.a)(e)),e.selectedTags=void 0,e.exrightForEarning=[],e.exrightInfo=[],Object(x.a)(e,"seasonData",o,Object(k.a)(e)),Object(x.a)(e,"predictSeasonData",u,Object(k.a)(e)),Object(x.a)(e,"predictSeasonDataFull",l,Object(k.a)(e)),Object(x.a)(e,"predictData",p,Object(k.a)(e)),Object(x.a)(e,"ypredict",d,Object(k.a)(e)),Object(x.a)(e,"historyData",h,Object(k.a)(e)),e.historyDataOrg=[],e._capitalearning=T.observable.array([],{deep:!0}),e._bonus=T.observable.array([],{deep:!0}),e._divideInfo=T.observable.array([],{deep:!0}),e.loadData=function(){e.loading()},e.loading=Object(g.a)(m.a.mark((function t(){var r,n,a,i,c,s,o,u,l,p,d,h;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.baseItem){t.next=2;break}return t.abrupt("return");case 2:return r=e.baseItem,n=r.id,a=r.day,t.next=5,Promise.all([e.cApp.miApi.query("q_stockallinfo",[n,a]),e.cApp.miApi.query("t_tagstock$query",[e.user.id,void 0,n])]);case 5:if(i=t.sent,e.stockTags=i[1],c=i[0],!Array.isArray(c[0])){t.next=26;break}return s=c[1],Array.isArray(s)&&(e.price=s[0]),e._capitalearning.length>0&&e._capitalearning.clear(),o=c[2],Array.isArray(o)&&(u=e._capitalearning).push.apply(u,Object(j.a)(o)),e._bonus.clear(),l=c[3],Array.isArray(l)&&(p=e._bonus).push.apply(p,Object(j.a)(l)),e._divideInfo.clear(),d=c[4],Array.isArray(d)&&(h=e._divideInfo).push.apply(h,Object(j.a)(d)),e.exrightForEarning=c[5],t.next=23,e.loadTTMEarning(c[6]);case 23:e.exrightInfo=c[7],e.historyDataOrg=c[8],e.LoadHistoryData(!1);case 26:e.loaded=!0;case 27:case"end":return t.stop()}}),t)}))),e.openMetaView=function(){},e.onSelectTag=Object(g.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.selectedTags=e.cApp.tags.filter((function(t){return e.stockTags.findIndex((function(e){return e.tag===t.id}))>=0})),e.openVPage(L);case 2:case"end":return t.stop()}}),t)}))),e.onNewTag=function(){e.openVPage(V)},e.onEditTag=function(t){e.openVPage(M,t)},e.onSaveNewTag=function(){var t=Object(g.a)(m.a.mark((function t(r){var n,a,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.name,t.next=3,e.cApp.miApi.call("t_tag$save",[e.user.id,void 0,n]);case 3:if(a=t.sent,!((i=a.retId)<0)){t.next=8;break}return alert(n+" \u5df2\u7ecf\u88ab\u4f7f\u7528\u4e86"),t.abrupt("return",!1);case 8:return e.cApp.tags.push({id:i,name:n}),t.abrupt("return",!0);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onSaveTag=function(){var t=Object(g.a)(m.a.mark((function t(r){var n,a,i,c,s;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.id,a=r.name,{id:n,name:a},!((i=e.cApp.tags.findIndex((function(e){return e.id!==n&&e.name===a})))>=0)){t.next=6;break}return alert(a+" \u5df2\u7ecf\u88ab\u4f7f\u7528\u4e86"),t.abrupt("return",!1);case 6:return t.next=8,e.cApp.miApi.call("t_tag$save",[e.user.id,void 0,a]);case 8:if(c=t.sent,!(void 0===(s=c.retId)||s<0)){t.next=13;break}return alert(a+" \u5df2\u7ecf\u88ab\u4f7f\u7528\u4e86"),t.abrupt("return",!1);case 13:return(i=e.cApp.tags.findIndex((function(e){return e.id===n})))>=0&&(e.cApp.tags[i].name=a),t.abrupt("return",!0);case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onClickSelectTag=function(){var t=Object(g.a)(m.a.mark((function t(r,n){var a,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if({user:A.nav.user.id,tag:r.id,arr1:[{stock:e.baseItem.id}]},!0!==n){t.next=11;break}return t.next=4,e.cApp.miApi.call("t_tagstock$add",[e.user.id,r.id,e.baseItem.id]);case 4:return t.sent,a={tag:{id:r.id}},e.stockTags.push(a),t.next=9,e.cApp.AddTagStockID(r.id,e.baseItem.id);case 9:t.next=18;break;case 11:return t.next=13,e.cApp.miApi.call("t_tagstock$del",[e.user.id,r.id,e.baseItem.id]);case 13:return t.sent,i=e.stockTags.findIndex((function(e){return e.tag.id===r.id})),e.stockTags.splice(i,1),t.next=18,e.cApp.RemoveTagStockID(r.id,e.baseItem.id);case 18:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),e.onClickDefaultTag=function(){var t=Object(g.a)(m.a.mark((function t(r){var n,a,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.cApp.defaultListTagID,!0!==r){t.next=11;break}return t.next=4,e.cApp.miApi.call("t_tagstock$add",[e.user.id,n,e.baseItem.id]);case 4:return t.sent,a={tag:{id:n}},e.stockTags.push(a),t.next=9,e.cApp.AddTagStockID(n,e.baseItem.id);case 9:t.next=18;break;case 11:return t.next=13,e.cApp.miApi.call("t_tagstock$del",[e.user.id,n,e.baseItem.id]);case 13:return t.sent,i=e.stockTags.findIndex((function(e){return e.tag.id===n})),e.stockTags.splice(i,1),t.next=18,e.cApp.RemoveTagStockID(n,e.baseItem.id);case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.showSelectStock=function(){var t=Object(g.a)(m.a.mark((function t(r){var n,a,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new W.a(e.cApp),t.next=3,n.call();case 3:return a=t.sent,(i=Object(f.a)({},a)).day=r,e.baseItem=i,e.loaded=!1,t.next=10,e.loading();case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.changeDay=function(){var t=Object(g.a)(m.a.mark((function t(r){var n,a,i,c,s,o;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.baseItem.day!==r){t.next=2;break}return t.abrupt("return");case 2:return n=e.baseItem,a=n.id,i=n.name,c=n.code,s=n.symbol,o={id:a,name:i,code:c,symbol:s,day:0===r?void 0:r},e.baseItem=o,e.loaded=!1,t.next=8,e.loading();case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(O.a)(r,[{key:"capitalearning",get:function(){if(!1!==this.loaded)return this._capitalearning}},{key:"bonus",get:function(){if(!1!==this.loaded)return this._bonus}},{key:"divideInfo",get:function(){if(!1!==this.loaded)return this._divideInfo}},{key:"loadTTMEarning",value:function(){var e=Object(g.a)(m.a.mark((function e(t){var r,n,a,i,c,s,o,u,l,p,d,h,f,v,j,g,x,y,O,k,w,N,S,T;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.seasonData.splice(0),r={},!((n=t.length)<=0)){e.next=5;break}return e.abrupt("return");case 5:a=t[n-1].seasonno,i=t[0],c=i.seasonno,s=I.a.SeasonnoToBeginEnd(c),o=s.end,u=Object(b.a)(t);try{for(u.s();!(l=u.n()).done;)p=l.value,d=p.seasonno,h={season:d,c:p.capital,e:p.es,esum:p.earning,corg:p.capital,eorg:p.es,esumorg:p.earning},this.ExrightEarning(o,d,h),r[d]=h}catch(m){u.e(m)}finally{u.f()}f=0,v=0,j=a;case 14:if(!(j<=c)){e.next=24;break}if(void 0!==(g=r[j])){e.next=18;break}return e.abrupt("continue",21);case 18:v+=g.e,f<3?g.esum=void 0:(g.esum=v,void 0!==(x=r[j-3])&&(v-=x.e)),this.seasonData.splice(0,0,g);case 21:++j,++f,e.next=14;break;case 24:if(y=c-19,this.predictData=void 0,this.predictSeasonData.splice(0),this.predictSeasonDataFull.splice(0),!(y<a)){e.next=30;break}return e.abrupt("return");case 30:y+=3,this.ypredict=[],O=y;case 33:if(!(O<=c)){e.next=42;break}if(void 0!==(k=r[O])){e.next=37;break}return e.abrupt("break",42);case 37:this.predictSeasonData.splice(0,0,k),this.ypredict.push(k.esum);case 39:O+=4,e.next=33;break;case 42:w=c;case 43:if(!(w>=a)){e.next=51;break}if(void 0!==(N=r[w])){e.next=47;break}return e.abrupt("break",51);case 47:this.predictSeasonDataFull.push(N);case 48:w-=4,e.next=43;break;case 51:5===this.ypredict.length?(S=new _.a(this.ypredict),T=new _.b(this.ypredict),this.predictData={e:this.ypredict[4],b:S.B,r2:S.r2,epre:S.predict(4),l:T.slopeR,lr2:T.r2,lpre:T.predict(4)}):this.predictSeasonData.splice(0);case 52:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"ExrightEarning",value:function(e,t,r){for(var n=I.a.SeasonnoToBeginEnd(t).end,a=0;a<this.exrightForEarning.length;++a){var i=this.exrightForEarning[a],c=i.day;if(c>e)break;if(!(c<n)){var s=i.factor;r.c=r.c*s,r.e=r.e*s,r.esum=r.esum*s}}}},{key:"LoadHistoryData",value:function(e){var t=this.historyDataOrg,r=t.length;if(r<=10)this.historyData=[];else{if(!e){var n=this.baseItem.day;if(void 0!==n){for(var a=r-1;a>=0;--a){if(t[a].day<=n)break}r=a+1}}var i=r-1,c=t[i],s=c.dayno;if(void 0===s)for(;i>0&&void 0===(s=(c=t[--i]).dayno););for(var o=c.day,u=s%5,l=[],p=0;p<=i;++p){var d=t[p],h=d.day,b=d.price;d.dayno%5===u&&l.push({day:h,price:this.RestorePrice(b,h,o),ttm:this.CalculateHistoryPE(b,h)})}this.historyData=l}}},{key:"RestorePrice",value:function(e,t,r){var n=0,a=e;if(t<r){for(var i=0;i<this.exrightInfo.length;++i){var c=this.exrightInfo[i],s=c.day,o=c.bonus,u=c.factor,l=c.factore;if(!(s<=t)){if(s>r)break;a*=u,n=(n+o)*l}}a-=n}else{for(var p=0;p<this.exrightInfo.length;++p){var d=this.exrightInfo[p],h=d.day,b=d.bonus,f=d.factor,v=d.factore;if(!(h<=r)){if(h>t)break;a/=f,n=n/v+b}}a+=n}return a}},{key:"CalculateHistoryPE",value:function(e,t){for(var r=I.a.SeasonnoFromDay(t),n=this.seasonData.length,a=0;a<n;++a){var i=this.seasonData[a];if(!(i.season>=r)){if(void 0===i.esumorg)return;var c=I.a.SeasonnoToBeginEnd(i.season).end;return this.RestorePrice(e,t,c)/i.esumorg}}}},{key:"internalStart",value:function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.baseItem=t,this.loadData(),this.openVPage(D.a);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(C.b),a=Object(S.a)(n.prototype,"baseItem",[T.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),i=Object(S.a)(n.prototype,"loaded",[T.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),c=Object(S.a)(n.prototype,"price",[T.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),s=Object(S.a)(n.prototype,"stockTags",[T.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),o=Object(S.a)(n.prototype,"seasonData",[T.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),u=Object(S.a)(n.prototype,"predictSeasonData",[T.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),l=Object(S.a)(n.prototype,"predictSeasonDataFull",[T.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),p=Object(S.a)(n.prototype,"predictData",[T.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=Object(S.a)(n.prototype,"ypredict",[T.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),h=Object(S.a)(n.prototype,"historyData",[T.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Object(S.a)(n.prototype,"capitalearning",[T.computed],Object.getOwnPropertyDescriptor(n.prototype,"capitalearning"),n.prototype),Object(S.a)(n.prototype,"bonus",[T.computed],Object.getOwnPropertyDescriptor(n.prototype,"bonus"),n.prototype),Object(S.a)(n.prototype,"divideInfo",[T.computed],Object.getOwnPropertyDescriptor(n.prototype,"divideInfo"),n.prototype),n)},120:function(e,t,r){},220:function(e,t,r){},227:function(e,t,r){"use strict";r.r(t);var n=r(8),a=r.n(n),i=r(49),c=r.n(i),s=(r(119),r(120),r(1)),o=r.n(s),u=r(2),l=r(5),p=r(6),d=r(11),h=r(10),b=r(3),f=(r(220),r(31)),v=r(0),m=function(e){Object(d.a)(r,e);var t=Object(h.a)(r);function r(){var e;Object(l.a)(this,r);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).onLogined=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.start)(f.a,f.c);case 2:case"end":return e.stop()}}),e)}))),e}return Object(p.a)(r,[{key:"render",value:function(){return Object(v.jsx)(b.NavView,{onLogined:this.onLogined})}}]),r}(a.a.Component),j=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,228)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,i=t.getLCP,c=t.getTTFB;r(e),n(e),a(e),i(e),c(e)}))};c.a.render(Object(v.jsx)(a.a.StrictMode,{children:Object(v.jsx)(m,{})}),document.getElementById("root")),j()},25:function(e,t,r){"use strict";r.d(t,"b",(function(){return i})),r.d(t,"a",(function(){return c}));var n=r(5),a=r(6),i=function(){function e(t){Object(n.a)(this,e),this.slope=void 0,this.intercept=void 0,this.y=void 0,this.slopeR=void 0,this.endY=void 0,this.r2=void 0,this.y=t,this.regress();var r=this.score();this.r2=r.r2}return Object(a.a)(e,[{key:"regress",value:function(){for(var e=this.y.length,t=0,r=0,n=0,a=0,i=0;i<e;++i)t+=i,r+=this.y[i],n+=i*i,a+=i*this.y[i];var c=e*a-t*r;this.slope=c/(e*n-t*t),this.intercept=1/e*r-this.slope*(1/e)*t;var s=this.slope>0?this.predict(e-2):this.predict(1);this.slopeR=s<.01?void 0:this.slope/s}},{key:"score",value:function(){for(var e=this.y.length,t=new Array(e),r=0;r<e;r++)t[r]=this.predict(r);for(var n=0,a=0,i=0,c=0,s=0,o=0,u=0,l=0;l<e;l++){var p=t[l];n+=p;var d=this.y[l];a+=d,s+=p*p,o+=d*d,u+=p*d;var h=d-p;0!==d&&(i+=h*h/d),c+=h*h}var b=(e*u-n*a)/Math.sqrt((e*s-n*n)*(e*o-a*a));return{r:b,r2:b*b,chi2:i,rmsd:Math.sqrt(c/e)}}},{key:"predict",value:function(e){return this.slope*e+this.intercept}},{key:"computeX",value:function(e){return(e-this.intercept)/this.slope}}]),e}(),c=function(){function e(t){Object(n.a)(this,e),this.A=void 0,this.B=void 0,this.y=void 0,this.r2=void 0,this.y=t,this.regress();var r=this.score();this.r2=r.r2}return Object(a.a)(e,[{key:"regress",value:function(){for(var e=this.y.length,t=0,r=0,n=0,a=0,i=0;i<e;++i){t+=i;var c=Math.log(this.y[i]);r+=c,n+=i*i,a+=i*c}var s=(e*a-t*r)/(e*n-t*t),o=1/e*r-s*(1/e)*t;this.A=Math.exp(o),this.B=s}},{key:"score",value:function(){for(var e=this.y.length,t=new Array(e),r=0;r<e;r++)t[r]=this.predict(r);for(var n=0,a=0,i=0,c=0,s=0,o=0,u=0,l=0;l<e;l++){var p=t[l];n+=p;var d=this.y[l];a+=d,s+=p*p,o+=d*d,u+=p*d;var h=d-p;0!==d&&(i+=h*h/d),c+=h*h}var b=(e*u-n*a)/Math.sqrt((e*s-n*n)*(e*o-a*a));return{r:b,r2:b*b,chi2:i,rmsd:Math.sqrt(c/e)}}},{key:"predict",value:function(e){return this.A*Math.exp(e*this.B)}}]),e}()},31:function(e,t,r){"use strict";r.d(t,"b",(function(){return o})),r.d(t,"d",(function(){return l})),r.d(t,"f",(function(){return He})),r.d(t,"e",(function(){return Ue})),r.d(t,"a",(function(){return ze})),r.d(t,"c",(function(){return $e}));var n=r(6),a=r(5),i=r(11),c=r(10),s=r(3),o=function(e){Object(i.a)(r,e);var t=Object(c.a)(r);function r(){return Object(a.a)(this,r),t.apply(this,arguments)}return r}(s.CBase),u=(s.CSub,function(e){Object(i.a)(r,e);var t=Object(c.a)(r);function r(){return Object(a.a)(this,r),t.apply(this,arguments)}return Object(n.a)(r,[{key:"newC",value:function(e){var t=new e(this);return t.init(),t}}]),r}(s.CAppBase)),l={uqBasedata:"bruce/mi",appIcon:"https://tv.jkchemical.com/imgs/Bear-icon.png",miApiHost:"https://note.jjol.cn/",miApiHostDebug:"http://localhost:6010/",isDevelopment:!1},p=r(23),d=r(1),h=r.n(d),b=r(2),f=r(21),v=r(15),m=r(14),j=r(13),g=(r(30),r(4)),x=r(25),y=r(53),O=r(8),k=r.n(O),w=r.p+"static/media/logo.2d27ead7.svg",N=r(0),S=function(e){Object(i.a)(r,e);var t=Object(c.a)(r);function r(){return Object(a.a)(this,r),t.apply(this,arguments)}return Object(n.a)(r,[{key:"render",value:function(){s.FA;var e=Object(N.jsx)("img",{className:"m-1",src:w,alt:"logo",style:{height:"3rem",width:"3rem"}});return Object(N.jsx)(s.LMR,{className:"mb-3 align-items-center bg-white",left:e,right:undefined,children:Object(N.jsx)("div",{className:"",children:this.controller.renderSearchHeader("md")})})}}]),r}(s.View),T=function(e){Object(i.a)(r,e);var t=Object(c.a)(r);function r(){var e;Object(a.a)(this,r);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).onSearch=function(){var e=Object(b.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e}return Object(n.a)(r,[{key:"render",value:function(e){return Object(N.jsx)(s.SearchBox,{className:"px-1 w-100",size:e,onSearch:this.onSearch,placeholder:"\u529f\u80fd..."})}}]),r}(s.View),A=r(12);function C(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Object(N.jsxs)("label",{className:"btn btn-outline-info mb-0",children:[Object(N.jsx)("input",{type:"radio",className:"btn-sm btn-check mr-1",name:"btnradio",defaultChecked:n,onClick:function(){return r(e)}}),t]})}function I(e){return Object(N.jsx)("div",{className:"my-1 justify-content-end mr-3",children:Object(N.jsxs)("div",{className:"btn-group",role:"group","aria-label":"Basic radio toggle button group",children:[C("tagv","\u7c73\u606f\u7387",e,!0),C("tagpe","TTM",e),C("tagdp","\u80a1\u606f\u7387",e)]})})}function D(e,t,r){var n,a,i="px-2 mb-2 text-right ",c=i+"c5";switch(r){case"p0":n=void 0===(a=t)||isNaN(a)?"":(100*a).toFixed(0)+"%";break;case"p1":n=function(e){return void 0===e||isNaN(e)?"":(100*e).toFixed(1)+"%"}(t);break;case"n1":n=F(t,1);break;case"n2":n=F(t,2);break;case"yi":n=function(e){return void 0===e||isNaN(e)?"":Math.round(e/1e4).toString()}(t),c="px-2 mb-2 text-right c5"}return Object(N.jsxs)("div",{className:c,children:[Object(N.jsx)("span",{className:"text-muted small",children:e}),Object(N.jsx)("br",{}),n]},e)}function P(e,t,r){e.id;var n=e.name,a=e.code,i=e.pe,c=e.roe,o=e.price,u=e.divyield,l=e.v,p=e.order,d=(e.symbol,e.l),h=(e.e,e.ep,e.e3,e.total),b=function(e){var t=[void 0,void 0,void 0,void 0];if(void 0===e)return t;if(e.length<5)return t;for(var r=function(e,t){if(!(t<=0||e<=0))return e/t-1},n=0;n<4;++n)t[n]=r(e[n+1],e[n]);return t}(e.dataArr),f=Object(N.jsxs)("div",{className:"ml-3 cursor-pointer",onClick:function(){return t(e)},children:[Object(N.jsx)("span",{className:"text-primary",children:n}),"\xa0",Object(N.jsx)("span",{className:"text-info",children:a}),"\xa0",Object(N.jsx)("span",{className:"small ml-5",children:p})]}),v=[["\u7c73\u606f\u7387",l,"n1"],["TTM",i,"n1"],["\u80a1\u606f\u7387",100*u,"n1"],["\u4ef7\u683c",o,"n2"],["ROE",100*c,"n1"],["\u589e1",b[0],"p0"],["\u589e2",b[1],"p0"],["\u589e3",b[2],"p0"],["\u589e4",b[3],"p0"],["\u9884\u589e",d,"p0"],["\u5e02\u503c",h*o,"yi"]];return Object(N.jsxs)("div",{className:"d-block",children:[Object(N.jsx)(s.LMR,{className:"px-1 py-1",left:f,right:r}),Object(N.jsx)("div",{className:"d-flex flex-wrap",children:v.map((function(e){return D(e[0],e[1],e[2])}))})]})}function F(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return void 0===e?"":e.toFixed(t)}var L,R,E,V,M,_,W,B,q,H,U,z,$=function(e){Object(i.a)(r,e);var t=Object(c.a)(r);function r(){var e;Object(a.a)(this,r);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).setSortType=function(t){e.controller.setSortType(t)},e.renderRow=function(t,r){return e.rowContent(t)},e.rowContent=function(t){var r=t.symbol,n=Object(N.jsx)("div",{className:"d-flex",children:Object(N.jsx)("a",{className:"px-3 text-info",href:"https://finance.sina.com.cn/realstock/company/".concat(r,"/nc.shtml"),target:"_blank",rel:"noopener noreferrer",onClick:function(e){e.stopPropagation()},children:"\u65b0\u6d6a\u8d22\u7ecf"})});return P(t,e.onClickName,n)},e.rowKey=function(e){return e.id},e.onClickName=function(t){e.controller.openStockInfo(t)},e.onSelected=function(){var e=Object(b.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:0;case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.clickRow=function(t){e.callOnSelected(t)},e}return Object(n.a)(r,[{key:"header",value:function(){return console.log("vHome headr"),"\u9996\u9875"}},{key:"right",value:function(){var e=this;return console.log("vHome right"),Object(N.jsx)("button",{className:"btn btn-sm btn-info",onClick:function(){e.controller.openMarketPE()},children:"\u5e02\u573a\u5e73\u5747PE"})}},{key:"onPageScrollBottom",value:function(e){this.controller.onPage()}},{key:"content",value:function(){var e=this;return console.log("vHome content"),O.createElement(Object(A.observer)((function(){var t=e.controller.cApp.config.tagName,r=e.controller.items,n=e.controller,a=n.onSelectTag,i=n.onAddStock,c=Object(N.jsxs)("div",{className:"d-flex",children:[Object(N.jsx)("div",{className:"btn cursor-pointer",onClick:i,children:Object(N.jsx)(s.FA,{name:"plus",inverse:!1})}),Object(N.jsx)("div",{className:"btn cursor-pointer ml-2",onClick:a,children:Object(N.jsx)(s.FA,{name:"bars",inverse:!1})})]}),o=Object(N.jsx)("div",{className:"align-self-center",children:t});return Object(N.jsxs)("div",{children:[Object(N.jsx)(s.LMR,{className:"px-3 py-1",left:o,right:c}),Object(N.jsx)(s.List,{header:I(e.setSortType),items:r,item:{render:e.renderRow,key:e.rowKey},before:"\u641c\u7d22",none:"----"})]})})))}},{key:"callOnSelected",value:function(e){void 0!==this.onSelected?this.onSelected(e):alert("onSelect is undefined")}}]),r}(s.VPage),K=r(18),G=function(e){Object(i.a)(r,e);var t=Object(c.a)(r);function r(){var e;Object(a.a)(this,r);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).renderTag=function(e){return Object(N.jsx)("div",{className:"px-3 py-2 cursor-pointer",children:e.name})},e.page=Object(K.c)((function(){var t=e.controller.cApp.tags,r=e.controller.onClickTag;return Object(N.jsx)(s.Page,{header:"\u9009\u62e9\u5206\u7ec4",headerClassName:"bg-primary",children:Object(N.jsx)(s.List,{items:t,item:{onClick:r,render:e.renderTag}})})})),e}return Object(n.a)(r,[{key:"open",value:function(){var e=Object(b.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(s.VPage),J=r(7),Y=r(32),X=r.n(Y),Z=function(e){Object(i.a)(r,e);var t=Object(c.a)(r);function r(){var e,n=this;Object(a.a)(this,r);for(var i=arguments.length,c=new Array(i),o=0;o<i;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).input=void 0,e.key=void 0,e.checkLimitShow=function(t){var r=t.target.checked?1:0;e.controller.onLongShortFlag(r)},e.page=Object(A.observer)((function(){var e=Object(N.jsx)("div",{children:""});return Object(N.jsx)(s.Page,{header:e,headerClassName:"bg-primary",children:Object(N.jsx)(n.pageContent,{})})})),e.pageContent=Object(A.observer)((function(){return Object(N.jsx)(N.Fragment,{children:Object(N.jsx)(n.historyChart,{})})})),e.historyChart=Object(A.observer)((function(){var t=e.controller.historyData;if(void 0===t)return Object(N.jsx)(N.Fragment,{});var r,n=N.Fragment,a=[],i=[],c=[],o=Object(f.a)(t);try{for(o.s();!(r=o.n()).done;){var u=r.value,l=u.day,p=u.pe,d=u.e;a.push(l),i.push(J.a.numberToPrecision(p,4)),c.push(d)}}catch(v){o.e(v)}finally{o.f()}var h={labels:a,datasets:[{label:"PE",data:i,borderColor:"blue",backgroundColor:"skyBlue",borderWidth:1,fill:!1,yAxisID:"y-axis-1"},{label:"e",data:c,borderColor:"red",backgroundColor:"pink",borderWidth:1,fill:!1,yAxisID:"y-axis-2"}]};n=Object(N.jsx)(X.a,{data:h,type:"line",options:{scales:{yAxes:[{type:"linear",display:!0,position:"right",id:"y-axis-1"},{type:"linear",display:!0,position:"left",id:"y-axis-2",gridLines:{drawOnChartArea:!1}}]}}});var b=N.Fragment;return b=Object(N.jsxs)("label",{className:"px-3",children:[" ",Object(N.jsx)("input",{type:"checkbox",name:"selectType",defaultChecked:!1,onChange:e.checkLimitShow}),"\u957f\u671f"]}),Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(s.LMR,{className:"px-3 py-2 bg-white",left:"\u5e02\u573aPE\u5386\u53f2\u8d70\u52bf",right:b}),Object(N.jsx)("div",{className:"px-3",style:{width:"95%"},children:n})]})})),e}return Object(n.a)(r,[{key:"open",value:function(){var e=Object(b.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(e){return Object(N.jsx)(this.page,{})}}]),r}(s.VPage),Q=(L=function(e){Object(i.a)(r,e);var t=Object(c.a)(r);function r(){var e;Object(a.a)(this,r);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return e=t.call.apply(t,[this].concat(i)),Object(v.a)(e,"historyData",R,Object(m.a)(e)),e.longshortFlag=0,e.loadData=Object(b.a)(h.a.mark((function t(){var r,n,a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new Date,n=[1e4*r.getFullYear()+100*(r.getMonth()+1)+r.getDate(),750,e.longshortFlag],t.next=4,e.cApp.miApi.query("q_marketpe",n);case 4:a=t.sent,e.historyData=a.reverse();case 6:case"end":return t.stop()}}),t)}))),e}return Object(n.a)(r,[{key:"internalStart",value:function(){var e=Object(b.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.loadData(),this.openVPage(Z);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onLongShortFlag",value:function(e){e!==this.longshortFlag&&(this.longshortFlag=e,this.loadData())}}]),r}(o),R=Object(j.a)(L.prototype,"historyData",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),L),ee=r(51),te=(E=function(e){Object(i.a)(r,e);var t=Object(c.a)(r);function r(){var e;Object(a.a)(this,r);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).items=g.observable.array([],{deep:!0}),e.userTag=void 0,e.oldSortType=void 0,Object(v.a)(e,"warnings",V,Object(m.a)(e)),e.onSelectTag=Object(b.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.openVPage(G);case 1:case"end":return t.stop()}}),t)}))),e.onAddStock=Object(b.a)(h.a.mark((function t(){var r,n,a,i;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new ee.a(e.cApp),t.next=3,r.call();case 3:if(void 0===(n=t.sent)){t.next=14;break}if(!((a=n.id)>0)){t.next=14;break}return i=e.cApp.defaultListTagID,t.next=10,e.cApp.miApi.call("t_tagstock$add",[e.user.id,i,a]);case 10:return t.next=12,e.cApp.AddTagStockID(i,a);case 12:return t.next=14,e.load();case 14:case"end":return t.stop()}}),t)}))),e.onClickTag=function(){var t=Object(b.a)(h.a.mark((function t(r){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.cApp.selectTag(r);case 2:e.closePage();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onPage=Object(b.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),e.onWarningConfg=function(){e.cApp.cWarning.onWarningConfg()},e.load=Object(b.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.cApp.tagID>0)){t.next=4;break}return t.next=4,e.loadItems();case 4:case"end":return t.stop()}}),t)}))),e.setSortType=function(t){e.cApp.setUserSortType(t);var r=e.items.slice();e.cApp.sortStocks(r),e.items.replace(r)},e.renderSiteHeader=function(){return e.renderView(S)},e.renderSearchHeader=function(t){return e.renderView(T,t)},e.renderHome=function(){return console.log("cHome renderHome2"),e.renderView($)},e.openMetaView=function(){},e.tab=function(){return console.log("cHome get tab2"),e.renderHome()},e.openStockInfo=function(t){e.newC(y.CStockInfo).start(t)},e.openMarketPE=function(){e.newC(Q).start()},e}return Object(n.a)(r,[{key:"AddTagStockID",value:function(e,t){this.userTag&&this.userTag.tagID===e&&this.load()}},{key:"RemoveTagStockID",value:function(e,t){if(this.userTag&&this.userTag.tagID===e){var r=this.items.findIndex((function(e){return e.id===t}));r>=0&&this.items.splice(r,1)}}},{key:"internalStart",value:function(){var e=Object(b.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadItems",value:function(){var e=Object(b.a)(h.a.mark((function e(){var t,r,n,a,i,c,s,o,u,l,d,b;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"taguser",r={name:"taguser",pageStart:0,pageSize:1e3,user:this.user.id,tag:this.cApp.tagID,yearlen:1},e.next=4,this.cApp.miApi.process(r,[]);case 4:if(n=e.sent,!1!==Array.isArray(n)){e.next=7;break}return e.abrupt("return");case 7:a=n,i=Object(f.a)(a);try{for(i.s();!(c=i.n()).done;)s=c.value,o=JSON.parse(s.data),s.dataArr=o,u=new x.b(o),s.ep=(u.predict(4)+s.e)/2,s.e3=u.predict(7),s.v=J.a.calculateVN(u.slopeR,s.ep,s.divyield*s.price,s.exprice),s.predictpe=s.price/s.e3}catch(h){i.e(h)}finally{i.f()}this.cApp.sortStocks(a),l=1,d=Object(f.a)(a);try{for(d.s();!(b=d.n()).done;)b.value.order=l,++l}catch(h){d.e(h)}finally{d.f()}this.items.clear(),(t=this.items).push.apply(t,Object(p.a)(a));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadWarning",value:function(){var e=Object(b.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.cApp.miApi.query("q_warnings",[this.cApp.user.id]);case 2:void 0!==(t=e.sent)&&Array.isArray(t)?this.warnings=t:this.warnings.length>0&&(this.warnings=[]);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),r}(o),V=Object(j.a)(E.prototype,"warnings",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),E),re=function(e){Object(i.a)(r,e);var t=Object(c.a)(r);function r(){var e;Object(a.a)(this,r);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).renderRootUnit=function(e,t){var r=e.id,n=e.owner,a=e.name,i=e.tonvaUnit,c=e.x,o=Object(N.jsxs)("small",{className:"text-muted",children:["ID=",r]}),u=0!==c?Object(N.jsxs)("del",{children:[a," ",o]}):Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("b",{children:a})," ",o]});return Object(N.jsxs)("div",{className:"px-3 py-2 align-items-center ",children:[Object(N.jsx)("div",{className:"mr-3",children:u}),Object(N.jsx)("div",{className:"small text-muted d-flex align-items-center",children:Object(N.jsx)(s.UserView,{user:n,render:function(e){var t=e.name,r=e.nick,n=e.icon;return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(s.Image,{className:"w-1-5c h-1-5c mr-2",src:n||".user-o"}),r||t]})}})}),i&&Object(N.jsxs)("div",{className:"ml-auto small text-muted",children:["tonva=",i]})]})},e.onClickRootUnit=function(t){var r=t.name;e.openPageElement(Object(N.jsx)(s.Page,{header:r,children:Object(N.jsx)(s.Edit,{schema:[{name:"name",type:"string"},{name:"tonvaUnit",type:"integer"},{name:"x",type:"boolean"}],uiSchema:{items:{name:{widget:"text",label:"\u673a\u6784\u540d\u79f0"},tonvaUnit:{widget:"number",label:"Tonva Unit"},x:{widget:"checkbox",label:"\u505c\u7528",trueValue:1,falseValue:0}}},data:t,onItemChanged:function(){var r=Object(b.a)(h.a.mark((function r(n,a,i){return h.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.onItemChanged(t,n,a,i);case 2:case"end":return r.stop()}}),r)})));return function(e,t,n){return r.apply(this,arguments)}}()})}))},e.onItemChanged=function(){var t=Object(b.a)(h.a.mark((function t(r,n,a,i){var c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=n.name,t.next="name"===t.t0?3:"tonvaUnit"===t.t0?9:"x"===t.t0?12:15;break;case 3:if((c=a.trim())!==i.trim()){t.next=6;break}return t.abrupt("break",15);case 6:return t.next=8,e.controller.changeRootUnitName(r,c);case 8:return t.abrupt("break",15);case 9:return t.next=11,e.controller.changeRootUnitTonva(r,a);case 11:return t.abrupt("break",15);case 12:return t.next=14,e.controller.changeRootUnitX(r,a);case 14:return t.abrupt("break",15);case 15:case"end":return t.stop()}}),t)})));return function(e,r,n,a){return t.apply(this,arguments)}}(),e}return Object(n.a)(r,[{key:"header",value:function(){return"\u7ba1\u7406\u5458"}},{key:"content",value:function(){var e=this;return Object(N.jsxs)("div",{children:[Object(N.jsxs)("div",{className:"px-3 py-3 bg-white border-bottom",children:[Object(N.jsx)("div",{children:Object(N.jsx)("b",{className:"text-info",children:"\u4e3a\u7528\u6237\u521b\u5efa\u673a\u6784"})}),Object(N.jsx)("div",{children:"\u7ed9\u6307\u5b9a\u7528\u6237\u521b\u5efa\u673a\u6784\u3002\u673a\u6784\u4e0b\u9762\u7684\u90e8\u95e8\u548c\u6210\u5458\uff0c\u7531\u673a\u6784\u6240\u6709\u8005\u521b\u5efa\u3002"}),Object(N.jsx)("div",{className:"my-2",children:Object(N.jsx)("button",{className:"btn btn-primary",onClick:function(){return e.openVPage(ne)},children:"\u521b\u5efa"})})]}),Object(N.jsx)(s.List,{items:this.controller.rootUnits,item:{render:this.renderRootUnit,onClick:this.onClickRootUnit}})]})}}]),r}(s.VPage),ne=(M=function(e){Object(i.a)(r,e);var t=Object(c.a)(r);function r(){var e;Object(a.a)(this,r);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return e=t.call.apply(t,[this].concat(i)),Object(v.a)(e,"hasError",_,Object(m.a)(e)),Object(v.a)(e,"user",W,Object(m.a)(e)),Object(v.a)(e,"inputName",B,Object(m.a)(e)),e.onKeyDown=function(){var t=Object(b.a)(h.a.mark((function t(r){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.hasError=!1,13!==r.keyCode){t.next=4;break}return t.next=4,e.onNext();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onChange=function(t){e.inputName=t.currentTarget.value},e.onNext=Object(b.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.search(e.inputName.trim());case 2:!1===e.hasError&&(e.controller.unitOwner=e.user,e.openVPage(ae));case 3:case"end":return t.stop()}}),t)}))),e.search=function(){var t=Object(b.a)(h.a.mark((function t(r){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.userApi.fromKey(r);case 2:if(n=t.sent){t.next=6;break}return e.hasError=!0,t.abrupt("return");case 6:e.user=n;case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(n.a)(r,[{key:"header",value:function(){return"\u673a\u6784\u6240\u6709\u8005"}},{key:"content",value:function(){var e=this;return k.a.createElement(Object(A.observer)((function(){var t,r;return!0===e.hasError&&(r=Object(N.jsx)("div",{className:"my-3 text-danger",children:"\u7528\u6237\u4e0d\u5b58\u5728\uff01"})),Object(N.jsxs)("div",{className:"m-3",children:[Object(N.jsx)("div",{children:Object(N.jsx)("input",{type:"text",className:"form-control",maxLength:100,placeholder:"\u7528\u6237",onFocus:function(){return e.hasError=!1},onKeyDown:e.onKeyDown,onChange:e.onChange})}),r,Object(N.jsx)("div",{className:"my-2",children:Object(N.jsx)("button",{className:"btn btn-primary",disabled:0===(null===(t=e.inputName)||void 0===t?void 0:t.trim().length),onClick:e.onNext,children:"\u4e0b\u4e00\u6b65"})})]})})))}}]),r}(s.VPage),_=Object(j.a)(M.prototype,"hasError",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),W=Object(j.a)(M.prototype,"user",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=Object(j.a)(M.prototype,"inputName",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M),ae=(q=function(e){Object(i.a)(r,e);var t=Object(c.a)(r);function r(){var e;Object(a.a)(this,r);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return e=t.call.apply(t,[this].concat(i)),Object(v.a)(e,"input",H,Object(m.a)(e)),e.onChange=function(t){e.input=t.currentTarget.value},e.onKeyDown=function(){var t=Object(b.a)(h.a.mark((function t(r){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(13!==r.keyCode){t.next=3;break}return t.next=3,e.onCreate();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onCreate=Object(b.a)(h.a.mark((function t(){var r,n,a,i;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.controller.createRootUnit({name:e.input.trim(),content:void 0,owner:e.controller.user.id});case 2:r=t.sent,n="\u9519\u8bef",a="text-danger",t.t0=r,t.next=-1===t.t0?11:-2===t.t0?13:7;break;case 7:return n="\u6210\u529f",a="text-success",i="\u673a\u6784\u521b\u5efa\u6210\u529f\uff01",t.abrupt("break",15);case 11:return i="\u65e0\u6743\u521b\u5efa\u673a\u6784",t.abrupt("break",15);case 13:return i="\u673a\u6784\u540d\u79f0\u5df2\u7ecf\u88ab\u4f7f\u7528\u4e86",t.abrupt("break",15);case 15:e.openPageElement(Object(N.jsx)(s.Page,{header:n,afterBack:function(){return e.closePage(3)},back:"close",children:Object(N.jsx)("div",{className:"m-3 "+a,children:i})}));case 16:case"end":return t.stop()}}),t)}))),e}return Object(n.a)(r,[{key:"header",value:function(){return"\u65b0\u5efa\u673a\u6784"}},{key:"content",value:function(){var e=this;return k.a.createElement(Object(A.observer)((function(){var t,r=e.controller.unitOwner,n=r.icon,a=r.name,i=r.nick;return Object(N.jsxs)("div",{className:"m-3",children:[Object(N.jsxs)("div",{className:"my-2",children:["\u6240\u6709\u8005: ",Object(N.jsx)(s.Image,{className:"w-2c h-2c",src:n})," ",null!==i&&void 0!==i?i:a," "]}),Object(N.jsx)("div",{children:Object(N.jsx)("input",{type:"text",className:"form-control",maxLength:100,placeholder:"\u673a\u6784\u540d\u79f0",onChange:e.onChange,onKeyDown:e.onKeyDown})}),Object(N.jsx)("div",{className:"my-2",children:Object(N.jsx)("button",{className:"btn btn-primary",disabled:0===(null===(t=e.input)||void 0===t?void 0:t.trim().length),onClick:e.onCreate,children:"\u521b\u5efa\u673a\u6784"})})]})})))}}]),r}(s.VPage),H=Object(j.a)(q.prototype,"input",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q),ie=(U=function(e){Object(i.a)(r,e);var t=Object(c.a)(r);function r(e){var n;Object(a.a)(this,r),(n=t.call(this,e)).schema=[{name:"nick",type:"string"},{name:"icon",type:"image"}],n.uiSchema={items:{nick:{widget:"text",label:"\u522b\u540d",placeholder:"\u597d\u7684\u522b\u540d\u66f4\u65b9\u4fbf\u8bb0\u5fc6"},icon:{widget:"image",label:"\u5934\u50cf"}}},Object(v.a)(n,"data",z,Object(m.a)(n)),n.onItemChanged=function(){var e=Object(b.a)(h.a.mark((function e(t,r,a){var i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.name,e.next=3,s.userApi.userSetProp(i,r);case 3:n.data[i]=r,s.nav.user.name=r,s.nav.saveLocalUser();case 6:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),n.page=function(){var e,t=Object(m.a)(n),r=t.schema,a=t.uiSchema,i=t.data,c=t.onItemChanged;return 2===(2&n.controller.role)&&(e=Object(N.jsx)("div",{className:"px-3 py-2 cursor-pointer bg-white border-bottom",onClick:n.controller.showAdmin,children:"\u7ba1\u7406\u5458"})),Object(N.jsxs)(s.Page,{header:"\u4e2a\u4eba\u4fe1\u606f",children:[Object(N.jsx)(s.Edit,{schema:r,uiSchema:a,data:i,onItemChanged:c}),e]})};var i=s.nav.user,c=i.nick,o=i.icon;return n.data={nick:c,icon:o},n}return Object(n.a)(r,[{key:"open",value:function(){var e=Object(b.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(s.VPage),z=Object(j.a)(U.prototype,"data",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U),ce=function(e){Object(i.a)(r,e);var t=Object(c.a)(r);function r(){var e;Object(a.a)(this,r);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).onExit=function(){s.nav.showLogout()},e.changePassword=Object(b.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.nav.changePassword();case 2:case"end":return e.stop()}}),e)}))),e.meInfo=Object(A.observer)((function(){var t=s.nav.user;if(void 0===t)return null;var r=t.id,n=t.name,a=t.nick,i=t.icon;return Object(N.jsx)(s.LMR,{className:"py-2 cursor-pointer w-100",left:Object(N.jsx)(s.Image,{className:"w-3c h-3c mr-3",src:i||".user-o"}),right:Object(N.jsx)(s.FA,{className:"align-self-end",name:"angle-right"}),onClick:e.controller.showEditMe,children:Object(N.jsxs)("div",{children:[Object(N.jsx)("div",{children:se(n,a)}),Object(N.jsxs)("div",{className:"small",children:[Object(N.jsx)("span",{className:"text-muted",children:"ID:"})," ",r>1e4?r:String(r+1e4).substr(1)]})]})})})),e}return Object(n.a)(r,[{key:"header",value:function(){return this.t("me")}},{key:"content",value:function(){var e,t=s.nav.user,r=["",{type:"component",component:Object(N.jsxs)("div",{className:"w-100 d-flex justify-content-between",children:[Object(N.jsx)(s.IconText,{iconClass:"text-info mr-2",icon:"smile-o",text:this.t("aboutTheApp")}),Object(N.jsxs)("div",{className:"py-2 small",children:["V",$e.version]})]})}];if(void 0===t)(e=r).push({type:"component",component:Object(N.jsxs)("button",{className:"btn btn-success w-100 my-2",onClick:function(){return s.nav.logout()},children:[Object(N.jsx)(s.FA,{name:"sign-out",size:"lg"})," ",this.t("pleaseLogin")]})});else{var n,a=["",{type:"component",bk:"",component:Object(N.jsxs)("button",{className:"btn btn-danger w-100",onClick:this.onExit,children:[Object(N.jsx)(s.FA,{name:"sign-out",size:"lg"})," ",this.t("logout")]})}];(n=e=["",{type:"component",component:Object(N.jsx)(this.meInfo,{})},"",{type:"component",component:Object(N.jsx)(s.IconText,{iconClass:"text-info mr-2",icon:"key",text:this.t("changePassword")}),onClick:this.changePassword}]).push.apply(n,r.concat(a))}return Object(N.jsx)(s.PropGrid,{rows:Object(p.a)(e),values:{}})}}]),r}(s.VPage);function se(e,t){return t?Object(N.jsx)(N.Fragment,{children:Object(N.jsxs)("b",{children:[t," \xa0 ",Object(N.jsx)("small",{className:"muted",children:e})]})}):Object(N.jsx)("b",{children:e})}var oe=function(e){Object(i.a)(r,e);var t=Object(c.a)(r);function r(){var e;Object(a.a)(this,r);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).role=void 0,e.unitOwner=void 0,e.rootUnits=void 0,e.tab=function(){return e.renderView(ce)},e.showEditMe=Object(b.a)(h.a.mark((function t(){var r,n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.uqs.Notes.GetSystemRole.query({});case 2:n=t.sent,e.role=null===(r=n.ret[0])||void 0===r?void 0:r.role,e.openVPage(ie);case 5:case"end":return t.stop()}}),t)}))),e.showAdmin=Object(b.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.rootUnits=new s.QueryPager(e.uqs.Notes.GetRootUnits,void 0,void 0,!0),e.rootUnits.first({}),e.openVPage(re);case 3:case"end":return t.stop()}}),t)}))),e}return Object(n.a)(r,[{key:"internalStart",value:function(){var e=Object(b.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"createRootUnit",value:function(){var e=Object(b.a)(h.a.mark((function e(t){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.uqs.Notes.CreateRootUnit.submit(t);case 2:return r=e.sent,e.abrupt("return",r.id);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"changeRootUnitName",value:function(){var e=Object(b.a)(h.a.mark((function e(t,r){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.uqs.Notes.ChangeRootUnitProp.submit({unit:t.id,prop:"name",value:r});case 2:t.name=r;case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"changeRootUnitTonva",value:function(){var e=Object(b.a)(h.a.mark((function e(t,r){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.uqs.Notes.ChangeRootUnitProp.submit({unit:t.id,prop:"tonvaUnit",value:r});case 2:t.tonvaUnit=r;case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"changeRootUnitX",value:function(){var e=Object(b.a)(h.a.mark((function e(t,r){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.uqs.Notes.ChangeRootUnitProp.submit({unit:t.id,prop:"x",value:r});case 2:t.x=r;case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()}]),r}(o),ue=r(20),le=r.n(ue);var pe=function(){function e(t,r,n){var i=this;Object(a.a)(this,e),this.hostUrl=void 0,this.apiToken=void 0,this.ui=void 0,this.timeout=void 0,this.startWait=function(){void 0!==i.ui&&i.ui.startWait()},this.endWait=function(e,t){void 0!==i.ui&&i.ui.endWait(),void 0!==t&&t("\u8bbf\u95eewebapi\u8d85\u65f6 "+e)},this.showError=function(){var e=Object(b.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===i.ui){e.next=3;break}return e.next=3,i.ui.showError(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.hostUrl=t,this.apiToken=r,this.ui=n,this.timeout=!0===l.isDevelopment?5e5:2e4}return Object(n.a)(e,[{key:"used",value:function(){this.post("",{})}},{key:"get",value:function(){var e=Object(b.a)(h.a.mark((function e(t){var r,n,a,i,c,s,o,u=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=u.length>1&&void 0!==u[1]?u[1]:void 0)){e.next=25;break}if(!((n=Object.keys(r)).length>0)){e.next=25;break}a="?",i=Object(f.a)(n),e.prev=6,i.s();case 8:if((c=i.n()).done){e.next=17;break}if(s=c.value,void 0!==r[s]){e.next=13;break}return e.abrupt("continue",15);case 13:t+=a+s+"="+r[s],a="&";case 15:e.next=8;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(6),i.e(e.t0);case 22:return e.prev=22,i.f(),e.finish(22);case 25:return(o=this.buildOptions()).method="GET",e.next=29,this.innerFetch(t,o);case 29:return e.abrupt("return",e.sent);case 30:case"end":return e.stop()}}),e,this,[[6,19,22,25]])})));return function(t){return e.apply(this,arguments)}}()},{key:"post",value:function(){var e=Object(b.a)(h.a.mark((function e(t,r){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=this.buildOptions()).method="POST",n.body=JSON.stringify(r),e.next=5,this.innerFetch(t,n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"put",value:function(){var e=Object(b.a)(h.a.mark((function e(t,r){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=this.buildOptions()).method="PUT",n.body=JSON.stringify(r),e.next=5,this.innerFetch(t,n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(b.a)(h.a.mark((function e(t,r){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=this.buildOptions()).method="DELETE",n.body=JSON.stringify(r),e.next=5,this.innerFetch(t,n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"fetch",value:function(e){function t(t,r,n,a){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e=Object(b.a)(h.a.mark((function e(t,r,n,a){var i,c,o,u,l,p,d;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=function(e){return{channel:i,url:c,options:r,resolve:n,reject:a,error:e}},i=this,this.startWait(),c=t,e.prev=4,console.log("%s %s",r.method,c),u=setTimeout((function(){return i.endWait(t,a)}),this.timeout),e.next=9,fetch(encodeURI(c),r);case 9:if(!1!==(l=e.sent).ok){e.next=15;break}throw clearTimeout(u),i.endWait(),console.log("call error %s",l.statusText),l.statusText;case 15:if(!((p=l.headers.get("content-type"))&&p.indexOf("json")>=0)){e.next=20;break}return e.abrupt("return",l.json().then(function(){var e=Object(b.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(clearTimeout(u),i.endWait(),!0!==t.ok){e.next=4;break}return e.abrupt("return",n(t.res));case 4:if(void 0!==t.error){e.next=9;break}return e.next=7,i.showError(o("not valid tonva json"));case 7:e.next=12;break;case 9:return e.next=11,i.showError(o(t.error));case 11:a(t.error);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch(function(){var e=Object(b.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.showError(o(t.message));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 20:return e.next=22,l.text();case 22:d=e.sent,clearTimeout(u),i.endWait(),n(d);case 26:e.next=36;break;case 28:if(e.prev=28,e.t0=e.catch(4),"string"!==typeof e.t0){e.next=34;break}if(!0!==e.t0.toLowerCase().startsWith("unauthorized")){e.next=34;break}return s.nav.logout(),e.abrupt("return");case 34:return e.next=36,this.showError(o(e.t0.message));case 36:case 37:case"end":return e.stop()}}),e,this,[[4,28]])})));return function(t,r,n,a){return e.apply(this,arguments)}}())},{key:"innerFetch",value:function(){var e=Object(b.a)(h.a.mark((function e(t,r){var n,a=this;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.hostUrl+t,e.next=3,new Promise(function(){var e=Object(b.a)(h.a.mark((function e(t,i){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.fetch(n,r,t,i);case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}());case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"callFetch",value:function(){var e=Object(b.a)(h.a.mark((function e(t,r,n){var a,i=this;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=this.buildOptions()).method=r,a.body=n,e.next=5,new Promise(function(){var e=Object(b.a)(h.a.mark((function e(r,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.fetch(t,a,r,n);case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}());case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"buildOptions",value:function(){var e=s.nav.language,t=s.nav.culture,r=new Headers;r.append("Content-Type","application/json;charset=UTF-8");var n=e;return t&&(n+="-"+t),r.append("Accept-Language",n),this.apiToken&&r.append("Authorization",this.apiToken),{headers:r}}}]),e}(),de=function(){function e(){Object(a.a)(this,e)}return Object(n.a)(e,[{key:"startWait",value:function(){s.nav.startWait()}},{key:"endWait",value:function(){s.nav.endWait()}},{key:"showError",value:function(){var e=Object(b.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.nav.endWait(),e.next=3,s.nav.onError(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();var he,be,fe,ve,me,je,ge,xe,ye,Oe,ke={},we={},Ne=function(e){Object(i.a)(r,e);var t=Object(c.a)(r);function r(e,n,i,c,s){var o;return Object(a.a)(this,r),(o=t.call(this,n,s)).apiName=void 0,o.url=void 0,o.showWaiting=s,o.apiName=i,o.token=c,o.url=e,o}return Object(n.a)(r,[{key:"getHttpChannel",value:function(){var e=Object(b.a)(h.a.mark((function e(){var t,r,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0===this.showWaiting||void 0===this.showWaiting?(t=ke,r=new de):t=we,void 0===(n=t[this.apiName])){e.next=4;break}return e.abrupt("return",n);case 4:return n=new pe(this.url,this.token,r),e.abrupt("return",t[this.apiName]=n);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),r}(function(){function e(t,r){Object(a.a)(this,e),this.token=void 0,this.path=void 0,this.showWaiting=void 0,this.path=t||"",this.showWaiting=r}return Object(n.a)(e,[{key:"call",value:function(){var e=Object(b.a)(h.a.mark((function e(t,r,n){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getHttpChannel();case 2:return a=e.sent,e.next=5,a.callFetch(t,r,n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=Object(b.a)(h.a.mark((function e(t){var r,n,a=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:void 0,e.next=3,this.getHttpChannel();case 3:return n=e.sent,e.next=6,n.get(this.path+t,r);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"post",value:function(){var e=Object(b.a)(h.a.mark((function e(t,r){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getHttpChannel();case 2:return n=e.sent,e.next=5,n.post(this.path+t,r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"put",value:function(){var e=Object(b.a)(h.a.mark((function e(t,r){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getHttpChannel();case 2:return n=e.sent,e.next=5,n.put(this.path+t,r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(b.a)(h.a.mark((function e(t,r){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getHttpChannel();case 2:return n=e.sent,e.next=5,n.delete(this.path+t,r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()}]),e}()),Se=function(){function e(t,r,n,i,c){Object(a.a)(this,e),this.channel=void 0,this.channel=new Ne(t,r,n,i,c)}return Object(n.a)(e,[{key:"call",value:function(){var e=Object(b.a)(h.a.mark((function e(t,r){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={call:t,params:r},e.next=3,this.channel.post("sql/call",n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"query",value:function(){var e=Object(b.a)(h.a.mark((function e(t,r){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={call:t,params:r},e.next=3,this.channel.post("sql/call",n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"page",value:function(){var e=Object(b.a)(h.a.mark((function e(t,r,n,a){var i,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=typeof r,e.next="undefined"===e.t0?3:5;break;case 3:return i=[],e.abrupt("break",7);case 5:return i=le.a.clone(r),e.abrupt("break",7);case 7:return i.push(n),i.push(a),c={call:t,params:i},e.next=12,this.channel.post("sql/call",c);case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e,this)})));return function(t,r,n,a){return e.apply(this,arguments)}}()},{key:"process",value:function(){var e=Object(b.a)(h.a.mark((function e(t,r){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={proc:t,params:r},e.next=3,this.channel.post("sql/query",n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()}]),e}(),Te=function(e){return!0===e?"text-primary":"text-muted"},Ae=function(e){Object(i.a)(r,e);var t=Object(c.a)(r);function r(){var e;Object(a.a)(this,r);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).render=function(t){var r=e.controller,n=r.cHome,a=r.cExporer,i=r.cMe,c=[{name:"home",label:"\u9996\u9875",icon:"home",content:n.tab,notify:void 0,onShown:n.load},{name:"explorer",label:"\u9009\u80a1",icon:"search",content:a.tab,load:a.load},{name:"me",label:"\u6211\u7684",icon:"user",content:i.tab,onShown:void 0}].map((function(e){var t=e.name,r=e.label,n=e.icon;return{name:t,caption:function(e){return Object(s.TabCaptionComponent)(r,n,Te(e))},content:e.content,notify:e.notify,load:e.load,onShown:e.onShown}}));return Object(N.jsx)(s.Page,{header:!1,tabsProps:{tabs:c}})},e}return Object(n.a)(r,[{key:"open",value:function(){var e=Object(b.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.render);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(s.VPage),Ce=function(e){Object(i.a)(r,e);var t=Object(c.a)(r);function r(){return Object(a.a)(this,r),t.apply(this,arguments)}return Object(n.a)(r,[{key:"render",value:function(){s.FA;var e=Object(N.jsx)("img",{className:"m-1",src:w,alt:"logo",style:{height:"3rem",width:"3rem"}});return Object(N.jsx)(s.LMR,{className:"mb-3 align-items-center bg-white",left:e,right:undefined,children:Object(N.jsx)("div",{className:"",children:this.controller.renderSiteHeader()})})}}]),r}(s.View),Ie=r(36),De=function(e){Object(i.a)(r,e);var t=Object(c.a)(r);function r(){var e,n=this;Object(a.a)(this,r);for(var i=arguments.length,c=new Array(i),s=0;s<i;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).onClickPredictAVG=function(){var t=e.controller,r=t.avgs,n={day:void 0,priceDay:t.lastTradeDay,avg20:r.avg20,avg50:r.avg50,avg100:r.avg100,avg:r.avg};e.controller.cApp.openPredictAVG(n)},e.renderRow=function(e,t){return Object(N.jsx)(n.rowContent,Object(Ie.a)({},e))},e.rowContent=function(t){if(e.controller.cApp.blackList.findIndex((function(e){return e===n}))>=0)return null;var r=t,n=r.id,a=r.symbol,i="vexl_"+n,c=e.controller.cApp.defaultList.findIndex((function(e){return e===n})),s=Object(N.jsxs)("div",{className:"d-flex",children:[Object(N.jsxs)("label",{className:"px-2",children:[Object(N.jsx)("input",{className:"mr-1",type:"checkbox",value:"",id:i,defaultChecked:c>=0,onChange:function(r){return e.onSelect(t,r.target.checked)}}),Object(N.jsx)("small",{className:"text-muted",children:"\u81ea\u9009"})]}),Object(N.jsx)("a",{className:"px-3 text-info",href:"https://finance.sina.com.cn/realstock/company/".concat(a,"/nc.shtml"),target:"_blank",rel:"noopener noreferrer",onClick:function(e){e.stopPropagation()},children:"\u65b0\u6d6a\u8d22\u7ecf"})]});return P(t,e.onClickName,s)},e.rowKey=function(e){return void 0!==e.item?e.item.id:e.id},e.setSortType=function(t){e.controller.setSortType(t)},e.onClickName=function(t){e.controller.openStockInfo(t)},e.onSelect=function(){var t=Object(b.a)(h.a.mark((function t(r,n){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.controller.onSelectItem(r,n);case 1:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),e.onClickItem=function(){var t=Object(b.a)(h.a.mark((function t(r){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.controller.openStockInfo(r);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(n.a)(r,[{key:"header",value:function(){return"\u80a1\u7968\u53d1\u73b0"}},{key:"onPageScrollBottom",value:function(e){this.controller.onPage()}},{key:"right",value:function(){var e=this.controller.onConfig;return Object(N.jsx)("div",{className:"btn align-self-center cursor-pointer ",onClick:e,children:Object(N.jsx)(s.FA,{name:"cog",size:"lg",inverse:!0})})}},{key:"content",value:function(){var e=this;return O.createElement(Object(A.observer)((function(){var t,r=e.controller,n=r.items,a=r.avgs,i=r.reload,c=Object(N.jsx)("div",{children:Object(N.jsx)("div",{className:"btn cursor-pointer py-3",onClick:i,children:"\u5237\u65b0"})});if(void 0!==a.avg20||void 0!==a.avg50||void 0!==a.avg100){var o=" top20 : "+J.a.numberToFixString(a.avg20)+"  -  top50 : "+J.a.numberToFixString(a.avg50)+"  -  top100 : "+J.a.numberToFixString(a.avg100)+"  -  all : "+J.a.numberToFixString(a.avg)+"  ...\u67e5\u770b\u5386\u53f2\u8d70\u52bf";t=Object(N.jsx)(s.LMR,{right:c,children:Object(N.jsxs)("div",{className:"px-3 cursor-pointer",onClick:e.onClickPredictAVG,children:[J.a.caption("\u4ef7\u503c\u6307\u6570\u5747\u503c"),o]})})}else t=Object(N.jsx)(s.LMR,{right:c});return Object(N.jsxs)(N.Fragment,{children:[t,Object(N.jsx)(s.List,{header:I(e.setSortType),items:n,item:{render:e.renderRow,key:e.rowKey},before:"\u9009\u80a1"})]})})))}}]),r}(s.VPage),Pe=[{name:"irate",type:"number",required:!0},{name:"bmin",type:"number",required:!0},{name:"bmax",type:"number",required:!0},{name:"r2",type:"number",required:!0},{name:"lmin",type:"number",required:!0},{name:"lmax",type:"number",required:!0},{name:"lr2",type:"number",required:!0},{name:"mcount",type:"integer",required:!0},{name:"lr4",type:"number",required:!0},{name:"r210",type:"number",required:!0},{name:"submit",type:"submit"}],Fe={items:{irate:{widget:"number",label:"\u65e0\u98ce\u9669\u6536\u76ca\u7387",placeholder:"0.04"},bmin:{widget:"number",label:"\u6307\u6570\u56de\u5f52\u6700\u5c0f\u503c",placeholder:"0.00"},bmax:{widget:"number",label:"\u6307\u6570\u56de\u5f52\u6700\u5927\u503c",placeholder:"0.00"},r2:{widget:"number",label:"\u6307\u6570\u56de\u5f52R2",placeholder:"0.00"},lmin:{widget:"number",label:"\u7ebf\u6027\u56de\u5f52\u6700\u5c0f\u503c",placeholder:"0.00"},lmax:{widget:"number",label:"\u7ebf\u6027\u56de\u5f52\u6700\u5927\u503c",placeholder:"0.00"},lr2:{widget:"number",label:"\u7ebf\u6027\u56de\u5f52R2",placeholder:"0.00"},lr4:{widget:"number",label:"\u672b\u5e74\u4e0e\u524d4\u5e74\u5747\u503c\u6700\u5927\u6bd4\u503c",placeholder:"0.00"},mcount:{widget:"number",label:"5\u5e74\u5185\u5355\u5b63\u4e8f\u635f\u6700\u591a\u5141\u8bb8\u51fa\u73b0\u6b21\u6570",placeholder:"0.00"},r210:{widget:"number",label:"\u5341\u5e74\u56de\u5f52R2",placeholder:"0.00"},submit:{widget:"button",label:"\u4fdd\u5b58",className:"btn btn-primary"}}},Le=function(e){Object(i.a)(r,e);var t=Object(c.a)(r);function r(){var e;Object(a.a)(this,r);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).sortChage=function(t){var r=t.target.value;e.controller.cApp.setStockSortType(r)},e.selectChange=function(t){var r=t.target.value;e.controller.cApp.setStockSelectType(r)},e.onChange=function(e){var t=e.target;t.name,t.value},e.onFormButtonClick=function(){var t=Object(b.a)(h.a.mark((function t(r,n){var a,i,c,s,o,u,l,p,d,b,f,v;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.data,i=a.bmin,c=a.bmax,s=a.r2,o=a.lmin,u=a.lmax,l=a.lr2,p=a.mcount,d=a.lr4,b=a.r210,f=a.irate,v={bmin:i,bmax:c,r2:s,lmin:o,lmax:u,lr2:l,mcount:p,lr4:d,r210:b,irate:f},t.next=4,e.controller.cApp.setRegressionConfig(v);case 4:e.controller.closePage();case 5:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),e.page=Object(A.observer)((function(){e.controller.cApp.findStockConfg;var t=e.controller.cApp.config.regression;return void 0===t.irate&&(t.irate=.04),Object(N.jsxs)(s.Page,{header:"\u9009\u80a1\u8bbe\u7f6e",headerClassName:"bg-primary",children:[Object(N.jsx)("div",{className:"px-3 py-2",children:"\u56de\u5f52\u53c2\u6570"}),Object(N.jsx)(s.Form,{schema:Pe,uiSchema:Fe,formData:t,onButtonClick:e.onFormButtonClick})]})})),e}return Object(n.a)(r,[{key:"open",value:function(){var e=Object(b.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(s.VPage),Re=(he=function(e){Object(i.a)(r,e);var t=Object(c.a)(r);function r(){var e,n=this;Object(a.a)(this,r);for(var i=arguments.length,c=new Array(i),s=0;s<i;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).items=g.observable.array([],{deep:!0}),Object(v.a)(e,"avgs",be,Object(m.a)(e)),e.lastTradeDay=void 0,e.oldSelectType=void 0,e.selectedItems=[],e.disposeAutorun=Object(g.autorun)(Object(b.a)(h.a.mark((function t(){var r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((r=e.cApp.config.stockFind.selectType)!==e.oldSelectType){t.next=3;break}return t.abrupt("return");case 3:if(void 0!==e.oldSelectType){t.next=6;break}return e.oldSelectType=r,t.abrupt("return");case 6:return e.oldSelectType=r,t.next=9,e.load();case 9:case"end":return t.stop()}}),t)})))),e.onPage=Object(b.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),e.onConfig=Object(b.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.openVPage(Le);case 1:case"end":return t.stop()}}),t)}))),e.reload=Object(b.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.load();case 2:case"end":return t.stop()}}),t)}))),e.load=Object(b.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.selectedItems=[],t.next=3,e.loadItems();case 3:case"end":return t.stop()}}),t)}))),e.onSelectItem=function(){var t=Object(b.a)(h.a.mark((function t(r,n){var a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.cApp.defaultListTagID,!0!==n){t.next=8;break}return t.next=4,e.cApp.miApi.call("t_tagstock$add",[e.user.id,a,r.id]);case 4:return t.next=6,e.cApp.AddTagStockID(a,r.id);case 6:t.next=12;break;case 8:return t.next=10,e.cApp.miApi.call("t_tagstock$del",[e.user.id,a,r.id]);case 10:return t.next=12,e.cApp.RemoveTagStockID(a,r.id);case 12:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),e.setSortType=function(t){e.cApp.setUserSortType(t);var r=e.items.slice();e.cApp.sortStocks(r),e.items.replace(r)},e.renderSiteHeader=function(){return e.renderView(Ce)},e.renderHome=function(){return e.renderView(De)},e.openMetaView=function(){},e.tab=function(){return Object(N.jsx)(n.renderHome,{})},e.openStockInfo=function(t){e.newC(y.CStockInfo).start(t)},e}return Object(n.a)(r,[{key:"internalStart",value:function(){var e=Object(b.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadItems",value:function(){var e=Object(b.a)(h.a.mark((function e(){var t,r,n,a,i,c,s,o,u,l,d,b,v,m,j,g,y,O,k,w,N,S;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="all",n=this.cApp.config.regression,a=n.bmin,i=n.bmax,c=n.r2,s=n.lmin,o=n.lmax,u=n.lr2,l=n.mcount,d=n.lr4,b=n.r210,n.irate,v={name:r,pageStart:0,pageSize:3e3,user:this.user.id,blackID:this.cApp.blackListTagID,bMin:a,bMax:i,r2:c,lMin:s,lMax:o,lr2:u,mcount:l,lr4:d,r210:b},e.next=5,Promise.all([this.cApp.miApi.process(v,[]),this.cApp.miApi.call("q_getlasttradeday",[])]);case 5:if(m=e.sent,j=m[1],Array.isArray(j)&&j.length>0?this.lastTradeDay=j[0].day:this.lastTradeDay=void 0,g=m[0],!1!==Array.isArray(g)){e.next=11;break}return e.abrupt("return");case 11:y=g,O=Object(f.a)(y);try{for(O.s();!(k=O.n()).done;)w=k.value,N=JSON.parse(w.data),w.dataArr=N,S=new x.b(N),w.ep=(S.predict(4)+w.e)/2,w.v=J.a.calculateVN(S.slopeR,w.ep,w.divyield*w.price,w.exprice),w.e3=S.predict(7)}catch(h){O.e(h)}finally{O.f()}"all"===r?(this.cApp.sortStocks(y),this.avgs=J.a.CalculateValueAvg(y)):this.avgs={},this.items.clear(),(t=this.items).push.apply(t,Object(p.a)(y));case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),r}(o),be=Object(j.a)(he.prototype,"avgs",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),he),Ee=function(e){Object(i.a)(r,e);var t=Object(c.a)(r);function r(){var e;Object(a.a)(this,r);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).onSelect=function(e,t,r){},e.page=Object(K.c)((function(){var t=e.controller.warnings,r=t.length>=100?"":Object(N.jsxs)("div",{className:"px-3 py-2 cursor-pointer",onClick:e.controller.onNewWarning,children:[Object(N.jsx)(s.FA,{name:"plus",className:"text-primary"})," \xa0 \u65b0\u5efa\u9884\u8b66"]});return Object(N.jsxs)(s.Page,{header:"\u9884\u8b66",headerClassName:"bg-primary",children:[r,Object(N.jsx)(s.List,{items:t,item:{render:e.renderWarning},none:"--"})]})})),e.renderWarning=function(e){var t=e.name,r=e.code,n=e.type,a=e.price,i=Object(N.jsxs)("div",{className:"px-3 cursor-pointer",children:[t,Object(N.jsx)("small",{className:" mx-3",children:r})]});return Object(N.jsx)(s.LMR,{className:"mx-3 my-2",left:i,children:Object(N.jsxs)("div",{className:"d-flex flex-wrap",children:[Object(N.jsx)("div",{className:"px-3 c6",children:J.a.warningTypeString(n)}),Object(N.jsx)("div",{className:"px-3 c6",children:J.a.numberToFixString(a)})]})})},e}return Object(n.a)(r,[{key:"open",value:function(){var e=Object(b.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(s.VPage),Ve=[{name:"id",type:"id"},{name:"type",type:"string",required:!0,maxLength:2},{name:"price",type:"number",required:!0},{name:"submit",type:"submit"}],Me={items:{id:{widget:"id",label:"\u80a1\u7968",visible:!0},type:{widget:"select",label:"\u7c7b\u578b",list:[{value:"gt",title:"\u5927\u4e8e"},{value:"lt",title:"\u5c0f\u4e8e"}]},price:{widget:"text",label:"\u4ef7\u683c",placeholder:"0.00"},submit:{widget:"button",label:"\u4fdd\u5b58",className:"btn btn-primary"}}},_e=function(e){Object(i.a)(r,e);var t=Object(c.a)(r);function r(){var e;Object(a.a)(this,r);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).newuiSchema={items:{id:{widget:"id",label:"\u80a1\u7968",visible:!0,placeholder:Object(N.jsx)("small",{className:"text-muted",children:"\u8bf7\u9009\u62e9\u80a1\u7968"}),pickId:function(){var t=Object(b.a)(h.a.mark((function t(r,n,a){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.controller.showSelectStock(r,n,a);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),Templet:function(e){var t=e.name,r=e.code;return e?Object(N.jsxs)("div",{children:[t,Object(N.jsx)("small",{className:" mx-3",children:r})]}):Object(N.jsx)("small",{className:"text-muted",children:"\u8bf7\u9009\u62e9\u80a1\u7968"})}},type:{widget:"select",label:"\u7c7b\u578b",list:[{value:"gt",title:"\u5927\u4e8e"},{value:"lt",title:"\u5c0f\u4e8e"}]},price:{widget:"text",label:"\u4ef7\u683c",placeholder:"0.00"},submit:{widget:"button",label:"\u4fdd\u5b58",className:"btn btn-primary"}}},e.onFormButtonClick=function(){var t=Object(b.a)(h.a.mark((function t(r,n){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.controller.onSaveNewWarning(n.data);case 2:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),e.page=function(){return Object(N.jsx)(s.Page,{header:"\u65b0\u5efa\u9884\u8b66",headerClassName:"bg-primary",children:Object(N.jsx)("div",{className:"px-3 py-3",children:Object(N.jsx)(s.Form,{schema:Ve,uiSchema:e.newuiSchema,formData:{type:"lt"},onButtonClick:e.onFormButtonClick})})})},e}return Object(n.a)(r,[{key:"open",value:function(){var e=Object(b.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(s.VPage),We=(s.VPage,fe=function(e){Object(i.a)(r,e);var t=Object(c.a)(r);function r(){var e;Object(a.a)(this,r);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return e=t.call.apply(t,[this].concat(i)),Object(v.a)(e,"warnings",ve,Object(m.a)(e)),e.onNewWarning=function(){e.openVPage(_e)},e.onWarningConfg=Object(b.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.loadWarnings();case 2:e.openVPage(Ee);case 3:case"end":return t.stop()}}),t)}))),e.onSaveNewWarning=function(){var t=Object(b.a)(h.a.mark((function t(r){var n,a,i;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.id,a=r.type,i=r.price,t.next=3,e.cApp.miApi.call("t_stockwarning$add",[e.cApp.user.id,n.id,a,i]);case 3:e.closePage();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onSaveWarning=function(){var e=Object(b.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.showSelectStock=function(){var t=Object(b.a)(h.a.mark((function t(r,n,a){var i;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=new ee.a(e.cApp),t.next=3,i.call();case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),e}return Object(n.a)(r,[{key:"cApp",get:function(){return this._cApp}},{key:"internalStart",value:function(){var e=Object(b.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:1;case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadWarnings",value:function(){var e=Object(b.a)(h.a.mark((function e(){var t,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.cApp.miApi.call("t_stockwarning$all",[this.user.id]);case 2:t=e.sent,r=t,this.warnings=r;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),r}(o),ve=Object(j.a)(fe.prototype,"warnings",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),fe),Be=function(e){Object(i.a)(r,e);var t=Object(c.a)(r);function r(){var e,n=this;Object(a.a)(this,r);for(var i=arguments.length,c=new Array(i),o=0;o<i;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).page=Object(A.observer)((function(){return Object(N.jsx)(s.Page,{header:"\u9884\u671f\u6536\u76ca\u6bd4\u5747\u503c\u5386\u53f2",children:Object(N.jsx)(n.pageContent,{})})})),e.pageContent=Object(A.observer)((function(){return Object(N.jsx)(N.Fragment,{children:Object(N.jsx)(n.historyChart,{})})})),e.historyChart=Object(A.observer)((function(){var t=e.controller.items;if(void 0===t)return Object(N.jsx)(N.Fragment,{});var r,n=N.Fragment,a=[],i=[],c=[],o=[],u=Object(f.a)(t);try{for(u.s();!(r=u.n()).done;){var l=r.value,p=l.day,d=l.avg20,h=l.avg50,b=l.avg100;a.push(p),i.push(d),c.push(h),o.push(b)}}catch(m){u.e(m)}finally{u.f()}var v={labels:a,datasets:[{label:"avg20",data:i,borderColor:"blue",backgroundColor:"skyBlue",borderWidth:1,fill:!1,yAxisID:"y-axis-1"},{label:"avg50",data:c,borderColor:"red",backgroundColor:"pink",borderWidth:1,fill:!1,yAxisID:"y-axis-1"},{label:"avg100",data:o,borderColor:"DarkGreen",backgroundColor:"green",borderWidth:1,fill:!1,yAxisID:"y-axis-1"}]};return n=Object(N.jsx)(X.a,{data:v,type:"line",options:{scales:{yAxes:[{type:"linear",display:!0,position:"right",id:"y-axis-1"}]}}}),Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(s.LMR,{className:"px-3 py-2 bg-white",left:"\u5386\u53f2\u8d70\u52bf"}),Object(N.jsx)("div",{className:"px-3",style:{width:"95%"},children:n})]})})),e}return Object(n.a)(r,[{key:"open",value:function(){var e=Object(b.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(e){return Object(N.jsx)(this.page,{})}}]),r}(s.VPage),qe=function(e){Object(i.a)(r,e);var t=Object(c.a)(r);function r(){var e;Object(a.a)(this,r);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).items=g.observable.array([],{deep:!0}),e.day=void 0,e.lastItem=void 0,e}return Object(n.a)(r,[{key:"internalStart",value:function(){var e=Object(b.a)(h.a.mark((function e(t){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0!==(r=t)?(this.day=r.day,void 0!==r.priceDay?this.lastItem={day:r.priceDay,avg20:r.avg20,avg50:r.avg50,avg100:r.avg100}:this.lastItem=void 0):(this.day=void 0,this.lastItem=void 0),e.next=4,this.load();case 4:this.openVPage(Be);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=Object(b.a)(h.a.mark((function e(){var t,r,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.cApp.miApi.call("t_toppredictavg$query",[this.day]);case 2:if(r=e.sent,this.items.clear(),Array.isArray(r)){e.next=6;break}return e.abrupt("return");case 6:(t=this.items).push.apply(t,Object(p.a)(r)),void 0!==this.lastItem&&(n=Object(Ie.a)({},this.lastItem),this.items.push(n));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),r}(o),He="\u81ea\u9009\u80a1",Ue="\u9ed1\u540d\u5355",ze=(me=function(e){Object(i.a)(r,e);var t=Object(c.a)(r);function r(){var e;Object(a.a)(this,r);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).cExporer=void 0,e.cHome=void 0,e.cWarning=void 0,e.cMe=void 0,e.miApi=void 0,Object(v.a)(e,"config",je,Object(m.a)(e)),Object(v.a)(e,"tags",ge,Object(m.a)(e)),Object(v.a)(e,"blackList",xe,Object(m.a)(e)),Object(v.a)(e,"defaultList",ye,Object(m.a)(e)),Object(v.a)(e,"accounts",Oe,Object(m.a)(e)),e.getsortFunc=function(){var t=e.config.userStock.sortType;return"tagpe"===t?function(e,t){return e.pe-t.pe}:"tagdp"===t?function(e,t){return t.divyield-e.divyield}:function(e,t){return t.v-e.v}},e.sortStocks=function(t){t.sort(e.getsortFunc());var r,n=1,a=Object(f.a)(t);try{for(a.s();!(r=a.n()).done;){r.value.order=n,++n}}catch(i){a.e(i)}finally{a.f()}},e.setStockSortType=function(){var t=Object(b.a)(h.a.mark((function t(r){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.config.stockFind.sortType!==r){t.next=2;break}return t.abrupt("return");case 2:return e.config.stockFind.sortType=r,t.next=5,e.saveConfig();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.setStockSelectType=function(){var t=Object(b.a)(h.a.mark((function t(r){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.config.stockFind.selectType!==r){t.next=2;break}return t.abrupt("return");case 2:return e.config.stockFind.selectType=r,t.next=5,e.saveConfig();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.setUserSortType=function(){var t=Object(b.a)(h.a.mark((function t(r){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.config.userStock.sortType!==r){t.next=2;break}return t.abrupt("return");case 2:return e.config.userStock.sortType=r,t.next=5,e.saveConfig();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.selectTag=function(){var t=Object(b.a)(h.a.mark((function t(r){var n,a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=(n=r).name,n.id,e.tags.findIndex((function(e){return e.name===a}))>=0&&(e.config.tagName=a,e.saveConfig());case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.selectAccount=function(){var t=Object(b.a)(h.a.mark((function t(r){var n,a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=(n=r).name,n.id,e.accounts.findIndex((function(e){return e.name===a}))>=0&&(e.config.accountName=a,e.saveConfig());case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.setRegressionConfig=function(){var t=Object(b.a)(h.a.mark((function t(r){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.config.regression=r,t.next=3,e.saveConfig();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(n.a)(r,[{key:"tagID",get:function(){if(void 0!==this.tags){var e=this.config.tagName,t=this.tags.findIndex((function(t){return t.name===e}));if(t>=0)return this.tags[t].id}return-1}},{key:"accountID",get:function(){var e=this.config.accountName;if(void 0!==e&&void 0!==this.accounts){var t=this.accounts.findIndex((function(t){return t.name===e}));if(t>=0)return this.accounts[t].id}return-1}},{key:"findStockConfg",get:function(){return this.config.stockFind}},{key:"blackListTagID",get:function(){if(void 0!==this.tags){this.config.tagName;var e=this.tags.findIndex((function(e){return e.name===Ue}));if(e>=0)return this.tags[e].id}return-1}},{key:"defaultListTagID",get:function(){if(void 0!==this.tags){this.config.tagName;var e=this.tags.findIndex((function(e){return e.name===He}));if(e>=0)return this.tags[e].id}return-1}},{key:"internalStart",value:function(){var e=Object(b.a)(h.a.mark((function e(){var t,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isLogined,t=this.user.token,r=l.miApiHost,this.miApi=new Se(r,"fsjs/","miapi",t,!1),this.cExporer=this.newC(Re),this.cHome=this.newC(te),this.cMe=this.newC(oe),this.cWarning=this.newC(We),Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_CENTER_HOST:"https://tv.jkchemical.com",REACT_APP_RES_HOST:"https://tv.jkchemical.com"}),e.next=11,this.loadConfig();case 11:return e.next=13,this.cHome.loadWarning();case 13:return e.next=15,this.cHome.load();case 15:this.openVPage(Ae);case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"saveConfig",value:function(){var e=Object(b.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.stringify(this.config),e.next=3,this.miApi.call("t_usersettings$save",[this.user.id,"config",t]);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadConfig",value:function(){var e=Object(b.a)(h.a.mark((function e(){var t,r,n,a,i,c,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.miApi.query("t_usersettings$query",[this.user.id,"config"]),this.loadTags(),this.loadAccounts()]);case 2:if(t=e.sent,void 0!==(r=t[0])&&void 0!==(n=r)&&n.length>0&&(a=n[0].value,i=JSON.parse(a),void 0!==this.tags&&(c=i.tagName,(s=this.tags.findIndex((function(e){return e.name===c})))<0&&this.tags.length>0&&(s=this.tags.findIndex((function(e){return e.name===He})),i.tagName=s>=0?He:this.tags[0].name)),this.config=i),void 0!==this.config.stockFind){e.next=9;break}this.config.stockFind={sortType:"pe"},e.next=18;break;case 9:e.t0=this.config.stockFind.selectType,e.next="all"===e.t0?12:"peroe"===e.t0?13:"pe"===e.t0?14:"dp"===e.t0?15:16;break;case 12:case 13:case 14:case 15:return e.abrupt("break",18);case 16:return this.config.stockFind.selectType="all",e.abrupt("break",18);case 18:return void 0===this.config.userStock&&(this.config.userStock={sortType:"tagpe"}),void 0===this.config.regression?this.config.regression={bmin:0,bmax:.5,r2:.7,lmin:.01,lmax:.5,lr2:.7,mcount:2,lr4:3,r210:.6,irate:.04}:(void 0===this.config.regression.r210&&(this.config.regression.r210=.6),void 0===this.config.regression.irate&&(this.config.regression.irate=.04)),e.next=22,this.loadBlackList();case 22:return e.next=24,this.loadDefaultList();case 24:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadTags",value:function(){var e=Object(b.a)(h.a.mark((function e(){var t,r,n,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==this.tags){e.next=20;break}return e.next=3,this.miApi.query("t_tag$all",[this.user.id]);case 3:return t=e.sent,r=t,e.next=7,this.checkDefaultTags(r);case 7:if(!e.sent){e.next=13;break}return e.next=11,this.miApi.query("t_tag$all",[this.user.id]);case 11:t=e.sent,r=t;case 13:n=[],(a=r.findIndex((function(e){return e.name===He})))>=0&&(n.push(r[a]),r.splice(a,1)),(a=r.findIndex((function(e){return e.name===Ue})))>=0&&(n.push(r[a]),r.splice(a,1)),n.push.apply(n,Object(p.a)(r)),this.tags=n;case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"checkDefaultTags",value:function(){var e=Object(b.a)(h.a.mark((function e(t){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=!1,void 0!==t){e.next=9;break}return e.next=4,this.miApi.call("t_tag$save",[this.user.id,void 0,He]);case 4:return e.next=6,this.miApi.call("t_tag$save",[this.user.id,void 0,Ue]);case 6:r=!0,e.next=19;break;case 9:if(!(t.findIndex((function(e){return e.name===He}))<0)){e.next=14;break}return e.next=13,this.miApi.call("t_tag$save",[this.user.id,void 0,He]);case 13:r=!0;case 14:if(!(t.findIndex((function(e){return e.name===Ue}))<0)){e.next=19;break}return e.next=18,this.miApi.call("t_tag$save",[this.user.id,void 0,Ue]);case 18:r=!0;case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadAccounts",value:function(){var e=Object(b.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.miApi.query("t_allaccounts",[this.user.id]);case 2:t=e.sent,Array.isArray(t)&&(this.accounts=t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadBlackList",value:function(){var e=Object(b.a)(h.a.mark((function e(){var t,r,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((t=this.blackListTagID)<=0)){e.next=4;break}return this.blackList=[],e.abrupt("return");case 4:return{user:this.user.id,tag:t},e.prev=5,e.next=8,this.miApi.call("t_tagstock$query",[this.user.id,t,void 0]);case 8:r=e.sent,n=r.map((function(e){return e.stock})),this.blackList=n,e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),e.t0;case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"loadDefaultList",value:function(){var e=Object(b.a)(h.a.mark((function e(){var t,r,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((t=this.defaultListTagID)<=0)){e.next=4;break}return this.defaultList=[],e.abrupt("return");case 4:return{user:this.user.id,tag:t},e.prev=5,e.next=8,this.miApi.call("t_tagstock$query",[this.user.id,t,void 0]);case 8:r=e.sent,n=r.map((function(e){return e.stock})),this.defaultList=n,e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),e.t0;case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"AddTagStockID",value:function(){var e=Object(b.a)(h.a.mark((function e(t,r){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t===this.blackListTagID?this.AddBlackID(r):t===this.defaultListTagID&&this.AddDefaultID(r);case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"AddTagStockIDs",value:function(){var e=Object(b.a)(h.a.mark((function e(t,r){var n=this;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t===this.blackListTagID?r.map((function(e){return n.AddBlackID(e)})):t===this.defaultListTagID&&r.map((function(e){return n.AddDefaultID(e)}));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"RemoveTagStockID",value:function(){var e=Object(b.a)(h.a.mark((function e(t,r){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t===this.blackListTagID?this.RemoveBlackID(r):t===this.defaultListTagID&&this.RemoveDefaultID(r),this.cHome.RemoveTagStockID(t,r);case 2:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"AddBlackID",value:function(e){this.blackList.findIndex((function(t){return t===e}))<0&&this.blackList.push(e)}},{key:"RemoveBlackID",value:function(e){var t=this.blackList.findIndex((function(t){return t===e}));t>=0&&this.blackList.splice(t,1)}},{key:"AddDefaultID",value:function(e){this.defaultList.findIndex((function(t){return t===e}))<0&&this.defaultList.push(e)}},{key:"RemoveDefaultID",value:function(e){var t=this.defaultList.findIndex((function(t){return t===e}));t>=0&&this.defaultList.splice(t,1)}},{key:"showOneVPage",value:function(){var e=Object(b.a)(h.a.mark((function e(t,r){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new t(this).open(r);case 2:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"onDispose",value:function(){}},{key:"openPredictAVG",value:function(e){this.newC(qe).start(e)}}]),r}(u),je=Object(j.a)(me.prototype,"config",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{tagName:He,stockFind:{sortType:"pe"},userStock:{sortType:"tagpe"},regression:{bmin:0,bmax:.5,r2:.7,lmin:.01,lmax:.5,lr2:.7,mcount:2,lr4:3,r210:.6,irate:.04}}}}),ge=Object(j.a)(me.prototype,"tags",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),xe=Object(j.a)(me.prototype,"blackList",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ye=Object(j.a)(me.prototype,"defaultList",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Oe=Object(j.a)(me.prototype,"accounts",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),Object(j.a)(me.prototype,"tagID",[g.computed],Object.getOwnPropertyDescriptor(me.prototype,"tagID"),me.prototype),Object(j.a)(me.prototype,"accountID",[g.computed],Object.getOwnPropertyDescriptor(me.prototype,"accountID"),me.prototype),Object(j.a)(me.prototype,"blackListTagID",[g.computed],Object.getOwnPropertyDescriptor(me.prototype,"blackListTagID"),me.prototype),Object(j.a)(me.prototype,"defaultListTagID",[g.computed],Object.getOwnPropertyDescriptor(me.prototype,"defaultListTagID"),me.prototype),me),$e={appName:"bruce/mifen",version:"1.01",tvs:void 0,uqNameMap:{}}},50:function(e,t,r){"use strict";r.d(t,"a",(function(){return w}));var n,a,i=r(21),c=r(1),s=r.n(c),o=r(2),u=r(15),l=r(5),p=r(6),d=r(14),h=r(11),b=r(10),f=r(13),v=(r(30),r(8),r(3)),m=r(4),j=r(12),g=r(32),x=r.n(g),y=r(7),O=r(25),k=r(0),w=(n=function(e){Object(h.a)(r,e);var t=Object(b.a)(r);function r(){var e,n=this;Object(l.a)(this,r);for(var c=arguments.length,p=new Array(c),h=0;h<c;h++)p[h]=arguments[h];return(e=t.call.apply(t,[this].concat(p))).input=void 0,e.key=void 0,Object(u.a)(e,"ttmLimit",a,Object(d.a)(e)),e.checkLimitShow=function(t){var r=t.target.checked;e.ttmLimit=r},e.checkShowLater=function(t){var r=t.target.checked;e.controller.LoadHistoryData(r)},e.checkDefaultTag=function(t){var r=t.target.checked;e.controller.onClickDefaultTag(r)},e.page=Object(j.observer)((function(){var t=e.controller,r=t.openMetaView,a=t.baseItem,i=t.onSelectTag,c=t.stockTags,s=t.isLogined,o=a.name,u=a.code,l=a.day;k.Fragment;var p=c&&Object(k.jsx)("button",{className:"btn btn-sm mr-2 btn-outline-success bg-light align-self-center",onClick:i,children:0===c.length?"\u52a0\u81ea\u9009":"\u8bbe\u5206\u7ec4"}),d=o+" "+u;void 0!==l&&(d+=" - "+l);var h=Object(k.jsx)("div",{onClick:function(){return e.controller.showSelectStock(l)},children:d});return Object(k.jsx)(v.Page,{header:h,right:p,headerClassName:"bg-primary",children:Object(k.jsx)(n.pageContent,{})})})),e.pageContent=Object(j.observer)((function(){return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(n.dateHead,{}),Object(k.jsx)(n.baseInfo,{}),Object(k.jsx)(n.historyChart,{}),Object(k.jsx)(n.predictInfo,{}),Object(k.jsx)(n.predictSeasonEarning,{}),Object(k.jsx)(n.seasonEarning,{}),Object(k.jsx)(n.capitalEarning,{}),Object(k.jsx)(n.bonus,{})]})})),e.onChange=function(t){var r=t.target.value,n=Number(r);!0!==isNaN(n)&&Number.isInteger(n)?(e.key=t.target.value,void 0!==e.key&&(e.key=e.key.trim(),""===e.key&&(e.key=void 0))):e.input&&(e.input.value=e.key)},e.onSubmit=function(){var t=Object(o.a)(s.a.mark((function t(r){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.preventDefault(),void 0===e.key&&(e.key=""),n=Number(e.key),isNaN(n)||!Number.isInteger(n)){t.next=7;break}if(!(0===n||n>=20000101&&n<30000101)){t.next=7;break}return t.next=7,e.controller.changeDay(n);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.dateHead=function(){var t=e.controller.baseItem.day,r=void 0===t||isNaN(t)?"":t.toString();return Object(k.jsx)("div",{className:"px-3 py-2",children:Object(k.jsx)("form",{className:"w-100",onSubmit:e.onSubmit,children:Object(k.jsxs)("div",{className:"input-group input-group-sm",children:[Object(k.jsx)("label",{className:"input-group-addon mr-2 mb-0 align-self-center",children:"\u65e5\u671f"}),Object(k.jsx)("input",{ref:function(t){return e.input=t},onChange:e.onChange,type:"text",name:"key",defaultValue:r,className:"form-control border-primary px-2",placeholder:"yyyymmdd",maxLength:8}),Object(k.jsx)("div",{className:"input-group-append",children:Object(k.jsxs)("button",{className:"btn btn-primary px-2",type:"submit",children:[Object(k.jsx)("i",{className:"fa fa-search"}),Object(k.jsx)("i",{className:"fa"}),"\u8df3\u8f6c"]})})]})})})},e.baseInfo=Object(j.observer)((function(){var t=e.controller.baseItem,r=t.id,n=(t.name,t.code,t.symbol),a=t.pe,i=t.roe,c=t.price,s=(t.order,t.divyield),o=(t.e,t.capital,t.bonus,e.controller.cApp.defaultList.findIndex((function(e){return e===r}))>=0),u=Object(k.jsxs)("label",{className:"align-self-center px-3",children:[" ",Object(k.jsx)("input",{type:"checkbox",name:"checkDefaultList",defaultChecked:o,onChange:e.checkDefaultTag}),"\u81ea\u9009\u80a1"]});return Object(k.jsxs)(v.LMR,{className:"bg-white",right:u,children:[" ",Object(k.jsx)("div",{className:"px-3 py-2",children:Object(k.jsxs)("div",{className:"d-flex flex-wrap",children:[Object(k.jsxs)("div",{className:"px-3 c8",children:[y.a.caption("TTM"),y.a.numberToFixString(a)]}),Object(k.jsxs)("div",{className:"px-3 c8",children:[y.a.caption("\u80a1\u606f\u7387"),y.a.percentToFixString(s)]}),Object(k.jsxs)("div",{className:"px-3 c8",children:[y.a.caption("ROE"),y.a.percentToFixString(i)]}),Object(k.jsxs)("div",{className:"px-3 c8",children:[y.a.caption("\u4ef7\u683c"),y.a.numberToFixString(c)]}),Object(k.jsx)("a",{className:"px-3 text-info",href:"https://finance.sina.com.cn/realstock/company/".concat(n,"/nc.shtml"),target:"_blank",rel:"noopener noreferrer",onClick:function(e){e.stopPropagation()},children:"\u65b0\u6d6a\u8d22\u7ecf"})]})})]})})),e.onClickName=function(){var e=Object(o.a)(s.a.mark((function e(t){var r,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.symbol,n="http://finance.sina.com.cn/realstock/company/".concat(r,"/nc.shtml"),window.open(n,"").opener=void 0;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.historyChart=Object(j.observer)((function(){var t=e.controller,r=t.historyData,n=t.baseItem;if(void 0===r)return Object(k.jsx)(k.Fragment,{});var a,c=k.Fragment,s=[],o=[],u=[],l=Object(i.a)(r);try{for(l.s();!(a=l.n()).done;){var p=a.value,d=p.day,h=p.price,b=p.ttm;s.push(d),o.push(y.a.numberToPrecision(h,4)),b<=0?u.push(void 0):e.ttmLimit&&b>=35?u.push(35):u.push(y.a.numberToPrecision(b,4))}}catch(j){l.e(j)}finally{l.f()}var f={labels:s,datasets:[{label:"\u4ef7\u683c",data:o,borderColor:"blue",backgroundColor:"skyBlue",borderWidth:1,fill:!1,yAxisID:"y-axis-1"},{label:"TTM",data:u,borderColor:"red",backgroundColor:"pink",borderWidth:1,fill:!1,yAxisID:"y-axis-2"}]};c=Object(k.jsx)(x.a,{data:f,type:"line",options:{scales:{yAxes:[{type:"linear",display:!0,position:"left",id:"y-axis-1"},{type:"linear",display:!0,position:"right",id:"y-axis-2",gridLines:{drawOnChartArea:!1}}]}}});var m=Object(k.jsx)(k.Fragment,{});return m=void 0!==n.day?Object(k.jsxs)(k.Fragment,{children:[Object(k.jsxs)("label",{className:"px-3",children:[" ",Object(k.jsx)("input",{type:"checkbox",name:"showLater",defaultChecked:!1,onChange:e.checkShowLater}),"\u663e\u793a\u540e\u9762\u6570\u636e"]}),Object(k.jsxs)("label",{className:"px-3",children:[" ",Object(k.jsx)("input",{type:"checkbox",name:"selectType",defaultChecked:e.ttmLimit,onChange:e.checkLimitShow}),"\u9650\u5236TTM\u663e\u793a\u8303\u56f4"]})]}):Object(k.jsxs)("label",{className:"px-3",children:[" ",Object(k.jsx)("input",{type:"checkbox",name:"selectType",defaultChecked:e.ttmLimit,onChange:e.checkLimitShow}),"\u9650\u5236TTM\u663e\u793a\u8303\u56f4"]}),Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(v.LMR,{className:"px-3 py-2 bg-white",left:"\u5386\u53f2\u8d70\u52bf",right:m}),Object(k.jsx)("div",{className:"px-3",style:{width:"95%"},children:c})]})})),e.predictInfo=Object(j.observer)((function(){var t=e.controller,r=t.predictData,n=t.ypredict;if(void 0===r)return Object(k.jsx)(k.Fragment,{});var a=r.e,i=r.b,c=r.r2,s=r.epre,o=r.l,u=r.lr2,l=r.lpre,p=Object(k.jsx)(k.Fragment,{});if(5===n.length){var d=new O.a(n),h={labels:["0","1","2","3","4"],datasets:[{label:"\u539f\u503c",data:n.map((function(e){return y.a.numberToPrecision(e)})),borderColor:"black",backgroundColor:"skyBlue",showLine:!1,pointStyle:"crossRot",borderWidth:1,pointRadius:5,fill:!1}]};if(!isNaN(d.B)&&!isNaN(d.A)){for(var b=[],f=0;f<5;++f)b.push(y.a.numberToPrecision(d.predict(f),4));h.datasets.push({label:"\u6307\u6570\u56de\u5f52",data:b,borderColor:"red",backgroundColor:"pink",borderWidth:1,fill:!1})}var v=new O.b(n);if(!isNaN(v.slope)&&!isNaN(v.intercept)){for(var m=[],j=0;j<5;++j)m.push(y.a.numberToPrecision(v.predict(j),4));h.datasets.push({label:"\u7ebf\u6027\u56de\u5f52",data:m,borderColor:"blue",backgroundColor:"pink",borderWidth:1,fill:!1})}p=Object(k.jsx)(x.a,{data:h,type:"line"})}var g=e.predictChartFullInfo(),w=e.predictChartROE();return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("div",{className:"px-3 py-2 bg-white",children:"\u6307\u6570\u56de\u5f52\u9884\u6d4b"}),Object(k.jsxs)("div",{className:"d-flex flex-wrap",children:[Object(k.jsxs)("div",{className:"px-3 c12",children:[y.a.caption("e"),y.a.numberToString(a,4)]}),Object(k.jsxs)("div",{className:"px-3 c12",children:[y.a.caption("\u6307\u6570b"),y.a.numberToString(i,4)]}),Object(k.jsxs)("div",{className:"px-3 c12",children:[y.a.caption("r2"),y.a.numberToString(c,4)]}),Object(k.jsxs)("div",{className:"px-3 c12",children:[y.a.caption("e\u9884\u6d4b"),y.a.numberToString(s)]})]}),Object(k.jsx)("div",{className:"px-3 py-2 bg-white",children:"\u7ebf\u6027\u56de\u5f52\u9884\u6d4b"}),Object(k.jsxs)("div",{className:"d-flex flex-wrap",children:[Object(k.jsxs)("div",{className:"px-3 c12",children:[y.a.caption("e"),y.a.numberToString(a,4)]}),Object(k.jsxs)("div",{className:"px-3 c12",children:[y.a.caption("\u589e\u957f\u7387"),y.a.numberToString(o,4)]}),Object(k.jsxs)("div",{className:"px-3 c12",children:[y.a.caption("r2"),y.a.numberToString(u,4)]}),Object(k.jsxs)("div",{className:"px-3 c12",children:[y.a.caption("e\u9884\u6d4b"),y.a.numberToString(l)]})]}),Object(k.jsxs)("div",{className:"d-flex",children:[Object(k.jsx)("div",{className:"px-2",style:{width:"50%"},children:p}),Object(k.jsx)("div",{className:"px-2",style:{width:"50%"},children:g})]}),Object(k.jsx)("div",{className:"d-flex",children:Object(k.jsx)("div",{className:"px-2",style:{width:"50%"},children:w})})]})})),e.predictChartFullInfo=function(){var t=e.controller.predictSeasonDataFull,r=t.length;if(r<=0)return Object(k.jsx)(k.Fragment,{});for(var n=[],a=[],i=r-1;i>=0;--i){var c=t[i];void 0!==c.esum&&(n.push(y.a.SeasonnoToYearMonth(c.season)),a.push(c.esum))}var s=new O.a(a),o={labels:n,datasets:[{label:"\u539f\u503c",data:a.map((function(e){return y.a.numberToPrecision(e)})),borderColor:"black",backgroundColor:"skyBlue",showLine:!1,pointStyle:"crossRot",borderWidth:1,pointRadius:5,fill:!1}]};if(!isNaN(s.B)&&!isNaN(s.A)){for(var u=[],l=0;l<r;++l)u.push(y.a.numberToPrecision(s.predict(l),4));o.datasets.push({label:"\u6307\u6570 R2:"+y.a.numberToString(s.r2,4),data:u,borderColor:"red",backgroundColor:"pink",borderWidth:1,fill:!1})}var p=new O.b(a);if(!isNaN(p.slope)&&!isNaN(p.intercept)){for(var d=[],h=0;h<r;++h)d.push(y.a.numberToPrecision(p.predict(h),4));o.datasets.push({label:"\u7ebf\u6027 R2:"+y.a.numberToString(p.r2,4),data:d,borderColor:"blue",backgroundColor:"pink",borderWidth:1,fill:!1})}return Object(k.jsx)(x.a,{data:o,type:"line"})},e.predictChartROE=function(){var t=e.controller.predictSeasonDataFull,r=t.length;if(r<=0)return Object(k.jsx)(k.Fragment,{});for(var n=[],a=[],i=r-1;i>=0;--i){var c=t[i];void 0!==c.esum&&(n.push(y.a.SeasonnoToYearMonth(c.season)),a.push(c.esumorg/c.corg))}var s={labels:n,datasets:[{label:"ROE\u539f\u503c",data:a.map((function(e){return y.a.numberToPrecision(e)})),borderColor:"black",backgroundColor:"skyBlue",showLine:!1,pointStyle:"crossRot",borderWidth:1,pointRadius:5,fill:!1}]},o=new O.b(a);if(!isNaN(o.slope)&&!isNaN(o.intercept)){for(var u=[],l=0;l<r;++l)u.push(Number.parseFloat(o.predict(l).toPrecision(4)));s.datasets.push({label:"\u7ebf\u6027 R2:"+y.a.numberToString(o.r2,4),data:u,borderColor:"blue",backgroundColor:"pink",borderWidth:1,fill:!1})}return Object(k.jsx)(x.a,{data:s,type:"line"})},e.predictSeasonEarning=Object(j.observer)((function(){var t=e.controller.predictSeasonData,r=Object(k.jsxs)("div",{className:"px-3",children:[Object(k.jsx)("div",{className:"px-3 c6",children:"\u5e74\u6708"}),Object(k.jsx)("div",{className:"px-3 c6 text-right",children:"\u80a1\u672c"}),Object(k.jsx)("div",{className:"px-3 c6 text-right",children:"\u5b63\u6536\u76ca"}),Object(k.jsx)("div",{className:"px-3 c6 text-right",children:"\u5e74\u6536\u76ca"}),Object(k.jsx)("div",{className:"px-3 c6 text-right",children:"ROE"}),Object(k.jsx)("div",{className:"px-3 c6 text-right",children:"\u80a1\u672co"}),Object(k.jsx)("div",{className:"px-3 c6 text-right",children:"\u5b63\u6536\u76cao"}),Object(k.jsx)("div",{className:"px-3 c6 text-right",children:"\u5e74\u6536\u76cao"})]});return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("div",{className:"px-3 py-1",children:"\u5386\u5e74\u80a1\u672c\u6536\u76ca-\u7528\u4e8e\u56de\u5f52\u8ba1\u7b97"}),Object(k.jsx)(v.List,{header:r,loading:"...",items:t,item:{render:function(e){var t=e.season,r=e.c,n=e.e,a=e.esum,i=e.corg,c=e.eorg,s=e.esumorg,o=y.a.SeasonnoToYearMonth(t);return Object(k.jsxs)("div",{className:"px-3 py-2 d-flex flex-wrap",children:[Object(k.jsx)("div",{className:"px-3 c6",children:o.toString()}),Object(k.jsx)("div",{className:"px-3 c6 text-right",children:y.a.numberToFixString(r)}),Object(k.jsx)("div",{className:"px-3 c6 text-right",children:y.a.numberToFixString(n)}),Object(k.jsx)("div",{className:"px-3 c6 text-right",children:y.a.numberToFixString(a)}),Object(k.jsx)("div",{className:"px-3 c6 text-right",children:y.a.percentToFixString(a/r)}),Object(k.jsx)("div",{className:"px-3 c6 text-right",children:y.a.numberToFixString(i)}),Object(k.jsx)("div",{className:"px-3 c6 text-right",children:y.a.numberToFixString(c)}),Object(k.jsx)("div",{className:"px-3 c6 text-right",children:y.a.numberToFixString(s)})]})}}})]})})),e.seasonEarning=Object(j.observer)((function(){var t=e.controller.seasonData,r=Object(k.jsxs)("div",{className:"px-3",children:[Object(k.jsx)("div",{className:"px-3 c6",children:"\u5e74\u6708"}),Object(k.jsx)("div",{className:"px-3 c6 text-right",children:"\u80a1\u672c"}),Object(k.jsx)("div",{className:"px-3 c6 text-right",children:"\u5b63\u6536\u76ca"}),Object(k.jsx)("div",{className:"px-3 c6 text-right",children:"\u5e74\u6536\u76ca"}),Object(k.jsx)("div",{className:"px-3 c6 text-right",children:"ROE"}),Object(k.jsx)("div",{className:"px-3 c6 text-right",children:"\u80a1\u672co"}),Object(k.jsx)("div",{className:"px-3 c6 text-right",children:"\u5b63\u6536\u76cao"}),Object(k.jsx)("div",{className:"px-3 c6 text-right",children:"\u5e74\u6536\u76cao"})]});return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("div",{className:"px-3 py-1",children:"\u5386\u5e74\u80a1\u672c\u6536\u76ca"}),Object(k.jsx)(v.List,{header:r,loading:"...",items:t,item:{render:function(e){var t=e.season,r=e.c,n=e.e,a=e.esum,i=e.corg,c=e.eorg,s=e.esumorg,o=y.a.SeasonnoToYearMonth(t);return Object(k.jsxs)("div",{className:"px-3 py-2 d-flex flex-wrap",children:[Object(k.jsx)("div",{className:"px-3 c6",children:o.toString()}),Object(k.jsx)("div",{className:"px-3 c6 text-right",children:y.a.numberToFixString(r)}),Object(k.jsx)("div",{className:"px-3 c6 text-right",children:y.a.numberToFixString(n)}),Object(k.jsx)("div",{className:"px-3 c6 text-right",children:y.a.numberToFixString(a)}),Object(k.jsx)("div",{className:"px-3 c6 text-right",children:y.a.percentToFixString(a/r)}),Object(k.jsx)("div",{className:"px-3 c6 text-right",children:y.a.numberToFixString(i)}),Object(k.jsx)("div",{className:"px-3 c6 text-right",children:y.a.numberToFixString(c)}),Object(k.jsx)("div",{className:"px-3 c6 text-right",children:y.a.numberToFixString(s)})]})}}})]})})),e.capitalEarning=Object(j.observer)((function(){var t=e.controller.capitalearning,r=Object(k.jsxs)("div",{className:"px-3",children:[Object(k.jsx)("div",{className:"px-3 c6",children:"\u5e74"}),Object(k.jsx)("div",{className:"px-3 c6 text-right",children:"\u80a1\u672c"}),Object(k.jsx)("div",{className:"px-3 c6 text-right",children:"\u6536\u76ca"}),Object(k.jsx)("div",{className:"px-3 c6 text-right",children:"ROE"})]});return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("div",{className:"px-3 py-1",children:"\u5386\u5e74\u80a1\u672c\u6536\u76ca"}),Object(k.jsx)(v.List,{header:r,loading:"...",items:t,item:{render:function(e){var t=e.capital,r=e.earning;return Object(k.jsxs)("div",{className:"px-3 py-2 d-flex flex-wrap",children:[Object(k.jsx)("div",{className:"px-3 c6",children:e.year}),Object(k.jsxs)("div",{className:"px-3 c6 text-right",children:[" ",t.toFixed(2)]}),Object(k.jsxs)("div",{className:"px-3 c6 text-right",children:[" ",r.toFixed(2)]}),Object(k.jsxs)("div",{className:"px-3 c6 text-right",children:[" ",(r/t*100).toFixed(1),"%"]})]})}}})]})})),e.bonus=Object(j.observer)((function(){var t=e.controller.bonus,r=Object(k.jsxs)("div",{className:"px-3",children:[Object(k.jsx)("div",{className:"px-3 c8",children:"\u65e5\u671f"}),Object(k.jsx)("div",{className:"px-3 c6 text-right",children:"\u5206\u7ea2"})]});return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("div",{className:"px-3 py-1",children:"\u5386\u5e74\u5206\u7ea2"}),Object(k.jsx)(v.List,{header:r,loading:"...",items:t,item:{render:function(e){return Object(k.jsxs)("div",{className:"px-3 py-2 d-flex flex-wrap",children:[Object(k.jsx)("div",{className:"px-3 c8",children:e.day}),Object(k.jsxs)("div",{className:"px-3 c6 text-right",children:[" ",e.bonus.toFixed(2)]})]})}}})]})})),e}return Object(p.a)(r,[{key:"open",value:function(){var e=Object(o.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(e){return Object(k.jsx)(this.page,{})}}]),r}(v.VPage),a=Object(f.a)(n.prototype,"ttmLimit",[m.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),n)},51:function(e,t,r){"use strict";r.d(t,"a",(function(){return O}));var n,a,i=r(15),c=r(14),s=r(13),o=(r(30),r(1)),u=r.n(o),l=r(2),p=r(5),d=r(6),h=r(11),b=r(10),f=r(4),v=r(3),m=r(31),j=(r(8),r(18)),g=r(0),x=function(e){Object(h.a)(r,e);var t=Object(b.a)(r);function r(){var e;Object(p.a)(this,r);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).onClickStock=function(){var t=Object(l.a)(u.a.mark((function t(r){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.controller.returnStock(r);case 2:e.closePage();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.page=Object(j.c)((function(t){var r=e.controller,n=r.pageItems,a=r.onPage,i=Object(g.jsx)("div",{className:"my-3 mx-2 text-warning",children:"\u8bf7\u641c\u7d22\u80a1\u7968\uff01"});return Object(g.jsxs)(v.Page,{header:"\u9009\u62e9\u80a1\u7968",headerClassName:"bg-primary",onScrollBottom:a,children:[Object(g.jsx)(v.SearchBox,{className:"px-1 w-100  mt-2 mr-2",size:"md",allowEmptySearch:!0,onSearch:function(t){return e.controller.searchByKey(t)},placeholder:"\u641c\u7d22\u80a1\u7968"}),Object(g.jsx)(v.List,{before:"",none:i,items:n,item:{render:e.renderStock,onClick:e.onClickStock}})]})})),e}return Object(d.a)(r,[{key:"open",value:function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page,t);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"renderStock",value:function(e,t){var r=e.name,n=e.code;return Object(g.jsxs)(v.LMR,{className:"px-3 py-2 ",children:[Object(g.jsx)("div",{className:"font-weight-bold"}),Object(g.jsx)("div",{children:r+" "+n})]})}}]),r}(v.VPage),y=function(e){Object(h.a)(r,e);var t=Object(b.a)(r);function r(e){var n;return Object(p.a)(this,r),(n=t.call(this,!0)).cStock=void 0,n.cStock=e,n.firstSize=n.pageSize=30,n}return Object(d.a)(r,[{key:"loadResults",value:function(){var e=Object(l.a)(u.a.mark((function e(t,r,n){var a,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===r&&(r=0),a=["%"+t.key+"%"],e.prev=2,e.next=5,this.cStock.cApp.miApi.page("q_stocks$page",a,r,n);case 5:return i=e.sent,e.abrupt("return",i);case 9:return e.prev=9,e.t0=e.catch(2),e.t0,e.abrupt("return",void 0);case 13:case"end":return e.stop()}}),e,this,[[2,9]])})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"setPageStart",value:function(e){this.pageStart=void 0===e?0:e.id}}]),r}(v.PageItems),O=(n=function(e){Object(h.a)(r,e);var t=Object(b.a)(r);function r(){var e;Object(p.a)(this,r);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return e=t.call.apply(t,[this].concat(s)),Object(i.a)(e,"pageItems",a,Object(c.a)(e)),e.searchByKey=function(){var t=Object(l.a)(u.a.mark((function t(r){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.pageItems=new y(Object(c.a)(e)),e.pageItems.first({key:r});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.returnStock=function(){var t=Object(l.a)(u.a.mark((function t(r){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.returnCall(r);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onPage=Object(l.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.pageItems.more();case 2:case"end":return t.stop()}}),t)}))),e}return Object(d.a)(r,[{key:"internalStart",value:function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openVPage(x);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(m.b),a=Object(s.a)(n.prototype,"pageItems",[f.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new y(this)}}),n)},53:function(e,t,r){"use strict";r(113);var n=r(114);r.d(t,"CStockInfo",(function(){return n.a}));r(50)},7:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var n=r(5),a=r(6),i=(r(8),r(0)),c=function(){function e(){Object(n.a)(this,e)}return Object(a.a)(e,null,[{key:"numberToFixString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return void 0===e?"":e.toFixed(t)}},{key:"number",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return void 0===e?"":e.toFixed(t)}},{key:"numberToMarketValue",value:function(e){return void 0===e||isNaN(e)?"":Math.round(e/1e4).toString()}},{key:"numberToString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return void 0===e?"":e.toPrecision(t)}},{key:"numberToPrecision",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return void 0===e?void 0:Number.parseFloat(e.toPrecision(t))}},{key:"percentToFixString",value:function(e){return void 0===e||isNaN(e)?"":(100*e).toFixed(2)+"%"}},{key:"percent0",value:function(e){return void 0===e||isNaN(e)?"":(100*e).toFixed(0)+"%"}},{key:"percent1",value:function(e){return void 0===e||isNaN(e)?"":(100*e).toFixed(1)+"%"}},{key:"warningTypeString",value:function(e){switch(e){case"gt":return"\u5927\u4e8e";case"lt":return"\u5c0f\u4e8e";default:return e}}},{key:"predictCutRatio",value:function(e){return 2*e-e*e}},{key:"evaluatePricePrice",value:function(e,t,r,n){var a=1+e,i=a*a,c=i*a;return(t/a+r/i+n/c+n/e/c)/2}},{key:"calculateV",value:function(e,t,r){if(void 0!==r&&!isNaN(r)){var n=0;return void 0!==e&&(e>.25&&(e=.25),n+=100*e),void 0!==t&&(n+=100*t),n/r}}},{key:"calculateVN",value:function(e,t,r,n){if(void 0!==n&&!isNaN(n)&&void 0!==t&&!isNaN(t)){var a=0;return void 0!==e&&t>0&&(e>.25&&(e=.24+Math.pow(100*(e-.24),.6667)/100),a+=(e=(e=1+e)*e*e-1)*t*100),void 0===r||isNaN(r)||(a+=100*r),a/n}}},{key:"calculateZZ3",value:function(e){var t=[void 0,void 0,void 0,void 0];if(void 0===e)return t;if(e.length<5)return t;for(var r=function(e,t){if(!(t<=0||e<=0))return e/t-1},n=0;n<4;++n)t[n]=r(e[n+1],e[n]);return t}},{key:"MonthnoFromDay",value:function(e){return 12*(Math.floor(e/1e4)-1995)+(Math.floor(e%1e4/100)-1)}},{key:"SeasonnoFromDay",value:function(e){var t=Math.floor(e/1e4),r=Math.floor(e%1e4/100)-1;return 4*(t-1995)+Math.floor(r/3)}},{key:"SeasonnoFromYearMonth",value:function(e,t){return 4*(e-1995)+Math.floor((t-1)/3)}},{key:"SeasonnoToYearMonth",value:function(e){return 100*(Math.floor(e/4)+1995)+3*(Math.floor(e%4)+1)}},{key:"SeasonnoToBeginEnd",value:function(e){var t=1e4*(1995+Math.floor(e/4)),r=e%4;return 0===r?{begin:t+101,end:t+331}:1===r?{begin:t+401,end:t+630}:2===r?{begin:t+701,end:t+930}:{begin:t+1001,end:t+1231}}},{key:"CalculatePredictAvg",value:function(e){var t={avg20:void 0,avg50:void 0,avg100:void 0},r=e.length,n=function(t){var n=t;if(n>r&&(n=r),n>=10){for(var a=0,i=3;i<n;++i)a+=e[i].predictpe;return a/(n-3)}};return t.avg20=n(20),t.avg50=n(50),t.avg100=n(100),t}},{key:"CalculateValueAvg",value:function(e){var t={avg20:void 0,avg50:void 0,avg100:void 0,avg:void 0},r=e.length,n=function(t){var n=t;if((0===t||n>r)&&(n=r),n>=10){for(var a=0,i=3;i<n;++i)a+=e[i].v;return a/(n-3)}};return t.avg20=n(20),t.avg50=n(50),t.avg100=n(100),t.avg=n(0),t}}]),e}();c.caption=function(e){return Object(i.jsx)("span",{className:"text-muted small",children:e})}}},[[227,1,2]]]);
//# sourceMappingURL=main.bdbb80f5.chunk.js.map