{"version":3,"sources":["tool/GFunc.tsx","consts.ts","store/accounts.ts","store/store.ts","stockinfo/VTags.tsx","stockinfo/CStockInfo.tsx","uq-app/uqs/BzHelloTonva/OrderMaster.ui.tsx","uq-app/uqs/BzHelloTonva/OrderDetail.ui.tsx","uq-app/uqs/BzHelloTonva/Tag.ui.tsx","uq-app/uqs/BzHelloTonva/Staff.ui.tsx","uq-app/uqs/BzHelloTonva/$Piecewise.ui.tsx","uq-app/uqs/BzHelloTonva/$PiecewiseDetail.ui.tsx","uq-app/uqs/BzHelloTonva/Achieve.ui.tsx","uq-app/uqs/BzHelloTonva/Hours.ui.tsx","uq-app/uqs/BzHelloTonva/CustomerTag.ui.tsx","uq-app/uqs/BzHelloTonva/UserStaff.ui.tsx","uq-app/uqs/BruceYuMi/Account.ui.tsx","uq-app/uqs/BruceYuMi/Holding.ui.tsx","uq-app/uqs/BruceYuMi/Transaction.ui.tsx","uq-app/uqs/BruceYuMi/Stock.ui.tsx","uq-app/uqs/BruceYuMi/Market.ui.tsx","uq-app/uqs/BruceYuMi/Portfolio.ui.tsx","uq-app/uqs/BruceYuMi/StockValue.ui.tsx","uq-app/uqs/BruceYuMi/AccountValue.ui.tsx","uq-app/uqs/BruceYuMi/UserAccount.ui.tsx","tool/render.tsx","tool/func.ts","regression/SlrForEarning.ts","regression/ErForEarning.ts","store/index.ts","reportWebVitals.ts","index.tsx","store/sortStocks.ts","uq-app/CBase.ts","uq-app/res/index.ts","uq-app/res/zh.ts","uq-app/res/en.ts","uq-app/VMain.tsx","images/logo.svg","home/VSiteHeader.tsx","home/VSearchHeader.tsx","home/VHome.tsx","home/VSelectTag.tsx","home/VMarketPE.tsx","home/CMarketPE.tsx","home/CHome.tsx","me/VEditMe.tsx","uq-app/appConfig.ts","me/VFaq.tsx","me/VAbout.tsx","me/VMe.tsx","me/CMe.ts","explorer/VSiteHeader.tsx","explorer/VExplorer.tsx","explorer/VExplorerCfg.tsx","explorer/explore.ts","explorer/CExplorer.tsx","warning/VWarningConfig.tsx","warning/CWarning.tsx","predicthistory/VPredictHistory.tsx","predicthistory/CPredictHistory.tsx","holding/VHolding.tsx","holding/VAccount.tsx","holding/CHolding.ts","net/httpChannel.ts","net/httpChannelUI.ts","net/apiBase.ts","net/miApi.ts","net/miNet.ts","group/VGroup.tsx","group/CGroup.ts","uq-app/CApp.ts","uq-app/uqs/index.ts","uq-app/App.tsx","selectStock/VSelectStock.tsx","selectStock/CSelectStock.tsx","uq-app/uqs/BzHelloTonva/index.ts","uq-app/uqs/BruceYuMi/index.ts","stockinfo/VStockInfo.tsx","store/stockGroups.ts","store/stockGroup.ts","uq-app/uqs/BzHelloTonva/Customer.ui.tsx","stockinfo/index.ts"],"names":["GFunc","n","w","undefined","toFixed","isNaN","Math","round","toString","precision","toPrecision","Number","parseFloat","t","r2","iRate","e1","e2","e3","r","r3","z","divyield","pe","e","bonus","price","pow","ev","data","ret","length","funcz","p","i","day","floor","year","month","no","season","s","begin","end","arr","avg20","avg50","avg100","avg","calcuOne","count","endIndex","sum","v","caption","value","className","consts","uqBasedata","appIcon","miApiHost","miApiHostDebug","isDevelopment","process","defaultGroupName","defaultBlackListGroupName","Accounts","miNet","accounts","account","makeObservable","this","observable","a","name","find","Store","stockGroups","setStockSortType","type","config","stockFind","sortType","saveConfig","setStockSelectType","selectType","setUserSortType","userStock","selectTag","item","groupFromName","groupName","selectAccount","setCurrentAccount","accountName","setRegressionConfig","cfg","regression","StockGroups","loadConfig","JSON","stringify","t_usersettings$save","Promise","all","t_usersettings$query","load","rets","init","cStr","c","parse","tagName","group","group0","bmin","bmax","lmin","lmax","lr2","mcount","lr4","r210","irate","stock","defaultGroup","addStock","removeStock","queryName","query","pageStart","pageSize","user","userId","blackID","blackGroup","id","bMin","bMax","lMin","lMax","q_getlasttradeday","isMySelect","isMyBlack","VTags","onSelect","isSelected","anySelected","controller","onClickSelectTag","onEditTag","tag","preventDefault","renderTag","left","right","onClick","page","observer","selectedTags","groups","cApp","store","divNewTag","onNewTag","header","headerClassName","items","render","selectedItems","param","openPage","VPage","schema","required","maxLength","uiSchema","widget","label","placeholder","visible","submit","VNewTag","onFormButtonClick","context","onSaveNewTag","closePage","formData","onButtonClick","VEditTag","onSaveTag","fData","CStockInfo","exrightForEarning","exrightInfo","_capitalearning","array","deep","_bonus","_divideInfo","initLoad","baseItem","q_stockallinfo","t_tagstock$query","stockTags","Array","isArray","arr1","clear","arr3","push","barr","filter","派息","map","loadTTMEarning","loaded","openMetaView","onSelectTag","getSelected","openVPage","t_tag$save","retId","alert","add","StockGroup","exists","groupFromId","nav","addTagStock","newTag","removeTagStock","findIndex","splice","onClickDefaultTag","groupId","showSelectStock","cStock","CSelectStock","call","b","changeDay","code","symbol","market","ni","list","seasonData","seasonlist","len","minNo","seasonno","lastItem","lastShares","shares","maxNo","SeasonnoToBeginEnd","sItem","capital","es","esum","earning","corg","eorg","esumorg","si","noBegin","predictData","predictSeasonData","predictSeasonDataFull","ypredict","x","er","ErForEarning","lr","SlrForEarning","B","epre","predict","l","slopeR","lpre","endDay","exitem","factor","dayFrom","dayIndex","bsum","pricere","factore","SeasonnoFromDay","RestorePrice","VStockInfo","CUqBase","computed","fields","customer","fieldArr","ui","res","zh","en","parent","row","product","quantity","amount","renderCustomer","firstName","lastName","mul","div","offset","asc","sec","saleAmount","deliver","onsite","offsite","break","sick","over","noTimeLog","id2","holding","tick","currency","miRate","ttm","divident","roe","inc1","inc2","inc3","inc4","preInc","marketValue","mi","renderSortCol","radioName","sortMethod","sort","defaultSort","defaultChecked","renderSortHeaders","role","aria-label","renderStockInfoRow","onClickName","inputSelect","inputSelectSpan","order","pshares","zzl","calculateZZ3","dataArr","rows","log2","valueType","vStr","cn","_cn","percent0","percent1","number","numberToMarketValue","renderValue","renderStockUrl","url","href","target","rel","stopPropagation","y","slope","intercept","endY","regress","score","xSum","ySum","xSquared","xY","numerator","ym","y2","chi2","rmsd","ySquared","yi2","yi","yiyi2","sqrt","A","yx","log","exp","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","document","getElementById","sortStocks","getsortFunc","o","CBase","CUqApp","CSub","CAppBase","$zh","home","relation","discover","test","debug","me","changePassword","aboutTheApp","logout","pleaseLogin","content","backend","$en","color","selected","VMain","cHome","cHolding","cExporer","cMe","tabs","icon","tab","notify","onShown","TabCaptionComponent","VSiteHeader","src","logo","alt","style","height","width","renderSearchHeader","View","VSearchHeader","onSearch","key","size","VHome","renderRow","index","rowContent","rowKey","openStockInfo","onSelected","clickRow","callOnSelected","React","stockGroup","action","changeGroup","actions","openMarketPE","onAddStock","manageGroups","scroller","onPage","setSortType","stocks","before","none","VSelectTag","onClickTag","VMarketPE","input","checkLimitShow","f","checked","onLongShortFlag","head","pageContent","historyChart","historyData","chartHistory","labelList","peList","eList","numberToPrecision","chartdata1","labels","datasets","borderColor","backgroundColor","borderWidth","fill","yAxisID","options","scales","yAxes","display","position","gridLines","drawOnChartArea","onChange","CMarketPE","longshortFlag","loadData","dt","Date","getFullYear","getMonth","getDate","q_marketpe","reverse","CHome","getHomeStockGroup","loadItems","showGroupsManage","onWarningConfg","cWarning","renderSiteHeader","renderView","newC","start","VEditMe","props","nick","onItemChanged","itemSchema","newValue","preValue","userApi","userSetProp","saveLocalUser","onExit","showLogout","gridRows","component","iconClass","text","bk","values","appConfig","version","app","uqs","dev","alias","noUnit","tvs","oem","htmlTitle","VFaq","VAbout","top","VMe","meInfo","showEditMe","userSpan","String","substr","faq","about","aboutRows","CMe","unitOwner","rootUnits","VExplorer","labelId","middle","onSelectItem","onClickItem","onConfig","inverse","explore","avgs","avgStr","numberToFixString","VExplorerCfg","sortChage","newType","selectChange","findStockConfg","Explore","lastTradeDay","runInAction","loadExportItems","lastDayRet","result","dataArray","eshares","bshares","calculateVS","CalculateValueAvg","CExplorer","onItemSelected","onItemUnselected","renderHome","onClickPredictAVG","priceDay","openPredictAVG","VWarningConfig","warnings","onNewWarning","renderWarning","witem","warningTypeString","title","VNewWarning","newuiSchema","pickId","Templet","onSaveNewWarning","CWarning","loadWarnings","t_stockwarning$add","onSaveWarning","t_stockwarning$all","VPredictHistory","avg20List","avg50List","avg100List","CPredictHistory","t_toppredictavg$query","li","VHolding","renderAccount","onClickAccount","showAccount","VAccount","CHolding","BruceYuMi","Account","UserAccount","ID","IX","IDinIX","IDNO","accountNO","IDActs","paramValue","IDX","AccountValue","forEach","Object","assign","HttpChannel","hostUrl","apiToken","timeout","startWait","endWait","reject","showError","error","post","params","keys","k","buildOptions","method","innerFetch","body","resolve","buildError","err","channel","that","path","console","timeOutHandler","setTimeout","fetch","encodeURI","ok","clearTimeout","statusText","ct","headers","get","indexOf","json","retJson","catch","message","toLowerCase","startsWith","u","language","culture","Headers","append","lang","HttpChannelNavUI","onError","channelUIs","channelNoUIs","MiApiChannel","basePath","apiName","uqToken","showWaiting","token","channels","channelUI","getHttpChannel","callFetch","put","delete","MiApi","pbody","_","clone","proc","MiNet","miApi","miHost","baseURI","tagId","baseId","VGroup","CGroup","gaps","CApp","cBug","cUI","timer","gapIndex","callTick","BzHelloTonva","$poked","poke","isUserLogin","setRes","dispose","clearInterval","App","setSettings","onLogined","VStockSelect","onClickStock","model","returnStock","renderStock","pageItems","more","searchByKey","allowEmptySearch","PageStockItems","firstSize","q_stocks$page","$page","PageItems","first","returnCall","setUI","uq","Customer","OrderMaster","OrderDetail","Tag","Staff","$Piecewise","$PiecewiseDetail","Achieve","Hours","CustomerTag","UserStaff","Holding","Transaction","Stock","Market","Portfolio","StockValue","check","ttmLimit","checkShowLater","checkDefaultTag","isLogined","headStr","dateHead","baseInfo","predictInfo","predictSeasonEarning","seasonEarning","capitalEarning","evt","isInteger","trim","onSubmit","dayString","ref","defaultValue","percentToFixString","chart1","showLine","pointStyle","pointRadius","per","plr","chart2","predictChartFullInfo","chart3","predictChartROE","numberToString","SeasonnoToYearMonth","chartdataFull","loading","capitalearning","tags","st","t_tag$all","checkDefaultTags","r1","replace","br","yearlen","t_tagstock$add","unshift","t_tagstock$del","stockId"],"mappings":"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","file":"static/js/main.a11529d9.chunk.js","sourcesContent":["import * as React from 'react';\r\n\r\nexport class GFunc {\r\n    public static numberToFixString(n: number, w = 2) {\r\n        return n === undefined ? '' : n.toFixed(w);\r\n    }\r\n    public static number(n: number, w = 2) {\r\n        return n === undefined ? '' : n.toFixed(w);\r\n    }\r\n\r\n    public static numberToMarketValue(n: number) {\r\n        return n === undefined || isNaN(n) ? '' : Math.round(n / 10000).toString(); // + '亿';\r\n    }\r\n\r\n    public static numberToString(n: number, precision = 2) {\r\n        return n === undefined ? '' : n.toPrecision(precision);\r\n    }\r\n\r\n    public static numberToPrecision(n: number, precision = 4) {\r\n        return n === undefined ? undefined : Number.parseFloat(n.toPrecision(precision));\r\n    }\r\n\r\n    public static percentToFixString(n: number) {\r\n        return n === undefined || isNaN(n) ? '' : (n * 100).toFixed(2) + '%';\r\n    }\r\n\r\n    public static percent0(n: number) {\r\n        return n === undefined || isNaN(n) ? '' : (n * 100).toFixed(0) + '%';\r\n    }\r\n    public static percent1(n: number) {\r\n        return n === undefined || isNaN(n) ? '' : (n * 100).toFixed(1) + '%';\r\n    }\r\n\r\n    public static warningTypeString(t: string) {\r\n        switch (t) {\r\n            case 'gt': return '大于';\r\n            case 'lt': return '小于';\r\n            default: return t;\r\n        }\r\n    }\r\n\r\n    public static predictCutRatio(r2: number) {\r\n        return r2 * 2 - r2 * r2;\r\n    }\r\n\r\n    public static evaluatePricePrice(iRate: number, e1: number, e2: number, e3: number) {\r\n        let r = 1 + iRate;\r\n        let r2 = r * r;\r\n        let r3 = r2 * r;\r\n        return (e1 / r + e2 / r2 + e3 / r3 + e3 / iRate / r3) / 2;\r\n    }\r\n\r\n    public static calculateV(z: number, divyield: number, pe: number) {\r\n        if (pe === undefined || isNaN(pe)) {\r\n            return undefined;\r\n        }\r\n\r\n        let r = 0;\r\n        if (z !== undefined) {\r\n            if (z > 0.25) {\r\n                z = 0.25;\r\n            }\r\n            r += z * 100;\r\n        }\r\n        if (divyield !== undefined) {\r\n            r += divyield * 100;\r\n        }\r\n        return r / pe;\r\n    }\r\n\r\n    public static calculateVN(z: number, e: number, bonus: number, price: number) {\r\n        if (price === undefined || isNaN(price) || e === undefined || isNaN(e)) {\r\n            return undefined;\r\n        }\r\n\r\n        let r = 0;\r\n        if (z !== undefined && e > 0) {\r\n            if (z > 0.25) {\r\n                z = 0.24 + Math.pow((z - 0.24) * 100, 0.6667) / 100;\r\n            }\r\n            z = 1 + z;\r\n            z = z * z * z - 1;\r\n            r += z * e * 100;\r\n        }\r\n        if (bonus !== undefined && !isNaN(bonus)) {\r\n            r += bonus * 100;\r\n        }\r\n        return r / price;\r\n    }\r\n\r\n    public static calculateVS(ev: number, bonus: number, price: number) {\r\n        if (price === undefined || isNaN(price)) {\r\n            return undefined;\r\n        }\r\n\r\n        if (ev === undefined || isNaN(ev)) {\r\n            if (bonus === undefined || isNaN(bonus)) {\r\n                return undefined;\r\n            }\r\n            else {\r\n                return bonus * 100 / price;\r\n            }\r\n        }\r\n        else {\r\n            if (bonus === undefined || isNaN(bonus)) {\r\n                return ev * 100 / price;\r\n            }\r\n            else {\r\n                return (bonus + ev) * 100 / price;\r\n            }\r\n        }\r\n    }\r\n\r\n    public static calculateZZ3(data: number[]) {\r\n        let ret: number[] = [undefined, undefined, undefined, undefined];\r\n        if (data === undefined)\r\n            return ret;\r\n        let len = data.length;\r\n        if (len < 5)\r\n            return ret;\r\n\r\n        let funcz = (n: number, p: number) => {\r\n            if (p <= 0 || n <= 0)\r\n                return undefined;\r\n            return ((n / p) - 1);\r\n        }\r\n        for (let i = 0; i < 4; ++i) {\r\n            ret[i] = funcz(data[i + 1], data[i]);\r\n        }\r\n        return ret;\r\n    }\r\n\r\n    public static caption = (value: string) => <span className=\"text-muted small\">{value}</span>;\r\n\r\n    public static MonthnoFromDay(day: number) {\r\n        let year = Math.floor(day / 10000);\r\n        let month = Math.floor((day % 10000) / 100) - 1;\r\n        return (year - 1995) * 12 + month;\r\n    }\r\n\r\n    public static SeasonnoFromDay(day: number) {\r\n        let year = Math.floor(day / 10000);\r\n        let month = Math.floor((day % 10000) / 100) - 1;\r\n        let season = Math.floor(month / 3);\r\n        return (year - 1995) * 4 + season;\r\n    }\r\n\r\n    public static SeasonnoFromYearMonth(year: number, month: number) {\r\n        let season = Math.floor((month - 1) / 3);\r\n        return (year - 1995) * 4 + season;\r\n    }\r\n\r\n    public static SeasonnoToYearMonth(no: number) {\r\n        let year = Math.floor(no / 4) + 1995;\r\n        let month = (Math.floor(no % 4) + 1) * 3;\r\n        return year * 100 + month;\r\n    }\r\n\r\n    public static SeasonnoToBeginEnd(season: number) {\r\n        let year = (1995 + Math.floor(season / 4)) * 10000;\r\n        let s = season % 4;\r\n        if (s === 0) {\r\n            return { begin: year + 101, end: year + 331 };\r\n        }\r\n        else if (s === 1) {\r\n            return { begin: year + 401, end: year + 630 };\r\n        }\r\n        else if (s === 2) {\r\n            return { begin: year + 701, end: year + 930 };\r\n        }\r\n        return { begin: year + 1001, end: year + 1231 };\r\n    }\r\n\r\n    public static CalculateValueAvg(arr: { v: number }[]) {\r\n        let ret: { avg20: number, avg50: number, avg100: number, avg: number } = { avg20: undefined, avg50: undefined, avg100: undefined, avg: undefined };\r\n\r\n        let length = arr.length;\r\n        let calcuOne = (count: number): number => {\r\n            let endIndex = count;\r\n            if (count === 0 || endIndex > length)\r\n                endIndex = length;\r\n            if (endIndex >= 10) {\r\n                let sum = 0;\r\n                for (let i = 3; i < endIndex; ++i) {\r\n                    sum += arr[i].v;\r\n                }\r\n                return sum / (endIndex - 3);\r\n            }\r\n            else {\r\n                return undefined;\r\n            }\r\n        }\r\n\r\n        ret.avg20 = calcuOne(20);\r\n        ret.avg50 = calcuOne(50);\r\n        ret.avg100 = calcuOne(100);\r\n        ret.avg = calcuOne(0);\r\n        return ret;\r\n    }\r\n}\r\n","export const consts = {\r\n    uqBasedata: \"bruce/mi\",\r\n    appIcon: 'https://tv.jkchemical.com/imgs/Bear-icon.png',\r\n    miApiHost: 'https://mi.jjol.cn/',\r\n    miApiHostDebug: 'http://localhost:6011/',\r\n    isDevelopment: process.env.NODE_ENV === 'development',\r\n}\r\n\r\nexport const defaultGroupName = '自选股';\r\nexport const defaultBlackListGroupName = '黑名单';\r\n","import { makeObservable, observable } from \"mobx\";\r\nimport { MiNet } from \"../net\";\r\nimport { Account } from \"./types\";\r\n\r\nexport class Accounts {\r\n\tprivate miNet: MiNet;\r\n\taccounts: Account[] = null;\r\n\taccount: Account = null;\r\n\r\n\tconstructor(miNet: MiNet) {\r\n\t\tmakeObservable(this, {\r\n\t\t\taccounts: observable,\r\n\t\t\taccount: observable,\r\n\t\t});\r\n\t\tthis.miNet = miNet;\r\n\t}\r\n\r\n\tasync load() {\r\n\t\t// let r = await this.miNet.t_allaccounts();\r\n\t\t// if (Array.isArray(r)) {\r\n\t\t// \tthis.accounts = r;\r\n\t\t// }\r\n\t}\r\n\r\n\tsetCurrentAccount(name:string):Account {\r\n\t\tthis.account = this.accounts.find(v => v.name === name);\r\n\t\treturn this.account;\r\n\t}\r\n}\r\n","import { makeObservable, observable } from \"mobx\";\r\nimport { MiNet } from \"../net\";\r\nimport { defaultGroupName } from \"../consts\";\r\nimport { MiConfigs, RegressionConfig, Stock, StockFindConfig } from \"./types\";\r\nimport { StockGroups } from \"./stockGroups\";\r\nimport { Accounts } from \"./accounts\";\r\n\r\nexport class Store {\r\n\tprivate miNet: MiNet;\r\n\t//user: User;\r\n\t//userTag: UserTag;\r\n\t//homeItems: IObservableArray<any> = observable.array<any>([], { deep: true });\r\n\tstockGroups: StockGroups;\r\n\taccounts: Accounts;\r\n\t\r\n\tconstructor(miNet:MiNet) {\r\n\t\tmakeObservable(this, {\r\n\t\t\tconfig: observable,\r\n\t\t});\r\n\t\t//this.user = user;\r\n\t\t//let miHost = consts.miApiHost;\r\n\t\t//let token = this.user.token;\r\n\t\t//this.miApi = new MiApi(miHost, 'fsjs/', 'miapi', token, false);\r\n\t\tthis.miNet = miNet;\r\n\t\tthis.stockGroups = new StockGroups(miNet);\r\n\t\tthis.accounts = new Accounts(miNet);\r\n\t}\r\n\r\n\t@observable config: MiConfigs = { \r\n\t\tgroupName: defaultGroupName, \r\n\t\tstockFind: { sortType:'pe' },\r\n\t\tuserStock: { sortType:'tagpe'},\r\n\t\tregression: {bmin:0, bmax:0.5, r2:0.7, lmin:0.01, lmax:0.5, lr2:0.7, mcount:2, lr4: 3, r210:0.6, irate:0.04}\r\n\t};\r\n\t//@observable blackList: any[] = [];\r\n\t//@observable defaultList: any[] = [];\r\n\r\n\r\n\tgetHomeStockGroup() {\r\n\t\tlet name = this.config.groupName;\r\n\t\treturn this.stockGroups.groupFromName(name);\r\n\t}\r\n\t/*\r\n\t@computed get tagID(): number {\r\n\t\tif (this.stockGroups) {\r\n\t\t\tlet name = this.config.tagName;\r\n\t\t\tlet i = this.stockGroups.findIndex(v => v.groupName === name);\r\n\t\t\tif (i >= 0) {\r\n\t\t\t\treturn this.stockGroups[i].groupId as number;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn -1;\r\n\t}\r\n\t*/\r\n\r\n\tget findStockConfg(): StockFindConfig {\r\n\t\treturn this.config.stockFind;\r\n\t}\r\n\t/*\r\n\tget blackListTagID(): number {\r\n\t\tlet group = this.stockGroups.groupFromName(defaultBlackListGroupName);\r\n\t\treturn group?.groupId;\r\n\t}\r\n\r\n\tget defaultListTagID(): number {\r\n\t\tlet group = this.stockGroups.groupFromName(defaultGroupName);\r\n\t\treturn group?.groupId;\r\n\t}\r\n\t*/\r\n\r\n\tasync load() {\r\n\t\tawait this.loadConfig();\r\n\t\t//await this.loadHomeItems();\r\n\t}\r\n\r\n\tasync saveConfig() {\r\n\t\tlet v = JSON.stringify(this.config);\r\n\t\t//await this.miApi.call('t_usersettings$save', [this.user.id, 'config', v]);\r\n\t\tawait this.miNet.t_usersettings$save(v);\r\n\t}\r\n\r\n\tprotected async loadConfig() {\r\n\t\tlet rets = await Promise.all([\r\n\t\t\tthis.miNet.t_usersettings$query(),\r\n\t\t\tthis.stockGroups.load(),\r\n\t\t\tthis.accounts.load(),\r\n\t\t]);\r\n\t\tawait this.stockGroups.init();\r\n\t\tlet r = rets[0];\r\n\t\tif (r !== undefined) {\r\n\t\t\tlet ret = r;\r\n\t\t\tif (ret !== undefined && ret.length > 0) {\r\n\t\t\t\tlet cStr = ret[0].value;\r\n\t\t\t\tlet c = JSON.parse(cStr);\r\n\t\t\t\tif (this.stockGroups) {\r\n\t\t\t\t\tlet name = c.tagName;\r\n\t\t\t\t\tlet group = this.stockGroups.groupFromName(name);\r\n\t\t\t\t\tif (!group) {\r\n\t\t\t\t\t\tgroup = this.stockGroups.groupFromName(defaultGroupName);\r\n\t\t\t\t\t\tif (group) {\r\n\t\t\t\t\t\t\tc.tagName = defaultGroupName;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tc.tagName = this.stockGroups.group0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tc.groupName = c.tagName;\r\n\t\t\t\t}\r\n\t\t\t\tthis.config = c;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this.config.stockFind === undefined) {\r\n\t\t\tthis.config.stockFind = { sortType: 'pe' };\r\n\t\t}\r\n\t\telse {\r\n\t\t\tswitch (this.config.stockFind.selectType) {\r\n\t\t\tcase 'all': break;\r\n\t\t\tcase 'peroe': break;\r\n\t\t\tcase 'pe': break;\r\n\t\t\tcase 'dp': break;\r\n\t\t\tdefault:\r\n\t\t\t\tthis.config.stockFind.selectType = 'all';\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this.config.userStock === undefined) {\r\n\t\t\tthis.config.userStock = { sortType: 'tagpe' };\r\n\t\t}\r\n\t\tif (this.config.regression === undefined) {\r\n\t\t\tthis.config.regression = {bmin:0, bmax:0.5, r2:0.7, lmin:0.01, lmax:0.5, lr2:0.7, mcount:2, lr4: 3, r210:0.6, irate:0.04};\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (this.config.regression.r210 === undefined) {\r\n\t\t\t\tthis.config.regression.r210 = 0.6;\r\n\t\t\t}\r\n\t\t\tif (this.config.regression.irate === undefined) {\r\n\t\t\t\tthis.config.regression.irate = 0.04;\r\n\t\t\t}\r\n\t\t}\r\n\t\t/*\r\n\t\tawait Promise.all([\r\n\t\t\tthis.loadBlackList(), \r\n\t\t\tthis.loadDefaultList(),\r\n\t\t]);\r\n\t\t*/\r\n\t}\r\n\r\n\tsetStockSortType = async (type:string)=> {\r\n\t\tif (this.config.stockFind.sortType === type)\r\n\t\t\treturn;\r\n\t\tthis.config.stockFind.sortType = type;\r\n\t\tawait this.saveConfig();\r\n\t}\r\n\r\n\tsetStockSelectType = async (type:string) => {\r\n\t\tif (this.config.stockFind.selectType === type)\r\n\t\t\treturn;\r\n\t\tthis.config.stockFind.selectType = type;\r\n\t\tawait this.saveConfig();\r\n\t}\r\n\r\n\tsetUserSortType = async (type:string)=> {\r\n\t\tif (this.config.userStock.sortType === type) return;\r\n\t\tthis.config.userStock.sortType = type;\r\n\t\tawait this.saveConfig();\r\n\t}\r\n\r\n\tselectTag = async (item:any) => {\r\n\t\tlet {name} = item as {name:string, id:number};\r\n\t\tlet group = this.stockGroups.groupFromName(name);\r\n\t\tif (group) {\r\n\t\t\tthis.config.groupName = name;\r\n\t\t\tthis.saveConfig();\r\n\t\t}\r\n\t}\r\n\r\n\tselectAccount = async (item:any) => {\r\n\t\tlet {name} = item as {name:string, id:number};\r\n\t\tlet account = this.accounts.setCurrentAccount(name);\r\n\t\tif (account) {\r\n\t\t\tthis.config.accountName = name;\r\n\t\t\tthis.saveConfig();\r\n\t\t}\r\n\t}\r\n\r\n\tsetRegressionConfig = async (cfg: RegressionConfig) => {\r\n\t\tthis.config.regression = cfg;\r\n\t\tawait this.saveConfig();\r\n\t}\r\n\t/*\r\n\tprotected async loadBlackList(): Promise<void> {\r\n\t\tlet blackid = this.blackListTagID;\r\n\t\tif (blackid <= 0) {\r\n\t\t\tthis.blackList = [];\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tlet param = { user:this.user.id, tag:blackid};\r\n\t\ttry {\r\n\t\t\tlet ret = await this.miNet.t_tagstock$query(blackid, undefined);//await this.uqs.mi.TagStock.query(param);\r\n\t\t\tlet r = ret.map(item=> {\r\n\t\t\treturn item.stock;\r\n\t\t\t});\r\n\t\t\tthis.blackList = r;\r\n\t\t}\r\n\t\tcatch (error) {\r\n\t\t\tlet e = error;\r\n\t\t}\r\n\t}\r\n\r\n\tprotected async loadDefaultList(): Promise<void> {\r\n\t\tlet id = this.defaultListTagID;\r\n\t\tif (id <= 0) {\r\n\t\t\tthis.defaultList = [];\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tlet param = { user:this.user.id, tag:id};\r\n\t\ttry {\r\n\t\t\tlet ret = await this.miNet.t_tagstock$query(id, undefined);//await this.uqs.mi.TagStock.query(param);\r\n\t\t\tlet r = ret.map(item => item.stock);\r\n\t\t\tthis.defaultList = r;\r\n\t\t}\r\n\t\tcatch (error) {\r\n\t\t\tlet e = error;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate addBlackID(id:number) {\r\n\t\tlet i = this.blackList.findIndex(v=> v===id);\r\n\t\tif (i < 0) {\r\n\t\t\tthis.blackList.push(id);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate removeBlackID(id:number) {\r\n\t\tlet i = this.blackList.findIndex(v=> v===id);\r\n\t\tif (i >= 0) {\r\n\t\t\tthis.blackList.splice(i, 1);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate addDefaultID(id:number) {\r\n\t\tlet i = this.defaultList.findIndex(v=> v===id);\r\n\t\tif (i < 0) {\r\n\t\t\tthis.defaultList.push(id);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate removeDefaultID(id:number) {\r\n\t\tlet i = this.defaultList.findIndex(v=> v===id);\r\n\t\tif (i >= 0) {\r\n\t\t\tthis.defaultList.splice(i, 1);\r\n\t\t}\r\n\t}\r\n\r\n\tasync addStock(stockId:number) {\r\n\t\tif (stockId <= 0) return;\r\n\t\tlet tagid = this.defaultListTagID;\r\n\t\tawait this.miNet.t_tagstock$add(tagid, stockId);\r\n\t\tawait this.addTagStockID(tagid, stockId);\r\n\t\tlet group = this.stockGroups.groupFromId(tagid);\r\n\t\t//await this.loadHomeItems();\r\n\t\tgroup.addStock(stockId);\r\n\t}\r\n\t*/\r\n\r\n\tasync addTagStock(stock: Stock) {\r\n\t\t/*\r\n\t\tif (this.userTag && this.userTag.tagID === tagid) {\r\n\t\t\tif (tagid === this.blackListTagID) {\r\n\t\t\t\tthis.addBlackID(stockID);\r\n\t\t\t}\r\n\t\t\telse if (tagid === this.defaultListTagID) {\r\n\t\t\t\tthis.addDefaultID(stockID);\r\n\t\t\t}\r\n\t\t}\r\n\t\t*/\r\n\t\tawait this.stockGroups.defaultGroup.addStock(stock);\r\n\t}\r\n\r\n\t/*\r\n\tasync addTagStockIDs(tagid: number, stockIDs: number[]) {\r\n\t\tif (tagid === this.blackListTagID) {\r\n\t\t\tstockIDs.map(v=>this.addBlackID(v));\r\n\t\t}\r\n\t\telse if (tagid === this.defaultListTagID) {\r\n\t\t\tstockIDs.map(v=>this.addDefaultID(v));\r\n\t\t}\r\n\t}\r\n\t*/\r\n\r\n\tasync removeTagStock(stock: Stock) {\r\n\t\tawait this.stockGroups.defaultGroup.removeStock(stock);\r\n\t\t/*\r\n\t\tif (tagid === this.blackListTagID) {\r\n\t\t\tthis.removeBlackID(stockID);\r\n\t\t}\r\n\t\telse if (tagid === this.defaultListTagID) {\r\n\t\t\tthis.removeDefaultID(stockID);\r\n\t\t}\r\n\t\tif (this.userTag && this.userTag.tagID === tagid) {\r\n\t\t\tthis.removeStock(stockID);\r\n\t\t}\r\n\t\t*/\r\n\t}\r\n\r\n\t/*\r\n\tasync loadHomeItems() {\r\n\t\t// 距离上次\r\n\t\tlet queryName = 'taguser';\r\n\r\n\t\tlet query = {\r\n\t\t\tname: queryName,\r\n\t\t\tpageStart: 0,\r\n\t\t\tpageSize: 1000,\r\n\t\t\tuser: this.user.id,\r\n\t\t\ttag: this.tagID,\r\n\t\t\tyearlen: 1,\r\n\t\t};\r\n\t\tlet result = await this.miNet.process(query, []);\r\n\t\tif (Array.isArray(result) === false) return;\r\n\r\n\t\tlet arr = result as {id:number, order:number, data?:string, v?:number, e:number, e3:number, ep:number, price:number, exprice:number, divyield:number, r2:number, lr2:number, predictpe?:number, dataArr?:number[]}[];\r\n\t\tfor (let item of arr) {\r\n\t\t\tlet dataArray = JSON.parse(item.data) as number[];\r\n\t\t\titem.dataArr = dataArray;\r\n\t\t\tlet sl = new SlrForEarning(dataArray);\r\n\t\t\titem.ep = (sl.predict(4) + item.e) / 2;\r\n\t\t\titem.e3 = sl.predict(7);\r\n\t\t\titem.v = GFunc.calculateVN(sl.slopeR, item.ep, item.divyield * item.price, item.exprice);\r\n\t\t\titem.predictpe = item.price / item.e3;\r\n\t\t}\r\n\t\tthis.sortStocks(arr);\r\n\r\n\t\trunInAction(() => {\r\n\t\t\tthis.homeItems.clear();\r\n\t\t\tthis.homeItems.push(...arr);\t\r\n\t\t});\r\n\t}\r\n\t*/\r\n\r\n\tasync loadExportItems(queryName: string):Promise<any[]> {\r\n\t\t//let sName = this.store.config.stockFind.selectType;\r\n\t\tlet {bmin, bmax, r2, lmin, lmax, lr2, mcount, lr4, r210} = this.config.regression;\r\n\t\t//if (sName !== undefined)\r\n\t\t//  queryName = sName;\r\n\t\tlet query = {\r\n\t\t\tname: queryName,\r\n\t\t\tpageStart: 0,\r\n\t\t\tpageSize: 3000,\r\n\t\t\tuser: this.miNet.userId,\r\n\t\t\tblackID: this.stockGroups.blackGroup.id,\r\n\t\t\tbMin: bmin,\r\n\t\t\tbMax: bmax,\r\n\t\t\tr2: r2,\r\n\t\t\tlMin: lmin,\r\n\t\t\tlMax: lmax,\r\n\t\t\tlr2: lr2,\r\n\t\t\tmcount: mcount,\r\n\t\t\tlr4: lr4,\r\n\t\t\tr210: r210,\r\n\t\t};\r\n\t\tlet rets = await Promise.all([\r\n\t\t\tthis.miNet.process(query, []),\r\n\t\t\t//this.store.miApi.call('q_getlasttradeday', [])\r\n\t\t\tthis.miNet.q_getlasttradeday(),\r\n\t\t]);\r\n\t\treturn rets;\r\n\t}\r\n\r\n\tisMySelect(id:number): boolean {\r\n\t\treturn this.stockGroups.isMySelect(id);\r\n\t}\r\n\r\n\tisMyBlack(id:number): boolean {\r\n\t\treturn this.stockGroups.isMyBlack(id);\r\n\t}\r\n}\r\n","import * as React from 'react';\r\nimport { observer } from 'mobx-react-lite';\r\nimport { VPage, Page, FA, List, Form, ItemSchema, StringSchema, UiInputItem, UiSchema, Context, IdSchema, UiIdItem, LMR } from 'tonva-react';\r\nimport { CStockInfo } from './CStockInfo';\r\nimport { defaultBlackListGroupName, defaultGroupName } from '../consts';\r\n\r\nexport class VTags extends VPage<CStockInfo> {\r\n\tasync open(param?: any) {\r\n\t\tthis.openPage(this.page);\r\n\t}\r\n\r\n\tprivate onSelect = (item: any, isSelected: boolean, anySelected: boolean) => {\r\n\t\tthis.controller.onClickSelectTag(item, isSelected);\r\n\t}\r\n\r\n\tprivate onEditTag = (tag:any, e:React.MouseEvent) => {\r\n\t\te.preventDefault();\r\n\t\tthis.controller.onEditTag(tag);\r\n\t}\r\n\r\n\tprivate renderTag = (tag: any) => {\r\n\t\tlet left = <div className=\"px-3 py-2 cursor-pointer\">{tag.name}</div>;\r\n\t\tlet fdTag = tag.name === defaultBlackListGroupName || tag.name === defaultGroupName;\r\n\t\tlet right = fdTag ? '' : <div className=\"px-3 py-2 cursor-pointer\" onClick={(e)=>this.onEditTag(tag, e)}>编辑</div>;\r\n\t\treturn <LMR className=\"mx-3 my-2\" left={left} right={right}>\r\n\t\t</LMR>;\r\n\t}\r\n\r\n\tprivate page = observer(() => {\r\n\t\tlet { selectedTags } = this.controller;\r\n\t\tlet { stockGroups } = this.controller.cApp.store;\r\n\t\tlet { groups } = stockGroups;\r\n\t\tlet divNewTag = groups.length >= 10 ?\r\n\t\t\t''\r\n\t\t\t:\r\n\t\t\t<div className=\"px-3 py-2 cursor-pointer\" onClick={this.controller.onNewTag}>\r\n\t\t\t\t<FA name=\"plus\" className=\"text-primary\" />\r\n\t\t\t\t&nbsp; 新建分组\r\n\t\t\t</div>;\r\n\r\n\t\treturn <Page header=\"选择分组\" headerClassName=\"bg-primary\">\r\n\t\t\t{divNewTag}\r\n\t\t\t<List items={groups} \r\n\t\t\t\titem={{ onSelect: this.onSelect, render: this.renderTag }} \r\n\t\t\t\tselectedItems={selectedTags} />\r\n\t\t</Page>;\r\n\t});\r\n}\r\n\r\nconst schema: ItemSchema[] = [\r\n\t{ name: 'name', type: 'string', required: true, maxLength: 10 } as StringSchema,\r\n\t{ name: 'id', type: 'id' } as IdSchema,\r\n\t{ name: 'submit', type: 'submit', },\r\n];\r\nconst uiSchema: UiSchema = {\r\n\titems: {\r\n\t\tname: { widget: 'text', label: null, placeholder: '分组名称' } as UiInputItem,\r\n\t\tid: { widget: 'id', visible: false } as UiIdItem,\r\n\t\tsubmit: { widget: 'button', label: '保存', className: 'btn btn-primary' },\r\n\t}\r\n};\r\n\r\nexport class VNewTag extends VPage<CStockInfo> {\r\n\tasync open(param?: any) {\r\n\t\tthis.openPage(this.page);\r\n\t}\r\n\r\n\tprivate onFormButtonClick = async (name: string, context: Context) => {\r\n\t\tif (await this.controller.onSaveNewTag(context.data)) {\r\n\t\t\tthis.controller.closePage();\r\n\t\t}\r\n\t}\r\n\r\n\tprivate page = () => {\r\n\t\treturn <Page header=\"新建分组\" headerClassName=\"bg-primary\">\r\n\t\t\t<div className=\"px-3 py-3\">\r\n\t\t\t\t<Form schema={schema}\r\n\t\t\t\tuiSchema={uiSchema}\r\n\t\t\t\tformData={undefined}\r\n\t\t\t\tonButtonClick={this.onFormButtonClick}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t\t</Page>;\r\n\t\t}\r\n\t}\r\n\r\nexport class VEditTag extends VPage<CStockInfo> {\r\n\tasync open(param?: any) {\r\n\t\tthis.openPage(this.page, param);\r\n\t}\r\n\r\n\tprivate onFormButtonClick = async (name: string, context: Context) => {\r\n\t\tif (await this.controller.onSaveTag(context.data)) {\r\n\t\t\tthis.controller.closePage();\r\n\t\t}\r\n\t}\r\n\r\n\tprivate page = (param?: any) => {\r\n\t\tlet {id, name} = param;\r\n\t\tlet fData = {id:id, name:name};\r\n\t\treturn <Page header=\"编辑分组\" headerClassName=\"bg-primary\">\r\n\t\t\t<div className=\"px-3 py-3\">\r\n\t\t\t\t<Form schema={schema}\r\n\t\t\t\tuiSchema={uiSchema}\r\n\t\t\t\tformData={fData}\r\n\t\t\t\tonButtonClick={this.onFormButtonClick}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t</Page>;\r\n\t}\r\n}\r\n","/*eslint @typescript-eslint/no-unused-vars: [\"off\", { \"vars\": \"all\" }]*/\r\nimport { observable, IObservableArray, computed, makeObservable } from 'mobx';\r\nimport { nav } from 'tonva-react';\r\nimport { CUqBase } from \"../uq-app\";\r\nimport { GFunc } from '../tool/GFunc';\r\nimport { VStockInfo } from './VStockInfo'\r\nimport { NStockInfo, StockPrice, StockCapitalearning, StockBonus, StockDivideInfo } from './StockInfoType';\r\nimport { VTags, VNewTag, VEditTag } from './VTags';\r\nimport { ErForEarning, SlrForEarning } from 'regression';\r\nimport { StockGroup } from '../store';\r\nimport { CSelectStock } from '../selectStock';\r\n\r\nexport class CStockInfo extends CUqBase {\r\n    @observable baseItem: NStockInfo;\r\n    @observable protected loaded: boolean = false;\r\n\r\n    @observable price: StockPrice;\r\n    //@observable roe: StockRoe;\r\n    //@observable tags: any[] = undefined;\r\n    @observable stockTags: any[];\r\n    selectedTags: any[];\r\n\r\n    protected exrightForEarning: { day: number, factor: number }[] = [];\r\n    protected exrightInfo: { day: number, bonus: number, factor: number, factore: number }[] = [];\r\n    @observable seasonData: { season: number, c: number, e: number, esum: number, corg: number, eorg: number, esumorg: number }[] = [];\r\n    @observable predictSeasonData: { season: number, c: number, e: number, esum: number, corg: number, eorg: number, esumorg: number }[] = [];\r\n    @observable predictSeasonDataFull: { season: number, c: number, e: number, esum: number, corg: number, eorg: number, esumorg: number }[] = [];\r\n    @observable predictData: { e: number, b: number, r2: number, epre: number, l: number, lr2: number, lpre: number };\r\n    @observable ypredict: number[] = [];\r\n    // @observable historyData:{day:number, price:number, ttm:number}[] =  [];\r\n    // protected historyDataOrg:{day:number, price:number, dayno:number}[] = [];\r\n\r\n    //protected _earning: IObservableArray<StockEarning> = observable.array<StockEarning>([], { deep: true });\r\n    protected _capitalearning: IObservableArray<StockCapitalearning> = observable.array<StockCapitalearning>([], { deep: true });\r\n    protected _bonus: IObservableArray<StockBonus> = observable.array<StockBonus>([], { deep: true });\r\n    protected _divideInfo: IObservableArray<StockDivideInfo> = observable.array<StockDivideInfo>([], { deep: true });\r\n\r\n    @computed get capitalearning(): IObservableArray<StockCapitalearning> {\r\n        if (this.loaded === false) return undefined;\r\n        return this._capitalearning;\r\n    }\r\n\r\n    @computed get bonus(): IObservableArray<StockBonus> {\r\n        if (this.loaded === false) return undefined;\r\n        return this._bonus;\r\n    }\r\n\r\n    @computed get divideInfo(): IObservableArray<StockDivideInfo> {\r\n        if (this.loaded === false) return undefined;\r\n        return this._divideInfo;\r\n    }\r\n\r\n    @observable isMySelect: boolean = false;\r\n\r\n    constructor(cApp: any) {\r\n        super(cApp);\r\n        makeObservable(this);\r\n    }\r\n    initLoad = () => {\r\n        this.load();\r\n    }\r\n\r\n    private load = async () => {\r\n        if (!this.baseItem) return;\r\n\r\n        let { id, day } = this.baseItem;\r\n        let rets = await Promise.all([\r\n            this.cApp.miNet.q_stockallinfo(id, day),\r\n            this.cApp.miNet.t_tagstock$query(undefined, id),\r\n        ]);\r\n        this.stockTags = rets[1];\r\n        let ret = rets[0];\r\n        if (Array.isArray(ret[0])) {\r\n            let arr1 = ret[1];\r\n            if (Array.isArray(arr1)) {\r\n                this.price = arr1[0];\r\n            }\r\n\r\n            this._bonus.clear();\r\n            this._divideInfo.clear();\r\n            let arr3 = ret[3];\r\n            if (Array.isArray(arr3)) {\r\n                this._divideInfo.push(...arr3);\r\n                let barr = arr3.filter((v: any) =>　{\r\n                    return v.派息 as number > 0;\r\n                }).map((v: any) => {\r\n                    return {day:v.day, bonus:v.派息};\r\n                })\r\n                this._bonus.push(...barr);\r\n            }\r\n\r\n            await this.loadTTMEarning(ret[2]);\r\n        }\r\n\r\n        this.isMySelect = this.cApp.store.isMySelect(id);\r\n        this.loaded = true;\r\n    }\r\n\r\n    protected async loadTTMEarning(list: { seasonno: number, capital: number, earning: number, es: number, shares: number }[]) {\r\n        this.seasonData.splice(0);\r\n        let seasonlist: { [index: number]: { season: number, c: number, e: number, esum: number, corg: number, eorg: number, esumorg: number } } = {};\r\n        let len = list.length;\r\n        if (len <= 0) return;\r\n        let minNo = list[len - 1].seasonno;\r\n        let lastItem = list[0];\r\n        let lastShares = lastItem.shares;\r\n        let maxNo = lastItem.seasonno;\r\n\r\n        let { end } = GFunc.SeasonnoToBeginEnd(maxNo);\r\n        for (let item of list) {\r\n            let no = item.seasonno;\r\n            let sItem = {\r\n                season: no, c: item.capital * item.shares / lastShares, e: item.es * item.shares / lastShares, esum: item.earning * item.shares / lastShares,\r\n                corg: item.capital, eorg: item.es, esumorg: item.earning\r\n            }\r\n            //this.ExrightEarning(end, no, sItem);\r\n            seasonlist[no] = sItem;\r\n        }\r\n\r\n        let i = 0;\r\n        //\t\tlet esum = 0;\r\n        for (let seasonno = minNo; seasonno <= maxNo; ++seasonno, ++i) {\r\n            let si = seasonlist[seasonno];\r\n            if (si === undefined) {\r\n                continue;\r\n            }\r\n            // esum += si.e;\r\n            // if (i < 3) {\r\n            // \tsi.esum = undefined;\r\n            // }\r\n            // else {\r\n            // \tsi.esum = esum;\r\n            // \tlet pastitem = seasonlist[seasonno-3];\r\n            // \tif (pastitem !== undefined) {\r\n            // \t\tesum -= pastitem.e;\r\n            // \t}\r\n            // }\r\n            this.seasonData.splice(0, 0, si);\r\n        }\r\n\r\n        let noBegin = maxNo - 19;\r\n        this.predictData = undefined;\r\n        this.predictSeasonData.splice(0);\r\n        this.predictSeasonDataFull.splice(0);\r\n        if (noBegin < minNo) return;\r\n        noBegin += 3;\r\n        this.ypredict = [];\r\n        for (let x = noBegin; x <= maxNo; x += 4) {\r\n            let item = seasonlist[x];\r\n            if (item === undefined) break;\r\n            this.predictSeasonData.splice(0, 0, item);\r\n            this.ypredict.push(item.esum);\r\n        }\r\n\r\n        for (let x = maxNo; x >= minNo; x -= 4) {\r\n            let item = seasonlist[x];\r\n            if (item === undefined) break;\r\n            this.predictSeasonDataFull.push(item);\r\n        }\r\n\r\n        if (this.ypredict.length === 5) {\r\n            let er = new ErForEarning(this.ypredict);\r\n            let lr = new SlrForEarning(this.ypredict);\r\n            this.predictData = { e: this.ypredict[4], b: er.B, r2: er.r2, epre: er.predict(4), l: lr.slopeR, lr2: lr.r2, lpre: lr.predict(4) };\r\n        }\r\n        else {\r\n            this.predictSeasonData.splice(0);\r\n        }\r\n    }\r\n\r\n    protected ExrightEarning(endDay: number, season: number, item: { c: number, e: number, esum: number }) {\r\n        let { end } = GFunc.SeasonnoToBeginEnd(season);\r\n        for (let i = 0; i < this.exrightForEarning.length; ++i) {\r\n            let exitem = this.exrightForEarning[i];\r\n            let day = exitem.day;\r\n            if (day > endDay) break;\r\n            if (day < end) continue;\r\n            let factor = exitem.factor;\r\n            item.c = item.c * factor;\r\n            item.e = item.e * factor;\r\n            item.esum = item.esum * factor;\r\n        }\r\n    }\r\n\r\n    // loadHistoryData(showAll: boolean) {\r\n    //     let list = this.historyDataOrg;\r\n    //     let length = list.length;\r\n    //     if (length <= 10) {\r\n    //         this.historyData = [];\r\n    //         return;\r\n    //     }\r\n\r\n    //     if (!showAll) {\r\n    //         let day = this.baseItem.day;\r\n    //         if (day !== undefined) {\r\n    //             let i = length - 1;\r\n    //             for (; i >= 0; --i) {\r\n    //                 let item = list[i];\r\n    //                 if (item.day <= day) break;\r\n    //             }\r\n    //             length = i + 1;\r\n    //         }\r\n    //     }\r\n    //     let endIndex = length - 1;\r\n    //     let lastItem = list[endIndex];\r\n    //     let lastdayno = lastItem.dayno;\r\n    //     if (lastdayno === undefined) {\r\n    //         while (endIndex > 0) {\r\n    //             --endIndex;\r\n    //             lastItem = list[endIndex];\r\n    //             lastdayno = lastItem.dayno;\r\n    //             if (lastdayno !== undefined) break;\r\n    //         }\r\n    //     }\r\n    //     let lastDay = lastItem.day;\r\n    //     let not = lastdayno % 5;\r\n    //     let historyList: any[] = [];\r\n    //     for (let i = 0; i <= endIndex; ++i) {\r\n    //         let { day, price, dayno } = list[i];\r\n    //         if (dayno % 5 === not) {\r\n    //             historyList.push({ day: day, price: this.RestorePrice(price, day, lastDay), ttm: this.CalculateHistoryPE(price, day) });\r\n    //         }\r\n    //     }\r\n    //     this.historyData = historyList;\r\n    // }\r\n\r\n    RestorePrice(price: number, dayFrom: number, dayIndex: number) {\r\n        let bsum = 0;\r\n        let pricere = price;\r\n        if (dayFrom < dayIndex) {\r\n            for (let i = 0; i < this.exrightInfo.length; ++i) {\r\n                let { day, bonus, factor, factore } = this.exrightInfo[i];\r\n                if (day <= dayFrom)\r\n                    continue;\r\n                if (day > dayIndex)\r\n                    break;\r\n                pricere = pricere * factor;\r\n                bsum = (bsum + bonus) * factore;\r\n            }\r\n            pricere = pricere - bsum;\r\n        }\r\n        else {\r\n            for (let i = 0; i < this.exrightInfo.length; ++i) {\r\n                let { day, bonus, factor, factore } = this.exrightInfo[i];\r\n                if (day <= dayIndex)\r\n                    continue;\r\n                if (day > dayFrom)\r\n                    break;\r\n                pricere = pricere / factor;\r\n                bsum = bsum / factore + bonus;\r\n            }\r\n            pricere = pricere + bsum;\r\n        }\r\n        return pricere;\r\n    }\r\n\r\n    CalculateHistoryPE(price: number, day: number) {\r\n        let season = GFunc.SeasonnoFromDay(day);\r\n        let len = this.seasonData.length;\r\n        for (let i = 0; i < len; ++i) {\r\n            let item = this.seasonData[i];\r\n            if (item.season >= season) continue;\r\n            if (item.esumorg === undefined) return undefined;\r\n            let { end } = GFunc.SeasonnoToBeginEnd(item.season);\r\n            let pricere = this.RestorePrice(price, day, end);\r\n            return pricere / item.esumorg;\r\n        }\r\n\r\n        return undefined;\r\n    }\r\n\r\n    async internalStart(param: any) {\r\n        this.baseItem = param as NStockInfo;\r\n        let { id } = this.baseItem;\r\n        this.isMySelect = this.cApp.store.isMySelect(id);\r\n        this.initLoad();\r\n        this.openVPage(VStockInfo);\r\n    }\r\n\r\n    openMetaView = () => {\r\n    }\r\n\r\n    onSelectTag = async () => {\r\n        //await this.loadTags();\r\n        this.selectedTags = this.cApp.store.stockGroups.getSelected(this.stockTags);\r\n        /*\r\n        this.cApp.store.stockGroups.filter(v => {\r\n            let i = this.stockTags.findIndex(st => st.tag === v.groupId);\r\n            return i >= 0;\r\n        });\r\n        */\r\n        //await this.loadTags();\r\n        this.openVPage(VTags);\r\n    }\r\n\r\n    onNewTag = () => {\r\n        this.openVPage(VNewTag);\r\n    }\r\n\r\n    onEditTag = (param: any) => {\r\n        this.openVPage(VEditTag, param);\r\n    }\r\n\r\n    onSaveNewTag = async (data: any) => {\r\n        let { name } = data;\r\n        //let param = { id: undefined, name: name };\r\n        //let ret = await this.cApp.store.miApi.call('t_tag$save', [this.user.id, undefined, name]);\r\n        let ret = await this.cApp.miNet.t_tag$save(name);\r\n        let { retId } = ret;\r\n        if (retId < 0) {\r\n            alert(name + ' 已经被使用了');\r\n            return false;\r\n        }\r\n        this.cApp.store.stockGroups.add(\r\n            new StockGroup(name, name, this.cApp.miNet)\r\n        );\r\n        return true;\r\n    }\r\n\r\n    onSaveTag = async (data: any) => {\r\n        let { id, name } = data;\r\n        let { stockGroups } = this.cApp.store;\r\n        let param = { id: id, name: name };\r\n        let exists = stockGroups.exists(id, name);\r\n        if (exists === true) {\r\n            alert(name + ' 已经被使用了');\r\n            return false;\r\n        }\r\n        let ret = await this.cApp.miNet.t_tag$save(name);\r\n        let { retId } = ret;\r\n        if (retId === undefined || retId < 0) {\r\n            alert(name + ' 已经被使用了');\r\n            return false;\r\n        }\r\n        let group = stockGroups.groupFromId(id);\r\n        if (group) {\r\n            group.name = name;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    onClickSelectTag = async (tag: any, isSelected: boolean) => {\r\n        let param = {\r\n            user: nav.user.id,\r\n            tag: tag.id,\r\n            arr1: [\r\n                { stock: this.baseItem.id }\r\n            ]\r\n        };\r\n        if (isSelected === true) {\r\n            //let ret = await this.cApp.store.miApi.call('t_tagstock$add', [this.user.id, tag.id, this.baseItem.id]); //.uqs.mi.TagStock.add(param);\r\n            await this.cApp.store.addTagStock(this.baseItem as any);\r\n            //let ret = this.cApp.miNet.t_tagstock$add(tag.id, this.baseItem.id);\r\n            let newTag = {\r\n                tag: {\r\n                    id: tag.id,\r\n                }\r\n            }\r\n            this.stockTags.push(newTag);\r\n        }\r\n        else {\r\n            //let ret = await this.cApp.store.miApi.call('t_tagstock$del', [this.user.id, tag.id, this.baseItem.id]); // //await this.uqs.mi.TagStock.del(param);\r\n            //let ret = this.cApp.miNet.t_tagstock$del(tag.id, this.baseItem.id);\r\n            await this.cApp.store.removeTagStock(this.baseItem as any);\r\n            let i = this.stockTags.findIndex(v => v.tag.id === tag.id);\r\n            this.stockTags.splice(i, 1);\r\n        }\r\n    }\r\n\r\n    onClickDefaultTag = async (isSelected: boolean) => {\r\n        //let tagid = this.cApp.store.defaultListTagID;\r\n        let { store } = this.cApp;\r\n        let { id: groupId } = store.stockGroups.defaultGroup;\r\n        if (isSelected === true) {\r\n            //let ret = this.cApp.miNet.t_tagstock$add(tagid, this.baseItem.id);\r\n            await store.addTagStock(this.baseItem as any);\r\n            let newTag = {\r\n                tag: {\r\n                    id: store.stockGroups.defaultGroup.id,\r\n                }\r\n            }\r\n            this.stockTags.push(newTag);\r\n        }\r\n        else {\r\n            //let ret = await this.cApp.store.miApi.call('t_tagstock$del', [this.user.id, tagid, this.baseItem.id]); // //await this.uqs.mi.TagStock.del(param);\r\n            await this.cApp.store.removeTagStock(this.baseItem as any);\r\n            //let ret = this.cApp.miNet.t_tagstock$del(tagid, this.baseItem.id);\r\n            let i = this.stockTags.findIndex(v => v.tag.id === groupId);\r\n            this.stockTags.splice(i, 1);\r\n        }\r\n    }\r\n\r\n    showSelectStock = async (day: number): Promise<any> => {\r\n        let cStock = new CSelectStock(this.cApp);\r\n        let item = await cStock.call() as any;\r\n        let b = { ...item }\r\n        b.day = day;\r\n        this.baseItem = b;\r\n        this.loaded = false;\r\n        await this.load();\r\n    }\r\n\r\n    changeDay = async (day: number) => {\r\n        if (this.baseItem.day === day) return;\r\n        let { id, name, code, symbol, market } = this.baseItem;\r\n        let ni = { id: id, name: name, code: code, symbol: symbol, market: market, day: day === 0 ? undefined : day };\r\n        this.baseItem = ni;\r\n        this.loaded = false;\r\n        await this.load();\r\n    }\r\n}\r\n","import { Res, UI } from \"tonva-react\";\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { FieldItem, FieldItemInt, FieldItemNum, FieldItemString, FieldItemId } from \"tonva-react\";\r\nimport { OrderMaster } from \"./BzHelloTonva\";\r\n\r\n/*--fields--*/\r\nconst fields = {\r\n\tid: {\r\n\t\t\"name\": \"id\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Id\"\r\n\t} as FieldItemId,\r\n\tno: {\r\n\t\t\"name\": \"no\",\r\n\t\t\"type\": \"string\",\r\n\t\t\"isKey\": true,\r\n\t\t\"widget\": \"string\",\r\n\t\t\"label\": \"No\"\r\n\t} as FieldItemString,\r\n\tcustomer: {\r\n\t\t\"name\": \"customer\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Customer\"\r\n\t} as FieldItemId,\r\n};\r\n/*==fields==*/\r\n\r\nexport const fieldArr: FieldItem[] = [\r\n\tfields.no, fields.customer, \r\n];\r\n\r\nexport const ui: UI = {\r\n\tlabel: \"OrderMaster\",\r\n\tfieldArr,\r\n\tfields,\r\n};\r\n\r\nexport const res: Res<any> = {\r\n\tzh: {\r\n\t},\r\n\ten: {\r\n\t}\r\n};\r\n\r\nexport function render(item: OrderMaster):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","import { Res, UI } from \"tonva-react\";\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { FieldItem, FieldItemInt, FieldItemNum, FieldItemString, FieldItemId } from \"tonva-react\";\r\nimport { OrderDetail } from \"./BzHelloTonva\";\r\nimport { render as renderCustomer } from './Customer.ui';\r\n\r\n/*--fields--*/\r\nconst fields = {\r\n\tid: {\r\n\t\t\"name\": \"id\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Id\"\r\n\t} as FieldItemId,\r\n\tparent: {\r\n\t\t\"name\": \"parent\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": true,\r\n\t\t\"label\": \"Parent\"\r\n\t} as FieldItemId,\r\n\trow: {\r\n\t\t\"name\": \"row\",\r\n\t\t\"type\": \"integer\",\r\n\t\t\"isKey\": true,\r\n\t\t\"widget\": \"updown\",\r\n\t\t\"label\": \"Row\"\r\n\t} as FieldItemInt,\r\n\tproduct: {\r\n\t\t\"name\": \"product\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Product\"\r\n\t} as FieldItemId,\r\n\tprice: {\r\n\t\t\"name\": \"price\",\r\n\t\t\"type\": \"number\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"number\",\r\n\t\t\"label\": \"Price\"\r\n\t} as FieldItemNum,\r\n\tquantity: {\r\n\t\t\"name\": \"quantity\",\r\n\t\t\"type\": \"number\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"number\",\r\n\t\t\"label\": \"Quantity\"\r\n\t} as FieldItemNum,\r\n\tamount: {\r\n\t\t\"name\": \"amount\",\r\n\t\t\"type\": \"number\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"number\",\r\n\t\t\"label\": \"Amount\"\r\n\t} as FieldItemNum,\r\n};\r\n/*==fields==*/\r\n\r\nexport const fieldArr: FieldItem[] = [\r\n\tfields.parent, fields.row, fields.product, fields.price, fields.quantity, fields.amount, \r\n];\r\n\r\nexport const ui: UI = {\r\n\tlabel: \"OrderDetail\",\r\n\tfieldArr,\r\n\tfields,\r\n};\r\n\r\nexport const res: Res<any> = {\r\n\tzh: {\r\n\t},\r\n\ten: {\r\n\t}\r\n};\r\n\r\nexport function render(item: OrderDetail):JSX.Element {\r\n\tlet {product, price, quantity, amount} = item;\r\n\treturn <div>\r\n\t\t<div>{renderCustomer(product as any)}</div>\r\n\t\t<div className=\"d-flex\">\r\n\t\t\t<div className=\"w-3c\"></div>\r\n\t\t\t<div className=\"w-8c\"><span>数量:</span>{quantity}</div>\r\n\t\t\t单价:{price}\r\n\t\t\t金额:{amount}\r\n\t\t</div>\r\n\t</div>;\r\n};\r\n","import { Res, UI } from \"tonva-react\";\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { FieldItem, FieldItemInt, FieldItemNum, FieldItemString, FieldItemId } from \"tonva-react\";\r\nimport { Tag } from \"./BzHelloTonva\";\r\n\r\n/*--fields--*/\r\nconst fields = {\r\n\tid: {\r\n\t\t\"name\": \"id\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Id\"\r\n\t} as FieldItemId,\r\n\tparent: {\r\n\t\t\"name\": \"parent\",\r\n\t\t\"type\": \"integer\",\r\n\t\t\"isKey\": true,\r\n\t\t\"widget\": \"updown\",\r\n\t\t\"label\": \"Parent\"\r\n\t} as FieldItemInt,\r\n\tname: {\r\n\t\t\"name\": \"name\",\r\n\t\t\"isKey\": true,\r\n\t\t\"label\": \"Name\"\r\n\t} as undefined,\r\n};\r\n/*==fields==*/\r\n\r\nexport const fieldArr: FieldItem[] = [\r\n\tfields.parent, fields.name, \r\n];\r\n\r\nexport const ui: UI = {\r\n\tlabel: \"Tag\",\r\n\tfieldArr,\r\n\tfields,\r\n};\r\n\r\nexport const res: Res<any> = {\r\n\tzh: {\r\n\t},\r\n\ten: {\r\n\t}\r\n};\r\n\r\nexport function render(item: Tag):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","import { Res, UI } from \"tonva-react\";\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { FieldItem, FieldItemInt, FieldItemNum, FieldItemString, FieldItemId } from \"tonva-react\";\r\nimport { Staff } from \"./BzHelloTonva\";\r\n\r\n/*--fields--*/\r\nconst fields = {\r\n\tid: {\r\n\t\t\"name\": \"id\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Id\"\r\n\t} as FieldItemId,\r\n\tno: {\r\n\t\t\"name\": \"no\",\r\n\t\t\"type\": \"string\",\r\n\t\t\"isKey\": true,\r\n\t\t\"widget\": \"string\",\r\n\t\t\"label\": \"No\"\r\n\t} as FieldItemString,\r\n\tfirstName: {\r\n\t\t\"name\": \"firstName\",\r\n\t\t\"type\": \"string\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"string\",\r\n\t\t\"label\": \"FirstName\"\r\n\t} as FieldItemString,\r\n\tlastName: {\r\n\t\t\"name\": \"lastName\",\r\n\t\t\"type\": \"string\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"string\",\r\n\t\t\"label\": \"LastName\"\r\n\t} as FieldItemString,\r\n};\r\n/*==fields==*/\r\n\r\nexport const fieldArr: FieldItem[] = [\r\n\tfields.no, fields.firstName, fields.lastName, \r\n];\r\n\r\nexport const ui: UI = {\r\n\tlabel: \"Staff\",\r\n\tfieldArr,\r\n\tfields,\r\n};\r\n\r\nexport const res: Res<any> = {\r\n\tzh: {\r\n\t},\r\n\ten: {\r\n\t}\r\n};\r\n\r\nexport function render(item: Staff):JSX.Element {\r\n\tlet {firstName, lastName, no} = item;\r\n\treturn <><span>{firstName} {lastName}</span> <span className=\"text-muted ml-auto\">{no}</span></>;\r\n};\r\n","import { Res, UI } from \"tonva-react\";\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { FieldItem, FieldItemInt, FieldItemNum, FieldItemString, FieldItemId } from \"tonva-react\";\r\nimport { $Piecewise } from \"./BzHelloTonva\";\r\n\r\n/*--fields--*/\r\nconst fields = {\r\n\tid: {\r\n\t\t\"name\": \"id\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Id\"\r\n\t} as FieldItemId,\r\n\tname: {\r\n\t\t\"name\": \"name\",\r\n\t\t\"isKey\": true,\r\n\t\t\"label\": \"Name\"\r\n\t} as undefined,\r\n\tmul: {\r\n\t\t\"name\": \"mul\",\r\n\t\t\"type\": \"integer\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"updown\",\r\n\t\t\"label\": \"Mul\"\r\n\t} as FieldItemInt,\r\n\tdiv: {\r\n\t\t\"name\": \"div\",\r\n\t\t\"type\": \"integer\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"updown\",\r\n\t\t\"label\": \"Div\"\r\n\t} as FieldItemInt,\r\n\toffset: {\r\n\t\t\"name\": \"offset\",\r\n\t\t\"type\": \"integer\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"updown\",\r\n\t\t\"label\": \"Offset\"\r\n\t} as FieldItemInt,\r\n\tasc: {\r\n\t\t\"name\": \"asc\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Asc\"\r\n\t} as undefined,\r\n};\r\n/*==fields==*/\r\n\r\nexport const fieldArr: FieldItem[] = [\r\n\tfields.name, fields.mul, fields.div, fields.offset, fields.asc, \r\n];\r\n\r\nexport const ui: UI = {\r\n\tlabel: \"$Piecewise\",\r\n\tfieldArr,\r\n\tfields,\r\n};\r\n\r\nexport const res: Res<any> = {\r\n\tzh: {\r\n\t},\r\n\ten: {\r\n\t}\r\n};\r\n\r\nexport function render(item: $Piecewise):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","import { Res, UI } from \"tonva-react\";\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { FieldItem, FieldItemInt, FieldItemNum, FieldItemString, FieldItemId } from \"tonva-react\";\r\nimport { $PiecewiseDetail } from \"./BzHelloTonva\";\r\n\r\n/*--fields--*/\r\nconst fields = {\r\n\tid: {\r\n\t\t\"name\": \"id\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Id\"\r\n\t} as FieldItemId,\r\n\tparent: {\r\n\t\t\"name\": \"parent\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": true,\r\n\t\t\"label\": \"Parent\"\r\n\t} as FieldItemId,\r\n\trow: {\r\n\t\t\"name\": \"row\",\r\n\t\t\"type\": \"integer\",\r\n\t\t\"isKey\": true,\r\n\t\t\"widget\": \"updown\",\r\n\t\t\"label\": \"Row\"\r\n\t} as FieldItemInt,\r\n\tsec: {\r\n\t\t\"name\": \"sec\",\r\n\t\t\"type\": \"integer\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"updown\",\r\n\t\t\"label\": \"Sec\"\r\n\t} as FieldItemInt,\r\n\tvalue: {\r\n\t\t\"name\": \"value\",\r\n\t\t\"type\": \"integer\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"updown\",\r\n\t\t\"label\": \"Value\"\r\n\t} as FieldItemInt,\r\n};\r\n/*==fields==*/\r\n\r\nexport const fieldArr: FieldItem[] = [\r\n\tfields.parent, fields.row, fields.sec, fields.value, \r\n];\r\n\r\nexport const ui: UI = {\r\n\tlabel: \"$PiecewiseDetail\",\r\n\tfieldArr,\r\n\tfields,\r\n};\r\n\r\nexport const res: Res<any> = {\r\n\tzh: {\r\n\t},\r\n\ten: {\r\n\t}\r\n};\r\n\r\nexport function render(item: $PiecewiseDetail):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","import { Res, UI } from \"tonva-react\";\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { FieldItem, FieldItemInt, FieldItemNum, FieldItemString, FieldItemId } from \"tonva-react\";\r\nimport { Achieve } from \"./BzHelloTonva\";\r\n\r\n/*--fields--*/\r\nconst fields = {\r\n\tid: {\r\n\t\t\"name\": \"id\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Id\"\r\n\t} as FieldItemId,\r\n\tsaleAmount: {\r\n\t\t\"name\": \"saleAmount\",\r\n\t\t\"type\": \"number\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"number\",\r\n\t\t\"label\": \"SaleAmount\"\r\n\t} as FieldItemNum,\r\n\tdeliver: {\r\n\t\t\"name\": \"deliver\",\r\n\t\t\"type\": \"number\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"number\",\r\n\t\t\"label\": \"Deliver\"\r\n\t} as FieldItemNum,\r\n};\r\n/*==fields==*/\r\n\r\nexport const fieldArr: FieldItem[] = [\r\n\tfields.saleAmount, fields.deliver, \r\n];\r\n\r\nexport const ui: UI = {\r\n\tlabel: \"Achieve\",\r\n\tfieldArr,\r\n\tfields,\r\n};\r\n\r\nexport const res: Res<any> = {\r\n\tzh: {\r\n\t},\r\n\ten: {\r\n\t}\r\n};\r\n\r\nexport function render(item: Achieve):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","import { Res, UI } from \"tonva-react\";\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { FieldItem, FieldItemInt, FieldItemNum, FieldItemString, FieldItemId } from \"tonva-react\";\r\nimport { Hours } from \"./BzHelloTonva\";\r\n\r\n/*--fields--*/\r\nconst fields = {\r\n\tid: {\r\n\t\t\"name\": \"id\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Id\"\r\n\t} as FieldItemId,\r\n\tonsite: {\r\n\t\t\"name\": \"onsite\",\r\n\t\t\"type\": \"integer\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"updown\",\r\n\t\t\"label\": \"Onsite\"\r\n\t} as FieldItemInt,\r\n\toffsite: {\r\n\t\t\"name\": \"offsite\",\r\n\t\t\"type\": \"integer\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"updown\",\r\n\t\t\"label\": \"Offsite\"\r\n\t} as FieldItemInt,\r\n\tbreak: {\r\n\t\t\"name\": \"break\",\r\n\t\t\"type\": \"integer\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"updown\",\r\n\t\t\"label\": \"Break\"\r\n\t} as FieldItemInt,\r\n\tsick: {\r\n\t\t\"name\": \"sick\",\r\n\t\t\"type\": \"integer\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"updown\",\r\n\t\t\"label\": \"Sick\"\r\n\t} as FieldItemInt,\r\n\tover: {\r\n\t\t\"name\": \"over\",\r\n\t\t\"type\": \"integer\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"updown\",\r\n\t\t\"label\": \"Over\"\r\n\t} as FieldItemInt,\r\n\tnoTimeLog: {\r\n\t\t\"name\": \"noTimeLog\",\r\n\t\t\"type\": \"integer\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"updown\",\r\n\t\t\"label\": \"NoTimeLog\"\r\n\t} as FieldItemInt,\r\n};\r\n/*==fields==*/\r\n\r\nexport const fieldArr: FieldItem[] = [\r\n\tfields.onsite, fields.offsite, fields.break, fields.sick, fields.over, fields.noTimeLog, \r\n];\r\n\r\nexport const ui: UI = {\r\n\tlabel: \"Hours\",\r\n\tfieldArr,\r\n\tfields,\r\n};\r\n\r\nexport const res: Res<any> = {\r\n\tzh: {\r\n\t},\r\n\ten: {\r\n\t}\r\n};\r\n\r\nexport function render(item: Hours):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","import { Res, UI } from \"tonva-react\";\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { FieldItem, FieldItemInt, FieldItemNum, FieldItemString, FieldItemId } from \"tonva-react\";\r\nimport { CustomerTag } from \"./BzHelloTonva\";\r\n\r\n/*--fields--*/\r\nconst fields = {\r\n\tid: {\r\n\t\t\"name\": \"id\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Id\"\r\n\t} as FieldItemId,\r\n\tid2: {\r\n\t\t\"name\": \"id2\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Id2\"\r\n\t} as FieldItemId,\r\n};\r\n/*==fields==*/\r\n\r\nexport const fieldArr: FieldItem[] = [\r\n\t\r\n];\r\n\r\nexport const ui: UI = {\r\n\tlabel: \"CustomerTag\",\r\n\tfieldArr,\r\n\tfields,\r\n};\r\n\r\nexport const res: Res<any> = {\r\n\tzh: {\r\n\t},\r\n\ten: {\r\n\t}\r\n};\r\n\r\nexport function render(item: CustomerTag):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","import { Res, UI } from \"tonva-react\";\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { FieldItem, FieldItemInt, FieldItemNum, FieldItemString, FieldItemId } from \"tonva-react\";\r\nimport { UserStaff } from \"./BzHelloTonva\";\r\n\r\n/*--fields--*/\r\nconst fields = {\r\n\tid: {\r\n\t\t\"name\": \"id\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Id\"\r\n\t} as FieldItemId,\r\n\tid2: {\r\n\t\t\"name\": \"id2\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Id2\"\r\n\t} as FieldItemId,\r\n};\r\n/*==fields==*/\r\n\r\nexport const fieldArr: FieldItem[] = [\r\n\t\r\n];\r\n\r\nexport const ui: UI = {\r\n\tlabel: \"UserStaff\",\r\n\tfieldArr,\r\n\tfields,\r\n};\r\n\r\nexport const res: Res<any> = {\r\n\tzh: {\r\n\t},\r\n\ten: {\r\n\t}\r\n};\r\n\r\nexport function render(item: UserStaff):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","import { Res, UI } from \"tonva-react\";\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { FieldItem, FieldItemInt, FieldItemNum, FieldItemString, FieldItemId } from \"tonva-react\";\r\nimport { Account } from \"./BruceYuMi\";\r\n\r\n/*--fields--*/\r\nconst fields = {\r\n\tid: {\r\n\t\t\"name\": \"id\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Id\"\r\n\t} as FieldItemId,\r\n\tno: {\r\n\t\t\"name\": \"no\",\r\n\t\t\"type\": \"string\",\r\n\t\t\"isKey\": true,\r\n\t\t\"widget\": \"string\",\r\n\t\t\"label\": \"No\"\r\n\t} as FieldItemString,\r\n\tname: {\r\n\t\t\"name\": \"name\",\r\n\t\t\"type\": \"string\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"string\",\r\n\t\t\"label\": \"Name\"\r\n\t} as FieldItemString,\r\n};\r\n/*==fields==*/\r\n\r\nexport const fieldArr: FieldItem[] = [\r\n\tfields.no, fields.name, \r\n];\r\n\r\nexport const ui: UI = {\r\n\tlabel: \"Account\",\r\n\tfieldArr,\r\n\tfields,\r\n};\r\n\r\nexport const res: Res<any> = {\r\n\tzh: {\r\n\t},\r\n\ten: {\r\n\t}\r\n};\r\n\r\nexport function render(item: Account):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","import { Res, UI } from \"tonva-react\";\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { FieldItem, FieldItemInt, FieldItemNum, FieldItemString, FieldItemId } from \"tonva-react\";\r\nimport { Holding } from \"./BruceYuMi\";\r\n\r\n/*--fields--*/\r\nconst fields = {\r\n\tid: {\r\n\t\t\"name\": \"id\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Id\"\r\n\t} as FieldItemId,\r\n\taccount: {\r\n\t\t\"name\": \"account\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": true,\r\n\t\t\"label\": \"Account\"\r\n\t} as FieldItemId,\r\n\tstock: {\r\n\t\t\"name\": \"stock\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": true,\r\n\t\t\"label\": \"Stock\"\r\n\t} as FieldItemId,\r\n};\r\n/*==fields==*/\r\n\r\nexport const fieldArr: FieldItem[] = [\r\n\tfields.account, fields.stock, \r\n];\r\n\r\nexport const ui: UI = {\r\n\tlabel: \"Holding\",\r\n\tfieldArr,\r\n\tfields,\r\n};\r\n\r\nexport const res: Res<any> = {\r\n\tzh: {\r\n\t},\r\n\ten: {\r\n\t}\r\n};\r\n\r\nexport function render(item: Holding):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","import { Res, UI } from \"tonva-react\";\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { FieldItem, FieldItemInt, FieldItemNum, FieldItemString, FieldItemId } from \"tonva-react\";\r\nimport { Transaction } from \"./BruceYuMi\";\r\n\r\n/*--fields--*/\r\nconst fields = {\r\n\tid: {\r\n\t\t\"name\": \"id\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Id\"\r\n\t} as FieldItemId,\r\n\tholding: {\r\n\t\t\"name\": \"holding\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": true,\r\n\t\t\"label\": \"Holding\"\r\n\t} as FieldItemId,\r\n\ttick: {\r\n\t\t\"name\": \"tick\",\r\n\t\t\"isKey\": true,\r\n\t\t\"label\": \"Tick\"\r\n\t} as undefined,\r\n\tprice: {\r\n\t\t\"name\": \"price\",\r\n\t\t\"type\": \"integer\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"updown\",\r\n\t\t\"label\": \"Price\"\r\n\t} as FieldItemInt,\r\n\tquantity: {\r\n\t\t\"name\": \"quantity\",\r\n\t\t\"type\": \"integer\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"updown\",\r\n\t\t\"label\": \"Quantity\"\r\n\t} as FieldItemInt,\r\n\tamount: {\r\n\t\t\"name\": \"amount\",\r\n\t\t\"type\": \"integer\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"updown\",\r\n\t\t\"label\": \"Amount\"\r\n\t} as FieldItemInt,\r\n};\r\n/*==fields==*/\r\n\r\nexport const fieldArr: FieldItem[] = [\r\n\tfields.holding, fields.tick, fields.price, fields.quantity, fields.amount, \r\n];\r\n\r\nexport const ui: UI = {\r\n\tlabel: \"Transaction\",\r\n\tfieldArr,\r\n\tfields,\r\n};\r\n\r\nexport const res: Res<any> = {\r\n\tzh: {\r\n\t},\r\n\ten: {\r\n\t}\r\n};\r\n\r\nexport function render(item: Transaction):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","import { Res, UI } from \"tonva-react\";\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { FieldItem, FieldItemInt, FieldItemNum, FieldItemString, FieldItemId } from \"tonva-react\";\r\nimport { Stock } from \"./BruceYuMi\";\r\n\r\n/*--fields--*/\r\nconst fields = {\r\n\tid: {\r\n\t\t\"name\": \"id\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Id\"\r\n\t} as FieldItemId,\r\n\tmarket: {\r\n\t\t\"name\": \"market\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": true,\r\n\t\t\"label\": \"Market\"\r\n\t} as FieldItemId,\r\n\tcode: {\r\n\t\t\"name\": \"code\",\r\n\t\t\"type\": \"string\",\r\n\t\t\"isKey\": true,\r\n\t\t\"widget\": \"string\",\r\n\t\t\"label\": \"Code\"\r\n\t} as FieldItemString,\r\n\tname: {\r\n\t\t\"name\": \"name\",\r\n\t\t\"type\": \"string\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"string\",\r\n\t\t\"label\": \"Name\"\r\n\t} as FieldItemString,\r\n};\r\n/*==fields==*/\r\n\r\nexport const fieldArr: FieldItem[] = [\r\n\tfields.market, fields.code, fields.name, \r\n];\r\n\r\nexport const ui: UI = {\r\n\tlabel: \"Stock\",\r\n\tfieldArr,\r\n\tfields,\r\n};\r\n\r\nexport const res: Res<any> = {\r\n\tzh: {\r\n\t},\r\n\ten: {\r\n\t}\r\n};\r\n\r\nexport function render(item: Stock):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","import { Res, UI } from \"tonva-react\";\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { FieldItem, FieldItemInt, FieldItemNum, FieldItemString, FieldItemId } from \"tonva-react\";\r\nimport { Market } from \"./BruceYuMi\";\r\n\r\n/*--fields--*/\r\nconst fields = {\r\n\tid: {\r\n\t\t\"name\": \"id\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Id\"\r\n\t} as FieldItemId,\r\n\tname: {\r\n\t\t\"name\": \"name\",\r\n\t\t\"type\": \"string\",\r\n\t\t\"isKey\": true,\r\n\t\t\"widget\": \"string\",\r\n\t\t\"label\": \"Name\"\r\n\t} as FieldItemString,\r\n\tcurrency: {\r\n\t\t\"name\": \"currency\",\r\n\t\t\"type\": \"string\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"string\",\r\n\t\t\"label\": \"Currency\"\r\n\t} as FieldItemString,\r\n};\r\n/*==fields==*/\r\n\r\nexport const fieldArr: FieldItem[] = [\r\n\tfields.name, fields.currency, \r\n];\r\n\r\nexport const ui: UI = {\r\n\tlabel: \"Market\",\r\n\tfieldArr,\r\n\tfields,\r\n};\r\n\r\nexport const res: Res<any> = {\r\n\tzh: {\r\n\t},\r\n\ten: {\r\n\t}\r\n};\r\n\r\nexport function render(item: Market):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","import { Res, UI } from \"tonva-react\";\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { FieldItem, FieldItemInt, FieldItemNum, FieldItemString, FieldItemId } from \"tonva-react\";\r\nimport { Portfolio } from \"./BruceYuMi\";\r\n\r\n/*--fields--*/\r\nconst fields = {\r\n\tid: {\r\n\t\t\"name\": \"id\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Id\"\r\n\t} as FieldItemId,\r\n\tquantity: {\r\n\t\t\"name\": \"quantity\",\r\n\t\t\"type\": \"integer\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"updown\",\r\n\t\t\"label\": \"Quantity\"\r\n\t} as FieldItemInt,\r\n};\r\n/*==fields==*/\r\n\r\nexport const fieldArr: FieldItem[] = [\r\n\tfields.quantity, \r\n];\r\n\r\nexport const ui: UI = {\r\n\tlabel: \"Portfolio\",\r\n\tfieldArr,\r\n\tfields,\r\n};\r\n\r\nexport const res: Res<any> = {\r\n\tzh: {\r\n\t},\r\n\ten: {\r\n\t}\r\n};\r\n\r\nexport function render(item: Portfolio):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","import { Res, UI } from \"tonva-react\";\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { FieldItem, FieldItemInt, FieldItemNum, FieldItemString, FieldItemId } from \"tonva-react\";\r\nimport { StockValue } from \"./BruceYuMi\";\r\n\r\n/*--fields--*/\r\nconst fields = {\r\n\tid: {\r\n\t\t\"name\": \"id\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Id\"\r\n\t} as FieldItemId,\r\n\tmiRate: {\r\n\t\t\"name\": \"miRate\",\r\n\t\t\"type\": \"integer\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"updown\",\r\n\t\t\"label\": \"MiRate\"\r\n\t} as FieldItemInt,\r\n\tttm: {\r\n\t\t\"name\": \"ttm\",\r\n\t\t\"type\": \"integer\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"updown\",\r\n\t\t\"label\": \"Ttm\"\r\n\t} as FieldItemInt,\r\n\tdivident: {\r\n\t\t\"name\": \"divident\",\r\n\t\t\"type\": \"integer\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"updown\",\r\n\t\t\"label\": \"Divident\"\r\n\t} as FieldItemInt,\r\n\tprice: {\r\n\t\t\"name\": \"price\",\r\n\t\t\"type\": \"integer\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"updown\",\r\n\t\t\"label\": \"Price\"\r\n\t} as FieldItemInt,\r\n\troe: {\r\n\t\t\"name\": \"roe\",\r\n\t\t\"type\": \"integer\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"updown\",\r\n\t\t\"label\": \"Roe\"\r\n\t} as FieldItemInt,\r\n\tinc1: {\r\n\t\t\"name\": \"inc1\",\r\n\t\t\"type\": \"integer\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"updown\",\r\n\t\t\"label\": \"Inc1\"\r\n\t} as FieldItemInt,\r\n\tinc2: {\r\n\t\t\"name\": \"inc2\",\r\n\t\t\"type\": \"integer\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"updown\",\r\n\t\t\"label\": \"Inc2\"\r\n\t} as FieldItemInt,\r\n\tinc3: {\r\n\t\t\"name\": \"inc3\",\r\n\t\t\"type\": \"integer\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"updown\",\r\n\t\t\"label\": \"Inc3\"\r\n\t} as FieldItemInt,\r\n\tinc4: {\r\n\t\t\"name\": \"inc4\",\r\n\t\t\"type\": \"integer\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"updown\",\r\n\t\t\"label\": \"Inc4\"\r\n\t} as FieldItemInt,\r\n\tpreInc: {\r\n\t\t\"name\": \"preInc\",\r\n\t\t\"type\": \"integer\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"updown\",\r\n\t\t\"label\": \"PreInc\"\r\n\t} as FieldItemInt,\r\n\tmarketValue: {\r\n\t\t\"name\": \"marketValue\",\r\n\t\t\"type\": \"integer\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"updown\",\r\n\t\t\"label\": \"MarketValue\"\r\n\t} as FieldItemInt,\r\n};\r\n/*==fields==*/\r\n\r\nexport const fieldArr: FieldItem[] = [\r\n\tfields.miRate, fields.ttm, fields.divident, fields.price, fields.roe, fields.inc1, fields.inc2, fields.inc3, fields.inc4, fields.preInc, fields.marketValue, \r\n];\r\n\r\nexport const ui: UI = {\r\n\tlabel: \"StockValue\",\r\n\tfieldArr,\r\n\tfields,\r\n};\r\n\r\nexport const res: Res<any> = {\r\n\tzh: {\r\n\t},\r\n\ten: {\r\n\t}\r\n};\r\n\r\nexport function render(item: StockValue):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","import { Res, UI } from \"tonva-react\";\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { FieldItem, FieldItemInt, FieldItemNum, FieldItemString, FieldItemId } from \"tonva-react\";\r\nimport { AccountValue } from \"./BruceYuMi\";\r\n\r\n/*--fields--*/\r\nconst fields = {\r\n\tid: {\r\n\t\t\"name\": \"id\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Id\"\r\n\t} as FieldItemId,\r\n\tmi: {\r\n\t\t\"name\": \"mi\",\r\n\t\t\"type\": \"integer\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"updown\",\r\n\t\t\"label\": \"Mi\"\r\n\t} as FieldItemInt,\r\n\tmarket: {\r\n\t\t\"name\": \"market\",\r\n\t\t\"type\": \"integer\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"updown\",\r\n\t\t\"label\": \"Market\"\r\n\t} as FieldItemInt,\r\n\tcount: {\r\n\t\t\"name\": \"count\",\r\n\t\t\"type\": \"integer\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"updown\",\r\n\t\t\"label\": \"Count\"\r\n\t} as FieldItemInt,\r\n};\r\n/*==fields==*/\r\n\r\nexport const fieldArr: FieldItem[] = [\r\n\tfields.mi, fields.market, fields.count, \r\n];\r\n\r\nexport const ui: UI = {\r\n\tlabel: \"AccountValue\",\r\n\tfieldArr,\r\n\tfields,\r\n};\r\n\r\nexport const res: Res<any> = {\r\n\tzh: {\r\n\t},\r\n\ten: {\r\n\t}\r\n};\r\n\r\nexport function render(item: AccountValue):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","import { Res, UI } from \"tonva-react\";\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { FieldItem, FieldItemInt, FieldItemNum, FieldItemString, FieldItemId } from \"tonva-react\";\r\nimport { UserAccount } from \"./BruceYuMi\";\r\n\r\n/*--fields--*/\r\nconst fields = {\r\n\tid: {\r\n\t\t\"name\": \"id\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Id\"\r\n\t} as FieldItemId,\r\n\tid2: {\r\n\t\t\"name\": \"id2\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Id2\"\r\n\t} as FieldItemId,\r\n};\r\n/*==fields==*/\r\n\r\nexport const fieldArr: FieldItem[] = [\r\n\t\r\n];\r\n\r\nexport const ui: UI = {\r\n\tlabel: \"UserAccount\",\r\n\tfieldArr,\r\n\tfields,\r\n};\r\n\r\nexport const res: Res<any> = {\r\n\tzh: {\r\n\t},\r\n\ten: {\r\n\t}\r\n};\r\n\r\nexport function render(item: UserAccount):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","/*eslint @typescript-eslint/no-unused-vars: [\"off\", { \"vars\": \"all\" }]*/\r\nimport { FA, LMR } from 'tonva-react';\r\nimport { NStockInfo } from '../stockinfo';\r\nimport {percent0, percent1, number, numberToMarketValue, calculateZZ3} from '../tool';\r\n\r\nfunction renderSortCol(radioName:string, sortMethod:string, caption:string, \r\n\tsort: (sortMethod:string) => void, defaultSort:string) {\r\n\treturn <label className=\"btn btn-outline-info mb-0\">\r\n\t\t<input type=\"radio\" className=\"btn-sm btn-check mr-1\"\r\n\t\t\tname={radioName} defaultChecked={sortMethod === defaultSort}\r\n\t\t\tonClick={() => sort(sortMethod)} />\r\n\t\t{caption}\r\n\t</label>\r\n}\r\n\r\nexport function renderSortHeaders(radioName:string, defaultSort:string, sort: (sortMethod:string) => void) {\r\n\tif (!defaultSort) defaultSort = 'tagv';\r\n\treturn <div className=\"btn-group\" role=\"group\" aria-label=\"Basic radio toggle button group\">\r\n\t\t{renderSortCol(radioName, 'tagv', '米息分', sort, defaultSort)}\r\n\t\t{renderSortCol(radioName, 'tagpe', 'TTM', sort, defaultSort)}\r\n\t\t{renderSortCol(radioName, 'tagdp', '股息率', sort, defaultSort)}\r\n\t</div>;\r\n}\r\n\r\nfunction renderValue(caption:string, value:number, valueType:'p0'|'p1'|'n1'|'n2'|'yi'):JSX.Element {\r\n\tconst _cn = 'px-2 mb-1 text-right '; \r\n\tlet cn = _cn + 'c5';\r\n\tlet cnYI = _cn + 'c5'\r\n\tlet vStr:string;\r\n\tif (isNaN(value) === true) {\r\n\t\tvStr = '-'\r\n\t}\r\n\telse {\r\n\t\tswitch (valueType) {\r\n\t\t\tcase 'p0': vStr = percent0(value); break;\r\n\t\t\tcase 'p1': vStr = percent1(value); break;\r\n\t\t\tcase 'n1': vStr = number(value, 1); break;\r\n\t\t\tcase 'n2': vStr = number(value, 2); break;\r\n\t\t\tcase 'yi': \r\n\t\t\t\tvStr = numberToMarketValue(value);\r\n\t\t\t\tcn = cnYI;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\treturn <div key={caption} className={cn}>\r\n\t\t<span className=\"text-muted small\">{caption}</span><br />\r\n\t\t{vStr}\r\n\t</div>;\r\n}\r\n\r\nexport function renderStockInfoRow(row: NStockInfo, onClickName: (row:NStockInfo) => void, inputSelect:JSX.Element, right:JSX.Element):JSX.Element {\r\n  \tlet { id, name, code, pe, roe, price, divyield, v, order, symbol, l, pshares } = row;\r\n  \tlet zzl = calculateZZ3((row as any).dataArr);\r\n  \tlet left = <div className=\"cursor-pointer\" onClick={()=>onClickName(row)}>\r\n\t\t<span className=\"text-primary\">{name}</span>\r\n\t\t&nbsp; \r\n\t\t<span className=\"text-info\">{symbol}</span>\r\n\t  \t&nbsp;\r\n\t\t<small className=\"small ml-1\"><span className=\"text-danger\">{order}</span></small>\r\n  \t</div>;\r\n\tlet rows:[string,number,'p0'|'p1'|'n1'|'n2'|'yi'][] = [\r\n\t\t['米息分', Math.log2(v), 'n1'],\r\n\t\t['米息率', v, 'n1'],\r\n\t\t['股息率', divyield*100, 'n1'],\r\n\t\t['TTM', pe, 'n1'],\r\n\t\t['价格', price, 'n2'],\r\n\t\t['ROE', roe*100, 'n1'],\r\n\t\t['预增', l, 'p0'],\r\n\t\t['现增', zzl[3], 'p0'],\r\n\t\t['增 1', zzl[2], 'p0'],\r\n\t\t['增 2', zzl[1], 'p0'],\r\n\t\t['增 3', zzl[0], 'p0'],\r\n\t\t['市值', pshares*price, 'yi'],\r\n  \t];\r\n\tlet inputSelectSpan:any;\r\n\tif (inputSelect) {\r\n\t\tinputSelectSpan = <span className=\"ml-4\">{inputSelect}</span>\r\n\t}\r\n  \treturn <div className=\"d-block border-top\">\r\n\t\t<LMR className=\"px-2 py-1 bg-light\" left={left} right = {right}>{inputSelectSpan}</LMR>\r\n\t\t<div className=\"d-flex flex-wrap p-1\" >\r\n\t\t\t{rows.map(v => renderValue(v[0], v[1], v[2]))}\r\n\t  \t</div>\r\n  \t</div>;\r\n}\r\n\r\nexport function renderStockUrl(row: NStockInfo) {\r\n    let { symbol, market, code } = row;\r\n    let url = market === 'HK' ? `https://xueqiu.com/S/${code}` : `https://finance.sina.com.cn/realstock/company/${symbol}/nc.shtml`;\r\n\treturn <a className=\"text-info\" href={url} target=\"_blank\" rel=\"noopener noreferrer\" onClick={(e)=>{e.stopPropagation();}}>\r\n\t\t<FA name=\"angle-double-right\" />\r\n\t</a>;\r\n}","export function numberToFixString(n: number, w = 2) {\r\n    return n === undefined ? '' : n.toFixed(w);\r\n}\r\n\r\nexport function number(n: number, w = 2) {\r\n    return n === undefined ? '' : n.toFixed(w);\r\n}\r\n\r\nexport function numberToMarketValue(n: number) {\r\n    return n === undefined || isNaN(n) ? '' : Math.round(n / 10000).toString(); // + '亿';\r\n}\r\n\r\nexport function numberToString(n: number, precision = 2) {\r\n    return n === undefined ? '' : n.toPrecision(precision);\r\n}\r\n\r\nexport function numberToPrecision(n: number, precision = 4) {\r\n    return n === undefined ? undefined : Number.parseFloat(n.toPrecision(precision));\r\n}\r\n\r\nexport function percentToFixString(n: number) {\r\n    return n === undefined || isNaN(n) ? '' : (n * 100).toFixed(2) + '%';\r\n}\r\n\r\nexport function percent0(n: number) {\r\n    return n === undefined || isNaN(n) ? '' : (n * 100).toFixed(0) + '%';\r\n}\r\nexport function percent1(n: number) {\r\n    return n === undefined || isNaN(n) ? '' : (n * 100).toFixed(1) + '%';\r\n}\r\n\r\nexport function warningTypeString(t: string) {\r\n    switch (t) {\r\n        case 'gt': return '大于';\r\n        case 'lt': return '小于';\r\n        default: return t;\r\n    }\r\n}\r\n\r\nexport function predictCutRatio(r2: number) {\r\n    return r2 * 2 - r2 * r2;\r\n}\r\n\r\nexport function evaluatePricePrice(iRate: number, e1: number, e2: number, e3: number) {\r\n    let r = 1 + iRate;\r\n    let r2 = r * r;\r\n    let r3 = r2 * r;\r\n    return (e1 / r + e2 / r2 + e3 / r3 + e3 / iRate / r3) / 2;\r\n}\r\n\r\nexport function calculateV(z: number, divyield: number, pe: number) {\r\n    if (pe === undefined || isNaN(pe)) {\r\n        return undefined;\r\n    }\r\n\r\n    let r = 0;\r\n    if (z !== undefined) {\r\n        if (z > 0.25) {\r\n            z = 0.25;\r\n        }\r\n        r += z * 100;\r\n    }\r\n    if (divyield !== undefined) {\r\n        r += divyield * 100;\r\n    }\r\n    return r / pe;\r\n}\r\n\r\nexport function calculateVN(z: number, e: number, bonus: number, price: number) {\r\n    if (price === undefined || isNaN(price) || e === undefined || isNaN(e)) {\r\n        return undefined;\r\n    }\r\n\r\n    let r = 0;\r\n    if (z !== undefined && e > 0) {\r\n        if (z > 0.25) {\r\n            z = 0.24 + Math.pow((z - 0.24) * 100, 0.6667) / 100;\r\n        }\r\n        z = 1 + z;\r\n        z = z * z * z - 1;\r\n        r += z * e * 100;\r\n    }\r\n    if (bonus !== undefined && !isNaN(bonus)) {\r\n        r += bonus * 100;\r\n    }\r\n    return r / price;\r\n}\r\n\r\nexport function calculateVS(ev: number, bonus: number, price: number) {\r\n    if (price === undefined || isNaN(price)) {\r\n        return undefined;\r\n    }\r\n\r\n    if (ev === undefined || isNaN(ev)) {\r\n        if (bonus === undefined || isNaN(bonus)) {\r\n            return undefined;\r\n        }\r\n        else {\r\n            return bonus * 100 / price;\r\n        }\r\n    }\r\n    else {\r\n        if (bonus === undefined || isNaN(bonus)) {\r\n            return ev * 100 / price;\r\n        }\r\n        else {\r\n            return (bonus + ev) * 100 / price;\r\n        }\r\n    }\r\n}\r\n\r\nexport function calculateZZ3(data: number[]) {\r\n    let ret: number[] = [undefined, undefined, undefined, undefined];\r\n    if (data === undefined)\r\n        return ret;\r\n    let len = data.length;\r\n    if (len < 5)\r\n        return ret;\r\n\r\n    let funcz = (n: number, p: number) => {\r\n        if (p <= 0 || n <= 0)\r\n            return undefined;\r\n        return ((n / p) - 1);\r\n    }\r\n    for (let i = 0; i < 4; ++i) {\r\n        ret[i] = funcz(data[i + 1], data[i]);\r\n    }\r\n    return ret;\r\n}\r\n\r\n//export function caption = (value:string) => <span className=\"text-muted small\">{value}</span>;\r\n\r\nexport function MonthnoFromDay(day: number) {\r\n    let year = Math.floor(day / 10000);\r\n    let month = Math.floor((day % 10000) / 100) - 1;\r\n    return (year - 1995) * 12 + month;\r\n}\r\n\r\nexport function SeasonnoFromDay(day: number) {\r\n    let year = Math.floor(day / 10000);\r\n    let month = Math.floor((day % 10000) / 100) - 1;\r\n    let season = Math.floor(month / 3);\r\n    return (year - 1995) * 4 + season;\r\n}\r\n\r\nexport function SeasonnoFromYearMonth(year: number, month: number) {\r\n    let season = Math.floor((month - 1) / 3);\r\n    return (year - 1995) * 4 + season;\r\n}\r\n\r\nexport function SeasonnoToYearMonth(no: number) {\r\n    let year = Math.floor(no / 4) + 1995;\r\n    let month = (Math.floor(no % 4) + 1) * 3;\r\n    return year * 100 + month;\r\n}\r\n\r\nexport function SeasonnoToBeginEnd(season: number) {\r\n    let year = (1995 + Math.floor(season / 4)) * 10000;\r\n    let s = season % 4;\r\n    if (s === 0) {\r\n        return { begin: year + 101, end: year + 331 };\r\n    }\r\n    if (s === 1) {\r\n        return { begin: year + 401, end: year + 630 };\r\n    }\r\n    if (s === 2) {\r\n        return { begin: year + 701, end: year + 930 };\r\n    }\r\n    return { begin: year + 1001, end: year + 1231 };\r\n}\r\n\r\nexport function CalculateValueAvg(arr: { v: number }[]) {\r\n    let ret: { avg20: number, avg50: number, avg100: number, avg: number } = { avg20: undefined, avg50: undefined, avg100: undefined, avg: undefined };\r\n\r\n    let length = arr.length;\r\n    let calcuOne = (count: number): number => {\r\n        let endIndex = count;\r\n        if (count === 0 || endIndex > length)\r\n            endIndex = length;\r\n        if (endIndex >= 10) {\r\n            let sum = 0;\r\n            for (let i = 3; i < endIndex; ++i) {\r\n                sum += arr[i].v;\r\n            }\r\n            return sum / (endIndex - 3);\r\n        }\r\n        else {\r\n            return undefined;\r\n        }\r\n    }\r\n\r\n    ret.avg20 = calcuOne(20);\r\n    ret.avg50 = calcuOne(50);\r\n    ret.avg100 = calcuOne(100);\r\n    ret.avg = calcuOne(0);\r\n    return ret;\r\n}\r\n","export class SlrForEarning {\r\n  slope: number;\r\n  intercept: number;\r\n  y: number[];\r\n  slopeR: number;\r\n  endY: number;\r\n  r2: number;\r\n\r\n  constructor(y:number[]) {\r\n    this.y = y;\r\n    this.regress();\r\n    let score = this.score();\r\n    this.r2 = score.r2;\r\n  }\r\n\r\n  regress() {\r\n    const n = this.y.length;\r\n    let xSum = 0;\r\n    let ySum = 0;\r\n  \r\n    let xSquared = 0;\r\n    let xY = 0;\r\n  \r\n    for (let x = 0; x < n; ++x) {\r\n      xSum += x;\r\n      ySum += this.y[x];\r\n      xSquared += x * x;\r\n      xY += x * this.y[x];\r\n    }\r\n  \r\n    const numerator = n * xY - xSum * ySum;\r\n    this.slope = numerator / (n * xSquared - xSum * xSum);\r\n    this.intercept = (1 / n) * ySum - this.slope * (1 / n) * xSum;\r\n\r\n    let ym = this.slope > 0 ? this.predict(n-2) : this.predict(1);\r\n    this.slopeR = ym < 0.01 ? undefined : this.slope / ym;\r\n  }\r\n\r\n  score() {\r\n    const n = this.y.length;\r\n    const y2 = new Array(n);\r\n    for (let i = 0; i < n; i++) {\r\n      y2[i] = this.predict(i);\r\n    }\r\n\r\n    let xSum = 0;\r\n    let ySum = 0;\r\n    let chi2 = 0;\r\n    let rmsd = 0;\r\n    let xSquared = 0;\r\n    let ySquared = 0;\r\n    let xY = 0;\r\n    for (let i = 0; i < n; i++) {\r\n      let yi2 = y2[i];\r\n      xSum += yi2;\r\n      let yi = this.y[i];\r\n      ySum += yi;\r\n      xSquared += yi2 * yi2;\r\n      ySquared += yi * yi;\r\n      xY += yi2 * yi;\r\n      let yiyi2 = yi - yi2;\r\n      if (yi !== 0) {\r\n        chi2 += (yiyi2 * yiyi2) / yi;\r\n      }\r\n      rmsd += yiyi2 * yiyi2;\r\n    }\r\n\r\n    const r =\r\n      (n * xY - xSum * ySum) /\r\n      Math.sqrt((n * xSquared - xSum * xSum) * (n * ySquared - ySum * ySum));\r\n\r\n    return {\r\n      r: r,\r\n      r2: r * r,\r\n      chi2: chi2,\r\n      rmsd: Math.sqrt(rmsd / n)\r\n    };\r\n  }\r\n\r\n\r\n  predict(x:number) {\r\n    return this.slope * x + this.intercept;\r\n  }\r\n\r\n  computeX(y:number) {\r\n    return (y - this.intercept) / this.slope;\r\n  }\r\n}\r\n","export class ErForEarning {\r\n  A:number;\r\n  B:number;\r\n  y: number[];\r\n  r2: number;\r\n\r\n  constructor(y:number[]) {\r\n    this.y = y;\r\n    this.regress();\r\n    let score = this.score();\r\n    this.r2 = score.r2;\r\n  }\r\n\r\n  regress() {\r\n    const n = this.y.length;\r\n    let xSum = 0;\r\n    let ySum = 0;\r\n  \r\n    let xSquared = 0;\r\n    let xY = 0;\r\n  \r\n    for (let x = 0; x < n; ++x) {\r\n      xSum += x;\r\n      let yx = Math.log(this.y[x]);\r\n      ySum += yx;\r\n      xSquared += x * x;\r\n      xY += x * yx;\r\n    }\r\n  \r\n    const numerator = n * xY - xSum * ySum;\r\n    let slope = numerator / (n * xSquared - xSum * xSum);\r\n    let intercept = (1 / n) * ySum - slope * (1 / n) * xSum;\r\n    this.A = Math.exp(intercept);\r\n    this.B = slope;\r\n  }\r\n\r\n  score() {\r\n    const n = this.y.length;\r\n    const y2 = new Array(n);\r\n    for (let i = 0; i < n; i++) {\r\n      y2[i] = this.predict(i);\r\n    }\r\n\r\n    let xSum = 0;\r\n    let ySum = 0;\r\n    let chi2 = 0;\r\n    let rmsd = 0;\r\n    let xSquared = 0;\r\n    let ySquared = 0;\r\n    let xY = 0;\r\n    for (let i = 0; i < n; i++) {\r\n      let yi2 = y2[i];\r\n      xSum += yi2;\r\n      let yi = this.y[i];\r\n      ySum += yi;\r\n      xSquared += yi2 * yi2;\r\n      ySquared += yi * yi;\r\n      xY += yi2 * yi;\r\n      let yiyi2 = yi - yi2;\r\n      if (yi !== 0) {\r\n        chi2 += (yiyi2 * yiyi2) / yi;\r\n      }\r\n      rmsd += yiyi2 * yiyi2;\r\n    }\r\n\r\n    const r =\r\n      (n * xY - xSum * ySum) /\r\n      Math.sqrt((n * xSquared - xSum * xSum) * (n * ySquared - ySum * ySum));\r\n\r\n    return {\r\n      r: r,\r\n      r2: r * r,\r\n      chi2: chi2,\r\n      rmsd: Math.sqrt(rmsd / n)\r\n    };\r\n  }\r\n\r\n  predict(x:number) {\r\n    return this.A * Math.exp(x * this.B);\r\n  }\r\n}\r\n","export * from './types';\r\nexport * from './store';\r\nexport * from './sortStocks';\r\nexport * from './stockGroup';\r\nexport * from './stockGroups';\r\n","import { ReportHandler } from 'web-vitals';\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport 'bootstrap/dist/css/bootstrap.css';\r\nimport './index.css';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport { App } from 'uq-app';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n","function getsortFunc(sortType:string) {\r\n\tswitch (sortType) {\r\n\t\tcase 'tagpe':\r\n\t\t\treturn (a:any, b:any) => a.pe - b.pe;\r\n\t\tcase 'tagdp': \r\n\t\t\treturn (a:any, b:any) => b.divyield - a.divyield;\r\n\t\tdefault:\r\n\t\t\treturn (a:any, b:any) => b.v - a.v;\r\n\t}\r\n}\r\n\r\nexport function sortStocks(sortType:string, arr:any[]) {\r\n\tarr.sort(getsortFunc(sortType));\r\n\tlet o = 1;\r\n\tfor (let item of arr) {\r\n\t\titem.order = o;\r\n\t\t++o;\r\n\t}\r\n}\r\n","//=== UqApp builder created on Wed Mar 10 2021 17:59:38 GMT-0500 (GMT-05:00) ===//\r\nimport { CSub, CBase, CAppBase, IConstructor } from 'tonva-react';\r\nimport { UQs } from './uqs';\r\nimport { CApp } from './CApp';\r\n\r\nexport abstract class CUqBase extends CBase<CApp, UQs> {\r\n}\r\n\r\nexport abstract class CUqSub<A extends CAppBase<U>, U, T extends CBase<A,U>> extends CSub<A, U, T> {\r\n}\r\n\r\nexport abstract class CUqApp extends CAppBase<UQs> {\r\n\tprotected newC<T extends CUqBase>(type: IConstructor<T>): T {\r\n\t\tlet c = new type(this);\r\n\t\tc.init();\r\n\t\treturn c;\r\n\t}\r\n}\r\n","import { zh } from \"./zh\";\r\nimport { en } from \"./en\";\r\n\r\nexport const res = {\r\n\t$zh: zh,\r\n\t$en: en,\r\n}\r\n","export const zh = {\r\n\thome: '首页',\r\n\trelation: '关系',\r\n\tdiscover: '发现',\r\n\ttest: '测试',\r\n\tdebug: 'Debug',\r\n\tme: '我',\r\n\r\n\tchangePassword: '修改密码',\r\n\taboutTheApp: '关于本APP',\r\n\tlogout: '退出登录',\r\n\tpleaseLogin: '登录',\r\n\r\n\tcontent: '内容',\r\n\tbackend: '后台管理',\r\n}\r\n","export const en = {\r\n\thome: 'Home',\r\n\trelation: 'Relation',\r\n\tdiscover: 'Discover',\r\n\ttest: 'Test',\r\n\tdebug: 'Debug',\r\n\tme: 'Me',\r\n\r\n\tchangePassword: 'Change password',\r\n\taboutTheApp: 'About the APP',\r\n\tlogout: 'Logout',\r\n\tpleaseLogin: 'Login',\r\n\r\n\tcontent: 'Content',\r\n\tbackend: 'Backend Management',\r\n}\r\n","//=== UqApp builder created on Tue Jan 05 2021 18:41:24 GMT-0500 (GMT-05:00) ===//\r\nimport { VPage, TabProp, TabCaptionComponent, TabsProps } from 'tonva-react';\r\nimport { CApp } from './CApp';\r\n\r\nconst color = (selected: boolean) => selected === true ? 'text-primary' : 'text-muted';\r\nfunction caption(label:string, icon:string) {\r\n\treturn (selected: boolean) => TabCaptionComponent(label, icon, color(selected));\r\n}\r\n\r\nexport class VMain extends VPage<CApp> {\r\n\theader() {return false;}\r\n\r\n\tprotected get tabsProps(): TabsProps {\r\n\t\t/*\r\n\t\tlet { cHome, cBug, cMe, cUI } = this.controller;\r\n\t\tlet tabs: TabProp[] = [\r\n\t\t\t{name: 'home', caption: caption(t('home'), 'home'), content: cHome.tab},\r\n\t\t\t{name: 'me', caption: caption(t('me'), 'user-o'), content: cMe.tab, load: cMe.load},\r\n\t\t];\r\n\t\tif (this.isDev === true) {\r\n\t\t\ttabs.push({\r\n\t\t\t\tname: 'UI', caption: caption(t('UI'), 'television'), content: cUI.tab\r\n\t\t\t});\r\n\t\t\ttabs.push({\r\n\t\t\t\tname: 'debug', caption: caption(t('debug'), 'bug'), content: cBug.tab, onShown: cBug.load\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn {tabs};\r\n\t\t*/\r\n\t\tlet { cHome, cHolding, cExporer, cMe } = this.controller;\r\n\t\tlet tabs: TabProp[] = [\r\n\t\t\t{ \r\n\t\t\t\tname: 'home', label: '首页', icon: 'home', content: cHome.tab, \r\n\t\t\t\tnotify: undefined, \r\n\t\t\t\tload: cHome.load, \r\n\t\t\t\tonShown: cHome.load,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tname: 'explorer', label: '持仓', icon: 'money', content: cHolding.tab, load: cHolding.load \r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tname: 'explorer', label: '选股', icon: 'search', content: cExporer.tab, load: cExporer.load\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tname: 'me', label: '我的', icon: 'user', content: cMe.tab, onShown: undefined\r\n\t\t\t}\r\n\t\t].map(v => {\r\n\t\t\tlet { name, label, icon, content, notify, load, onShown } = v;\r\n\t\t\treturn {\r\n\t\t\t\tname,\r\n\t\t\t\tcaption: (selected: boolean) => TabCaptionComponent(label, icon, color(selected)),\r\n\t\t\t\tcontent,\r\n\t\t\t\tnotify,\r\n\t\t\t\tload,\r\n\t\t\t\tonShown,\r\n\t\t\t};\r\n\t\t});\r\n\t\treturn {tabs};\r\n\t}\r\n\r\n\t/*\r\n\tprotected get webNav(): PageWebNav {\r\n\t\treturn {\r\n\t\t\tnavHeader: <div>webNav header</div>, \r\n\t\t\tnavFooter: <div>webNav footer</div>,\r\n\t\t};\r\n\t}\r\n\t*/\r\n}\r\n","export default __webpack_public_path__ + \"static/media/logo.2d27ead7.svg\";","/*eslint @typescript-eslint/no-unused-vars: [\"off\", { \"vars\": \"all\" }]*/\r\nimport * as React from 'react';\r\nimport { View, nav } from 'tonva-react';\r\nimport { LMR, FA, SearchBox } from 'tonva-react';\r\nimport logo from '../images/logo.svg';\r\nimport { CHome } from './CHome';\r\n\r\nexport class VSiteHeader extends View<CHome> {\r\n    render() {\r\n        let currentSalesRegion = <FA name=\"globe\" />\r\n        let login = <div>\r\n            登录\r\n        </div>\r\n        let left = <img className=\"m-1\" src={logo} alt=\"logo\" style={{height: \"3rem\", width: \"3rem\"}} />;\r\n        //let cart = this.controller.cApp.cCart.renderCartLabel();\r\n        let right = undefined;\r\n        /*\r\n        <div className=\"d-flex flex-row mr-1 align-items-center\">\r\n            {currentSalesRegion} &nbsp;\r\n            <button onClick={()=>nav.start()}>Try</button>\r\n        </div>;*/\r\n        return <LMR\r\n            className=\"mb-3 align-items-center bg-white\"\r\n            left={left} right={right}>\r\n            <div className=\"\">\r\n                {this.controller.renderSearchHeader('md')}\r\n            </div>\r\n        </LMR>\r\n    }\r\n}","import * as React from 'react';\r\nimport { View } from 'tonva-react';\r\nimport { CHome } from './CHome';\r\nimport { SearchBox } from 'tonva-react';\r\n\r\nexport class VSearchHeader extends View<CHome> {\r\n\r\n    private onSearch = async (key: string) => {\r\n        // let { cProduct } = this.controller.cApp;\r\n        // cProduct.start(key);\r\n    }\r\n\r\n    render(param: any) {\r\n        return <SearchBox className=\"px-1 w-100\" \r\n            size={param}\r\n            onSearch={this.onSearch} \r\n            placeholder=\"功能...\" />\r\n    }\r\n}","/*eslint @typescript-eslint/no-unused-vars: [\"off\", { \"vars\": \"all\" }]*/\r\nimport * as React from 'react';\r\nimport { observer } from 'mobx-react';\r\nimport { VPage, List, LMR, FA, Scroller, DropdownActions, DropdownAction } from 'tonva-react';\r\nimport { NStockInfo } from '../stockinfo';\r\nimport { CHome } from './CHome';\r\nimport { renderSortHeaders, renderStockInfoRow, renderStockUrl } from '../tool';\r\n\r\nexport class VHome extends VPage<CHome> {\r\n\theader() {\r\n\t\treturn React.createElement(observer(() => {\r\n\t\t\treturn <span className=\"ml-3\">首页 - {this.controller.stockGroup.name}</span>;\r\n\t\t}));\r\n\t}\r\n\tright() {\r\n\t\treturn React.createElement(observer(() => {\r\n\t\t/*\r\n\t\treturn <button className=\"btn btn-sm btn-info mr-2\"\r\n\t\tonClick={()=>{this.controller.openMarketPE()}}>\r\n\t\t市场平均PE\r\n\t\t</button>;\r\n\t\t*/\r\n\t\tlet {store} = this.controller;\r\n\t\tlet groups = store.stockGroups.groups.map(v => (\r\n\t\t\t{\r\n\t\t\t\tcaption: v.name,\r\n\t\t\t\taction: () => this.controller.changeGroup(v)\r\n\t\t\t}\r\n\t\t));\r\n\t\tlet actions: DropdownAction[] = [\r\n\t\t\t{\r\n\t\t\t\tcaption: '市场平均PE',\r\n\t\t\t\taction: this.controller.openMarketPE,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tcaption: '选择股票',\r\n\t\t\t\taction: this.controller.onAddStock,\r\n\t\t\t},\r\n\t\t\tundefined,\r\n\t\t\t...groups,\r\n\t\t\tundefined,\r\n\t\t\t{\r\n\t\t\t\tcaption: '管理自选组',\r\n\t\t\t\taction: this.controller.manageGroups,\r\n\t\t\t},\r\n\t\t];\r\n\t\treturn <DropdownActions actions={actions} icon=\"bars\" className=\"mr-2 text-white bg-transparent border-0\" />;\r\n\t}));\r\n\t}\r\n\r\n\tprotected onPageScrollBottom(scroller: Scroller): Promise<void> {\r\n\t\tthis.controller.onPage();\r\n\t\treturn;\r\n\t}\r\n\r\n\tcontent() {\r\n\t\treturn React.createElement(observer(() => {\r\n\t\t\tlet {setSortType, stockGroup, sortType} = this.controller;\r\n\t\t\t/*\r\n\t\t\tlet {store} = cApp;\r\n\t\t\tlet {config} = store;\r\n\t\t\tlet title = config.groupName;\r\n\t\t\tlet { items } = home;\r\n\t\t\t*/\r\n\t\t\tlet title = stockGroup.name;\r\n\t\t\tlet items = stockGroup.stocks;\r\n\r\n\t\t\tlet {  onSelectTag, onAddStock } = this.controller;\r\n\t\t\t/*\r\n\t\t\tlet right = <div className=\"d-flex\">\r\n\t\t\t\t<div className=\"btn cursor-pointer\" onClick={onAddStock}><FA name=\"plus\" inverse={false} /></div>\r\n\t\t\t\t<div className=\"btn cursor-pointer ml-2\" onClick={onSelectTag}><FA name=\"bars\" inverse={false} /></div>\r\n\t\t\t</div>;\r\n\t\t\tlet left = <div className=\"align-self-center\">{title}</div>\r\n\t\t\t<LMR className=\"px-2 py-1\" left={left} right={right}></LMR>\r\n\t\t\t*/\r\n\t\t\treturn <div>\r\n\t\t\t\t<div className=\"d-flex justify-content-end mr-2 my-1\">\r\n\t\t\t\t\t{renderSortHeaders('radioHome', sortType, setSortType)}\r\n\t\t\t\t</div>\r\n\t\t\t\t<List items={items}\r\n\t\t\t\t\titem={{ render: this.renderRow, key: this.rowKey }}\r\n\t\t\t\t\tbefore={'...'}\r\n\t\t\t\t\tnone={<small className=\"px-3 py-3 text-info\">无自选股, 请选股</small>}\r\n\t\t\t\t/>\r\n\t\t\t</div>;\r\n\t\t}));\r\n\t}\r\n\r\n\trenderRow = (item: any, index: number): JSX.Element => { //<this.rowContent {...item} />;\r\n\t\treturn this.rowContent(item);\r\n\t} \r\n\tprotected rowContent = (row: any): JSX.Element => {\r\n\t\tlet right = renderStockUrl(row);\r\n\t\treturn renderStockInfoRow(row, this.onClickName, null, right);\r\n\t}\r\n\r\n\tprivate rowKey = (item: any) => {\r\n\t\tlet { id } = item;\r\n\t\treturn id;\r\n\t}\r\n\r\n\tprotected onClickName = (item: NStockInfo) => {\r\n\t\tthis.controller.openStockInfo(item);\r\n\t}\r\n\r\n\tprotected onSelected = async (item: any): Promise<void> => {\r\n\t\tlet a = 0;\r\n\t}\r\n\r\n\tprivate callOnSelected(item: any) {\r\n\t\tif (this.onSelected === undefined) {\r\n\t\talert('onSelect is undefined');\r\n\t\treturn;\r\n\t\t}\r\n\t\tthis.onSelected(item);\r\n\t}\r\n\tclickRow = (item: any) => {\r\n\t\tthis.callOnSelected(item);\r\n\t}\r\n}","import * as React from 'react';\r\nimport { observer } from 'mobx-react-lite';\r\nimport { VPage, Page, List } from 'tonva-react';\r\nimport { CHome } from './CHome';\r\n\r\nexport class VSelectTag extends VPage<CHome> {\r\n    async open(param?: any) {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private renderTag = (tag:any) => {\r\n        return <div className=\"px-3 py-2 cursor-pointer\">{tag.name}</div>;\r\n    }\r\n\r\n    private page = observer(() => {\r\n        let {stockGroups} = this.controller.cApp.store;\r\n        let { onClickTag } = this.controller;\r\n        return <Page header=\"选择分组\" headerClassName=\"bg-primary\">\r\n            <List items={stockGroups.groups} item={{onClick:onClickTag, render:this.renderTag}} />\r\n        </Page>;\r\n    })\r\n}\r\n","/*eslint @typescript-eslint/no-unused-vars: [\"off\", { \"vars\": \"all\" }]*/\r\nimport * as React from 'react';\r\nimport classNames from 'classnames';\r\nimport { VPage, Page, View, List, LMR, left0, FA } from 'tonva-react';\r\nimport { observable } from 'mobx';\r\nimport { observer } from 'mobx-react';\r\nimport RC2 from 'react-chartjs-2'\r\nimport { GFunc } from '../tool/GFunc';\r\nimport {CMarketPE } from './CMarketPE'\r\n\r\nexport class VMarketPE extends VPage<CMarketPE> {\r\n  private input: HTMLInputElement;\r\n  private key: string = undefined;\r\n\r\n  async open(param?: any) {\r\n    this.openPage(this.page);\r\n  }\r\n\r\n  render(param: any): JSX.Element {\r\n    return <this.page />\r\n  }\r\n\r\n  checkLimitShow = (e:any)=> {\r\n    let check = e.target.checked as boolean;\r\n    let f = check ? 1:0;\r\n    this.controller.onLongShortFlag(f);\r\n  }\r\n\r\n  private page = observer(() => {\r\n  let head = <div >{''}</div>\r\n    return <Page header={head}\r\n      headerClassName='bg-primary'>\r\n      <this.pageContent />\r\n    </Page>;\r\n  })\r\n\r\n  private pageContent = observer(() => {\r\n    return <>\r\n      <this.historyChart />\r\n    </>\r\n  });\r\n\r\n  protected historyChart = observer(() => {\r\n    let {historyData} = this.controller;\r\n    if (historyData === undefined) \r\n      return <></>;\r\n    let chartHistory = <></>;\r\n    let labelList:any[] = [];\r\n    let peList:number[] = [];\r\n    let eList:number[] = [];\r\n    for (let item of historyData) {\r\n      let {day, pe, e} = item;\r\n      labelList.push(day);\r\n      peList.push(GFunc.numberToPrecision(pe, 4));\r\n      eList.push(e);\r\n    }\r\n    let chartdata1 = {\r\n      labels: labelList,\r\n      datasets: [\r\n        {\r\n          label: 'PE',\r\n          data: peList,\r\n          borderColor:'blue',\r\n          backgroundColor:'skyBlue',\r\n          borderWidth: 1,\r\n          fill: false,\r\n          yAxisID: 'y-axis-1',\r\n        },\r\n        {\r\n          label: 'e',\r\n          data: eList,\r\n          borderColor:'red',\r\n          backgroundColor:'pink',\r\n          borderWidth: 1,\r\n          fill: false,\r\n          yAxisID: 'y-axis-2',\r\n        }\r\n      ]\r\n    };\r\n    let options = {\r\n      scales:{\r\n        yAxes: [{\r\n          type: 'linear',\r\n          display: true,\r\n          position: 'right',\r\n          id: 'y-axis-1',\r\n        }, {\r\n          type: 'linear',\r\n          display: true,\r\n          position: 'left',\r\n          id: 'y-axis-2',\r\n          gridLines: {\r\n              drawOnChartArea: false\r\n          }\r\n        }],    \r\n      }\r\n    }\r\n    chartHistory = <RC2 data={chartdata1} type='line' options={options} />;\r\n    let right = <></>;\r\n    right = <label className=\"px-3\"> <input type=\"checkbox\" name=\"selectType\" defaultChecked={false}\r\n    onChange={this.checkLimitShow} />长期</label>;\r\n    return <><LMR className=\"px-3 py-2 bg-white\" left={'市场PE历史走势'} right={right}></LMR>\r\n      <div className=\"px-3\" style={{width:'95%'}}>{chartHistory}</div>\r\n    </>;\r\n  });\r\n\r\n\r\n}","/*eslint @typescript-eslint/no-unused-vars: [\"off\", { \"vars\": \"all\" }]*/\r\nimport { observable } from 'mobx';\r\nimport { CUqBase } from \"../uq-app\";\r\nimport { VMarketPE } from './VMarketPE';\r\n\r\nexport class CMarketPE extends CUqBase {\r\n    @observable historyData:{day:number, pe:number, e:number}[] =  [];\r\n    private longshortFlag:number = 0;\r\n\r\n    async internalStart(param: any) {\r\n        this.loadData();\r\n        this.openVPage(VMarketPE as any);\r\n    }\r\n\r\n    loadData = async () => {\r\n        let dt = new Date();\r\n        let param = [dt.getFullYear()*10000+(dt.getMonth()+1)*100+dt.getDate(), 750, this.longshortFlag];\r\n        //let rets = await this.cApp.store.miApi.query('q_marketpe', param) as {day:number, pe:number, e:number}[];\r\n\t\tlet rets = await this.cApp.miNet.q_marketpe(param);\r\n        this.historyData = rets.reverse();\r\n    }\r\n\r\n    onLongShortFlag(f:number) {\r\n        if (f === this.longshortFlag)\r\n            return;\r\n        this.longshortFlag = f;\r\n        this.loadData();\r\n    }\r\n}","/*eslint @typescript-eslint/no-unused-vars: [\"off\", { \"vars\": \"all\" }]*/\r\nimport { CApp, CUqBase } from '../uq-app';\r\nimport { CStockInfo, NStockInfo } from '../stockinfo';\r\nimport { VSiteHeader } from './VSiteHeader';\r\nimport { VSearchHeader } from './VSearchHeader';\r\nimport { VHome } from './VHome';\r\nimport { VSelectTag } from './VSelectTag';\r\nimport { CMarketPE } from './CMarketPE';\r\nimport { CSelectStock } from 'selectStock';\r\nimport { Stock, StockGroup, Store } from '../store';\r\nimport { makeObservable, observable } from 'mobx';\r\n\r\nexport class CHome extends CUqBase {\r\n\tstore: Store;\r\n\tstockGroup: StockGroup;\r\n\tsortType: string;\r\n\r\n\tconstructor(cApp: CApp) {\r\n\t\tsuper(cApp);\r\n\t\tmakeObservable(this, {\r\n\t\t\tstockGroup: observable,\r\n\t\t\tsortType: observable,\r\n\t\t});\r\n\t\tlet {store} = cApp;\r\n\t\tthis.store = store;\r\n\t}\r\n\r\n\tload = async () => {\r\n\t\tthis.stockGroup = this.store.getHomeStockGroup();\r\n\t\tif (!this.stockGroup) debugger;\r\n\t\tthis.sortType = this.store.config.userStock.sortType;\r\n\t\tif (!this.sortType) this.sortType = '';\r\n\t\tawait this.stockGroup.loadItems();\r\n\t\tthis.stockGroup.sort(this.sortType)\r\n\t\t/*\r\n\t\tlet tagID = this.store.tagID;\r\n\t\tif (tagID > 0) {\r\n\t\t\tif (this.lastLoadTick && Date.now() - this.lastLoadTick < 300*1000) return;\r\n\t\t\t\tawait this.store.loadHomeItems();\r\n\t\t\tthis.lastLoadTick = Date.now();\r\n\t\t}\r\n\t\t*/\r\n\t}\r\n\r\n\tasync changeGroup(stockGroup: StockGroup) {\r\n\t\tthis.stockGroup = stockGroup;\r\n\t\tawait this.stockGroup.loadItems();\r\n\t}\r\n\r\n\tmanageGroups = async () => {\r\n\t\tthis.cApp.showGroupsManage();\r\n\t}\r\n\r\n\tonSelectTag = async () => {\r\n\t\tthis.openVPage(VSelectTag);\r\n\t}\r\n\r\n\tonAddStock = async () => {\r\n\t\tlet cStock = new CSelectStock(this.cApp);\r\n\t\tlet r = await cStock.call() as Stock;\r\n\r\n\t\tif (r !== undefined) {\r\n\t\t\tawait this.stockGroup.addStock(r);\r\n\t\t}\r\n\t}\r\n\r\n\tonClickTag = async (item:any) => {\r\n\t\tawait this.cApp.store.selectTag(item);\r\n\t\tthis.closePage();\r\n\t}\r\n\r\n\tonPage = async () => {\r\n\t\t//this.PageItems.more();\r\n\t}\r\n\r\n\tonWarningConfg = () => {\r\n\t\tthis.cApp.cWarning.onWarningConfg();\r\n\t}\r\n\r\n\r\n\t// async searchMain(key: any) {\r\n\t//   if (key !== undefined) await this.PageItems.first(key);\r\n\t// }\r\n\r\n\t\t//作为tabs中的首页，internalStart不会被调用\r\n\tasync internalStart(param: any) {\r\n\t}\r\n\r\n\trenderSiteHeader = () => {\r\n\t\treturn this.renderView(VSiteHeader);\r\n\t}\r\n\r\n\trenderSearchHeader = (size?: string) => {\r\n\t\treturn this.renderView(VSearchHeader, size);\r\n\t}\r\n\r\n\ttab = () => this.renderView(VHome);\r\n\r\n\topenStockInfo = (item: NStockInfo) => {\r\n\t\tlet cStockInfo = this.newC(CStockInfo);\r\n\t\tcStockInfo.start(item);\r\n\t}\r\n\r\n\topenMarketPE = () => {\r\n\t\tlet cm = this.newC(CMarketPE);\r\n\t\tcm.start();\r\n\t}\r\n\r\n\tsetSortType = (type:string) => {\r\n\t\tthis.stockGroup.sort(type);\r\n\t\tthis.store.setUserSortType(type);\r\n\t}\r\n}","import * as React from 'react';\r\nimport { observable } from 'mobx';\r\nimport {\r\n    userApi, ItemSchema, StringSchema, ImageSchema, UiTextItem, UiImageItem, nav, Page,\r\n    Edit, UiSchema, VPage, Prop, FA, IconText, PropGrid\r\n} from 'tonva-react';\r\nimport { CMe } from './CMe';\r\n\r\nexport class VEditMe extends VPage<CMe>{\r\n\r\n    async open(param: any) {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private schema: ItemSchema[] = [\r\n        { name: 'nick', type: 'string' } as StringSchema,\r\n        { name: 'icon', type: 'image' } as ImageSchema,\r\n    ];\r\n    private uiSchema: UiSchema = {\r\n        items: {\r\n            nick: { widget: 'text', label: '别名', placeholder: '好的别名更方便记忆' } as UiTextItem,\r\n            icon: { widget: 'image', label: '头像' } as UiImageItem,\r\n        }\r\n    }\r\n    @observable private data: any;\r\n\r\n    constructor(props: any) {\r\n        super(props);\r\n        let { nick, icon } = nav.user;\r\n        this.data = {\r\n            nick: nick,\r\n            icon: icon,\r\n        };\r\n    }\r\n\r\n    private onItemChanged = async (itemSchema: ItemSchema, newValue: any, preValue: any) => {\r\n        let { name } = itemSchema;\r\n        await userApi.userSetProp(name, newValue);\r\n        this.data[name] = newValue;\r\n        nav.user.name = newValue;\r\n        nav.saveLocalUser();\r\n    }\r\n\r\n\tprivate onExit = () => {\r\n        nav.showLogout();\r\n    }\r\n\r\n\tprivate changePassword = async () => {\r\n        await nav.changePassword();\r\n    }\r\n\r\n    private page = () => {\r\n\t\tlet { schema, uiSchema, data, onItemChanged } = this;\r\n\t\tlet gridRows: Prop[] = [\r\n\t\t\t'',\r\n\t\t\t{\r\n\t\t\t\ttype: 'component',\r\n\t\t\t\tcomponent: <IconText iconClass=\"text-info mr-2\" icon=\"key\" text={this.t('changePassword')} />,\r\n\t\t\t\tonClick: this.changePassword\r\n\t\t\t},\r\n\t\t\t'',\r\n\t\t\t'',\r\n\t\t\t{\r\n\t\t\t\ttype: 'component',\r\n\t\t\t\tbk: '',\r\n\t\t\t\tcomponent: <div className=\"w-100 text-center\">\r\n\t\t\t\t\t<button className=\"btn btn-danger w-100 w-max-20c\" onClick={this.onExit}>\r\n\t\t\t\t\t\t<FA name=\"sign-out\" size=\"lg\" /> {this.t('logout')}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t},\r\n\t\t];\r\n\r\n\r\n\t\t/*\r\n\t\tlet vAdmin: any;\r\n\t\t\r\n\t\tlet { role } = this.controller;\r\n\t\tif ((role & 2) === 2) {\r\n\t\t\tvAdmin = <div className=\"px-3 py-2 cursor-pointer bg-white border-bottom\" onClick={this.controller.showAdmin}>管理员</div>;\r\n\t\t}\r\n\t\t{vAdmin}\r\n\t\t*/\r\n        return <Page header=\"个人信息\">\r\n            <Edit schema={schema} uiSchema={uiSchema}\r\n                data={data}\r\n                onItemChanged={onItemChanged} />\r\n\t\t\t<PropGrid rows={gridRows} values={{}} />\r\n        </Page>;\r\n    }\r\n}\r\n\r\nexport const webUserSchema: ItemSchema[] = [\r\n    { name: 'firstName', type: 'string', required: true } as StringSchema,\r\n    { name: 'gender', type: 'string' } as StringSchema,\r\n    { name: 'salutation', type: 'string' } as StringSchema,\r\n    { name: 'organizationName', type: 'string', required: true } as StringSchema,\r\n    { name: 'departmentName', type: 'string' } as StringSchema,\r\n];\r\n\r\n","//=== UqApp builder created on Tue Jan 12 2021 23:14:51 GMT-0500 (GMT-05:00) ===//\r\nimport { AppConfig, DevConfig } from \"tonva-react\";\r\n\r\nconst bz: DevConfig = {\r\n\tname: 'bizdev',\r\n\talias: 'bz',\r\n}\r\n\r\nconst bruce: DevConfig = {\r\n\tname: 'bruce',\r\n\talias: undefined,\r\n}\r\n\r\nexport const appConfig: AppConfig = {\r\n\tversion: '0.1.0',\r\n\tapp: undefined,\r\n\tuqs: [\r\n\t\t{\r\n\t\t\tdev: bz,\r\n\t\t\tname: 'hello-tonva',\r\n\t\t\talias: 'HelloTonva',\r\n\t\t\tversion: '0.1.0',\r\n\t\t},\r\n\t\t{\r\n\t\t\tdev: bruce,\r\n\t\t\tname: 'yumi',\r\n\t\t\talias: 'YuMi',\r\n\t\t\tversion: '0.1.0',\r\n\t\t},\r\n\t],\r\n\tnoUnit: true,\r\n    tvs: {},\r\n\toem: undefined,\r\n\thtmlTitle: '鱼米乡 - 私享投资圈',\r\n};\r\n","import { VPage } from \"tonva-react\";\r\nimport { CMe } from \"./CMe\";\r\n\r\nexport class VFaq extends VPage<CMe> {\r\n\theader() {return '基本概念'}\r\n\tcontent() {\r\n\t\treturn <ul>\r\n\t\t\t<li className=\"my-3\">\r\n\t\t\t\t<div className=\"my-2\">基本公理</div>\r\n\t\t\t\t<ul className=\"px-3 text-info\">\r\n\t\t\t\t\t<li><span className=\"mr-3\">公理1: </span>进步是社会的必然</li>\r\n\t\t\t\t\t<li><span className=\"mr-3\">公理2: </span>信任是经济的基石</li>\r\n\t\t\t\t\t<li><span className=\"mr-3\">公理3: </span>价值是价格的准心</li>\r\n\t\t\t\t\t<li><span className=\"mr-3\">公理4: </span>发展是企业的基因</li>\r\n\t\t\t\t</ul>\r\n\t\t\t</li>\r\n\t\t\t<li className=\"my-3\">\r\n\t\t\t\t<div className=\"my-2\">米投定律</div>\r\n\t\t\t\t<ul className=\"px-3 text-info\">\r\n\t\t\t\t\t<li><span className=\"mr-3\">定律1: </span>投资无风险</li>\r\n\t\t\t\t</ul>\r\n\t\t\t</li>\r\n\t\t\t<li className=\"my-3\">\r\n\t\t\t\t<div className=\"my-2\">米投原则</div>\r\n\t\t\t\t<ul className=\"px-3 text-info\">\r\n\t\t\t\t\t<li><span className=\"mr-3\">原则1: </span>低估</li>\r\n\t\t\t\t\t<li><span className=\"mr-3\">原则2: </span>分散</li>\r\n\t\t\t\t\t<li><span className=\"mr-3\">原则3: </span>不深研</li>\r\n\t\t\t\t</ul>\r\n\t\t\t</li>\r\n\t\t\t<li className=\"my-3\">\r\n\t\t\t\t<div className=\"my-2\">米息定义</div>\r\n\t\t\t\t<ul className=\"px-3 text-info\">\r\n\t\t\t\t\t<li><span className=\"mr-3\">定义1: </span>米息 = 增息 + 股息</li>\r\n\t\t\t\t\t<li><span className=\"mr-3\">定义2: </span>增息 = 企业未来三年利润增长值</li>\r\n\t\t\t\t\t<li><span className=\"mr-3\">定义3: </span>米息率 = 米息 / 股价</li>\r\n\t\t\t\t\t<li><span className=\"mr-3\">定义4: </span>米息率大一倍，米息分加1</li>\r\n\t\t\t\t\t<li><span className=\"mr-3\">定义5: </span>PE = 股价 / 利润</li>\r\n\t\t\t\t</ul>\r\n\t\t\t</li>\r\n\t\t</ul>\r\n\t}\r\n}","import { VPage } from \"tonva-react\";\r\nimport { appConfig } from \"../uq-app/appConfig\";\r\nimport { CMe } from \"./CMe\";\r\n\r\nexport class VAbout extends VPage<CMe> {\r\n\theader() {return '关于APP';}\r\n\tcontent() {\r\n\t\treturn <div className=\"py-5 px-3 my-3 w-max-30c mx-auto bg-white\">\r\n\t\t\t<div className=\"text-center mb-5 position-relative\">\r\n\t\t\t\t<small className=\"text-muted position-absolute\"\r\n\t\t\t\t\tstyle={{right:'0', top:'-2.8rem'}}>\r\n\t\t\t\t\t版本: {appConfig.version}\r\n\t\t\t\t</small>\r\n\t\t\t\t<i className=\"text-danger position-absolute top-0 start-0 fa fa-fire fa-2x\" \r\n\t\t\t\t\tstyle={{left:'2rem', top:'0.5rem'}} />\r\n\t\t\t\t<b className=\"text-danger h5 mb-0\">\r\n\t\t\t\t\t<span className=\"text-primary\">鱼</span>\r\n\t\t\t\t\t<b className=\"mx-1\">米</b>\r\n\t\t\t\t\t<span className=\"text-success\">乡</span>\r\n\t\t\t\t</b>\r\n\t\t\t\t<br/>\r\n\t\t\t\t<small className=\"text-info\">私享投资圈</small>\r\n\t\t\t</div>\r\n\t\t\t<ul>\r\n\t\t\t\t<li>跟家人和好友一起分享投资思考。</li>\r\n\t\t\t\t<li>世界级投资大师年化收益率11%。</li>\r\n\t\t\t\t<li>全球最大的成长经济体GDP增长率高于5%。</li>\r\n\t\t\t\t<li>以10%为基础，期待<b className=\"text-danger mx-1\">15%以上</b>的高水平。</li>\r\n\t\t\t</ul>\r\n\t\t\t<div className=\"mt-5 text-center\">\r\n\t\t\t\t<small className=\"text-muted mr-2\">by</small>\r\n\t\t\t\t同花投顾\r\n\t\t\t</div>\r\n\t\t</div>;\r\n\t}\r\n}\r\n","import React from 'react';\r\nimport { observer } from 'mobx-react';\r\nimport { Image, VPage, nav, IconText, PropGrid, LMR, FA, Prop } from 'tonva-react';\r\nimport { CMe } from './CMe';\r\nimport { appConfig } from \"../uq-app/appConfig\";\r\nimport { VFaq } from './VFaq';\r\nimport { VAbout } from './VAbout';\r\n\r\nexport class VMe extends VPage<CMe> {\r\n\theader() {return this.t('me')}\r\n\r\n\tcontent() {\r\n        const { user } = nav;\r\n        let aboutRows: Prop[] = [\r\n            '',\r\n            {\r\n                type: 'component',\r\n                component: <LMR className=\"w-100\" onClick={this.faq}\r\n\t\t\t\t\tright={<FA className=\"align-self-center\" name=\"angle-right\" />}>\r\n                    <IconText iconClass=\"text-info mr-2\" icon=\"comments-o\" text={this.t('基本概念')} />                    \r\n                </LMR>,\r\n            },\r\n            {\r\n                type: 'component',\r\n                component: <LMR className=\"w-100\" onClick={this.about}\r\n\t\t\t\t\tright={<FA className=\"align-self-center\" name=\"angle-right\" />}>\r\n                    <IconText iconClass=\"text-info mr-2\" \r\n\t\t\t\t\t\ticon=\"smile-o\" \r\n\t\t\t\t\t\ttext={<>{this.t('aboutTheApp')} <small>版本 {appConfig.version}</small></>} />                    \r\n                </LMR>,\r\n            },\r\n        ];\r\n\r\n        let rows: Prop[];\r\n        if (user === undefined) {\r\n            rows = aboutRows;\r\n            rows.push(\r\n                {\r\n                    type: 'component',\r\n                    component: <button className=\"btn btn-success w-100 my-2\" onClick={() => nav.logout()}>\r\n                        <FA name=\"sign-out\" size=\"lg\" /> {this.t('pleaseLogin')}\r\n                    </button>\r\n                },\r\n            );\r\n        }\r\n        else {\r\n            let logOutRows: Prop[] = [\r\n            ];\r\n\r\n            rows = [\r\n                '',\r\n                {\r\n                    type: 'component',\r\n                    component: <this.meInfo />\r\n                },\r\n            ]\r\n            rows.push(...aboutRows, ...logOutRows);\r\n        }\r\n        return <PropGrid rows={[...rows]} values={{}} />;\r\n\t}\r\n\r\n\tprivate meInfo = observer(() => {\r\n        let { user } = nav;\r\n        if (user === undefined) return null;\r\n        let { id, name, nick, icon } = user;\r\n        return <LMR className=\"py-2 cursor-pointer w-100\"\r\n            left={<Image className=\"w-3c h-3c mr-3\" src={icon || '.user-o'} />}\r\n            right={<FA className=\"align-self-end\" name=\"angle-right\" />}\r\n            onClick={this.controller.showEditMe}>\r\n            <div>\r\n                <div>{userSpan(name, nick)}</div>\r\n                <div className=\"small\"><span className=\"text-muted\">ID:</span> {id > 10000 ? id : String(id + 10000).substr(1)}</div>\r\n            </div>\r\n        </LMR>;\r\n    });\r\n\r\n\tprivate faq = () => {\r\n\t\tthis.openVPage(VFaq);\r\n\t}\r\n\r\n\tprivate about = () => {\r\n\t\tthis.openVPage(VAbout);\r\n\t}\r\n}\r\n\r\nfunction userSpan(name: string, nick: string): JSX.Element {\r\n    return nick ?\r\n        <><b>{nick} &nbsp; <small className=\"muted\">{name}</small></b></>\r\n        : <b>{name}</b>\r\n}\r\n","import { QueryPager, User } from \"tonva-react\";\r\nimport { CUqBase } from \"../uq-app\";\r\nimport { VEditMe } from \"./VEditMe\";\r\nimport { VMe } from \"./VMe\";\r\n//import { VAdmin } from \"./VAdmin\";\r\n\r\nexport interface RootUnitItem {\r\n\tid: number;\t\t\t\t\t// root unit id\r\n\towner: any;\r\n\tname: string;\t\t\t\t// 唯一\r\n\tcontent: string;\r\n\ttonvaUnit: number;\t\t\t// 跟tonva机构对应的值\r\n\tx: number;\r\n}\r\n\r\nexport class CMe extends CUqBase {\r\n\trole: number;\r\n\tunitOwner: User;\r\n\trootUnits: QueryPager<any>;\r\n\r\n    protected async internalStart() {\r\n\t}\r\n\r\n\ttab = () => this.renderView(VMe);\r\n\r\n\tshowEditMe = async () => {\r\n\t\t//let result = await this.uqs.Notes.GetSystemRole.query({});\r\n\t\tthis.role = undefined; // result.ret[0]?.role;\r\n\t\tthis.openVPage(VEditMe);\r\n\t}\r\n\t/*\r\n\tshowAdmin = async () => {\r\n\t\tthis.rootUnits = new QueryPager<any>(this.uqs.Notes.GetRootUnits, undefined, undefined, true);\r\n\t\tthis.rootUnits.first({});\r\n\t\tthis.openVPage(VAdmin);\r\n\t}\r\n\r\n\tasync createRootUnit(param: {name:string; content:string; owner:number}): Promise<number> {\r\n\t\tlet result = await this.uqs.Notes.CreateRootUnit.submit(param);\r\n\t\treturn result.id;\r\n\t}\r\n\r\n\tasync changeRootUnitName(item:RootUnitItem, name:string) {\r\n\t\tawait this.uqs.Notes.ChangeRootUnitProp.submit({unit:item.id, prop:'name', value: name})\r\n\t\titem.name = name;\r\n\t}\r\n\r\n\tasync changeRootUnitTonva(item:RootUnitItem, tonvaUnit:any) {\r\n\t\tawait this.uqs.Notes.ChangeRootUnitProp.submit({unit:item.id, prop:'tonvaUnit', value: tonvaUnit})\r\n\t\titem.tonvaUnit = tonvaUnit;\r\n\t}\r\n\r\n\tasync changeRootUnitX(item:RootUnitItem, x:number) {\r\n\t\tawait this.uqs.Notes.ChangeRootUnitProp.submit({unit:item.id, prop:'x', value: x as any})\r\n\t\titem.x = x;\r\n\t}\r\n\t*/\r\n}\r\n","/*eslint @typescript-eslint/no-unused-vars: [\"off\", { \"vars\": \"all\" }]*/\r\nimport { LMR, View } from 'tonva-react';\r\nimport logo from '../images/logo.svg';\r\nimport { CExplorer } from './CExplorer';\r\n\r\nexport class VSiteHeader extends View<CExplorer> {\r\n    render() {\r\n        let left = <img className=\"m-1\" src={logo} alt=\"logo\" style={{height: \"3rem\", width: \"3rem\"}} />;\r\n        let right = undefined;\r\n        return <LMR\r\n            className=\"mb-3 align-items-center bg-white\"\r\n            left={left} right={right}>\r\n            <div className=\"\">\r\n                {this.controller.renderSiteHeader()}\r\n            </div>\r\n        </LMR>\r\n    }\r\n}","/*eslint @typescript-eslint/no-unused-vars: [\"off\", { \"vars\": \"all\" }]*/\r\nimport * as React from 'react';\r\nimport { observer } from 'mobx-react';\r\nimport { VPage, List, LMR, FA, Scroller } from 'tonva-react';\r\nimport { NStockInfo } from '../stockinfo';\r\nimport { GFunc } from '../tool/GFunc';\r\nimport { CExplorer } from './CExplorer';\r\nimport { renderSortHeaders, renderStockInfoRow, renderStockUrl } from '../tool';\r\n\r\nexport class VExplorer extends VPage<CExplorer> {\r\n\theader() {return '股票发现'}\r\n\tprotected onPageScrollBottom(scroller: Scroller): Promise<void> {\r\n\t\tthis.controller.onPage();\r\n\t\treturn;\r\n\t}\r\n\r\n\tright() {\r\n\t\tlet { onConfig } = this.controller;\r\n\t\treturn <div className=\"btn align-self-center cursor-pointer \" onClick={onConfig}><FA name=\"cog\" size=\"lg\" inverse={true} /></div>\r\n\t}\r\n\r\n\tcontent() {\r\n\t\treturn React.createElement(observer(() => {\r\n\t\t\tlet {explore, load, setSortType} = this.controller;\r\n\t\t\tlet {items, avgs, sortType } = explore;\r\n\r\n\t\t\tlet left: any;\r\n\t\t\tlet right = <div className=\"btn btn-link cursor-pointer py-1\" onClick={load}>刷新</div>;\r\n\t\t\t/*if (avgs.avg20 !== undefined || avgs.avg50 !== undefined || avgs.avg100 !== undefined) {\r\n\t\t\t\tlet avgStr = ` top20 : ${GFunc.numberToFixString(avgs.avg20)} \r\n  -  top50 : ${GFunc.numberToFixString(avgs.avg50)}\r\n  -  top100 : ${GFunc.numberToFixString(avgs.avg100)}\r\n  -  all : ${GFunc.numberToFixString(avgs.avg)}\r\n  ...查看历史走势`;\r\n\t\t\t\tleft = <div className=\"px-3 cursor-pointer align-self-center\"\r\n\t\t\t\t\tonClick={this.controller.onClickPredictAVG}>\r\n\t\t\t\t\t\t{GFunc.caption('价值指数均值')}{avgStr}\r\n\t\t\t\t\t</div>;\r\n\t\t\t}*/\r\n\t\t\tif (avgs.avg !== undefined) {\r\n\t\t\t\tlet avgStr = ` : ${GFunc.numberToFixString(Math.log(avgs.avg), 1)}`;\r\n\t\t\t\tleft = <div className=\"px-3 cursor-pointer align-self-center\">\r\n\t\t\t\t\t\t{GFunc.caption('米息分均值')}{avgStr}\r\n\t\t\t\t\t</div>;\r\n\t\t\t}\t\t\t\r\n\t\t\treturn <>\r\n\t\t\t\t<LMR left={left} right={right} />\r\n\t\t\t\t<div className=\"d-flex justify-content-end mr-2 my-1\">\r\n\t\t\t\t\t{renderSortHeaders('radioHome', sortType, setSortType)}\r\n\t\t\t\t</div>\r\n\t\t\t\t<List items={items}\r\n\t\t\t\t\titem={{ render: this.renderRow, key: this.rowKey }}\r\n\t\t\t\t\tbefore={'选股'}\r\n\t\t\t\t/>\r\n\t\t\t</>\r\n\t\t}));\r\n\t}\r\n\r\n\trenderRow = (item: any, index: number): JSX.Element => {\r\n\t\treturn this.rowContent(item);\r\n\t} \r\n\tprotected rowContent = (row: any): JSX.Element => {\r\n\t\tlet {store} = this.controller.cApp;\r\n\t\tlet { id, symbol } = row as NStockInfo;\r\n\t\tif (store.isMyBlack(id) === true) return null;\r\n\t\tlet labelId = 'vexl_' + id;\r\n\t\tlet isMySelect = store.isMySelect(id); // defList.findIndex(v=>v===id);\r\n\t\tlet middle = <label className=\"mb-0 cursor-pointer\">\r\n\t\t\t<input className=\"mr-1\" type=\"checkbox\" value=\"\" id={labelId}\r\n\t\t\tdefaultChecked={isMySelect}\r\n\t\t\tonChange={e => this.onSelect(row, e.target.checked)}/>\r\n\t\t\t<small className=\"text-muted\">自选</small>\r\n\t\t</label>;\r\n\r\n\t\tlet right = <div className=\"d-flex\">\r\n\t\t\t{renderStockUrl(row)}\r\n\t\t</div>;\r\n\t\treturn renderStockInfoRow(row, this.onClickName, middle, right);\r\n\t};\r\n\r\n\tprivate rowKey = (item: any) => {\r\n\t\tif (item.item !== undefined) {\r\n\t\t\treturn item.item.id;\r\n\t\t}\r\n\t\tlet { id } = item;\r\n\t\treturn id;\r\n\t}\r\n\r\n\tprotected onClickName = (item: NStockInfo) => {\r\n\t\tthis.controller.openStockInfo(item);\r\n\t}\r\n\r\n\tprotected onSelect = async (item: any, isSelected:boolean): Promise<void> => {\r\n\t\tthis.controller.onSelectItem(item, isSelected);\r\n\t}\r\n\r\n\tprotected onClickItem = async (item: any): Promise<void> => {\r\n\t\tthis.controller.openStockInfo(item);\r\n\t}\r\n}","/*eslint @typescript-eslint/no-unused-vars: [\"off\", { \"vars\": \"all\" }]*/\r\nimport * as React from 'react';\r\nimport { observer } from 'mobx-react';\r\nimport { VPage, Page, FA, List, Form, ItemSchema, StringSchema, UiInputItem, UiSchema, Context, IdSchema, UiIdItem, LMR, UiSelect, UiTextItem } from 'tonva-react';\r\nimport { CExplorer } from './CExplorer';\r\n\r\nconst schema: ItemSchema[] = [\r\n  { name: 'irate', type: 'number', required: true},\r\n  { name: 'bmin', type: 'number', required: true},\r\n  { name: 'bmax', type: 'number', required: true},\r\n  { name: 'r2', type: 'number', required: true},\r\n  { name: 'lmin', type: 'number', required: true},\r\n  { name: 'lmax', type: 'number', required: true},\r\n  { name: 'lr2', type: 'number', required: true},\r\n  { name: 'mcount', type: 'integer', required: true},\r\n  { name: 'lr4', type: 'number', required: true},\r\n  { name: 'r210', type: 'number', required: true},\r\n  { name: 'submit', type: 'submit', },\r\n];\r\n\r\nconst uiSchema: UiSchema = {\r\n  items: {\r\n    irate: { widget: 'number', label: '无风险收益率', placeholder: '0.04'} as UiInputItem,\r\n    bmin: { widget: 'number', label: '指数回归最小值', placeholder: '0.00'} as UiInputItem,\r\n    bmax: { widget: 'number', label: '指数回归最大值', placeholder: '0.00'} as UiInputItem,\r\n    r2: { widget: 'number', label: '指数回归R2', placeholder: '0.00'} as UiInputItem,\r\n    lmin: { widget: 'number', label: '线性回归最小值', placeholder: '0.00'} as UiInputItem,\r\n    lmax: { widget: 'number', label: '线性回归最大值', placeholder: '0.00'} as UiInputItem,\r\n    lr2: { widget: 'number', label: '线性回归R2', placeholder: '0.00'} as UiInputItem,\r\n    lr4: { widget: 'number', label: '末年与前4年均值最大比值', placeholder: '0.00'} as UiInputItem,\r\n    mcount: { widget: 'number', label: '5年内单季亏损最多允许出现次数', placeholder: '0.00'} as UiInputItem,\r\n    r210: { widget: 'number', label: '十年回归R2', placeholder: '0.00'} as UiInputItem,\r\n    submit: { widget: 'button', label: '保存', className: 'btn btn-primary' },\r\n  }\r\n};\r\n\r\n\r\nexport class VExplorerCfg extends VPage<CExplorer> {\r\n  async open(param?: any) {\r\n    this.openPage(this.page);\r\n  }\r\n\r\n  sortChage = (e:any)=> {\r\n    let newType = e.target.value;\r\n\r\n    this.controller.cApp.store.setStockSortType(newType);\r\n  }\r\n\r\n  selectChange = (e:any)=> {\r\n    let newType = e.target.value;\r\n\r\n    this.controller.cApp.store.setStockSelectType(newType);\r\n  }\r\n\r\n  onChange = (e:any) => {\r\n    let {name, value} = e.target;\r\n  }\r\n\r\n  private onFormButtonClick = async (name: string, context: Context) => {\r\n    //await this.controller.onSaveNewWarning(context.data);\r\n    let {bmin, bmax, r2, lmin, lmax, lr2, mcount, lr4, r210, irate} = context.data;\r\n    let cfg = {bmin:bmin, bmax:bmax, r2:r2, lmin:lmin, lmax:lmax, lr2:lr2, mcount:mcount, lr4:lr4, r210:r210, irate:irate};\r\n    await this.controller.cApp.store.setRegressionConfig(cfg);\r\n    this.controller.closePage();\r\n  }\r\n\r\n\r\n  private page = observer(() => {\r\n    let scfg = this.controller.cApp.store.findStockConfg;\r\n    //let findType = scfg.sortType;\r\n    // let selectType = scfg.selectType;\r\n    // if (selectType === undefined) {\r\n    //   selectType = 'all';\r\n    // }\r\n    let fData = this.controller.cApp.store.config.regression;\r\n    if (fData.irate === undefined)\r\n      fData.irate = 0.04;\r\n\r\n    return <Page header=\"选股设置\" headerClassName=\"bg-primary\">\r\n      {/* <div className=\"px-3 py-2\">方法</div>\r\n      <div className=\"px-3 py-2 d-flex flex-wrap\">\r\n        <label className=\"px-3 c8\"> <input type=\"radio\" name=\"selectType\" value=\"all\" checked={selectType===\"all\"}\r\n          onChange={this.selectChange} />预期PE</label><br />\r\n        <label className=\"px-3 c8\"> <input type=\"radio\" name=\"selectType\" value=\"value\" checked={selectType===\"value\"}\r\n          onChange={this.selectChange} />价值指数</label><br />\r\n      </div> */}\r\n      <div className=\"px-3 py-2\">回归参数</div>\r\n      <Form schema={schema}\r\n          uiSchema={uiSchema}\r\n          formData={fData}\r\n          onButtonClick={this.onFormButtonClick}\r\n        />\r\n    </Page>;\r\n  })\r\n}\r\n","import { makeObservable, observable, runInAction } from \"mobx\";\r\nimport { GFunc } from \"../tool\";\r\nimport { Store, sortStocks, Stock } from \"../store\";\r\n\r\ninterface Avg {\r\n\tavg20?: number;\r\n\tavg50?: number;\r\n\tavg100?: number;\r\n\tavg?: number;\r\n}\r\n\r\nexport class Explore {\r\n\tprivate store: Store;\r\n\titems: any[]; // = observable.array<any>([], { deep: true });\r\n\tavgs: Avg = {};\r\n\tlastTradeDay: number;\r\n\tsortType: string;\r\n\tselectedItems: any[] = [];\r\n  \r\n\tconstructor(store: Store) {\r\n\t\tthis.store = store;\r\n\t\tmakeObservable(this, {\r\n\t\t\tavgs: observable,\r\n\t\t\titems: observable,\r\n\t\t\tsortType: observable,\r\n\t\t});\r\n\t}\r\n\t\r\n\tload = async () => {\r\n\t\tthis.selectedItems = [];\r\n\t\tlet items = await this.loadItems();\r\n\t\trunInAction(() => {\r\n\t\t\tthis.sortType = this.store.config.userStock.sortType;\r\n\t\t\tsortStocks(this.sortType, items);\r\n\t\t\tif (!this.items) {\r\n\t\t\t\tthis.items = items;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.items.splice(0, this.items.length, items);\r\n\t\t\t}\t\r\n\t\t});\r\n\t}\r\n\r\n\tprivate async loadItems():Promise<any[]> {\r\n\t\tlet queryName = 'all';\r\n\t\tlet rets = await this.store.loadExportItems(queryName);\r\n\t\tlet lastDayRet = rets[1] as {day:number}[];\r\n\t\tif (Array.isArray(lastDayRet) && lastDayRet.length > 0) {\r\n\t\t\tthis.lastTradeDay = lastDayRet[0].day;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.lastTradeDay = undefined;\r\n\t\t}\r\n\t\tlet result = rets[0];\r\n\t\tif (Array.isArray(result) === false) {\r\n\t\t\treturn;\r\n\t\t};\r\n\t\tlet arr: Stock[] = result;\r\n\t\tfor (let item of arr) {\r\n            if (item.id === 10003989) {\r\n                let a =0;\r\n            }\r\n\t\t\tlet dataArray = JSON.parse(item.data) as number[];\r\n\t\t\titem.dataArr = dataArray;\r\n            let e = item.e * item.eshares;\r\n            let p = item.price * item.pshares;\r\n            let c = item.capital * item.eshares;\r\n            let b = item.bonus * item.bshares;\r\n\t\t\titem.v = GFunc.calculateVS(item.ev * item.eshares, b, p);\r\n            item.pe = p / e;\r\n            item.roe = e / c;\r\n            item.divyield = b / p;\r\n\t\t}\r\n\t\trunInAction(() => {\r\n\t\t\tif (queryName === 'all') {\r\n\t\t\t\tthis.avgs = GFunc.CalculateValueAvg(arr as  {v:number}[]);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.avgs = {};\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn arr;\r\n\t}\r\n\r\n\tasync onItemSelected(item:any) {\r\n\t\tthis.store.addTagStock(item);\r\n\t}\r\n\r\n\tasync onItemUnselected(item:any) {\r\n\t\tthis.store.removeTagStock(item);\r\n\t}\r\n\r\n\tsetSortType(type:string) {\r\n\t\trunInAction(() => {\r\n\t\t\tsortStocks(type, this.items);\r\n\t\t\tthis.store.setUserSortType(type);\t\r\n\t\t});\r\n\t}\r\n}\r\n","/*eslint @typescript-eslint/no-unused-vars: [\"off\", { \"vars\": \"all\" }]*/\r\nimport { CApp, CUqBase } from \"../uq-app\";\r\nimport { CStockInfo, NStockInfo } from '../stockinfo';\r\nimport { VSiteHeader } from './VSiteHeader';\r\nimport { VExplorer } from './VExplorer';\r\nimport { VExplorerCfg } from './VExplorerCfg';\r\nimport { PredictHistoryParam } from 'predicthistory/CPredictHistory';\r\nimport { Explore } from './explore';\r\n\r\nexport class CExplorer extends CUqBase {\r\n\texplore: Explore;\r\n\r\n\tconstructor(cApp: CApp) {\r\n\t\tsuper(cApp);\r\n\t\tlet {store} = cApp;\r\n\t\tthis.explore = new Explore(store);\r\n\t}\r\n\r\n\tload = async () => {\r\n\t\tthis.explore.load();\r\n\t}\r\n\r\n\tonPage = async () => {\r\n\t\t//this.PageItems.more();\r\n\t}\r\n\r\n\tonConfig = async () => {\r\n\t\tthis.openVPage(VExplorerCfg);\r\n\t}\r\n\r\n\tasync internalStart(param: any) {\r\n\t}\r\n\r\n\tonSelectItem = async (item:any, isSelected:boolean) => {\r\n\t\tif (isSelected === true) {\r\n\t\t\tthis.explore.onItemSelected(item);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.explore.onItemUnselected(item);\r\n\t\t}\r\n\t}\r\n\r\n\tsetSortType = (type:string) => this.explore.setSortType(type);\r\n\r\n\trenderSiteHeader = () => {\r\n\t\treturn this.renderView(VSiteHeader);\r\n\t}\r\n\r\n\trenderHome = () => {\r\n\t\treturn this.renderView(VExplorer);\r\n\t}\r\n\r\n\r\n\topenMetaView = () => {}\r\n\r\n\ttab = () => this.renderHome();\r\n\r\n\topenStockInfo = (item: NStockInfo) => {\r\n\t\tlet cStockInfo = this.newC(CStockInfo);\r\n\t\tcStockInfo.start(item);\r\n\t}\r\n\r\n\tonClickPredictAVG = () => {\r\n\t\tlet {avgs, lastTradeDay} = this.explore;\r\n\t\tlet param: PredictHistoryParam = {\r\n\t\t  day:undefined,\r\n\t\t  priceDay:lastTradeDay,\r\n\t\t  avg20:avgs.avg20,\r\n\t\t  avg50:avgs.avg50,\r\n\t\t  avg100:avgs.avg100,\r\n\t\t  avg:avgs.avg,\r\n\t\t}\r\n\t\tthis.cApp.openPredictAVG(param);\r\n\t}\r\n}\r\n","/*eslint @typescript-eslint/no-unused-vars: [\"off\", { \"vars\": \"all\" }]*/\r\nimport * as React from 'react';\r\nimport { observer } from 'mobx-react-lite';\r\nimport { VPage, Page, FA, List, Form, ItemSchema, StringSchema, UiInputItem, UiSchema, Context, IdSchema, UiIdItem, LMR, UiSelect, UiTextItem } from 'tonva-react';\r\nimport { CWarning } from './CWarning';\r\nimport { GFunc } from 'tool/GFunc';\r\n\r\nexport class VWarningConfig extends VPage<CWarning> {\r\n  async open(param?: any) {\r\n    this.openPage(this.page);\r\n  }\r\n\r\n  private onSelect = (item: any, isSelected: boolean, anySelected: boolean) => {\r\n    //this.controller.onTaged(item, isSelected);\r\n  }\r\n\r\n  private page = observer(() => {\r\n    let { warnings } = this.controller;\r\n    let divNewTag = warnings.length >= 100 ? '' :\r\n      <div className=\"px-3 py-2 cursor-pointer\" onClick={this.controller.onNewWarning}><FA name=\"plus\" className=\"text-primary\" /> &nbsp; 新建预警</div>;\r\n    return <Page header=\"预警\" headerClassName=\"bg-primary\">\r\n      {divNewTag}\r\n      <List items={warnings} \r\n        item={{ render: this.renderWarning }} \r\n        none={'--'} />\r\n    </Page>;\r\n  })\r\n\r\n  private renderWarning = (witem: any) => {\r\n    let {name, code, type, price} = witem;\r\n    let left = <div className=\"px-3 cursor-pointer\">\r\n      {name}\r\n      <small className=\" mx-3\" >{code}</small></div>;\r\n    return <LMR className=\"mx-3 my-2\" left={left} >\r\n      <div className=\"d-flex flex-wrap\">\r\n        <div className=\"px-3 c6\">{GFunc.warningTypeString(type)}</div>\r\n        <div className=\"px-3 c6\">{GFunc.numberToFixString(price)}</div>\r\n      </div>\r\n    </LMR>;\r\n  }\r\n}\r\n\r\nconst schema: ItemSchema[] = [\r\n  { name: 'id', type: 'id' } as IdSchema,\r\n  { name: 'type', type: 'string', required: true, maxLength: 2 } as StringSchema,\r\n  { name: 'price', type: 'number', required: true},\r\n  { name: 'submit', type: 'submit', },\r\n];\r\n\r\nconst uiSchema: UiSchema = {\r\n  items: {\r\n    id: { widget: 'id',\r\n      label: '股票',\r\n      visible: true} as UiIdItem,\r\n    type: { widget: 'select', label: '类型', \r\n    list: [{value:'gt', title:'大于'}, {value:'lt', title:'小于'}] } as UiSelect,\r\n    price: { widget: 'text', label: '价格', placeholder: '0.00'} as UiTextItem,\r\n    submit: { widget: 'button', label: '保存', className: 'btn btn-primary' },\r\n  }\r\n};\r\n\r\nexport class VNewWarning extends VPage<CWarning> {\r\n  async open(param?: any) {\r\n    this.openPage(this.page);\r\n  }\r\n\r\n  private newuiSchema: UiSchema = {\r\n    items: {\r\n      id: { widget: 'id',\r\n        label: '股票',\r\n        visible: true,\r\n        placeholder: <small className=\"text-muted\">请选择股票</small>,\r\n        pickId: async (context: Context, name: string, value: number) => {\r\n          return await this.controller.showSelectStock(context, name, value)\r\n        },\r\n        Templet: (item: any) => {\r\n          let { name, code } = item;\r\n          if (!item) return <small className=\"text-muted\">请选择股票</small>;\r\n          return <div>\r\n              {name}\r\n              <small className=\" mx-3\" >{code}</small>\r\n          </div>;\r\n        }\r\n      } as UiIdItem,\r\n      type: { widget: 'select', label: '类型', \r\n      list: [{value:'gt', title:'大于'}, {value:'lt', title:'小于'}] } as UiSelect,\r\n      price: { widget: 'text', label: '价格', placeholder: '0.00'} as UiTextItem,\r\n      submit: { widget: 'button', label: '保存', className: 'btn btn-primary' },\r\n    }\r\n  };\r\n  \r\n  private onFormButtonClick = async (name: string, context: Context) => {\r\n    await this.controller.onSaveNewWarning(context.data);\r\n  }\r\n\r\n  private page = () => {\r\n    let fData = {type:'lt'};\r\n    return <Page header=\"新建预警\" headerClassName=\"bg-primary\">\r\n      <div className=\"px-3 py-3\">\r\n        <Form schema={schema}\r\n          uiSchema={this.newuiSchema}\r\n          formData={fData}\r\n          onButtonClick={this.onFormButtonClick}\r\n        />\r\n      </div>\r\n    </Page>;\r\n  }\r\n}\r\n\r\nexport class VEditWarning extends VPage<CWarning> {\r\n  async open(param?: any) {\r\n    this.openPage(this.page, param);\r\n  }\r\n\r\n  private onFormButtonClick = async (name: string, context: Context) => {\r\n    await this.controller.onSaveWarning(context.data);\r\n  }\r\n\r\n  private page = (param?: any) => {\r\n    let {id, type, price} = param;\r\n    let fData = {id:id, type:type, price:price};\r\n    return <Page header=\"编辑预警\" headerClassName=\"bg-primary\">\r\n      <div className=\"px-3 py-3\">\r\n        <Form schema={schema}\r\n          uiSchema={uiSchema}\r\n          formData={fData}\r\n          onButtonClick={this.onFormButtonClick}\r\n        />\r\n      </div>\r\n    </Page>;\r\n  }\r\n}\r\n","/*eslint @typescript-eslint/no-unused-vars: [\"off\", { \"vars\": \"all\" }]*/\r\nimport { Context } from 'tonva-react';\r\nimport { observable } from 'mobx';\r\nimport { CUqBase } from \"../uq-app\";\r\nimport { CSelectStock } from '../selectStock';\r\nimport { VWarningConfig, VNewWarning } from './VWarningConfig';\r\n\r\nexport class CWarning extends CUqBase {\r\n\t//get cApp(): CApp { return this._cApp as CApp };\r\n\t@observable warnings:any[] = [];\r\n\r\n\tasync internalStart(param: any) {\r\n\t\tlet a = 1;\r\n\t}\r\n\r\n\tasync loadWarnings() {\r\n\t\t//let r = await this.cApp.store.miApi.call('t_stockwarning$all', [this.user.id]);//await this.uqs.mi.StockWarningAll.query(undefined);\r\n\t\tlet r = await this.cApp.miNet.t_stockwarning$all();\r\n\t\tlet ret = r as any[];\r\n\t\tthis.warnings = ret;\r\n\t}\r\n\r\n\tonNewWarning = () => {\r\n\t\tthis.openVPage(VNewWarning);\r\n\t}\r\n\r\n\tonWarningConfg = async () => {\r\n\t\tawait this.loadWarnings();\r\n\t\tthis.openVPage(VWarningConfig);\r\n\t}\r\n\r\n\tonSaveNewWarning = async (data: any) => {\r\n\t\tlet { id, type, price } = data;\r\n\t\t// let param = {\r\n\t\t//   user: this.cApp.user.id,\r\n\t\t//   stock: id,\r\n\t\t//   arr1: [\r\n\t\t//     { type: type, price: price }\r\n\t\t//   ]};\r\n\t\t//let ret = await this.uqs.mi.StockWarning.add(param);\r\n\t\t//await this.cApp.store.miApi.call('t_stockwarning$add', [this.cApp.user.id, id.id, type, price]);\r\n\t\tawait this.cApp.miNet.t_stockwarning$add(id.id, type, price);\r\n\t\tthis.closePage();\r\n\t}\r\n\r\n\tonSaveWarning = async (data: any) => {\r\n\r\n\t}\r\n\r\n\tshowSelectStock = async (context: Context, name: string, value: number): Promise<any> => {\r\n\t\tlet cStock = new CSelectStock(this.cApp);\r\n\t\treturn await cStock.call();\r\n\t}\r\n}","/*eslint @typescript-eslint/no-unused-vars: [\"off\", { \"vars\": \"all\" }]*/\r\nimport * as React from 'react';\r\nimport { observer } from 'mobx-react';\r\nimport RC2 from 'react-chartjs-2'\r\nimport { VPage, Page, View, List, LMR, FA } from 'tonva-react';\r\nimport { CPredictHistory } from './CPredictHistory';\r\n\r\nexport class VPredictHistory extends VPage<CPredictHistory> {\r\n  async open(param?: any) {\r\n    this.openPage(this.page);\r\n  }\r\n\r\n  render(param: any): JSX.Element {\r\n    return <this.page />\r\n  }\r\n\r\n  private page = observer(() => {\r\n    return <Page header=\"预期收益比均值历史\">\r\n      <this.pageContent />\r\n    </Page>;\r\n  })\r\n\r\n  private pageContent = observer(() => {\r\n    return <>\r\n    <this.historyChart />\r\n    </>\r\n  });\r\n\r\n  protected historyChart = observer(() => {\r\n    let {items} = this.controller;\r\n    if (items === undefined) \r\n      return <></>;\r\n    let chartHistory = <></>;\r\n    let labelList:any[] = [];\r\n    let avg20List:number[] = [];\r\n    let avg50List:number[] = [];\r\n    let avg100List:number[] = [];\r\n    for (let item of items) {\r\n      let {day, avg20, avg50, avg100} = item;\r\n      labelList.push(day);\r\n      avg20List.push(avg20);\r\n      avg50List.push(avg50);\r\n      avg100List.push(avg100);\r\n    }\r\n    let chartdata1 = {\r\n      labels: labelList,\r\n      datasets: [\r\n        {\r\n          label: 'avg20',\r\n          data: avg20List,\r\n          borderColor:'blue',\r\n          backgroundColor:'skyBlue',\r\n          borderWidth: 1,\r\n          fill: false,\r\n          yAxisID: 'y-axis-1',\r\n        },\r\n        {\r\n          label: 'avg50',\r\n          data: avg50List,\r\n          borderColor:'red',\r\n          backgroundColor:'pink',\r\n          borderWidth: 1,\r\n          fill: false,\r\n          yAxisID: 'y-axis-1',\r\n        },\r\n        {\r\n          label: 'avg100',\r\n          data: avg100List,\r\n          borderColor:'DarkGreen',\r\n          backgroundColor:'green',\r\n          borderWidth: 1,\r\n          fill: false,\r\n          yAxisID: 'y-axis-1',\r\n        },\r\n      ]\r\n    };\r\n    let options = {\r\n      scales:{\r\n        yAxes: [{\r\n            type: 'linear',\r\n            display: true,\r\n            position: 'right',\r\n            id: 'y-axis-1',\r\n        }],       \r\n      }\r\n    }\r\n\r\n    chartHistory = <RC2 data={chartdata1} type='line' options={options}/>;\r\n    return <><LMR className=\"px-3 py-2 bg-white\" left={'历史走势'}></LMR>\r\n      <div className=\"px-3\" style={{width:'95%'}}>{chartHistory}</div>\r\n    </>;\r\n  });\r\n\r\n}","/*eslint @typescript-eslint/no-unused-vars: [\"off\", { \"vars\": \"all\" }]*/\r\nimport { observable, IObservableArray } from 'mobx';\r\nimport { CUqBase } from \"../uq-app\";\r\nimport { VPredictHistory } from './VPredictHistory'\r\n\r\nexport interface PredictHistoryParam {\r\n\tday?:number,\r\n\tpriceDay?:number,\r\n\tavg20?:number,\r\n\tavg50?:number,\r\n\tavg100?:number,\r\n\tavg?:number,\r\n}\r\n\r\ninterface PredictItem {\r\n\tday:number, \r\n\tavg20:number, \r\n\tavg50:number,\r\n\tavg100:number,\r\n\tavg?:number\r\n}\r\n\r\nexport class CPredictHistory extends CUqBase {\r\n\titems: IObservableArray<PredictItem> = observable.array<PredictItem>([], { deep: true });\r\n\tday: number;\r\n\tprotected lastItem: PredictItem;\r\n\r\n\tasync internalStart(param: any) {\r\n\t\tlet p = param as PredictHistoryParam;\r\n\t\tif (p !== undefined) {\r\n\t\tthis.day = p.day;\r\n\t\tif (p.priceDay !== undefined) {\r\n\t\t\tthis.lastItem = {day:p.priceDay, avg20:p.avg20, avg50:p.avg50, avg100:p.avg100};\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.lastItem = undefined;\r\n\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\tthis.day = undefined;\r\n\t\tthis.lastItem = undefined;\r\n\t\t}\r\n\t\tawait this.load();\r\n\t\tthis.openVPage(VPredictHistory as any);\r\n\t}\r\n\r\n\tasync load() {\r\n\t\t//let ret = await this.cApp.store.miApi.call('t_toppredictavg$query', [this.day]) as PredictItem[];\r\n\t\tlet ret:PredictItem[] = await this.cApp.miNet.t_toppredictavg$query(this.day);\r\n\t\tthis.items.clear();\r\n\t\tif (!Array.isArray(ret))\r\n\t\treturn;\r\n\t\tthis.items.push(...ret);\r\n\t\tif (this.lastItem !== undefined) {\r\n\t\tlet li = {...this.lastItem};\r\n\t\tthis.items.push(li);\r\n\t\t}\r\n\t}\r\n}","import { FA, List, LMR, VPage } from \"tonva-react\";\r\nimport { CHolding } from \"./CHolding\";\r\nimport { Account, AccountValue } from \"../uq-app/uqs/BruceYuMi\";\r\n\r\nexport class VHolding extends VPage<CHolding> {\r\n\theader() {return <span className=\"ml-3\">持仓组合 <small className=\"text-muted\">正在设计实现中...</small></span>}\r\n\tcontent() {\r\n\t\treturn <div>\r\n\t\t\t<List items={this.controller.accounts} item={{render: this.renderAccount, onClick: this.onClickAccount}} />\r\n\t\t</div>;\r\n\t}\r\n\r\n\tprivate renderAccount = (item:Account&AccountValue, index:number):JSX.Element => {\r\n\t\tfunction renderValue(caption:string, value:number) {\r\n\t\t\treturn <span className=\"mr-3\"><small className=\"text-muted\">{caption}: </small>{value??0}</span>;\r\n\t\t}\r\n\t\tlet {name, mi, market, count} = item;\r\n\t\tlet right = <div className=\"px-2 d-flex align-items-center\">\r\n\t\t\t<FA className=\"align-\" name=\"angle-right\" />\r\n\t\t</div>;\r\n\t\treturn <LMR right={right}>\r\n\t\t\t<div className=\"px-3 py-2 bg-white d-block\">\r\n\t\t\t\t<div>{name}</div>\r\n\t\t\t\t<div className=\"mt-2\">\r\n\t\t\t\t\t<span className=\"mr-3 small\">共{count??0}只</span>\r\n\t\t\t\t\t{renderValue('总米值', mi as number)}\r\n\t\t\t\t\t{renderValue('总市值', market as number)}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</LMR>;\r\n\t}\r\n\r\n\tprivate onClickAccount = (item:Account&AccountValue) => {\r\n\t\tthis.controller.showAccount(item);\r\n\t}\r\n}","import { LMR, VPage } from \"tonva-react\";\r\nimport { CHolding } from \"./CHolding\";\r\n\r\nexport class VAccount extends VPage<CHolding> {\r\n\theader() {return this.controller.account.name}\r\n\tcontent() {\r\n\t\tfunction renderValue(caption:string, value:number) {\r\n\t\t\treturn <span className=\"mr-3\"><small className=\"text-muted\">{caption}: </small>{value??0}</span>;\r\n\t\t}\r\n\t\tlet {no, name, mi, market, count} = this.controller.account;\r\n\t\treturn <div className=\"mt-3 px-3 py-2 bg-white d-block\">\r\n\t\t\t<LMR right={<small className=\"text-muted\">组合编号: {no}</small>}>\r\n\t\t\t\t{name}\r\n\t\t\t</LMR>\r\n\t\t\t<div className=\"mt-2\">\r\n\t\t\t\t<span className=\"mr-3 small\">共{count??0}只</span>\r\n\t\t\t\t{renderValue('总米值', mi as number)}\r\n\t\t\t\t{renderValue('总市值', market as number)}\r\n\t\t\t</div>\r\n\t\t</div>;\r\n\t}\r\n}\r\n","import { makeObservable, observable } from \"mobx\";\r\nimport { ParamID, ParamIDinIX } from \"tonva-react\";\r\nimport { CApp, CUqBase } from \"../uq-app\";\r\nimport { Account, AccountValue } from \"../uq-app/uqs/BruceYuMi\";\r\nimport { VHolding } from \"./VHolding\";\r\nimport { VAccount } from \"./VAccount\";\r\n\r\nexport class CHolding extends CUqBase {\r\n\taccounts: (Account&AccountValue)[];\r\n\taccount: Account&AccountValue;\r\n\r\n\tconstructor(cApp: CApp) {\r\n\t\tsuper(cApp);\r\n\t\tmakeObservable(this, {\r\n\t\t\taccounts: observable,\r\n\t\t});\r\n\t}\r\n\r\n\tprotected async internalStart() {\r\n\t}\r\n\t\r\n\ttab = () => {\r\n\t\treturn this.renderView(VHolding);\r\n\t}\r\n\r\n\tload = async () => {\r\n\t\tlet {BruceYuMi} = this.uqs;\r\n\t\tlet {Account, UserAccount} = BruceYuMi;\r\n\t\tlet param:ParamIDinIX = {\r\n\t\t\tID: Account,\r\n\t\t\tIX: UserAccount,\r\n\t\t\tid: this.user.id,\r\n\t\t};\r\n\t\tlet ret = await BruceYuMi.IDinIX<Account>(param);\r\n\t\tif (ret.length === 0) {\r\n\t\t\t// 没有持仓账号，则创建默认账号\r\n\t\t\tlet accountNO = await BruceYuMi.IDNO({ID: Account});\r\n\t\t\tlet retActs = await BruceYuMi.IDActs({\r\n\t\t\t\taccount: [{\r\n\t\t\t\t\tid: undefined, \r\n\t\t\t\t\tno: accountNO, \r\n\t\t\t\t\tname: '我的持仓组合', \r\n\t\t\t\t}]\r\n\t\t\t});\r\n\t\t\tret = await BruceYuMi.IDinIX(param);\r\n\t\t}\r\n\t\tlet paramValue:ParamID = {\r\n\t\t\tIDX: BruceYuMi.AccountValue,\r\n\t\t\tid: ret.map((v:any) => (v as unknown as Account).id),\r\n\t\t}\r\n\t\tlet values = await BruceYuMi.ID<AccountValue>(paramValue);\r\n\t\tthis.accounts = ret as unknown as (Account&AccountValue)[];\r\n\t\tthis.accounts.forEach(account => {\r\n\t\t\tlet {id} = account;\r\n\t\t\tlet value = values.find((v:any) => v.id === id);\r\n\t\t\tif (value) {\r\n\t\t\t\tObject.assign(account, value);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tshowAccount = async (item:Account&AccountValue) => {\r\n\t\tthis.account = item;\r\n\t\tthis.openVPage(VAccount);\r\n\t};\r\n}\r\n","import {FetchError} from './fetchError';\r\nimport {HttpChannelUI} from './httpChannelUI';\r\nimport {nav} from 'tonva-react';\r\nimport { consts } from '../consts';\r\n\r\nexport async function httpGet(url:string, params?:any):Promise<any> {\r\n    let channel = new HttpChannel(url, undefined, undefined);\r\n    let ret = await channel.get('', params);\r\n    return ret;\r\n}\r\n\r\nexport async function httpPost(url:string, params?:any):Promise<any> {\r\n    let channel = new HttpChannel(url, undefined, undefined);\r\n    let ret = await channel.post('', params);\r\n    return ret;\r\n}\r\n\r\nexport class HttpChannel {\r\n    private hostUrl: string;\r\n    private apiToken: string;\r\n    private ui?: HttpChannelUI;\r\n    private timeout: number;\r\n\r\n    constructor(hostUrl: string, apiToken:string, ui?: HttpChannelUI) {\r\n        this.hostUrl = hostUrl;\r\n        this.apiToken = apiToken;\r\n        this.ui = ui;\r\n        this.timeout = consts.isDevelopment === true? 500000:20000;\r\n    }\r\n\r\n    private startWait = () => {\r\n        if (this.ui !== undefined) this.ui.startWait();\r\n    }\r\n\r\n    private endWait = (url?:string, reject?:(reason?:any)=>void) => {\r\n        if (this.ui !== undefined) this.ui.endWait();\r\n        if (reject !== undefined) reject('访问webapi超时 ' + url);\r\n    }\r\n\r\n    private showError = async (error:FetchError) => {\r\n        if (this.ui !== undefined) await this.ui.showError(error);\r\n    }\r\n\r\n    used() {\r\n        this.post('', {});\r\n    }\r\n\r\n    async get(url: string, params: any = undefined): Promise<any> {\r\n        if (params) {\r\n            let keys = Object.keys(params);\r\n            if (keys.length > 0) {\r\n                let c = '?';\r\n                for (let k of keys) {\r\n                    let v = params[k];\r\n                    if (v === undefined) continue;\r\n                    url += c + k + '=' + params[k];\r\n                    c = '&';\r\n                }\r\n            }\r\n        }\r\n        let options = this.buildOptions();\r\n        options.method = 'GET';\r\n        return await this.innerFetch(url, options);\r\n    }\r\n\r\n    async post(url: string, params: any): Promise<any> {\r\n        let options = this.buildOptions();\r\n        options.method = 'POST';\r\n        options.body = JSON.stringify(params);\r\n        return await this.innerFetch(url, options);\r\n    }\r\n\r\n    async put(url: string, params: any): Promise<any> {\r\n        let options = this.buildOptions();\r\n        options.method = 'PUT';\r\n        options.body = JSON.stringify(params);\r\n        return await this.innerFetch(url, options);\r\n    }\r\n\r\n    async delete(url: string, params: any): Promise<any> {\r\n        let options = this.buildOptions();\r\n        options.method = 'DELETE';\r\n        options.body = JSON.stringify(params);\r\n        return await this.innerFetch(url, options);\r\n    }\r\n    async fetch(url: string, options: any, resolve:(value?:any)=>any, reject:(reason?:any)=>void):Promise<void> {\r\n        let that = this;\r\n        this.startWait();\r\n        let path = url;\r\n        function buildError(err: string) {\r\n            return {\r\n                channel: that,\r\n                url: path,\r\n                options: options,\r\n                resolve: resolve,\r\n                reject: reject,\r\n                error: err,\r\n            }\r\n        }\r\n        try {\r\n            console.log('%s %s', options.method, path);\r\n            let timeOutHandler = setTimeout(() => that.endWait(url, reject), this.timeout);\r\n            let res = await fetch(encodeURI(path), options);\r\n            if (res.ok === false) {\r\n                clearTimeout(timeOutHandler);\r\n                that.endWait();\r\n                console.log('call error %s', res.statusText);\r\n                throw res.statusText;\r\n            }\r\n            let ct = res.headers.get('content-type');\r\n            if (ct && ct.indexOf('json')>=0) {\r\n                return res.json().then(async retJson => {\r\n                    clearTimeout(timeOutHandler);\r\n                    that.endWait();\r\n                    if (retJson.ok === true) {\r\n                        return resolve(retJson.res);\r\n                    }\r\n                    if (retJson.error === undefined) {\r\n                        await that.showError(buildError('not valid tonva json'));\r\n                    }\r\n                    else {\r\n                        await that.showError(buildError(retJson.error));\r\n                        reject(retJson.error);\r\n                    }\r\n                    //throw retJson.error;\r\n                }).catch(async error => {\r\n                    await that.showError(buildError(error.message));\r\n                });\r\n            }\r\n            else {\r\n                let text = await res.text();\r\n                clearTimeout(timeOutHandler);\r\n                that.endWait();\r\n                resolve(text);\r\n            }\r\n        }\r\n        catch(error) {\r\n            if (typeof error === 'string') {\r\n                if (error.toLowerCase().startsWith('unauthorized') === true) {\r\n                    nav.logout();\r\n                    return;\r\n                }\r\n            }\r\n            await this.showError(buildError(error.message));\r\n        };\r\n    }\r\n\r\n    private async innerFetch(url: string, options: any): Promise<any> {\r\n        let u = this.hostUrl + url;\r\n        return await new Promise<any>(async (resolve, reject) => {\r\n            await this.fetch(u, options, resolve, reject);\r\n        });\r\n    }\r\n\r\n    async callFetch(url:string, method:string, body:any):Promise<any> {\r\n        let options = this.buildOptions();\r\n        options.method = method;\r\n        options.body = body;\r\n        return await new Promise<any>(async (resolve, reject) => {\r\n            await this.fetch(url, options, resolve, reject);\r\n        });\r\n    }\r\n\r\n    private buildOptions(): any {\r\n        let {language, culture} = nav;\r\n        let headers = new Headers();\r\n        //headers.append('Access-Control-Allow-Origin', '*');\r\n        headers.append('Content-Type', 'application/json;charset=UTF-8');\r\n        let lang = language;\r\n        if (culture) lang += '-' + culture;\r\n        headers.append('Accept-Language', lang);\r\n        if (this.apiToken) { \r\n            headers.append('Authorization', this.apiToken); \r\n        }\r\n        let options = {\r\n            headers: headers,\r\n            // cache: 'no-cache',\r\n        };\r\n        return options;\r\n    }\r\n}\r\n","import {nav} from 'tonva-react';\r\n\r\nexport interface HttpChannelUI {\r\n    startWait():void;\r\n    endWait():void;\r\n    showError(error:any):Promise<void>;\r\n}\r\n\r\nexport class HttpChannelNavUI implements HttpChannelUI {\r\n    startWait() {\r\n        nav.startWait();\r\n    }\r\n    endWait() {\r\n        nav.endWait();\r\n    }\r\n    async showError(error:any):Promise<void> {\r\n        nav.endWait();\r\n        /*\r\n        if (error.name === 'SyntaxError') {\r\n            error = {\r\n                name: error.name,\r\n                message: error.message,\r\n            }\r\n        }*/\r\n        await nav.onError(error);\r\n    }\r\n}\r\n\r\n","//import {isDevelopment} from '../local';\r\nimport {HttpChannel} from './httpChannel';\r\n\r\nexport async function refetchApi(channel:HttpChannel, url:any, options:any, resolve:any, reject:any) {\r\n    await channel.fetch(url, options, resolve, reject);\r\n}\r\n\r\nexport abstract class ApiBase {\r\n    protected token: string;\r\n    protected path: string;\r\n    protected showWaiting: boolean;\r\n\r\n    constructor(path: string, showWaiting: boolean) {\r\n        this.path = path || '';\r\n        this.showWaiting = showWaiting;\r\n    }\r\n\r\n    protected abstract getHttpChannel(): Promise<HttpChannel>;\r\n\r\n    public async call(url:string, method:string, body:any):Promise<any> {\r\n        let channel = await this.getHttpChannel();\r\n        return await channel.callFetch(url, method, body);\r\n    }\r\n\r\n    public async get(path:string, params:any=undefined): Promise<any> {\r\n        let channel = await this.getHttpChannel();\r\n        return await channel.get(this.path + path, params);\r\n    }\r\n\r\n    public async post(path:string, params:any): Promise<any> {\r\n        let channel = await this.getHttpChannel();\r\n        return await channel.post(this.path + path, params);\r\n    }\r\n\r\n    public async put(path:string, params:any): Promise<any> {\r\n        let channel = await this.getHttpChannel();\r\n        return await channel.put(this.path + path, params);\r\n    }\r\n\r\n    public async delete(path:string, params:any): Promise<any> {\r\n        let channel = await this.getHttpChannel();\r\n        return await channel.delete(this.path + path, params);\r\n    }\r\n}\r\n","import _ from 'lodash';\r\nimport { HttpChannel } from './httpChannel';\r\nimport { HttpChannelNavUI } from './httpChannelUI';\r\nimport { ApiBase } from './apiBase';\r\n\r\nlet channelUIs: { [name: string]: HttpChannel } = {};\r\nlet channelNoUIs: { [name: string]: HttpChannel } = {};\r\n\r\nclass MiApiChannel extends ApiBase {\r\n\tprivate apiName: string;\r\n\turl: string;\r\n\r\n\tconstructor(url: string, basePath: string, apiName: string, uqToken: string, showWaiting?: boolean) {\r\n\t\tsuper(basePath, showWaiting);\r\n\t\tthis.showWaiting = showWaiting;\r\n\t\tthis.apiName = apiName;\r\n\t\tthis.token = uqToken;\r\n\t\tthis.url = url;\r\n\t}\r\n\r\n\tprotected async getHttpChannel(): Promise<HttpChannel> {\r\n\t\tlet channels: { [name: string]: HttpChannel };\r\n\t\tlet channelUI: HttpChannelNavUI;\r\n\t\tif (this.showWaiting === true || this.showWaiting === undefined) {\r\n\t\t\tchannels = channelUIs;\r\n\t\t\tchannelUI = new HttpChannelNavUI();\r\n\t\t}\r\n\t\telse {\r\n\t\t\tchannels = channelNoUIs;\r\n\t\t}\r\n\t\tlet channel = channels[this.apiName];\r\n\t\tif (channel !== undefined) return channel;\r\n\t\tchannel = new HttpChannel(this.url, this.token, channelUI);\r\n\t\treturn channels[this.apiName] = channel;\r\n\t}\r\n}\r\n\r\nexport class MiApi {\r\n\tprivate channel: MiApiChannel;\r\n\r\n\tconstructor(url: string, basePath: string, apiName: string, uqToken: string, showWaiting?: boolean) {\r\n\t\tthis.channel = new MiApiChannel(url, basePath, apiName, uqToken, showWaiting);\r\n\t}\r\n\r\n\tasync call(name: string, params: any[]): Promise<any> {\r\n\t\tlet pbody = { call: name, params: params };\r\n\t\treturn await this.channel.post('sql/call', pbody);\r\n\t}\r\n\r\n\tasync query(name: string, params: any[]): Promise<any> {\r\n\t\tlet pbody = { call: name, params: params };\r\n\t\treturn await this.channel.post('sql/call', pbody);\r\n\t}\r\n\r\n\tasync page(name: string, params: any[], pageStart: number, pageSize: number): Promise<any> {\r\n\t\tlet p: any[];\r\n\t\tswitch (typeof params) {\r\n\t\t\tcase 'undefined': p = []; break;\r\n\t\t\tdefault: p = _.clone(params); break;\r\n\t\t}\r\n\t\tp.push(pageStart);\r\n\t\tp.push(pageSize);\r\n\t\tlet pbody = { call: name, params: p };\r\n\t\treturn await this.channel.post('sql/call', pbody);\r\n\t}\r\n\r\n\tasync process(proc: any, params: any[]): Promise<any> {\r\n\t\tlet pbody = { proc: proc, params: params };\r\n\t\treturn await this.channel.post('sql/query', pbody);\r\n\t}\r\n}\r\n","import { consts } from \"consts\";\r\nimport { User } from \"tonva-react\";\r\nimport { MiApi } from \"./miApi\";\r\n\r\nexport class MiNet {\r\n\tprivate miApi: MiApi;\r\n\tprivate user: User;\r\n\r\n\tconstructor(user: User) {\r\n\t\tlet miHost = consts.miApiHost;\r\n\t\tif (document.baseURI.indexOf('localmiserver') > 0) {\r\n\t\t\tmiHost = consts.miApiHostDebug;\r\n\t\t}\r\n\t\tthis.user = user;\r\n\t\tthis.miApi = new MiApi(miHost, 'miscan/', 'miapi', user.token, false);\r\n\t}\r\n\r\n\tget userId():number {return this.user.id;}\r\n\r\n\tasync process(proc:any, params:any[]) {\r\n\t\treturn await this.miApi.process(proc, params);\r\n\t}\r\n\r\n\tasync q_marketpe(param:any):Promise<{day:number, pe:number, e:number}[]> {\r\n\t\tlet rets = await this.miApi.query('q_marketpe', param) as {day:number, pe:number, e:number}[];\r\n\t\treturn rets;\r\n\t}\r\n\r\n\tasync t_toppredictavg$query(day:any):Promise<any[]> {\r\n\t\tlet ret = await this.miApi.call('t_toppredictavg$query', [day]);\r\n\t\treturn ret;\r\n\t}\r\n\r\n\tasync q_stocks$page(p:any, pageStart:any, pageSize:any):Promise<any> {\r\n\t\tlet ret = await this.miApi.page('q_stocks$page', p, pageStart, pageSize);\r\n\t\treturn ret;\r\n\t}\r\n\r\n\tasync q_stockallinfo(id:any, day:any) {\r\n\t\treturn this.miApi.query('q_stockallinfo', [id, day]);\r\n\t}\r\n\r\n\tasync t_tagstock$query(tagId:any, id:any) {\r\n\t\treturn this.miApi.query('t_tagstock$query', [this.user.id, tagId, id]) //this.uqs.mi.TagStock.query({ user: nav.user.id, stock: id })\r\n\t}\r\n\r\n\tasync t_tag$all() {\r\n\t\treturn await this.miApi.query('t_tag$all', [this.user.id]);\r\n\t}\r\n\r\n\tasync t_tag$save(name:string) {\r\n\t\treturn await this.miApi.call('t_tag$save', [this.user.id, undefined, name]);\r\n\t}\r\n\r\n\tasync t_tagstock$add(tagId:any, baseId:any) {\r\n\t\treturn await this.miApi.call('t_tagstock$add', [this.user.id, tagId, baseId]); //.uqs.mi.TagStock.add(param);\r\n\t}\r\n\r\n\tasync t_tagstock$del(tagId:any, baseId:any) {\r\n\t\treturn await this.miApi.call('t_tagstock$del', [this.user.id, tagId, baseId]); // //await this.uqs.mi.TagStock.del(param);\r\n\t}\r\n\r\n\tasync t_stockwarning$all() {\r\n\t\treturn await this.miApi.call('t_stockwarning$all', [this.user.id]);//await this.uqs.mi.StockWarningAll.query(undefined);\r\n\t}\r\n\r\n\tasync t_stockwarning$add(id:any, type:any, price:any) {\r\n\t\treturn await this.miApi.call('t_stockwarning$add', [this.user.id, id, type, price]);\r\n\t}\r\n\r\n\tasync t_usersettings$save(v:string) {\r\n\t\treturn await this.miApi.call('t_usersettings$save', [this.user.id, 'config', v]);\r\n\t}\r\n\r\n\tasync t_usersettings$query() {\r\n\t\treturn await this.miApi.query('t_usersettings$query', [this.user.id, 'config']);\r\n\t}\r\n\r\n\t// async t_allaccounts() {\r\n\t// \treturn await this.miApi.query('t_allaccounts', [this.user.id]);\r\n\t// }\r\n\r\n\tasync q_getlasttradeday() {\r\n\t\treturn await this.miApi.call('q_getlasttradeday', []);\r\n\t}\r\n}\r\n","import { VPage } from \"tonva-react\";\r\nimport { CGroup } from \"./CGroup\";\r\n\r\nexport class VGroup extends VPage<CGroup> {\r\n\theader() {return '自选组管理'}\r\n\tcontent() {\r\n\t\treturn <div className=\"p-3\">\r\n\t\t\t自选组管理\r\n\t\t</div>;\r\n\t}\r\n}","import { CUqBase } from \"../uq-app\";\r\nimport { VGroup } from \"./VGroup\";\r\n\r\nexport class CGroup extends CUqBase {\r\n\tasync internalStart(param: any) {\r\n\t\tthis.openVPage(VGroup);\r\n\t}\r\n}\r\n","//import { CHome } from \"./home\";\r\n//import { CMe } from \"./me\";\r\nimport { CBug } from \"./bug\";\r\nimport { CUqApp } from \"./CBase\";\r\nimport { res } from \"./res\";\r\nimport { VMain } from \"./VMain\";\r\nimport { CTester } from \"./test-uqui\";\r\nimport { setUI } from \"./uqs\";\r\nimport { CHome } from '../home';\r\nimport { CMe } from '../me';\r\nimport { CExplorer } from '../explorer';\r\nimport { CWarning } from '../warning';\r\nimport { CPredictHistory } from '../predicthistory';\r\n//import { CUqApp } from './CBase';\r\n//import { res } from './res';\r\nimport { CHolding } from 'holding';\r\n//import { VMain } from './VMain';\r\nimport { Store } from 'store';\r\nimport { MiNet } from '../net';\r\nimport { CGroup } from '../group';\r\n\r\nconst gaps = [10, 3,3,3,3,3,5,5,5,5,5,5,5,5,10,10,10,10,15,15,15,30,30,60];\r\n\r\nexport class CApp extends CUqApp {\r\n\tcHome: CHome;\r\n\tcBug: CBug;\r\n\tcMe: CMe;\r\n\tcUI: CTester;\r\n\tcHolding: CHolding;\r\n\tcExporer: CExplorer;\r\n\tcWarning: CWarning;\r\n\tmiNet: MiNet;\r\n\tstore: Store;\r\n\r\n\tprotected async internalStart(isUserLogin: boolean) {\r\n\t\tthis.setRes(res);\r\n\t\tsetUI(this.uqs);\r\n\t\t/*\r\n\t\tthis.cHome = this.newC(CHome);\r\n\t\tthis.cBug = this.newC(CBug);\r\n\t\tthis.cMe = this.newC(CMe);\r\n\t\tthis.cUI = this.newC(CTester) as CTester;\r\n\t\tthis.cHome.load();\r\n\t\t*/\r\n\t\tthis.miNet = new MiNet(this.user);\r\n\t\tthis.store = new Store(this.miNet);\r\n\t\tawait this.store.load();\r\n\t\t\r\n\t\tthis.cHome = this.newC(CHome);\r\n\t\tthis.cExporer = this.newC(CExplorer);\r\n\t\tthis.cHolding = this.newC(CHolding);\r\n\t\tthis.cMe = this.newC(CMe);\r\n\t\tthis.cWarning = this.newC(CWarning);\r\n\t\tthis.openVPage(VMain, undefined, this.dispose);\r\n\t\t// 加上下面一句，可以实现主动页面刷新\r\n\t\t// this.timer = setInterval(this.callTick, 1000);\r\n\t\t// uq 里面加入这一句，会让相应的$Poked查询返回poke=1：\r\n\t\t// TUID [$User] ID (member) SET poke=1;\r\n\t}\r\n\r\n\topenPredictAVG(param:any) {\r\n\t\tlet pc = this.newC(CPredictHistory);\r\n\t\tpc.start(param);\r\n\t}\r\n\r\n\tshowGroupsManage() {\r\n\t\tlet cGroup = this.newC(CGroup);\r\n\t\tcGroup.start();\r\n\t}\r\n\r\n\tprivate timer:any;\r\n\tprotected onDispose() {\r\n\t\tclearInterval(this.timer);\r\n\t\tthis.timer = undefined;\r\n\t}\r\n\r\n\tprivate tick = 0;\r\n\tprivate gapIndex = 0;\r\n\tprivate callTick = async () => {\r\n\t\ttry {\r\n\t\t\tif (!this.user) return;\r\n\t\t\t++this.tick;\r\n\t\t\tif (this.tick<gaps[this.gapIndex]) return;\r\n\t\t\t//console.error('tick ', new Date());\r\n\t\t\tthis.tick = 0;\r\n\t\t\tif (this.gapIndex < gaps.length - 1) ++this.gapIndex;\r\n\t\t\tlet ret = await this.uqs.BzHelloTonva.$poked.query(undefined, false);\r\n\t\t\tlet v = ret.ret[0];\r\n\t\t\tif (v === undefined) return;\r\n\t\t\tif (!v.poke) return;\r\n\t\t\tthis.gapIndex = 1;\r\n\r\n\t\t\t// 数据服务器提醒客户端刷新，下面代码重新调入的数据\r\n\t\t\t//this.cHome.refresh();\r\n\t\t}\r\n\t\tcatch {\r\n\t\t}\r\n\t}\r\n}\r\n","//=== UqApp builder created on Wed Mar 10 2021 17:59:44 GMT-0500 (GMT-05:00) ===//\r\nimport * as BzHelloTonva from './BzHelloTonva';\r\nimport * as BruceYuMi from './BruceYuMi';\r\n\r\nexport interface UQs {\r\n\tBzHelloTonva: BzHelloTonva.UqExt;\r\n\tBruceYuMi: BruceYuMi.UqExt;\r\n}\r\n\r\nexport * as BzHelloTonva from './BzHelloTonva';\r\nexport * as BruceYuMi from './BruceYuMi';\r\n\r\nexport function setUI(uqs:UQs) {\r\n\tBzHelloTonva.setUI(uqs.BzHelloTonva);\r\n\tBruceYuMi.setUI(uqs.BruceYuMi);\r\n}\r\n","//=== UqApp builder created on Wed Mar 10 2021 16:02:48 GMT-0500 (GMT-05:00) ===//\r\nimport { NavView, start, nav } from 'tonva-react';\r\nimport { CApp } from './CApp';\r\nimport { appConfig } from './appConfig';\r\n\r\nexport const App: React.FC = () => {\r\n\tnav.setSettings(appConfig);\r\n\tconst onLogined = async (isUserLogin?:boolean) => {\r\n\t\tawait start(CApp, appConfig, isUserLogin);\r\n\t}\r\n\treturn <NavView onLogined={onLogined} />;\r\n}\r\n\r\n","/*eslint @typescript-eslint/no-unused-vars: [\"off\", { \"vars\": \"all\" }]*/\r\nimport { VPage, List, LMR, SearchBox, Scroller } from 'tonva-react';\r\nimport { CSelectStock } from './CSelectStock'\r\n\r\nexport class VStockSelect extends VPage<CSelectStock> {\r\n\tprivate onClickStock = async (model: any) => {\r\n\t\tawait this.controller.returnStock(model);\r\n\t\tthis.closePage();\r\n\t}\r\n\r\n\theader() {return '选择股票'}\r\n\tget headerClassName() {return 'bg-primary'}\r\n\tprotected async onPageScrollBottom(scroller: Scroller) {\r\n\t\tawait this.controller.pageItems.more();\r\n\t}\r\n\r\n\tcontent() {\r\n\t\tlet { pageItems, searchByKey } = this.controller;\r\n\t\tlet none = <div className=\"p-3 small text-muted\">无结果</div>;\r\n\t\treturn <div>\r\n\t\t\t<SearchBox className=\"px-1 w-100  mt-2 mr-2\"\r\n\t\t\t\tsize='md'\r\n\t\t\t\tallowEmptySearch={true}\r\n\t\t\t\tonSearch={searchByKey}\r\n\t\t\t\tplaceholder=\"搜索股票\" />\r\n\t\t\t<List before={''} none={none} \r\n\t\t\t\titems={pageItems} \r\n\t\t\t\titem={{ render: this.renderStock, onClick: this.onClickStock }} />\r\n\t\t</div>\r\n\t}\r\n\r\n\tprivate renderStock = (stock: any, index: number) => {\r\n\t\tlet { name, code } = stock;\r\n\t\treturn <LMR className=\"px-3 py-2 \" >\r\n\t\t\t<div className=\"font-weight-bold\"></div>\r\n\t\t\t<div>{name + ' ' + code}</div>\r\n\t\t</LMR >\r\n\t}\r\n}","import { PageItems } from 'tonva-react';\r\nimport { Stock } from 'store';\r\nimport { MiNet } from '../net';\r\nimport { CUqBase } from \"../uq-app\";\r\nimport { VStockSelect } from './VSelectStock';\r\n\r\nclass PageStockItems<T> extends PageItems<T> {\r\n\tprivate miNet: MiNet;\r\n\r\n\tconstructor(miNet: MiNet) {\r\n\t\tsuper(true);\r\n\t\tthis.miNet = miNet;\r\n\t\tthis.firstSize = this.pageSize = 30;\r\n\t}\r\n\r\n\tprotected async loadResults(param: any, pageStart: any, pageSize: number): Promise<{\r\n\t\t\t[name: string]: any[];\r\n\t\t}> {\r\n\t\tif (pageStart === undefined) pageStart = 0;\r\n\t\tlet p = ['%' + param.key + '%'];\r\n\t\ttry {\r\n\t\t\t//let ret = await this.cStock.cApp.store.miApi.page('q_stocks$page', p, pageStart, pageSize);\r\n\t\t\tlet ret = await this.miNet.q_stocks$page(p, pageStart, pageSize);\r\n\t\t\treturn {$page: ret};\r\n\t\t}\r\n\t\tcatch (error) {\r\n\t\t\t//let e = error;\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t}\r\n\r\n\tprotected setPageStart(item: any): any {\r\n\t\tthis.pageStart = item === undefined ? 0 : item.id;\r\n\t}\r\n}\r\n\r\nexport class CSelectStock extends CUqBase {\r\n\tpageItems: PageStockItems<Stock>;\r\n\r\n\tasync internalStart(param: any) {\r\n\t\tthis.pageItems = new PageStockItems<any>(this.cApp.miNet);\r\n\t\tthis.openVPage(VStockSelect);\r\n\t}\r\n\r\n\tsearchByKey = async (key: string) => {\r\n\t\tthis.pageItems.first({ key: key });\r\n\t}\r\n\r\n\t//给调用页面返回id\r\n\treturnStock = async (item: any): Promise<any> => {\r\n\t\tthis.returnCall(item);\r\n\t}\r\n\r\n\tonPage = async () => {\r\n\t\tawait this.pageItems.more();\r\n\t}\r\n}\r\n","import { UqExt as Uq } from './BzHelloTonva';\r\nimport * as Customer from './Customer.ui';\r\nimport * as OrderMaster from './OrderMaster.ui';\r\nimport * as OrderDetail from './OrderDetail.ui';\r\nimport * as Tag from './Tag.ui';\r\nimport * as Staff from './Staff.ui';\r\nimport * as $Piecewise from './$Piecewise.ui';\r\nimport * as $PiecewiseDetail from './$PiecewiseDetail.ui';\r\nimport * as Achieve from './Achieve.ui';\r\nimport * as Hours from './Hours.ui';\r\nimport * as CustomerTag from './CustomerTag.ui';\r\nimport * as UserStaff from './UserStaff.ui';\r\n\r\nexport function setUI(uq: Uq) {\r\n\tObject.assign(uq.Customer, Customer);\r\n\tObject.assign(uq.OrderMaster, OrderMaster);\r\n\tObject.assign(uq.OrderDetail, OrderDetail);\r\n\tObject.assign(uq.Tag, Tag);\r\n\tObject.assign(uq.Staff, Staff);\r\n\tObject.assign(uq.$Piecewise, $Piecewise);\r\n\tObject.assign(uq.$PiecewiseDetail, $PiecewiseDetail);\r\n\tObject.assign(uq.Achieve, Achieve);\r\n\tObject.assign(uq.Hours, Hours);\r\n\tObject.assign(uq.CustomerTag, CustomerTag);\r\n\tObject.assign(uq.UserStaff, UserStaff);\r\n}\r\nexport * from './BzHelloTonva';\r\n","import { UqExt as Uq } from './BruceYuMi';\r\nimport * as Account from './Account.ui';\r\nimport * as Holding from './Holding.ui';\r\nimport * as Transaction from './Transaction.ui';\r\nimport * as Stock from './Stock.ui';\r\nimport * as Market from './Market.ui';\r\nimport * as Portfolio from './Portfolio.ui';\r\nimport * as StockValue from './StockValue.ui';\r\nimport * as AccountValue from './AccountValue.ui';\r\nimport * as UserAccount from './UserAccount.ui';\r\n\r\nexport function setUI(uq: Uq) {\r\n\tObject.assign(uq.Account, Account);\r\n\tObject.assign(uq.Holding, Holding);\r\n\tObject.assign(uq.Transaction, Transaction);\r\n\tObject.assign(uq.Stock, Stock);\r\n\tObject.assign(uq.Market, Market);\r\n\tObject.assign(uq.Portfolio, Portfolio);\r\n\tObject.assign(uq.StockValue, StockValue);\r\n\tObject.assign(uq.AccountValue, AccountValue);\r\n\tObject.assign(uq.UserAccount, UserAccount);\r\n}\r\nexport * from './BruceYuMi';\r\n","/*eslint @typescript-eslint/no-unused-vars: [\"off\", { \"vars\": \"all\" }]*/\r\nimport * as React from 'react';\r\nimport { VPage, Page, View, List, LMR, left0, FA } from 'tonva-react';\r\nimport { observable } from 'mobx';\r\nimport { observer } from 'mobx-react';\r\nimport RC2 from 'react-chartjs-2'\r\nimport { GFunc } from '../tool/GFunc';\r\nimport { CStockInfo } from './CStockInfo'\r\nimport { NStockInfo, StockCapitalearning, StockBonus } from './StockInfoType';\r\nimport { ErForEarning, SlrForEarning } from 'regression';\r\n\r\nexport class VStockInfo extends VPage<CStockInfo> {\r\n\tprivate input: HTMLInputElement;\r\n\tprivate key: string = undefined;\r\n\r\n\tasync open(param?: any) {\r\n\t\tthis.openPage(this.page);\r\n\t}\r\n\r\n\t@observable protected ttmLimit:boolean = false;\r\n\r\n\trender(param: any): JSX.Element {\r\n\t\treturn this.page();\r\n\t}\r\n\r\n\tcheckLimitShow = (e:any)=> {\r\n\t\tlet check = e.target.checked as boolean;\r\n\t\tthis.ttmLimit = check;\r\n\t}\r\n\r\n\tcheckShowLater = (e:any)=> {\r\n\t\tlet check = e.target.checked as boolean;\r\n\t\t//this.controller.loadHistoryData(check);\r\n\t}\r\n\r\n\tcheckDefaultTag = (e:any)=> {\r\n\t\tlet check = e.target.checked as boolean;\r\n\t\tthis.controller.onClickDefaultTag(check);\r\n\t}\r\n\r\n\tprivate page = observer(() => {\r\n\t\tlet { openMetaView, baseItem, onSelectTag, stockTags, isLogined } = this.controller;\r\n\t\tlet { name, code, day } = baseItem;\r\n\t\tlet viewMetaButton = <></>;\r\n\t\tif (isLogined) {\r\n\t\tviewMetaButton = <button type=\"button\" className=\"btn w-100\" onClick={openMetaView}>view</button>\r\n\t\t}\r\n\t\tlet right = stockTags && <button \r\n\t\t\tclassName=\"btn btn-sm mr-2 btn-outline-success bg-light align-self-center\"\r\n\t\t\tonClick={onSelectTag}>\r\n\t\t{stockTags.length === 0? '加自选' : '设分组'}\r\n\t\t</button>;\r\n\t\tlet headStr = name + ' ' + code;\r\n\t\tif (day !== undefined) {\r\n\t\theadStr += ' - ' + day;\r\n\t\t}\r\n\tlet head = <div onClick={()=>this.controller.showSelectStock(day)}>{headStr}</div>\r\n\t\treturn <Page header={head} right={right}\r\n\t\theaderClassName='bg-primary'>\r\n\t\t{React.createElement(this.pageContent)}\r\n\t\t</Page>;\r\n\t})\r\n\r\n\tprivate pageContent = observer(() => {\r\n\t\treturn <>\r\n\t\t{this.dateHead()}\r\n\t\t{React.createElement(this.baseInfo)}\r\n\t\t{React.createElement(this.predictInfo)}\r\n\t\t{React.createElement(this.predictSeasonEarning)}\r\n\t\t{React.createElement(this.seasonEarning)}\r\n\t\t{React.createElement(this.capitalEarning)}\r\n\t\t{React.createElement(this.bonus)}\r\n\t\t</>\r\n\t});\r\n\r\n\tprivate onChange = (evt: React.ChangeEvent<any>) => {\r\n\t\tlet v = evt.target.value;\r\n\t\tlet n = Number(v);\r\n\t\tif (isNaN(n) === true || !Number.isInteger(n)) {\r\n\t\tif (this.input) {\r\n\t\t\tthis.input.value = this.key;\r\n\t\t}\r\n\t\treturn;\r\n\t\t}\r\n\t\tthis.key = evt.target.value;\r\n\t\tif (this.key !== undefined) {\r\n\t\t\tthis.key = this.key.trim();\r\n\t\t\tif (this.key === '') this.key = undefined;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate onSubmit = async (evt: React.FormEvent<any>) => {\r\n\t\tevt.preventDefault();\r\n\t\tif (this.key === undefined) this.key = '';\r\n\t\tlet n = Number(this.key);\r\n\t\tif (!isNaN(n) && Number.isInteger((n))) {\r\n\t\tif (n ===0 || (n >= 20000101 && n < 30000101)) {\r\n\t\t\tawait this.controller.changeDay(n);\r\n\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tprivate dateHead = () => {\r\n\t\tlet {day} = this.controller.baseItem;\r\n\t\tlet dayString = day === undefined || isNaN(day) ? '' : day.toString();\r\n\t\treturn <div className=\"px-3 py-2\">\r\n\t\t\t<form className=\"w-100\" onSubmit={this.onSubmit} >\r\n\t\t\t\t<div className=\"input-group input-group-sm\">\r\n\t\t\t\t\t<label className=\"input-group-addon mr-2 mb-0 align-self-center\">{'日期'}</label>\r\n\t\t\t\t\t<input ref={v=>this.input=v} onChange={this.onChange}\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tname=\"key\"\r\n\t\t\t\t\t\t\tdefaultValue={dayString}\r\n\t\t\t\t\t\t\tclassName=\"form-control border-primary px-2\"\r\n\t\t\t\t\t\t\tplaceholder={'yyyymmdd'}\r\n\t\t\t\t\t\t\tmaxLength={8} />\r\n\t\t\t\t\t<div className=\"input-group-append\">\r\n\t\t\t\t\t\t\t<button className=\"btn btn-primary px-2\"\r\n\t\t\t\t\t\t\t\ttype=\"submit\">\r\n\t\t\t\t\t\t\t\t<i className='fa fa-search' />\r\n\t\t\t\t\t\t\t\t<i className=\"fa\"/>\r\n\t\t\t\t\t\t\t\t{'跳转'}\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</form>\r\n\t\t</div>;\r\n\t}\r\n\r\n\r\n\tprivate baseInfo = observer(() => {\r\n\t\tlet {baseItem, isMySelect} = this.controller;\r\n\t\tlet { id, name, market, code, symbol, pe, roe, price, order, divyield, e, capital, bonus } = baseItem;\r\n        let url = market === 'HK' ? `https://xueqiu.com/S/${code}` : `https://finance.sina.com.cn/realstock/company/${symbol}/nc.shtml`;\r\n    \r\n\t\t//let list = this.controller.cApp.store.defaultList;\r\n\t\t//let fInList = list.findIndex(v=>v===id) >= 0;\r\n\t\t//let fInList = this.controller.cApp.store.isMySelect(id);\r\n\t\tlet right = <label className=\"align-self-center px-3\"> <input type=\"checkbox\" name=\"checkDefaultList\" defaultChecked={isMySelect}\r\n\t\tonChange={this.checkDefaultTag} />自选股</label>;\r\n\t\treturn <LMR className=\"bg-white\" right={right}> <div className=\"px-3 py-2\" >\r\n\t\t<div className=\"d-flex flex-wrap\">\r\n\t\t\t<div className=\"px-3 c8\">{GFunc.caption('TTM')}{GFunc.numberToFixString(pe)}</div>\r\n\t\t\t<div className=\"px-3 c8\">{GFunc.caption('股息率')}{GFunc.percentToFixString(divyield)}</div>\r\n\t\t\t<div className=\"px-3 c8\">{GFunc.caption('ROE')}{GFunc.percentToFixString(roe)}</div>\r\n\t\t\t<div className=\"px-3 c8\">{GFunc.caption('价格')}{GFunc.numberToFixString(price)}</div>\r\n\t\t\t<a className=\"px-3 text-info\" href={url} target=\"_blank\" rel=\"noopener noreferrer\" onClick={(e) =>{e.stopPropagation() }}>新浪财经</a>\r\n\t\t</div>    \r\n\t\t</div>\r\n\t\t</LMR>;\r\n\t});\r\n\r\n\t// protected historyChart = observer(() => {\r\n\t// \tlet {historyData, baseItem} = this.controller;\r\n\t// \tif (historyData === undefined) \r\n\t// \treturn <></>;\r\n\t// \tlet chartHistory = <></>;\r\n\t// \tlet labelList:any[] = [];\r\n\t// \tlet priceList:number[] = [];\r\n\t// \tlet ttmList:number[] = [];\r\n\t// \tfor (let item of historyData) {\r\n\t// \tlet {day, price, ttm} = item;\r\n\t// \tlabelList.push(day);\r\n\t// \tpriceList.push(GFunc.numberToPrecision(price, 4));\r\n\t// \tif (ttm <= 0) \r\n\t// \t\tttmList.push(undefined);\r\n\t// \telse {\r\n\t// \t\tif (this.ttmLimit && ttm >= 35) {\r\n\t// \t\tttmList.push(35);\r\n\t// \t\t}\r\n\t// \t\telse {\r\n\t// \t\tttmList.push(GFunc.numberToPrecision(ttm, 4));\r\n\t// \t\t}\r\n\t// \t}\r\n\t// \t}\r\n\t// \tlet chartdata1 = {\r\n\t// \tlabels: labelList,\r\n\t// \tdatasets: [\r\n\t// \t\t{\r\n\t// \t\tlabel: '价格',\r\n\t// \t\tdata: priceList,\r\n\t// \t\tborderColor:'blue',\r\n\t// \t\tbackgroundColor:'skyBlue',\r\n\t// \t\tborderWidth: 1,\r\n\t// \t\tfill: false,\r\n\t// \t\tyAxisID: 'y-axis-1',\r\n\t// \t\t},\r\n\t// \t\t{\r\n\t// \t\tlabel: 'TTM',\r\n\t// \t\tdata: ttmList,\r\n\t// \t\tborderColor:'red',\r\n\t// \t\tbackgroundColor:'pink',\r\n\t// \t\tborderWidth: 1,\r\n\t// \t\tfill: false,\r\n\t// \t\tyAxisID: 'y-axis-2',\r\n\t// \t\t}\r\n\t// \t]\r\n\t// \t};\r\n\t// \tlet options = {\r\n\t// \tscales:{\r\n\t// \t\tyAxes: [{\r\n\t// \t\t\ttype: 'linear',\r\n\t// \t\t\tdisplay: true,\r\n\t// \t\t\tposition: 'left',\r\n\t// \t\t\tid: 'y-axis-1',\r\n\t// \t\t}, {\r\n\t// \t\t\ttype: 'linear',\r\n\t// \t\t\tdisplay: true,\r\n\t// \t\t\tposition: 'right',\r\n\t// \t\t\tid: 'y-axis-2',\r\n\t// \t\t\tgridLines: {\r\n\t// \t\t\t\tdrawOnChartArea: false\r\n\t// \t\t\t}\r\n\t// \t\t}],       \r\n\t// \t}\r\n\t// \t}\r\n\t// \tchartHistory = <RC2 data={chartdata1} type='line' options={options} />;\r\n\t// \tlet right = <></>;\r\n\t// \tif (baseItem.day !== undefined) {\r\n\t// \tright = <><label className=\"px-3\"> <input type=\"checkbox\" name=\"showLater\" defaultChecked={false}\r\n\t// \t\t\tonChange={this.checkShowLater} />显示后面数据</label>\r\n\t// \t\t<label className=\"px-3\"> <input type=\"checkbox\" name=\"selectType\" defaultChecked={this.ttmLimit}\r\n\t// \t\tonChange={this.checkLimitShow} />限制TTM显示范围</label>\r\n\t// \t\t</>;\r\n\r\n\t// \t}\r\n\t// \telse {\r\n\t// \tright = <label className=\"px-3\"> <input type=\"checkbox\" name=\"selectType\" defaultChecked={this.ttmLimit}\r\n\t// \t\tonChange={this.checkLimitShow} />限制TTM显示范围</label>;\r\n\t// \t}\r\n\t// \treturn <><LMR className=\"px-3 py-2 bg-white\" left={'历史走势'} right={right}></LMR>\r\n\t// \t<div className=\"px-3\" style={{width:'95%'}}>{chartHistory}</div>\r\n\t// \t</>;\r\n\t// });\r\n\r\n\tprotected predictInfo = observer(() => {\r\n\t\tlet {predictData, ypredict} = this.controller;\r\n\t\tif (predictData === undefined) \r\n\t\treturn <></>;\r\n\t\tlet { e, b, r2, epre, l, lr2, lpre } = predictData;\r\n\t\tlet chart1 = <></>;\r\n\t\tif (ypredict.length === 5) {\r\n\t\tlet er = new ErForEarning(ypredict);\r\n\t\tlet chartdata1 = {\r\n\t\t\tlabels: ['0', '1', '2', '3', '4'],\r\n\t\t\tdatasets: [\r\n\t\t\t{\r\n\t\t\t\tlabel: '原值',\r\n\t\t\t\tdata: ypredict.map(v=>GFunc.numberToPrecision(v)),\r\n\t\t\t\tborderColor:'black',\r\n\t\t\t\tbackgroundColor:'skyBlue',\r\n\t\t\t\tshowLine: false,\r\n\t\t\t\tpointStyle: \"crossRot\",\r\n\t\t\t\tborderWidth: 1,\r\n\t\t\t\tpointRadius: 5,\r\n\t\t\t\tfill: false,\r\n\t\t\t} as any\r\n\t\t\t]\r\n\t\t};\r\n\t\tif (!(isNaN(er.B) || isNaN(er.A))) {\r\n\t\t\tlet per:number[] = [];\r\n\t\t\tfor (let i = 0; i < 5; ++i) {\r\n\t\t\tper.push(GFunc.numberToPrecision(er.predict(i), 4));\r\n\t\t\t}\r\n\t\t\tchartdata1.datasets.push(\r\n\t\t\t{\r\n\t\t\t\tlabel: '指数回归',\r\n\t\t\t\tdata: per,\r\n\t\t\t\tborderColor:'red',\r\n\t\t\t\tbackgroundColor:'pink',\r\n\t\t\t\tborderWidth: 1,\r\n\t\t\t\tfill: false,\r\n\t\t\t});\r\n\t\t}\r\n\t\tlet lr = new SlrForEarning(ypredict);\r\n\t\tif (!(isNaN(lr.slope) || isNaN(lr.intercept))) {\r\n\t\t\tlet plr:number[] = [];\r\n\t\t\tfor (let i = 0; i < 5; ++i) {\r\n\t\t\tplr.push(GFunc.numberToPrecision(lr.predict(i), 4));\r\n\t\t\t}\r\n\t\t\tchartdata1.datasets.push(\r\n\t\t\t{\r\n\t\t\t\tlabel: '线性回归',\r\n\t\t\t\tdata: plr,\r\n\t\t\t\tborderColor:'blue',\r\n\t\t\t\tbackgroundColor:'pink',\r\n\t\t\t\tborderWidth: 1,\r\n\t\t\t\tfill: false,\r\n\t\t\t});\r\n\t\t}\r\n\t\tchart1 = <RC2 data={chartdata1} type='line' />;\r\n\t\t}\r\n\t\tlet chart2 = this.predictChartFullInfo();\r\n\t\tlet chart3 = this.predictChartROE();\r\n\t\treturn <><div className=\"px-3 py-2 bg-white\">指数回归预测</div>\r\n\t\t<div className=\"d-flex flex-wrap\">\r\n\t\t\t<div className=\"px-3 c12\">{GFunc.caption('e')}{GFunc.numberToString(e, 4)}</div>\r\n\t\t\t<div className=\"px-3 c12\">{GFunc.caption('指数b')}{GFunc.numberToString(b, 4)}</div>\r\n\t\t\t<div className=\"px-3 c12\">{GFunc.caption('r2')}{GFunc.numberToString(r2, 4)}</div>\r\n\t\t\t<div className=\"px-3 c12\">{GFunc.caption('e预测')}{GFunc.numberToString(epre)}</div>\r\n\t\t</div>\r\n\t\t<div className=\"px-3 py-2 bg-white\">线性回归预测</div>\r\n\t\t<div className=\"d-flex flex-wrap\">\r\n\t\t<div className=\"px-3 c12\">{GFunc.caption('e')}{GFunc.numberToString(e, 4)}</div>\r\n\t\t\t<div className=\"px-3 c12\">{GFunc.caption('增长率')}{GFunc.numberToString(l, 4)}</div>\r\n\t\t\t<div className=\"px-3 c12\">{GFunc.caption('r2')}{GFunc.numberToString(lr2, 4)}</div>\r\n\t\t\t<div className=\"px-3 c12\">{GFunc.caption('e预测')}{GFunc.numberToString(lpre)}</div>\r\n\t\t</div>\r\n\t\t<div className=\"d-flex\">\r\n\t\t\t<div className=\"px-2\" style={{width:'50%'}}>{chart1}</div>\r\n\t\t\t<div className=\"px-2\" style={{width:'50%'}}>{chart2}</div>\r\n\t\t</div>\r\n\t\t<div className=\"d-flex\">\r\n\t\t\t<div className=\"px-2\" style={{width:'50%'}}>{chart3}</div>\r\n\t\t</div>\r\n\t\t</>;\r\n\t});\r\n\r\n\tprotected predictChartFullInfo = () => {\r\n\t\tlet { predictSeasonDataFull } = this.controller;\r\n\t\tlet len = predictSeasonDataFull.length;\r\n\t\tif (len <= 0)\r\n\t\treturn <></>;\r\n\t\tlet label = [];\r\n\t\tlet y:number[] = [];\r\n\t\tfor (let i = len - 1; i >= 0; --i) {\r\n\t\tlet item = predictSeasonDataFull[i];\r\n\t\tif (item.esum === undefined)\r\n\t\t\tcontinue;\r\n\t\tlabel.push(GFunc.SeasonnoToYearMonth(item.season));\r\n\t\ty.push(item.esum);\r\n\t\t}\r\n\r\n\t\tlet er = new ErForEarning(y);\r\n\t\tlet chartdataFull = {\r\n\t\tlabels: label,\r\n\t\tdatasets: [\r\n\t\t\t{\r\n\t\t\tlabel: '原值',\r\n\t\t\tdata: y.map(v=>GFunc.numberToPrecision(v)),\r\n\t\t\tborderColor:'black',\r\n\t\t\tbackgroundColor:'skyBlue',\r\n\t\t\tshowLine: false,\r\n\t\t\tpointStyle: \"crossRot\",\r\n\t\t\tborderWidth: 1,\r\n\t\t\tpointRadius: 5,\r\n\t\t\tfill: false,\r\n\t\t\t} as any\r\n\t\t]\r\n\t\t};\r\n\t\tif (!(isNaN(er.B) || isNaN(er.A))) {\r\n\t\tlet per:number[] = [];\r\n\t\tfor (let i = 0; i < len; ++i) {\r\n\t\t\tper.push(GFunc.numberToPrecision(er.predict(i), 4));\r\n\t\t}\r\n\t\tchartdataFull.datasets.push(\r\n\t\t\t{\r\n\t\t\tlabel: '指数 R2:' + GFunc.numberToString(er.r2, 4),\r\n\t\t\tdata: per,\r\n\t\t\tborderColor:'red',\r\n\t\t\tbackgroundColor:'pink',\r\n\t\t\tborderWidth: 1,\r\n\t\t\tfill: false,\r\n\t\t});\r\n\t\t}\r\n\t\tlet lr = new SlrForEarning(y);\r\n\t\tif (!(isNaN(lr.slope) || isNaN(lr.intercept))) {\r\n\t\tlet plr:number[] = [];\r\n\t\tfor (let i = 0; i < len; ++i) {\r\n\t\t\tplr.push(GFunc.numberToPrecision(lr.predict(i), 4));\r\n\t\t}\r\n\t\tchartdataFull.datasets.push(\r\n\t\t\t{\r\n\t\t\tlabel: '线性 R2:' + GFunc.numberToString(lr.r2, 4),\r\n\t\t\tdata: plr,\r\n\t\t\tborderColor:'blue',\r\n\t\t\tbackgroundColor:'pink',\r\n\t\t\tborderWidth: 1,\r\n\t\t\tfill: false,\r\n\t\t});\r\n\t\t}\r\n\t\treturn <RC2 data={chartdataFull} type='line' />;\r\n\t};\r\n\r\n\tprotected predictChartROE = () => {\r\n\t\tlet { predictSeasonDataFull } = this.controller;\r\n\t\tlet len = predictSeasonDataFull.length;\r\n\t\tif (len <= 0)\r\n\t\treturn <></>;\r\n\t\tlet label = [];\r\n\t\tlet y:number[] = [];\r\n\t\tfor (let i = len - 1; i >= 0; --i) {\r\n\t\tlet item = predictSeasonDataFull[i];\r\n\t\tif (item.esum === undefined)\r\n\t\t\tcontinue;\r\n\t\tlabel.push(GFunc.SeasonnoToYearMonth(item.season));\r\n\t\ty.push(item.esumorg / item.corg);\r\n\t\t}\r\n\r\n\t\tlet chartdataFull = {\r\n\t\tlabels: label,\r\n\t\tdatasets: [\r\n\t\t\t{\r\n\t\t\tlabel: 'ROE原值',\r\n\t\t\tdata: y.map(v=>GFunc.numberToPrecision(v)),\r\n\t\t\tborderColor:'black',\r\n\t\t\tbackgroundColor:'skyBlue',\r\n\t\t\tshowLine: false,\r\n\t\t\tpointStyle: \"crossRot\",\r\n\t\t\tborderWidth: 1,\r\n\t\t\tpointRadius: 5,\r\n\t\t\tfill: false,\r\n\t\t\t} as any\r\n\t\t]\r\n\t\t};\r\n\t\tlet lr = new SlrForEarning(y);\r\n\t\tif (!(isNaN(lr.slope) || isNaN(lr.intercept))) {\r\n\t\tlet plr:number[] = [];\r\n\t\tfor (let i = 0; i < len; ++i) {\r\n\t\t\tplr.push(Number.parseFloat(lr.predict(i).toPrecision(4)));\r\n\t\t}\r\n\t\tchartdataFull.datasets.push(\r\n\t\t\t{\r\n\t\t\tlabel: '线性 R2:' + GFunc.numberToString(lr.r2, 4),\r\n\t\t\tdata: plr,\r\n\t\t\tborderColor:'blue',\r\n\t\t\tbackgroundColor:'pink',\r\n\t\t\tborderWidth: 1,\r\n\t\t\tfill: false,\r\n\t\t});\r\n\t\t}\r\n\t\treturn <RC2 data={chartdataFull} type='line' />;\r\n\t};\r\n\r\n\tprivate predictSeasonEarning = observer(() => {\r\n\t\tlet items = this.controller.predictSeasonData;\r\n\t\tlet header = <div className=\"px-3\">\r\n\t\t<div className=\"px-3 c6\">年月</div>\r\n\t\t<div className=\"px-3 c6 text-right\">股本</div>\r\n\t\t<div className=\"px-3 c6 text-right\">季收益</div>\r\n\t\t<div className=\"px-3 c6 text-right\">年收益</div>\r\n\t\t<div className=\"px-3 c6 text-right\">ROE</div>\r\n\t\t<div className=\"px-3 c6 text-right\">股本o</div>\r\n\t\t<div className=\"px-3 c6 text-right\">季收益o</div>\r\n\t\t<div className=\"px-3 c6 text-right\">年收益o</div>\r\n\t\t</div>;\r\n\t\treturn <>\r\n\t\t<div className=\"px-3 py-1\">历年股本收益-用于回归计算</div>\r\n\t\t<List header={header} loading=\"...\"\r\n\t\t\titems={items}\r\n\t\t\titem={{\r\n\t\t\trender: (row: {season:number, c:number, e:number, esum:number, corg:number, eorg:number, esumorg:number}) => {\r\n\t\t\t\tlet {season, c, e, esum, corg, eorg, esumorg} = row;\r\n\t\t\t\tlet ym = GFunc.SeasonnoToYearMonth(season);\r\n\t\t\t\tlet a = 0;\r\n\t\t\t\treturn <div className=\"px-3 py-2 d-flex flex-wrap\">\r\n\t\t\t\t<div className=\"px-3 c6\">{ym.toString()}</div>\r\n\t\t\t\t<div className=\"px-3 c6 text-right\">{GFunc.numberToFixString(c)}</div>\r\n\t\t\t\t<div className=\"px-3 c6 text-right\">{GFunc.numberToFixString(e)}</div>\r\n\t\t\t\t<div className=\"px-3 c6 text-right\">{GFunc.numberToFixString(esum)}</div>\r\n\t\t\t\t<div className=\"px-3 c6 text-right\">{GFunc.percentToFixString(esum/c)}</div>\r\n\t\t\t\t<div className=\"px-3 c6 text-right\">{GFunc.numberToFixString(corg)}</div>\r\n\t\t\t\t<div className=\"px-3 c6 text-right\">{GFunc.numberToFixString(eorg)}</div>\r\n\t\t\t\t<div className=\"px-3 c6 text-right\">{GFunc.numberToFixString(esumorg)}</div>\r\n\t\t\t\t</div>\r\n\t\t\t}\r\n\t\t\t}}\r\n\t\t/>\r\n\t\t</>\r\n\t});\r\n\r\n\r\n\tprivate seasonEarning = observer(() => {\r\n\t\tlet items = this.controller.seasonData;\r\n\t\tlet header = <div className=\"px-3\">\r\n\t\t<div className=\"px-3 c6\">年月</div>\r\n\t\t<div className=\"px-3 c6 text-right\">股本</div>\r\n\t\t<div className=\"px-3 c6 text-right\">季收益</div>\r\n\t\t<div className=\"px-3 c6 text-right\">年收益</div>\r\n\t\t<div className=\"px-3 c6 text-right\">ROE</div>\r\n\t\t<div className=\"px-3 c6 text-right\">股本o</div>\r\n\t\t<div className=\"px-3 c6 text-right\">季收益o</div>\r\n\t\t<div className=\"px-3 c6 text-right\">年收益o</div>\r\n\t\t</div>;\r\n\t\treturn <>\r\n\t\t<div className=\"px-3 py-1\">历年季度股本收益</div>\r\n\t\t<List header={header} loading=\"...\"\r\n\t\t\titems={items}\r\n\t\t\titem={{\r\n\t\t\trender: (row: {season:number, c:number, e:number, esum:number, corg:number, eorg:number, esumorg:number}) => {\r\n\t\t\t\tlet {season, c, e, esum, corg, eorg, esumorg} = row;\r\n\t\t\t\tlet ym = GFunc.SeasonnoToYearMonth(season);\r\n\t\t\t\tlet a = 0;\r\n\t\t\t\treturn <div className=\"px-3 py-2 d-flex flex-wrap\">\r\n\t\t\t\t<div className=\"px-3 c6\">{ym.toString()}</div>\r\n\t\t\t\t<div className=\"px-3 c6 text-right\">{GFunc.numberToFixString(c)}</div>\r\n\t\t\t\t<div className=\"px-3 c6 text-right\">{GFunc.numberToFixString(e)}</div>\r\n\t\t\t\t<div className=\"px-3 c6 text-right\">{GFunc.numberToFixString(esum)}</div>\r\n\t\t\t\t<div className=\"px-3 c6 text-right\">{GFunc.percentToFixString(esum/c)}</div>\r\n\t\t\t\t<div className=\"px-3 c6 text-right\">{GFunc.numberToFixString(corg)}</div>\r\n\t\t\t\t<div className=\"px-3 c6 text-right\">{GFunc.numberToFixString(eorg)}</div>\r\n\t\t\t\t<div className=\"px-3 c6 text-right\">{GFunc.numberToFixString(esumorg)}</div>\r\n\t\t\t\t</div>\r\n\t\t\t}\r\n\t\t\t}}\r\n\t\t/>\r\n\t\t</>\r\n\t});\r\n\r\n\r\n\tprivate capitalEarning = observer(() => {\r\n\t\tlet items = this.controller.capitalearning;\r\n\t\tlet header = <div className=\"px-3\">\r\n\t\t<div className=\"px-3 c6\">年</div>\r\n\t\t<div className=\"px-3 c6 text-right\">股本</div>\r\n\t\t<div className=\"px-3 c6 text-right\">收益</div>\r\n\t\t<div className=\"px-3 c6 text-right\">ROE</div>\r\n\t\t</div>;\r\n\t\treturn <>\r\n\t\t<div className=\"px-3 py-1\">历年股本收益</div>\r\n\t\t<List header={header} loading=\"...\"\r\n\t\t\titems={items}\r\n\t\t\titem={{\r\n\t\t\trender: (row: StockCapitalearning) => {\r\n\t\t\t\tlet {capital, earning} = row;\r\n\t\t\t\treturn <div className=\"px-3 py-2 d-flex flex-wrap\">\r\n\t\t\t\t<div className=\"px-3 c6\">{row.year}</div>\r\n\t\t\t\t<div className=\"px-3 c6 text-right\"> {capital.toFixed(2)}</div>\r\n\t\t\t\t<div className=\"px-3 c6 text-right\"> {earning.toFixed(2)}</div>\r\n\t\t\t\t<div className=\"px-3 c6 text-right\"> {(earning/capital*100).toFixed(1)}%</div>\r\n\t\t\t\t</div>\r\n\t\t\t}\r\n\t\t\t}}\r\n\t\t/>\r\n\t\t</>\r\n\t});\r\n\r\n\tprivate bonus = observer(() => {\r\n\t\tlet items = this.controller.bonus;\r\n\t\tlet header = <div className=\"px-3\">\r\n\t\t<div className=\"px-3 c8\">日期</div>\r\n\t\t<div className=\"px-3 c6 text-right\">分红</div>\r\n\t\t</div>;\r\n\t\treturn <>\r\n\t\t<div className=\"px-3 py-1\">历年分红</div>\r\n\t\t<List header={header} loading=\"...\"\r\n\t\t\titems={items}\r\n\t\t\titem={{\r\n\t\t\trender: (row: StockBonus) => {\r\n\t\t\t\treturn <div className=\"px-3 py-2 d-flex flex-wrap\">\r\n\t\t\t\t<div className=\"px-3 c8\">{row.day}</div>\r\n\t\t\t\t<div className=\"px-3 c6 text-right\"> {row.bonus.toFixed(2)}</div>\r\n\t\t\t\t</div>\r\n\t\t\t}\r\n\t\t\t}}\r\n\t\t/>\r\n\t\t</>\r\n\t});\r\n}","import { defaultBlackListGroupName, defaultGroupName } from \"consts\";\r\nimport { IObservableArray, observable } from \"mobx\";\r\nimport { MiNet } from \"../net\";\r\nimport { StockGroup } from \"./stockGroup\";\r\n\r\nexport class StockGroups {\r\n\tprivate miNet: MiNet;\r\n\treadonly groups: IObservableArray<StockGroup>;\r\n\tdefaultGroup: StockGroup;\r\n\tblackGroup: StockGroup;\r\n\r\n\tconstructor(miNet: MiNet) {\r\n\t\tthis.miNet = miNet;\r\n\t\tthis.groups = observable.array<StockGroup>([], { deep: true });\r\n\t}\r\n\r\n\tasync init() {\r\n\t\tthis.defaultGroup = this.groupFromName(defaultGroupName);\r\n\t\tthis.blackGroup = this.groupFromName(defaultBlackListGroupName);\r\n\t\tawait Promise.all([\r\n\t\t\tthis.defaultGroup?.loadItems(),\r\n\t\t\tthis.blackGroup?.loadItems(),\r\n\t\t]);\r\n\t}\r\n\t\r\n\tgroupFromName(groupName:string) {\r\n\t\treturn this.groups.find(v => v.name === groupName);\r\n\t}\r\n\r\n\tgroupFromId(id:number) {\r\n\t\treturn this.groups.find(v => v.id === id);\r\n\t}\r\n\r\n\tget group0() {return this.groups[0]}\r\n\r\n\tgetSelected(tags:{tag:number}[]) {\r\n\t\tlet ret = this.groups.filter(v => {\r\n\t\t\tlet i = tags.findIndex(st => st.tag === v.id);\r\n\t\t\treturn i >= 0;\r\n\t\t});\r\n\t\treturn ret;\r\n\t}\r\n\r\n\tadd(group: StockGroup) {\r\n\t\tthis.groups.push(group);\r\n\t}\r\n\r\n\texists(id:number, name:string): boolean {\r\n\t\treturn this.groups.findIndex(v => v.id === id && v.name === name) >= 0;\r\n\t}\r\n\t\r\n\tisMySelect(id:number): boolean {\r\n\t\tfor (let group of this.groups) {\r\n\t\t\tif (group.exists(id) === true) return true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\t\r\n\tisMyBlack(id:number): boolean {\r\n\t\tif (!this.blackGroup) return false;\r\n\t\treturn this.blackGroup.exists(id);\r\n\t}\r\n\r\n\tasync load(): Promise<void> {\r\n\t\tlet r = await this.miNet.t_tag$all();\r\n\t\tlet ret = r as any[];\r\n\t\tlet bc = await this.checkDefaultTags(ret);\r\n\t\tif (bc) {\r\n\t\t\t//r = await this.miApi.query('t_tag$all', [this.user.id]);\r\n\t\t\tr = await this.miNet.t_tag$all();\r\n\t\t\tret = r as any[];\r\n\t\t}\r\n\t\tlet r1 = [];\r\n\t\tlet i = ret.findIndex(v=>v.name === defaultGroupName);\r\n\t\tif (i >= 0) {\r\n\t\t\tr1.push(ret[i]);\r\n\t\t\tret.splice(i, 1);\r\n\t\t}\r\n\t\ti = ret.findIndex(v=> v.name === defaultBlackListGroupName);\r\n\t\tif (i >= 0) {\r\n\t\t\tr1.push(ret[i]);\r\n\t\t\tret.splice(i, 1);\r\n\t\t}\r\n\t\tr1.push(...ret);\r\n\t\tthis.groups.replace(r1.map(v => new StockGroup(v.name, v.id, this.miNet)));\r\n\t}\r\n\r\n\tprivate async checkDefaultTags(list:any[]): Promise<boolean> {\r\n\t\tlet br = false;\r\n\t\tif (list === undefined) {\r\n\t\t\tawait this.miNet.t_tag$save(defaultGroupName);\r\n\t\t\tawait this.miNet.t_tag$save(defaultBlackListGroupName);\r\n\t\t\tbr = true;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tlet i = list.findIndex(v => v.name === defaultGroupName);\r\n\t\t\tif (i < 0) {\r\n\t\t\t\tawait this.miNet.t_tag$save(defaultGroupName);\r\n\t\t\t\tbr = true;\r\n\t\t\t}\r\n\t\t\ti = list.findIndex(v => v.name === defaultBlackListGroupName);\r\n\t\t\tif (i < 0) {\r\n\t\t\t\tawait this.miNet.t_tag$save(defaultBlackListGroupName);\r\n\t\t\t\tbr = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn br;\r\n\t}\r\n}\r\n","import { IObservableArray, observable, runInAction } from \"mobx\";\r\nimport { SlrForEarning } from \"regression\";\r\nimport { GFunc } from \"tool\";\r\nimport { MiNet } from \"../net\";\r\nimport { sortStocks } from \"./sortStocks\";\r\nimport { Stock } from \"./types\";\r\n\r\nexport class StockGroup {\r\n\tprivate miNet: MiNet;\r\n\tprivate sortType: string;\r\n\r\n\tid: number;\r\n\tname: string;\r\n\tstocks: IObservableArray<Stock>;\r\n\r\n\tconstructor(groupName:string, groupId:number, miNet: MiNet) {\r\n\t\tthis.name = groupName;\r\n\t\tthis.id = groupId;\r\n\t\tthis.miNet = miNet;\r\n\t\tthis.stocks = observable.array<Stock>([], { deep: true });\r\n\t}\r\n\r\n\tasync loadItems() {\r\n\t\t// 距离上次\r\n\t\tlet queryName = 'taguser';\r\n\r\n\t\tlet query = {\r\n\t\t\tname: queryName,\r\n\t\t\tpageStart: 0,\r\n\t\t\tpageSize: 1000,\r\n\t\t\tuser: this.miNet.userId,\r\n\t\t\ttag: this.id,\r\n\t\t\tyearlen: 1,\r\n\t\t};\r\n\t\tlet result = await this.miNet.process(query, []);\r\n\t\tif (Array.isArray(result) === false) return;\r\n\r\n\t\tlet arr: Stock[] = result;\r\n\t\tfor (let item of arr) {\r\n\t\t\tlet dataArray = JSON.parse(item.data) as number[];\r\n\t\t\titem.dataArr = dataArray;\r\n            let e = item.e * item.eshares;\r\n            let p = item.price * item.pshares;\r\n            let c = item.capital * item.eshares;\r\n            let b = item.bonus * item.bshares;\r\n\t\t\titem.v = GFunc.calculateVS(item.ev * item.eshares, b, p);\r\n            item.pe = p / e;\r\n            item.roe = e / c;\r\n            item.divyield = b / p;\r\n\t\t}\r\n\t\tsortStocks(undefined, arr);\r\n\r\n\t\trunInAction(() => {\r\n\t\t\tthis.stocks.clear();\r\n\t\t\tthis.stocks.push(...arr);\t\r\n\t\t});\r\n\t}\r\n\r\n\tsort(sortType: string) {\r\n\t\tthis.sortType = sortType;\r\n\t\tsortStocks(sortType, this.stocks);\r\n\t}\r\n\r\n\tasync addStock(stock: Stock) {\r\n\t\tawait this.miNet.t_tagstock$add(this.id, stock.id);\r\n\t\tlet index = this.stocks.findIndex(v => v.id === stock.id);\r\n\t\tif (index >= 0) {\r\n\t\t\tlet rows = this.stocks.splice(index, 1);\r\n\t\t\tthis.stocks.unshift(rows[0]);\r\n\t\t}\r\n\t\telse {\r\n\t\t\t// 重新加载stock的其它值\r\n\t\t\t// await ...\r\n\t\t\t//this.stocks.unshift(stock);\r\n\t\t\tawait this.loadItems();\r\n\t\t\tsortStocks(this.sortType, this.stocks);\r\n\t\t}\r\n\t}\r\n\r\n\tasync removeStock(stock: Stock) {\r\n\t\tawait this.miNet.t_tagstock$del(this.id, stock.id);\r\n\t\tlet index = this.stocks.findIndex(v => v.id === stock.id);\r\n\t\tif (index >= 0) this.stocks.splice(index, 1);\r\n\t}\r\n\r\n\texists(stockId: number): boolean {\r\n\t\tfor (let stock of this.stocks) {\r\n\t\t\tif (stock.id === stockId) return true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n}\r\n","import { Res, UI } from \"tonva-react\";\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { FieldItem, FieldItemInt, FieldItemNum, FieldItemString, FieldItemId } from \"tonva-react\";\r\nimport { Customer } from \"./BzHelloTonva\";\r\n\r\n/*--fields--*/\r\nconst fields = {\r\n\tid: {\r\n\t\t\"name\": \"id\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Id\"\r\n\t} as FieldItemId,\r\n\tno: {\r\n\t\t\"name\": \"no\",\r\n\t\t\"type\": \"string\",\r\n\t\t\"isKey\": true,\r\n\t\t\"widget\": \"string\",\r\n\t\t\"label\": \"No\"\r\n\t} as FieldItemString,\r\n\tfirstName: {\r\n\t\t\"name\": \"firstName\",\r\n\t\t\"type\": \"string\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"string\",\r\n\t\t\"label\": \"名字\"\r\n\t} as FieldItemString,\r\n\tlastName: {\r\n\t\t\"name\": \"lastName\",\r\n\t\t\"type\": \"string\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"string\",\r\n\t\t\"label\": \"LastName\"\r\n\t} as FieldItemString,\r\n};\r\n/*==fields==*/\r\n\r\nexport const fieldArr: FieldItem[] = [\r\n\tfields.no, fields.firstName, fields.lastName, \r\n];\r\n\r\nexport const ui: UI = {\r\n\tlabel: \"Customer\",\r\n\tfieldArr,\r\n\tfields,\r\n};\r\n\r\nexport const res: Res<any> = {\r\n\tzh: {\r\n\t},\r\n\ten: {\r\n\t}\r\n};\r\n\r\nexport function render(item: Customer):JSX.Element {\r\n\tlet {firstName, lastName, no} = item;\r\n\treturn <span>\r\n\t\t<small className=\"d-inline-block w-3c\">{no}</small> <b>{firstName} {lastName}</b>\r\n\t</span>;\r\n};\r\n","export * from './StockInfoType';\r\nexport { CStockInfo } from './CStockInfo';\r\nexport { VStockInfo } from './VStockInfo';"],"sourceRoot":""}