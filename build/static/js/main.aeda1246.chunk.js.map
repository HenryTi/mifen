{"version":3,"sources":["tool/GFunc.tsx","consts.ts","store/accounts.ts","store/store.ts","stockinfo/VTags.tsx","stockinfo/CStockInfo.tsx","uq-app/uqs/BzHelloTonva/OrderMaster.ui.tsx","uq-app/uqs/BzHelloTonva/OrderDetail.ui.tsx","uq-app/uqs/BzHelloTonva/Tag.ui.tsx","uq-app/uqs/BzHelloTonva/Staff.ui.tsx","uq-app/uqs/BzHelloTonva/$Piecewise.ui.tsx","uq-app/uqs/BzHelloTonva/$PiecewiseDetail.ui.tsx","uq-app/uqs/BzHelloTonva/Achieve.ui.tsx","uq-app/uqs/BzHelloTonva/Hours.ui.tsx","uq-app/uqs/BzHelloTonva/CustomerTag.ui.tsx","uq-app/uqs/BzHelloTonva/UserStaff.ui.tsx","uq-app/uqs/BruceYuMi/Account.ui.tsx","uq-app/uqs/BruceYuMi/Holding.ui.tsx","uq-app/uqs/BruceYuMi/Transaction.ui.tsx","uq-app/uqs/BruceYuMi/Stock.ui.tsx","uq-app/uqs/BruceYuMi/Market.ui.tsx","uq-app/uqs/BruceYuMi/Portfolio.ui.tsx","uq-app/uqs/BruceYuMi/StockValue.ui.tsx","uq-app/uqs/BruceYuMi/AccountValue.ui.tsx","uq-app/uqs/BruceYuMi/UserAccount.ui.tsx","regression/SlrForEarning.ts","regression/ErForEarning.ts","tool/render.tsx","tool/func.ts","store/index.ts","reportWebVitals.ts","index.tsx","store/sortStocks.ts","uq-app/CBase.ts","uq-app/res/index.ts","uq-app/res/zh.ts","uq-app/res/en.ts","uq-app/VMain.tsx","images/logo.svg","home/VSiteHeader.tsx","home/VSearchHeader.tsx","home/VHome.tsx","home/VSelectTag.tsx","home/VMarketPE.tsx","home/CMarketPE.tsx","home/CHome.tsx","me/VEditMe.tsx","uq-app/appConfig.ts","me/VFaq.tsx","me/VAbout.tsx","me/VMe.tsx","me/CMe.ts","explorer/VSiteHeader.tsx","explorer/VExplorer.tsx","explorer/VExplorerCfg.tsx","explorer/explore.ts","explorer/CExplorer.tsx","warning/VWarningConfig.tsx","warning/CWarning.tsx","predicthistory/VPredictHistory.tsx","predicthistory/CPredictHistory.tsx","holding/VHolding.tsx","holding/VAccount.tsx","holding/CHolding.ts","net/httpChannel.ts","net/httpChannelUI.ts","net/apiBase.ts","net/miApi.ts","net/miNet.ts","group/VGroup.tsx","group/CGroup.ts","uq-app/CApp.ts","uq-app/uqs/index.ts","uq-app/App.tsx","selectStock/VSelectStock.tsx","selectStock/CSelectStock.tsx","uq-app/uqs/BzHelloTonva/index.ts","uq-app/uqs/BruceYuMi/index.ts","stockinfo/VStockInfo.tsx","store/stockGroups.ts","store/stockGroup.ts","uq-app/uqs/BzHelloTonva/Customer.ui.tsx","stockinfo/index.ts"],"names":["GFunc","n","w","undefined","toFixed","isNaN","Math","round","toString","precision","toPrecision","Number","parseFloat","t","r2","iRate","e1","e2","e3","r","r3","z","divyield","pe","e","bonus","price","pow","data","ret","length","funcz","p","i","day","floor","year","month","no","season","s","begin","end","arr","avg20","avg50","avg100","calcuOne","count","endIndex","sum","predictpe","avg","v","caption","value","className","consts","uqBasedata","appIcon","miApiHost","miApiHostDebug","isDevelopment","process","defaultGroupName","defaultBlackListGroupName","Accounts","miNet","accounts","account","makeObservable","this","observable","a","t_allaccounts","Array","isArray","name","find","Store","stockGroups","setStockSortType","type","config","stockFind","sortType","saveConfig","setStockSelectType","selectType","setUserSortType","userStock","selectTag","item","groupFromName","groupName","selectAccount","setCurrentAccount","accountName","setRegressionConfig","cfg","regression","StockGroups","loadConfig","JSON","stringify","t_usersettings$save","Promise","all","t_usersettings$query","load","rets","init","cStr","c","parse","tagName","group","group0","bmin","bmax","lmin","lmax","lr2","mcount","lr4","r210","irate","stock","defaultGroup","addStock","removeStock","queryName","query","pageStart","pageSize","user","userId","blackID","blackGroup","id","bMin","bMax","lMin","lMax","q_getlasttradeday","isMySelect","isMyBlack","VTags","onSelect","isSelected","anySelected","controller","onClickSelectTag","onEditTag","tag","preventDefault","renderTag","left","right","onClick","page","observer","selectedTags","groups","cApp","store","divNewTag","onNewTag","header","headerClassName","items","render","selectedItems","param","openPage","VPage","schema","required","maxLength","uiSchema","widget","label","placeholder","visible","submit","VNewTag","onFormButtonClick","context","onSaveNewTag","closePage","formData","onButtonClick","VEditTag","onSaveTag","fData","CStockInfo","exrightForEarning","exrightInfo","historyDataOrg","_capitalearning","array","deep","_bonus","_divideInfo","initLoad","baseItem","q_stockallinfo","t_tagstock$query","stockTags","arr1","clear","arr2","push","arr3","arr4","loadTTMEarning","loadHistoryData","loaded","openMetaView","onSelectTag","getSelected","openVPage","t_tag$save","retId","alert","add","StockGroup","exists","groupFromId","nav","addTagStock","newTag","removeTagStock","findIndex","splice","onClickDefaultTag","groupId","showSelectStock","cStock","CSelectStock","call","b","changeDay","code","symbol","ni","list","seasonData","seasonlist","len","minNo","seasonno","lastItem","lastShares","shares","maxNo","SeasonnoToBeginEnd","sItem","capital","pseason","esum","profit","corg","eorg","es","esumorg","earning","si","noBegin","predictData","predictSeasonData","predictSeasonDataFull","ypredict","x","er","ErForEarning","lr","SlrForEarning","B","epre","predict","l","slopeR","lpre","endDay","exitem","factor","showAll","historyData","lastdayno","dayno","lastDay","not","historyList","RestorePrice","ttm","CalculateHistoryPE","dayFrom","dayIndex","bsum","pricere","factore","SeasonnoFromDay","VStockInfo","CUqBase","computed","fields","customer","fieldArr","ui","res","zh","en","parent","row","product","quantity","amount","renderCustomer","firstName","lastName","mul","div","offset","asc","sec","saleAmount","deliver","onsite","offsite","break","sick","over","noTimeLog","id2","holding","tick","market","currency","miRate","divident","roe","inc1","inc2","inc3","inc4","preInc","marketValue","mi","y","slope","intercept","endY","regress","score","xSum","ySum","xSquared","xY","numerator","ym","y2","chi2","rmsd","ySquared","yi2","yi","yiyi2","sqrt","A","yx","log","exp","renderSortCol","radioName","sortMethod","sort","defaultSort","defaultChecked","renderSortHeaders","role","aria-label","renderStockInfoRow","onClickName","inputSelect","inputSelectSpan","order","total","ep","zzl","calculateZZ3","dataArr","rows","log2","map","valueType","vStr","cn","_cn","percent0","percent1","number","numberToMarketValue","renderValue","renderStockUrl","href","target","rel","stopPropagation","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","document","getElementById","sortStocks","getsortFunc","o","CBase","CUqApp","CSub","CAppBase","$zh","home","relation","discover","test","debug","me","changePassword","aboutTheApp","logout","pleaseLogin","content","backend","$en","color","selected","VMain","cHome","cHolding","cExporer","cMe","tabs","icon","tab","notify","onShown","TabCaptionComponent","VSiteHeader","src","logo","alt","style","height","width","renderSearchHeader","View","VSearchHeader","onSearch","key","size","VHome","renderRow","index","rowContent","rowKey","openStockInfo","onSelected","clickRow","callOnSelected","React","stockGroup","action","changeGroup","actions","openMarketPE","onAddStock","manageGroups","scroller","onPage","setSortType","stocks","before","none","VSelectTag","onClickTag","VMarketPE","input","checkLimitShow","f","checked","onLongShortFlag","head","pageContent","historyChart","chartHistory","labelList","peList","eList","numberToPrecision","chartdata1","labels","datasets","borderColor","backgroundColor","borderWidth","fill","yAxisID","options","scales","yAxes","display","position","gridLines","drawOnChartArea","onChange","CMarketPE","longshortFlag","loadData","dt","Date","getFullYear","getMonth","getDate","q_marketpe","reverse","CHome","getHomeStockGroup","loadItems","showGroupsManage","onWarningConfg","cWarning","renderSiteHeader","renderView","newC","start","VEditMe","props","nick","onItemChanged","itemSchema","newValue","preValue","userApi","userSetProp","saveLocalUser","onExit","showLogout","gridRows","component","iconClass","text","bk","values","appConfig","version","app","uqs","dev","alias","noUnit","tvs","oem","htmlTitle","VFaq","VAbout","top","VMe","meInfo","showEditMe","userSpan","String","substr","faq","about","aboutRows","CMe","unitOwner","rootUnits","VExplorer","labelId","middle","onSelectItem","onClickItem","onConfig","inverse","explore","avgs","avgStr","numberToFixString","VExplorerCfg","sortChage","newType","selectChange","findStockConfg","Explore","lastTradeDay","runInAction","loadExportItems","lastDayRet","result","dataArray","sl","calculateVN","exprice","CalculateValueAvg","CExplorer","onItemSelected","onItemUnselected","renderHome","onClickPredictAVG","priceDay","openPredictAVG","VWarningConfig","warnings","onNewWarning","renderWarning","witem","warningTypeString","title","VNewWarning","newuiSchema","pickId","Templet","onSaveNewWarning","CWarning","loadWarnings","t_stockwarning$add","onSaveWarning","t_stockwarning$all","VPredictHistory","avg20List","avg50List","avg100List","CPredictHistory","t_toppredictavg$query","li","VHolding","renderAccount","onClickAccount","showAccount","VAccount","CHolding","BruceYuMi","Account","UserAccount","ID","IX","IDinIX","IDNO","accountNO","IDActs","paramValue","IDX","AccountValue","forEach","Object","assign","HttpChannel","hostUrl","apiToken","timeout","startWait","endWait","url","reject","showError","error","post","params","keys","k","buildOptions","method","innerFetch","body","resolve","buildError","err","channel","that","path","console","timeOutHandler","setTimeout","fetch","encodeURI","ok","clearTimeout","statusText","ct","headers","get","indexOf","json","retJson","catch","message","toLowerCase","startsWith","u","language","culture","Headers","append","lang","HttpChannelNavUI","onError","channelUIs","channelNoUIs","MiApiChannel","basePath","apiName","uqToken","showWaiting","token","channels","channelUI","getHttpChannel","callFetch","put","delete","MiApi","pbody","_","clone","proc","MiNet","miApi","miHost","baseURI","tagId","baseId","VGroup","CGroup","gaps","CApp","cBug","cUI","timer","gapIndex","callTick","BzHelloTonva","$poked","poke","isUserLogin","setRes","dispose","clearInterval","App","setSettings","onLogined","VStockSelect","onClickStock","model","returnStock","renderStock","pageItems","more","searchByKey","allowEmptySearch","PageStockItems","firstSize","q_stocks$page","$page","PageItems","first","returnCall","setUI","uq","Customer","OrderMaster","OrderDetail","Tag","Staff","$Piecewise","$PiecewiseDetail","Achieve","Hours","CustomerTag","UserStaff","Holding","Transaction","Stock","Market","Portfolio","StockValue","check","ttmLimit","checkShowLater","checkDefaultTag","isLogined","headStr","dateHead","baseInfo","predictInfo","predictSeasonEarning","seasonEarning","capitalEarning","evt","isInteger","trim","onSubmit","dayString","ref","defaultValue","percentToFixString","window","open","opener","priceList","ttmList","chart1","showLine","pointStyle","pointRadius","per","plr","chart2","predictChartFullInfo","chart3","predictChartROE","numberToString","SeasonnoToYearMonth","chartdataFull","loading","capitalearning","tags","filter","st","t_tag$all","checkDefaultTags","r1","replace","br","yearlen","t_tagstock$add","unshift","t_tagstock$del","stockId"],"mappings":"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","file":"static/js/main.aeda1246.chunk.js","sourcesContent":["import * as React from 'react';\r\n\r\nexport class GFunc {\r\n  public static numberToFixString(n: number, w = 2) {\r\n    return n === undefined ? '' : n.toFixed(w);\r\n  }\r\n  public static number(n: number, w=2) {\r\n    return n === undefined ? '' : n.toFixed(w);\r\n  }\r\n\r\n  public static numberToMarketValue(n: number) {\r\n    return n === undefined || isNaN(n) ? '' : Math.round(n/10000).toString(); // + '亿';\r\n  }\r\n\r\n  public static numberToString(n: number, precision = 2) {\r\n    return n === undefined ? '' : n.toPrecision(precision);\r\n  }\r\n\r\n  public static numberToPrecision(n: number, precision = 4) {\r\n    return n === undefined ? undefined : Number.parseFloat(n.toPrecision(precision));\r\n  }\r\n\r\n  public static percentToFixString(n: number) {\r\n    return n === undefined || isNaN(n) ? '' : (n * 100).toFixed(2) + '%';\r\n  }\r\n\r\n  public static percent0(n: number) {\r\n    return n === undefined || isNaN(n) ? '' : (n * 100).toFixed(0) + '%';\r\n  }\r\n  public static percent1(n: number) {\r\n    return n === undefined || isNaN(n) ? '' : (n * 100).toFixed(1) + '%';\r\n  }\r\n\r\n  public static warningTypeString(t: string) {\r\n    switch (t) {\r\n      case 'gt': return '大于';\r\n      case 'lt': return '小于';\r\n      default: return t;\r\n    }\r\n  }\r\n\r\n  public static predictCutRatio(r2:number) {\r\n    return r2 * 2 - r2 * r2;\r\n  }\r\n\r\n  public static evaluatePricePrice(iRate:number, e1:number, e2:number, e3:number) {\r\n    let r = 1 + iRate;\r\n    let r2 = r * r;\r\n    let r3 = r2 * r;\r\n    return (e1/r + e2 /r2 + e3 / r3 + e3 / iRate / r3) / 2;\r\n  }\r\n\r\n  public static calculateV(z:number, divyield:number, pe:number) {\r\n    if (pe === undefined || isNaN(pe)) {\r\n      return undefined;\r\n    }\r\n\r\n    let r = 0;\r\n    if (z !== undefined) {\r\n      if (z > 0.25) {\r\n        z = 0.25;\r\n      }\r\n      r += z * 100;\r\n    }\r\n    if (divyield !== undefined) {\r\n      r += divyield * 100;\r\n    }\r\n    return r / pe;\r\n  }\r\n\r\n  public static calculateVN(z:number, e:number, bonus:number, price:number) {\r\n    if (price === undefined || isNaN(price) || e === undefined || isNaN(e)) {\r\n      return undefined;\r\n    }\r\n\r\n    let r = 0;\r\n    if (z !== undefined && e > 0) {\r\n      if (z > 0.25) {\r\n        z = 0.24 + Math.pow((z-0.24)*100, 0.6667) / 100;\r\n      }\r\n      z = 1 + z;\r\n      z = z * z * z - 1;\r\n      r += z * e * 100;\r\n    }\r\n    if (bonus !== undefined && !isNaN(bonus)) {\r\n      r += bonus * 100;\r\n    }\r\n    return r / price;\r\n  }\r\n\r\n  public static calculateZZ3(data:number[]) {\r\n    let ret:number[] = [undefined, undefined, undefined, undefined] ;\r\n    if (data === undefined)\r\n      return ret;\r\n    let len = data.length;\r\n    if (len < 5)\r\n      return ret;\r\n    \r\n    let funcz = (n:number, p:number) => {\r\n      if (p <= 0 || n <= 0)\r\n        return undefined;\r\n      return ((n / p) - 1);\r\n    }\r\n    for (let i = 0; i < 4; ++i) {\r\n      ret[i] = funcz(data[i+1], data[i]);\r\n    }\r\n    return ret;\r\n  }\r\n\r\n  public static caption = (value:string) => <span className=\"text-muted small\">{value}</span>;\r\n\r\n  public static MonthnoFromDay(day:number) {\r\n    let year = Math.floor(day/10000);\r\n    let month = Math.floor((day%10000)/100) - 1;\r\n    return (year-1995)*12+month;\r\n  }\r\n  \r\n  public static SeasonnoFromDay(day:number) {\r\n    let year = Math.floor(day/10000);\r\n    let month = Math.floor((day%10000)/100) - 1;\r\n    let season = Math.floor(month / 3);\r\n    return (year-1995)*4 + season;\r\n  }\r\n  \r\n  public static SeasonnoFromYearMonth(year:number, month:number) {\r\n    let season = Math.floor((month-1) / 3);\r\n    return (year-1995)*4 + season;\r\n  }\r\n\r\n  public static SeasonnoToYearMonth(no: number) {\r\n    let year = Math.floor(no / 4) + 1995;\r\n    let month = (Math.floor(no % 4) + 1) * 3;\r\n    return year * 100 + month;\r\n  }\r\n  \r\n  public static SeasonnoToBeginEnd(season:number) {\r\n    let year = (1995 + Math.floor(season / 4)) * 10000;\r\n    let s = season % 4;\r\n    if (s === 0) {\r\n      return {begin: year + 101, end: year + 331};\r\n    } \r\n    else if (s === 1) {\r\n      return {begin: year + 401, end: year + 630};\r\n    }\r\n    else if (s === 2) {\r\n      return {begin: year + 701, end: year + 930};\r\n    }\r\n    return {begin: year + 1001, end: year + 1231};\r\n  }\r\n\r\n  public static CalculatePredictAvg(arr: {predictpe:number}[]) {\r\n    let ret : {avg20:number, avg50:number, avg100:number} = {avg20:undefined, avg50:undefined, avg100:undefined};\r\n\r\n    let length = arr.length;\r\n    let calcuOne = (count:number) : number => {\r\n      let endIndex = count;\r\n      if (endIndex > length)\r\n        endIndex = length;\r\n      if (endIndex >= 10) {\r\n        let sum = 0;\r\n        for (let i = 3; i < endIndex; ++i) {\r\n          sum += arr[i].predictpe\r\n        }\r\n        return sum / (endIndex - 3);\r\n      }\r\n      else {\r\n        return undefined;\r\n      }\r\n    }\r\n\r\n    ret.avg20 = calcuOne(20);\r\n    ret.avg50 = calcuOne(50);\r\n    ret.avg100 = calcuOne(100);\r\n    return ret;\r\n  }\r\n\r\n  public static CalculateValueAvg(arr: {v:number}[]) {\r\n    let ret : {avg20:number, avg50:number, avg100:number, avg:number} = {avg20:undefined, avg50:undefined, avg100:undefined, avg:undefined};\r\n\r\n    let length = arr.length;\r\n    let calcuOne = (count:number) : number => {\r\n      let endIndex = count;\r\n      if (count === 0 || endIndex > length)\r\n        endIndex = length;\r\n      if (endIndex >= 10) {\r\n        let sum = 0;\r\n        for (let i = 3; i < endIndex; ++i) {\r\n          sum += arr[i].v;\r\n        }\r\n        return sum / (endIndex - 3);\r\n      }\r\n      else {\r\n        return undefined;\r\n      }\r\n    }\r\n\r\n    ret.avg20 = calcuOne(20);\r\n    ret.avg50 = calcuOne(50);\r\n    ret.avg100 = calcuOne(100);\r\n    ret.avg = calcuOne(0);\r\n    return ret;\r\n  }\r\n}\r\n","export const consts = {\r\n    uqBasedata: \"bruce/mi\",\r\n    appIcon: 'https://tv.jkchemical.com/imgs/Bear-icon.png',\r\n    miApiHost: 'https://mi.jjol.cn/',\r\n    miApiHostDebug: 'http://localhost:6010/',\r\n    isDevelopment: process.env.NODE_ENV === 'development',\r\n}\r\n\r\nexport const defaultGroupName = '自选股';\r\nexport const defaultBlackListGroupName = '黑名单';\r\n","import { makeObservable, observable } from \"mobx\";\r\nimport { MiNet } from \"../net\";\r\nimport { Account } from \"./types\";\r\n\r\nexport class Accounts {\r\n\tprivate miNet: MiNet;\r\n\taccounts: Account[] = null;\r\n\taccount: Account = null;\r\n\r\n\tconstructor(miNet: MiNet) {\r\n\t\tmakeObservable(this, {\r\n\t\t\taccounts: observable,\r\n\t\t\taccount: observable,\r\n\t\t});\r\n\t\tthis.miNet = miNet;\r\n\t}\r\n\r\n\tasync load() {\r\n\t\tlet r = await this.miNet.t_allaccounts();\r\n\t\tif (Array.isArray(r)) {\r\n\t\t\tthis.accounts = r;\r\n\t\t}\r\n\t}\r\n\r\n\tsetCurrentAccount(name:string):Account {\r\n\t\tthis.account = this.accounts.find(v => v.name === name);\r\n\t\treturn this.account;\r\n\t}\r\n}\r\n","import { makeObservable, observable } from \"mobx\";\r\nimport { MiNet } from \"../net\";\r\nimport { defaultGroupName } from \"../consts\";\r\nimport { MiConfigs, RegressionConfig, Stock, StockFindConfig } from \"./types\";\r\nimport { StockGroups } from \"./stockGroups\";\r\nimport { Accounts } from \"./accounts\";\r\n\r\nexport class Store {\r\n\tprivate miNet: MiNet;\r\n\t//user: User;\r\n\t//userTag: UserTag;\r\n\t//homeItems: IObservableArray<any> = observable.array<any>([], { deep: true });\r\n\tstockGroups: StockGroups;\r\n\taccounts: Accounts;\r\n\t\r\n\tconstructor(miNet:MiNet) {\r\n\t\tmakeObservable(this, {\r\n\t\t\tconfig: observable,\r\n\t\t});\r\n\t\t//this.user = user;\r\n\t\t//let miHost = consts.miApiHost;\r\n\t\t//let token = this.user.token;\r\n\t\t//this.miApi = new MiApi(miHost, 'fsjs/', 'miapi', token, false);\r\n\t\tthis.miNet = miNet;\r\n\t\tthis.stockGroups = new StockGroups(miNet);\r\n\t\tthis.accounts = new Accounts(miNet);\r\n\t}\r\n\r\n\t@observable config: MiConfigs = { \r\n\t\tgroupName: defaultGroupName, \r\n\t\tstockFind: { sortType:'pe' },\r\n\t\tuserStock: { sortType:'tagpe'},\r\n\t\tregression: {bmin:0, bmax:0.5, r2:0.7, lmin:0.01, lmax:0.5, lr2:0.7, mcount:2, lr4: 3, r210:0.6, irate:0.04}\r\n\t};\r\n\t//@observable blackList: any[] = [];\r\n\t//@observable defaultList: any[] = [];\r\n\r\n\r\n\tgetHomeStockGroup() {\r\n\t\tlet name = this.config.groupName;\r\n\t\treturn this.stockGroups.groupFromName(name);\r\n\t}\r\n\t/*\r\n\t@computed get tagID(): number {\r\n\t\tif (this.stockGroups) {\r\n\t\t\tlet name = this.config.tagName;\r\n\t\t\tlet i = this.stockGroups.findIndex(v => v.groupName === name);\r\n\t\t\tif (i >= 0) {\r\n\t\t\t\treturn this.stockGroups[i].groupId as number;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn -1;\r\n\t}\r\n\t*/\r\n\r\n\tget findStockConfg(): StockFindConfig {\r\n\t\treturn this.config.stockFind;\r\n\t}\r\n\t/*\r\n\tget blackListTagID(): number {\r\n\t\tlet group = this.stockGroups.groupFromName(defaultBlackListGroupName);\r\n\t\treturn group?.groupId;\r\n\t}\r\n\r\n\tget defaultListTagID(): number {\r\n\t\tlet group = this.stockGroups.groupFromName(defaultGroupName);\r\n\t\treturn group?.groupId;\r\n\t}\r\n\t*/\r\n\r\n\tasync load() {\r\n\t\tawait this.loadConfig();\r\n\t\t//await this.loadHomeItems();\r\n\t}\r\n\r\n\tasync saveConfig() {\r\n\t\tlet v = JSON.stringify(this.config);\r\n\t\t//await this.miApi.call('t_usersettings$save', [this.user.id, 'config', v]);\r\n\t\tawait this.miNet.t_usersettings$save(v);\r\n\t}\r\n\r\n\tprotected async loadConfig() {\r\n\t\tlet rets = await Promise.all([\r\n\t\t\tthis.miNet.t_usersettings$query(),\r\n\t\t\tthis.stockGroups.load(),\r\n\t\t\tthis.accounts.load(),\r\n\t\t]);\r\n\t\tawait this.stockGroups.init();\r\n\t\tlet r = rets[0];\r\n\t\tif (r !== undefined) {\r\n\t\t\tlet ret = r;\r\n\t\t\tif (ret !== undefined && ret.length > 0) {\r\n\t\t\t\tlet cStr = ret[0].value;\r\n\t\t\t\tlet c = JSON.parse(cStr);\r\n\t\t\t\tif (this.stockGroups) {\r\n\t\t\t\t\tlet name = c.tagName;\r\n\t\t\t\t\tlet group = this.stockGroups.groupFromName(name);\r\n\t\t\t\t\tif (!group) {\r\n\t\t\t\t\t\tgroup = this.stockGroups.groupFromName(defaultGroupName);\r\n\t\t\t\t\t\tif (group) {\r\n\t\t\t\t\t\t\tc.tagName = defaultGroupName;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tc.tagName = this.stockGroups.group0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tc.groupName = c.tagName;\r\n\t\t\t\t}\r\n\t\t\t\tthis.config = c;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this.config.stockFind === undefined) {\r\n\t\t\tthis.config.stockFind = { sortType: 'pe' };\r\n\t\t}\r\n\t\telse {\r\n\t\t\tswitch (this.config.stockFind.selectType) {\r\n\t\t\tcase 'all': break;\r\n\t\t\tcase 'peroe': break;\r\n\t\t\tcase 'pe': break;\r\n\t\t\tcase 'dp': break;\r\n\t\t\tdefault:\r\n\t\t\t\tthis.config.stockFind.selectType = 'all';\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this.config.userStock === undefined) {\r\n\t\t\tthis.config.userStock = { sortType: 'tagpe' };\r\n\t\t}\r\n\t\tif (this.config.regression === undefined) {\r\n\t\t\tthis.config.regression = {bmin:0, bmax:0.5, r2:0.7, lmin:0.01, lmax:0.5, lr2:0.7, mcount:2, lr4: 3, r210:0.6, irate:0.04};\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (this.config.regression.r210 === undefined) {\r\n\t\t\t\tthis.config.regression.r210 = 0.6;\r\n\t\t\t}\r\n\t\t\tif (this.config.regression.irate === undefined) {\r\n\t\t\t\tthis.config.regression.irate = 0.04;\r\n\t\t\t}\r\n\t\t}\r\n\t\t/*\r\n\t\tawait Promise.all([\r\n\t\t\tthis.loadBlackList(), \r\n\t\t\tthis.loadDefaultList(),\r\n\t\t]);\r\n\t\t*/\r\n\t}\r\n\r\n\tsetStockSortType = async (type:string)=> {\r\n\t\tif (this.config.stockFind.sortType === type)\r\n\t\t\treturn;\r\n\t\tthis.config.stockFind.sortType = type;\r\n\t\tawait this.saveConfig();\r\n\t}\r\n\r\n\tsetStockSelectType = async (type:string) => {\r\n\t\tif (this.config.stockFind.selectType === type)\r\n\t\t\treturn;\r\n\t\tthis.config.stockFind.selectType = type;\r\n\t\tawait this.saveConfig();\r\n\t}\r\n\r\n\tsetUserSortType = async (type:string)=> {\r\n\t\tif (this.config.userStock.sortType === type) return;\r\n\t\tthis.config.userStock.sortType = type;\r\n\t\tawait this.saveConfig();\r\n\t}\r\n\r\n\tselectTag = async (item:any) => {\r\n\t\tlet {name} = item as {name:string, id:number};\r\n\t\tlet group = this.stockGroups.groupFromName(name);\r\n\t\tif (group) {\r\n\t\t\tthis.config.groupName = name;\r\n\t\t\tthis.saveConfig();\r\n\t\t}\r\n\t}\r\n\r\n\tselectAccount = async (item:any) => {\r\n\t\tlet {name} = item as {name:string, id:number};\r\n\t\tlet account = this.accounts.setCurrentAccount(name);\r\n\t\tif (account) {\r\n\t\t\tthis.config.accountName = name;\r\n\t\t\tthis.saveConfig();\r\n\t\t}\r\n\t}\r\n\r\n\tsetRegressionConfig = async (cfg: RegressionConfig) => {\r\n\t\tthis.config.regression = cfg;\r\n\t\tawait this.saveConfig();\r\n\t}\r\n\t/*\r\n\tprotected async loadBlackList(): Promise<void> {\r\n\t\tlet blackid = this.blackListTagID;\r\n\t\tif (blackid <= 0) {\r\n\t\t\tthis.blackList = [];\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tlet param = { user:this.user.id, tag:blackid};\r\n\t\ttry {\r\n\t\t\tlet ret = await this.miNet.t_tagstock$query(blackid, undefined);//await this.uqs.mi.TagStock.query(param);\r\n\t\t\tlet r = ret.map(item=> {\r\n\t\t\treturn item.stock;\r\n\t\t\t});\r\n\t\t\tthis.blackList = r;\r\n\t\t}\r\n\t\tcatch (error) {\r\n\t\t\tlet e = error;\r\n\t\t}\r\n\t}\r\n\r\n\tprotected async loadDefaultList(): Promise<void> {\r\n\t\tlet id = this.defaultListTagID;\r\n\t\tif (id <= 0) {\r\n\t\t\tthis.defaultList = [];\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tlet param = { user:this.user.id, tag:id};\r\n\t\ttry {\r\n\t\t\tlet ret = await this.miNet.t_tagstock$query(id, undefined);//await this.uqs.mi.TagStock.query(param);\r\n\t\t\tlet r = ret.map(item => item.stock);\r\n\t\t\tthis.defaultList = r;\r\n\t\t}\r\n\t\tcatch (error) {\r\n\t\t\tlet e = error;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate addBlackID(id:number) {\r\n\t\tlet i = this.blackList.findIndex(v=> v===id);\r\n\t\tif (i < 0) {\r\n\t\t\tthis.blackList.push(id);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate removeBlackID(id:number) {\r\n\t\tlet i = this.blackList.findIndex(v=> v===id);\r\n\t\tif (i >= 0) {\r\n\t\t\tthis.blackList.splice(i, 1);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate addDefaultID(id:number) {\r\n\t\tlet i = this.defaultList.findIndex(v=> v===id);\r\n\t\tif (i < 0) {\r\n\t\t\tthis.defaultList.push(id);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate removeDefaultID(id:number) {\r\n\t\tlet i = this.defaultList.findIndex(v=> v===id);\r\n\t\tif (i >= 0) {\r\n\t\t\tthis.defaultList.splice(i, 1);\r\n\t\t}\r\n\t}\r\n\r\n\tasync addStock(stockId:number) {\r\n\t\tif (stockId <= 0) return;\r\n\t\tlet tagid = this.defaultListTagID;\r\n\t\tawait this.miNet.t_tagstock$add(tagid, stockId);\r\n\t\tawait this.addTagStockID(tagid, stockId);\r\n\t\tlet group = this.stockGroups.groupFromId(tagid);\r\n\t\t//await this.loadHomeItems();\r\n\t\tgroup.addStock(stockId);\r\n\t}\r\n\t*/\r\n\r\n\tasync addTagStock(stock: Stock) {\r\n\t\t/*\r\n\t\tif (this.userTag && this.userTag.tagID === tagid) {\r\n\t\t\tif (tagid === this.blackListTagID) {\r\n\t\t\t\tthis.addBlackID(stockID);\r\n\t\t\t}\r\n\t\t\telse if (tagid === this.defaultListTagID) {\r\n\t\t\t\tthis.addDefaultID(stockID);\r\n\t\t\t}\r\n\t\t}\r\n\t\t*/\r\n\t\tawait this.stockGroups.defaultGroup.addStock(stock);\r\n\t}\r\n\r\n\t/*\r\n\tasync addTagStockIDs(tagid: number, stockIDs: number[]) {\r\n\t\tif (tagid === this.blackListTagID) {\r\n\t\t\tstockIDs.map(v=>this.addBlackID(v));\r\n\t\t}\r\n\t\telse if (tagid === this.defaultListTagID) {\r\n\t\t\tstockIDs.map(v=>this.addDefaultID(v));\r\n\t\t}\r\n\t}\r\n\t*/\r\n\r\n\tasync removeTagStock(stock: Stock) {\r\n\t\tawait this.stockGroups.defaultGroup.removeStock(stock);\r\n\t\t/*\r\n\t\tif (tagid === this.blackListTagID) {\r\n\t\t\tthis.removeBlackID(stockID);\r\n\t\t}\r\n\t\telse if (tagid === this.defaultListTagID) {\r\n\t\t\tthis.removeDefaultID(stockID);\r\n\t\t}\r\n\t\tif (this.userTag && this.userTag.tagID === tagid) {\r\n\t\t\tthis.removeStock(stockID);\r\n\t\t}\r\n\t\t*/\r\n\t}\r\n\r\n\t/*\r\n\tasync loadHomeItems() {\r\n\t\t// 距离上次\r\n\t\tlet queryName = 'taguser';\r\n\r\n\t\tlet query = {\r\n\t\t\tname: queryName,\r\n\t\t\tpageStart: 0,\r\n\t\t\tpageSize: 1000,\r\n\t\t\tuser: this.user.id,\r\n\t\t\ttag: this.tagID,\r\n\t\t\tyearlen: 1,\r\n\t\t};\r\n\t\tlet result = await this.miNet.process(query, []);\r\n\t\tif (Array.isArray(result) === false) return;\r\n\r\n\t\tlet arr = result as {id:number, order:number, data?:string, v?:number, e:number, e3:number, ep:number, price:number, exprice:number, divyield:number, r2:number, lr2:number, predictpe?:number, dataArr?:number[]}[];\r\n\t\tfor (let item of arr) {\r\n\t\t\tlet dataArray = JSON.parse(item.data) as number[];\r\n\t\t\titem.dataArr = dataArray;\r\n\t\t\tlet sl = new SlrForEarning(dataArray);\r\n\t\t\titem.ep = (sl.predict(4) + item.e) / 2;\r\n\t\t\titem.e3 = sl.predict(7);\r\n\t\t\titem.v = GFunc.calculateVN(sl.slopeR, item.ep, item.divyield * item.price, item.exprice);\r\n\t\t\titem.predictpe = item.price / item.e3;\r\n\t\t}\r\n\t\tthis.sortStocks(arr);\r\n\r\n\t\trunInAction(() => {\r\n\t\t\tthis.homeItems.clear();\r\n\t\t\tthis.homeItems.push(...arr);\t\r\n\t\t});\r\n\t}\r\n\t*/\r\n\r\n\tasync loadExportItems(queryName: string):Promise<any[]> {\r\n\t\t//let sName = this.store.config.stockFind.selectType;\r\n\t\tlet {bmin, bmax, r2, lmin, lmax, lr2, mcount, lr4, r210} = this.config.regression;\r\n\t\t//if (sName !== undefined)\r\n\t\t//  queryName = sName;\r\n\t\tlet query = {\r\n\t\t\tname: queryName,\r\n\t\t\tpageStart: 0,\r\n\t\t\tpageSize: 3000,\r\n\t\t\tuser: this.miNet.userId,\r\n\t\t\tblackID: this.stockGroups.blackGroup.id,\r\n\t\t\tbMin: bmin,\r\n\t\t\tbMax: bmax,\r\n\t\t\tr2: r2,\r\n\t\t\tlMin: lmin,\r\n\t\t\tlMax: lmax,\r\n\t\t\tlr2: lr2,\r\n\t\t\tmcount: mcount,\r\n\t\t\tlr4: lr4,\r\n\t\t\tr210: r210,\r\n\t\t};\r\n\t\tlet rets = await Promise.all([\r\n\t\t\tthis.miNet.process(query, []),\r\n\t\t\t//this.store.miApi.call('q_getlasttradeday', [])\r\n\t\t\tthis.miNet.q_getlasttradeday(),\r\n\t\t]);\r\n\t\treturn rets;\r\n\t}\r\n\r\n\tisMySelect(id:number): boolean {\r\n\t\treturn this.stockGroups.isMySelect(id);\r\n\t}\r\n\r\n\tisMyBlack(id:number): boolean {\r\n\t\treturn this.stockGroups.isMyBlack(id);\r\n\t}\r\n}\r\n","import * as React from 'react';\r\nimport { observer } from 'mobx-react-lite';\r\nimport { VPage, Page, FA, List, Form, ItemSchema, StringSchema, UiInputItem, UiSchema, Context, IdSchema, UiIdItem, LMR } from 'tonva-react';\r\nimport { CStockInfo } from './CStockInfo';\r\nimport { defaultBlackListGroupName, defaultGroupName } from '../consts';\r\n\r\nexport class VTags extends VPage<CStockInfo> {\r\n\tasync open(param?: any) {\r\n\t\tthis.openPage(this.page);\r\n\t}\r\n\r\n\tprivate onSelect = (item: any, isSelected: boolean, anySelected: boolean) => {\r\n\t\tthis.controller.onClickSelectTag(item, isSelected);\r\n\t}\r\n\r\n\tprivate onEditTag = (tag:any, e:React.MouseEvent) => {\r\n\t\te.preventDefault();\r\n\t\tthis.controller.onEditTag(tag);\r\n\t}\r\n\r\n\tprivate renderTag = (tag: any) => {\r\n\t\tlet left = <div className=\"px-3 py-2 cursor-pointer\">{tag.name}</div>;\r\n\t\tlet fdTag = tag.name === defaultBlackListGroupName || tag.name === defaultGroupName;\r\n\t\tlet right = fdTag ? '' : <div className=\"px-3 py-2 cursor-pointer\" onClick={(e)=>this.onEditTag(tag, e)}>编辑</div>;\r\n\t\treturn <LMR className=\"mx-3 my-2\" left={left} right={right}>\r\n\t\t</LMR>;\r\n\t}\r\n\r\n\tprivate page = observer(() => {\r\n\t\tlet { selectedTags } = this.controller;\r\n\t\tlet { stockGroups } = this.controller.cApp.store;\r\n\t\tlet { groups } = stockGroups;\r\n\t\tlet divNewTag = groups.length >= 10 ?\r\n\t\t\t''\r\n\t\t\t:\r\n\t\t\t<div className=\"px-3 py-2 cursor-pointer\" onClick={this.controller.onNewTag}>\r\n\t\t\t\t<FA name=\"plus\" className=\"text-primary\" />\r\n\t\t\t\t&nbsp; 新建分组\r\n\t\t\t</div>;\r\n\r\n\t\treturn <Page header=\"选择分组\" headerClassName=\"bg-primary\">\r\n\t\t\t{divNewTag}\r\n\t\t\t<List items={groups} \r\n\t\t\t\titem={{ onSelect: this.onSelect, render: this.renderTag }} \r\n\t\t\t\tselectedItems={selectedTags} />\r\n\t\t</Page>;\r\n\t});\r\n}\r\n\r\nconst schema: ItemSchema[] = [\r\n\t{ name: 'name', type: 'string', required: true, maxLength: 10 } as StringSchema,\r\n\t{ name: 'id', type: 'id' } as IdSchema,\r\n\t{ name: 'submit', type: 'submit', },\r\n];\r\nconst uiSchema: UiSchema = {\r\n\titems: {\r\n\t\tname: { widget: 'text', label: null, placeholder: '分组名称' } as UiInputItem,\r\n\t\tid: { widget: 'id', visible: false } as UiIdItem,\r\n\t\tsubmit: { widget: 'button', label: '保存', className: 'btn btn-primary' },\r\n\t}\r\n};\r\n\r\nexport class VNewTag extends VPage<CStockInfo> {\r\n\tasync open(param?: any) {\r\n\t\tthis.openPage(this.page);\r\n\t}\r\n\r\n\tprivate onFormButtonClick = async (name: string, context: Context) => {\r\n\t\tif (await this.controller.onSaveNewTag(context.data)) {\r\n\t\t\tthis.controller.closePage();\r\n\t\t}\r\n\t}\r\n\r\n\tprivate page = () => {\r\n\t\treturn <Page header=\"新建分组\" headerClassName=\"bg-primary\">\r\n\t\t\t<div className=\"px-3 py-3\">\r\n\t\t\t\t<Form schema={schema}\r\n\t\t\t\tuiSchema={uiSchema}\r\n\t\t\t\tformData={undefined}\r\n\t\t\t\tonButtonClick={this.onFormButtonClick}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t\t</Page>;\r\n\t\t}\r\n\t}\r\n\r\nexport class VEditTag extends VPage<CStockInfo> {\r\n\tasync open(param?: any) {\r\n\t\tthis.openPage(this.page, param);\r\n\t}\r\n\r\n\tprivate onFormButtonClick = async (name: string, context: Context) => {\r\n\t\tif (await this.controller.onSaveTag(context.data)) {\r\n\t\t\tthis.controller.closePage();\r\n\t\t}\r\n\t}\r\n\r\n\tprivate page = (param?: any) => {\r\n\t\tlet {id, name} = param;\r\n\t\tlet fData = {id:id, name:name};\r\n\t\treturn <Page header=\"编辑分组\" headerClassName=\"bg-primary\">\r\n\t\t\t<div className=\"px-3 py-3\">\r\n\t\t\t\t<Form schema={schema}\r\n\t\t\t\tuiSchema={uiSchema}\r\n\t\t\t\tformData={fData}\r\n\t\t\t\tonButtonClick={this.onFormButtonClick}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t</Page>;\r\n\t}\r\n}\r\n","/*eslint @typescript-eslint/no-unused-vars: [\"off\", { \"vars\": \"all\" }]*/\r\nimport { observable, IObservableArray, computed, makeObservable } from 'mobx';\r\nimport { nav } from 'tonva-react';\r\nimport { CUqBase } from \"../uq-app\";\r\nimport { GFunc } from '../tool/GFunc';\r\nimport { VStockInfo } from './VStockInfo'\r\nimport { NStockInfo, StockPrice, StockCapitalearning, StockBonus, StockDivideInfo } from './StockInfoType';\r\nimport { VTags, VNewTag, VEditTag } from './VTags';\r\nimport { ErForEarning, SlrForEarning } from 'regression';\r\nimport { StockGroup } from '../store';\r\nimport { CSelectStock } from '../selectStock';\r\n\r\nexport class CStockInfo extends CUqBase {\r\n\t@observable baseItem: NStockInfo;\r\n\t@observable protected loaded: boolean = false;\r\n\r\n\t@observable price: StockPrice;\r\n\t//@observable roe: StockRoe;\r\n\t//@observable tags: any[] = undefined;\r\n\t@observable stockTags: any[];\r\n\tselectedTags: any[];\r\n\r\n\tprotected exrightForEarning: {day:number, factor:number}[] = [];\r\n\tprotected exrightInfo: {day:number, bonus:number, factor:number, factore:number}[] = [];\r\n\t@observable seasonData:{season:number, c:number, e:number, esum:number, corg:number, eorg:number, esumorg:number}[] = [];\r\n\t@observable predictSeasonData:{season:number, c:number, e:number, esum:number, corg:number, eorg:number, esumorg:number}[] = [];\r\n\t@observable predictSeasonDataFull:{season:number, c:number, e:number, esum:number, corg:number, eorg:number, esumorg:number}[] = [];\r\n\t@observable predictData: { e:number, b: number, r2: number, epre:number, l:number, lr2:number, lpre:number};\r\n\t@observable ypredict: number[] = [];\r\n\t@observable historyData:{day:number, price:number, ttm:number}[] =  [];\r\n\tprotected historyDataOrg:{day:number, price:number, dayno:number}[] = [];\r\n\r\n\t//protected _earning: IObservableArray<StockEarning> = observable.array<StockEarning>([], { deep: true });\r\n\tprotected _capitalearning: IObservableArray<StockCapitalearning> = observable.array<StockCapitalearning>([], { deep: true });\r\n\tprotected _bonus: IObservableArray<StockBonus> = observable.array<StockBonus>([], { deep: true });\r\n\tprotected _divideInfo: IObservableArray<StockDivideInfo> = observable.array<StockDivideInfo>([], { deep: true });\r\n\r\n\t// @computed get earning(): IObservableArray<StockEarning> {\r\n\t//   if (this.loaded === false) return undefined;\r\n\t//   return this._earning;\r\n\t// }\r\n\r\n\t@computed get capitalearning(): IObservableArray<StockCapitalearning> {\r\n\t\tif (this.loaded === false) return undefined;\r\n\t\treturn this._capitalearning;\r\n\t}\r\n\r\n\t@computed get bonus(): IObservableArray<StockBonus> {\r\n\t\tif (this.loaded === false) return undefined;\r\n\t\treturn this._bonus;\r\n\t}\r\n\r\n\t@computed get divideInfo(): IObservableArray<StockDivideInfo> {\r\n\t\tif (this.loaded === false) return undefined;\r\n\t\treturn this._divideInfo;\r\n\t}\r\n\r\n\t@observable isMySelect: boolean = false;\r\n\r\n\tconstructor(cApp: any) {\r\n\t\tsuper(cApp);\r\n\t\tmakeObservable(this);\r\n\t}\r\n\tinitLoad = () => {\r\n\t\tthis.load();\r\n\t}\r\n\r\n\tprivate load = async () => {\r\n\t\tif (!this.baseItem) return;\r\n\r\n\t\tlet { id, day } = this.baseItem;\r\n\t\tlet rets = await Promise.all([\r\n\t\t\t//this.cApp.store.miApi.query('q_stockallinfo', [id, day]),\r\n\t\t\t//this.cApp.store.miApi.query('t_tagstock$query', [this.user.id, undefined, id]) //this.uqs.mi.TagStock.query({ user: nav.user.id, stock: id })\r\n\t\t\tthis.cApp.miNet.q_stockallinfo(id, day),\r\n\t\t\tthis.cApp.miNet.t_tagstock$query(undefined, id),\r\n\t\t]);\r\n\t\tthis.stockTags = rets[1];\r\n\t\tlet ret = rets[0];\r\n\t\tif (Array.isArray(ret[0])) {\r\n\t\t\tlet arr1 = ret[1];\r\n\t\t\tif (Array.isArray(arr1)) {\r\n\t\t\t\tthis.price = arr1[0];\r\n\t\t\t}\r\n\r\n\t\t\tif (this._capitalearning.length > 0) {\r\n\t\t\t\tthis._capitalearning.clear();\r\n\t\t\t}\r\n\r\n\t\t\tlet arr2 = ret[2];\r\n\t\t\tif (Array.isArray(arr2)) {\r\n\t\t\t\tthis._capitalearning.push(...arr2);\r\n\t\t\t}\r\n\r\n\t\tthis._bonus.clear();\r\n\t\tlet arr3 = ret[3];\r\n\t\tif (Array.isArray(arr3)) {\r\n\t\t\tthis._bonus.push(...arr3);\r\n\t\t}\r\n\r\n\t\tthis._divideInfo.clear();\r\n\t\tlet arr4 = ret[4];\r\n\t\tif (Array.isArray(arr4)) {\r\n\t\t\tthis._divideInfo.push(...arr4);\r\n\t\t}\r\n\r\n\t\tthis.exrightForEarning = ret[5];\r\n\t\tawait this.loadTTMEarning(ret[6]);\r\n\t\tthis.exrightInfo = ret[7];\r\n\r\n\t\tthis.historyDataOrg = ret[8];\r\n\t\tthis.loadHistoryData(false);\r\n\t\t}\r\n\r\n\t\tthis.isMySelect = this.cApp.store.isMySelect(id);\r\n\t\tthis.loaded = true;\r\n\t}\r\n\r\n\tprotected async loadTTMEarning(list: {seasonno:number, capital:number, earning:number, es:number, profit:number, pseason:number, shares:number}[]) {\r\n\t\tthis.seasonData.splice(0);\r\n\t\tlet seasonlist: {[index:number]:{season:number, c:number, e:number, esum:number, corg:number, eorg:number, esumorg:number}} = {};\r\n\t\tlet len = list.length;\r\n\t\tif (len <= 0) return;\r\n\t\tlet minNo = list[len - 1].seasonno;\r\n\t\tlet lastItem = list[0];\r\n\t\tlet lastShares = lastItem.shares;\r\n\t\tlet maxNo = lastItem.seasonno;\r\n\r\n\t\tlet {end} = GFunc.SeasonnoToBeginEnd(maxNo);\r\n\t\tfor (let item of list) {\r\n\t\t\tlet no = item.seasonno;\r\n\t\t\tlet sItem = {season:no, c: item.capital * item.shares / lastShares, e: item.pseason / lastShares, esum: item.profit / lastShares, \r\n\t\t\t\tcorg: item.capital, eorg: item.es, esumorg: item.earning}\r\n\t\t\t//this.ExrightEarning(end, no, sItem);\r\n\t\t\tseasonlist[no] = sItem;\r\n\t\t}\r\n\r\n\t\tlet i = 0;\r\n//\t\tlet esum = 0;\r\n\t\tfor (let seasonno = minNo; seasonno <= maxNo; ++seasonno, ++i) {\r\n\t\t\tlet si = seasonlist[seasonno];\r\n\t\t\tif (si === undefined) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\t// esum += si.e;\r\n\t\t\t// if (i < 3) {\r\n\t\t\t// \tsi.esum = undefined;\r\n\t\t\t// }\r\n\t\t\t// else {\r\n\t\t\t// \tsi.esum = esum;\r\n\t\t\t// \tlet pastitem = seasonlist[seasonno-3];\r\n\t\t\t// \tif (pastitem !== undefined) {\r\n\t\t\t// \t\tesum -= pastitem.e;\r\n\t\t\t// \t}\r\n\t\t\t// }\r\n\t\t\tthis.seasonData.splice(0,0, si);\r\n\t\t}\r\n\r\n\t\tlet noBegin = maxNo - 19;\r\n\t\tthis.predictData = undefined;\r\n\t\tthis.predictSeasonData.splice(0);\r\n\t\tthis.predictSeasonDataFull.splice(0);\r\n\t\tif (noBegin < minNo) return;\r\n\t\tnoBegin += 3;\r\n\t\tthis.ypredict = [];\r\n\t\tfor (let x = noBegin; x <= maxNo; x += 4) {\r\n\t\t\tlet item = seasonlist[x];\r\n\t\t\tif (item === undefined) break;\r\n\t\t\tthis.predictSeasonData.splice(0, 0, item);\r\n\t\t\tthis.ypredict.push(item.esum);\r\n\t\t}\r\n\r\n\t\tfor (let x = maxNo; x >= minNo; x -= 4) {\r\n\t\t\tlet item = seasonlist[x];\r\n\t\t\tif (item === undefined) break;\r\n\t\t\tthis.predictSeasonDataFull.push(item);\r\n\t\t}\r\n\r\n\t\tif (this.ypredict.length === 5) {\r\n\t\t\tlet er = new ErForEarning(this.ypredict);\r\n\t\t\tlet lr = new SlrForEarning(this.ypredict);\r\n\t\t\tthis.predictData = {e:this.ypredict[4], b: er.B, r2: er.r2, epre: er.predict(4), l: lr.slopeR, lr2: lr.r2, lpre: lr.predict(4)};\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.predictSeasonData.splice(0);\r\n\t\t}\r\n\t}\r\n\r\n\tprotected ExrightEarning(endDay:number, season:number, item:{c:number, e:number, esum:number}) {\r\n\t\tlet {end} = GFunc.SeasonnoToBeginEnd(season);\r\n\t\tfor (let i = 0; i < this.exrightForEarning.length; ++i) {\r\n\t\t\tlet exitem = this.exrightForEarning[i];\r\n\t\t\tlet day = exitem.day;\r\n\t\t\tif (day > endDay) break;\r\n\t\t\tif (day < end) continue;\r\n\t\t\tlet factor = exitem.factor;\r\n\t\t\titem.c = item.c * factor;\r\n\t\t\titem.e = item.e * factor;\r\n\t\t\titem.esum = item.esum * factor;\r\n\t\t}\r\n\t}\r\n\r\n\tloadHistoryData(showAll:boolean) {\r\n\t\tlet list = this.historyDataOrg;\r\n\t\tlet length = list.length;\r\n\t\tif (length <= 10) {\r\n\t\t\tthis.historyData = [];\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (!showAll) {\r\n\t\t\tlet day = this.baseItem.day;\r\n\t\t\tif (day !== undefined) {\r\n\t\t\t\tlet i = length - 1;\r\n\t\t\t\tfor (; i >= 0; --i) {\r\n\t\t\t\t\tlet item = list[i];\r\n\t\t\t\t\tif (item.day <= day) break;\r\n\t\t\t\t}\r\n\t\t\t\tlength = i + 1;\r\n\t\t\t}\r\n\t\t}\r\n\t\tlet endIndex = length - 1;\r\n\t\tlet lastItem = list[endIndex];\r\n\t\tlet lastdayno = lastItem.dayno;\r\n\t\tif (lastdayno === undefined) {\r\n\t\t\twhile (endIndex > 0) {\r\n\t\t\t\t--endIndex;\r\n\t\t\t\tlastItem = list[endIndex];\r\n\t\t\t\tlastdayno = lastItem.dayno;\r\n\t\t\t\tif (lastdayno !== undefined) break;\r\n\t\t\t}\r\n\t\t}\r\n\t\tlet lastDay = lastItem.day;\r\n\t\tlet not = lastdayno % 5;\r\n\t\tlet historyList: any[] = [];\r\n\t\tfor (let i = 0; i <= endIndex; ++i) {\r\n\t\t\tlet {day, price, dayno} = list[i];\r\n\t\t\tif ( dayno % 5 === not) {\r\n\t\t\t\thistoryList.push({day:day, price:this.RestorePrice(price, day, lastDay), ttm:this.CalculateHistoryPE(price, day)});\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.historyData = historyList;\r\n\t}\r\n\r\n\tRestorePrice(price:number, dayFrom:number, dayIndex:number) {\r\n\t\tlet bsum = 0;\r\n\t\tlet pricere = price;\r\n\t\tif (dayFrom < dayIndex) {\r\n\t\tfor (let i = 0; i < this.exrightInfo.length; ++i) {\r\n\t\t\tlet {day, bonus, factor, factore} = this.exrightInfo[i];\r\n\t\t\tif (day <= dayFrom)\r\n\t\t\tcontinue;\r\n\t\t\tif (day > dayIndex)\r\n\t\t\tbreak;\r\n\t\t\tpricere = pricere * factor;\r\n\t\t\tbsum = (bsum + bonus) * factore;\r\n\t\t}\r\n\t\tpricere = pricere - bsum;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tfor (let i = 0; i < this.exrightInfo.length; ++i) {\r\n\t\t\t\tlet {day, bonus, factor, factore} = this.exrightInfo[i];\r\n\t\t\t\tif (day <= dayIndex)\r\n\t\t\t\tcontinue;\r\n\t\t\t\tif (day > dayFrom)\r\n\t\t\t\tbreak;\r\n\t\t\t\tpricere = pricere / factor;\r\n\t\t\t\tbsum = bsum / factore + bonus;\r\n\t\t\t}\r\n\t\t\tpricere = pricere + bsum;\r\n\t\t}\r\n\t\treturn pricere;\r\n\t}\r\n\r\n\tCalculateHistoryPE(price:number, day:number) {\r\n\t\tlet season = GFunc.SeasonnoFromDay(day);\r\n\t\tlet len = this.seasonData.length;\r\n\t\tfor (let i = 0; i < len; ++i) {\r\n\t\t\tlet item = this.seasonData[i];\r\n\t\t\tif (item.season >= season) continue;\r\n\t\t\tif (item.esumorg === undefined) return undefined;\r\n\t\t\tlet {end} = GFunc.SeasonnoToBeginEnd(item.season);\r\n\t\t\tlet pricere = this.RestorePrice(price, day, end);\r\n\t\t\treturn pricere / item.esumorg;\r\n\t\t}\r\n\r\n\t\treturn undefined;\r\n\t}\r\n\r\n\tasync internalStart(param: any) {\r\n\t\tthis.baseItem = param as NStockInfo;\r\n\t\tlet {id} = this.baseItem;\r\n\t\tthis.isMySelect = this.cApp.store.isMySelect(id);\r\n\t\tthis.initLoad();\r\n\t\tthis.openVPage(VStockInfo);\r\n\t}\r\n\r\n\topenMetaView = () => {\r\n\t}\r\n\r\n\tonSelectTag = async () => {\r\n\t\t//await this.loadTags();\r\n\t\tthis.selectedTags = this.cApp.store.stockGroups.getSelected(this.stockTags);\r\n\t\t/*\r\n\t\tthis.cApp.store.stockGroups.filter(v => {\r\n\t\t\tlet i = this.stockTags.findIndex(st => st.tag === v.groupId);\r\n\t\t\treturn i >= 0;\r\n\t\t});\r\n\t\t*/\r\n\t\t//await this.loadTags();\r\n\t\tthis.openVPage(VTags);\r\n\t}\r\n\r\n\tonNewTag = () => {\r\n\t\tthis.openVPage(VNewTag);\r\n\t}\r\n\r\n\tonEditTag = (param: any) => {\r\n\t\tthis.openVPage(VEditTag, param);\r\n\t}\r\n\r\n\tonSaveNewTag = async (data: any) => {\r\n\t\tlet { name } = data;\r\n\t\t//let param = { id: undefined, name: name };\r\n\t\t//let ret = await this.cApp.store.miApi.call('t_tag$save', [this.user.id, undefined, name]);\r\n\t\tlet ret = await this.cApp.miNet.t_tag$save(name);\r\n\t\tlet { retId } = ret;\r\n\t\tif (retId < 0) {\r\n\t\t\talert(name + ' 已经被使用了');\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tthis.cApp.store.stockGroups.add(\r\n\t\t\tnew StockGroup(name, name, this.cApp.miNet)\r\n\t\t);\r\n\t\treturn true;\r\n\t}\r\n\r\n\tonSaveTag = async (data: any) => {\r\n\t\tlet { id, name } = data;\r\n\t\tlet {stockGroups} = this.cApp.store;\r\n\t\tlet param = { id: id, name: name };\r\n\t\tlet exists = stockGroups.exists(id, name);\r\n\t\tif (exists === true) {\r\n\t\t\talert(name + ' 已经被使用了');\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tlet ret = await this.cApp.miNet.t_tag$save(name);\r\n\t\tlet { retId } = ret;\r\n\t\tif (retId === undefined || retId < 0) {\r\n\t\t\talert(name + ' 已经被使用了');\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tlet group = stockGroups.groupFromId(id);\r\n\t\tif (group) {\r\n\t\t\tgroup.name = name;\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\r\n\tonClickSelectTag = async (tag: any, isSelected: boolean) => {\r\n\t\tlet param = {\r\n\t\t\tuser: nav.user.id,\r\n\t\t\ttag: tag.id,\r\n\t\t\tarr1: [\r\n\t\t\t\t{ stock: this.baseItem.id }\r\n\t\t\t]\r\n\t\t};\r\n\t\tif (isSelected === true) {\r\n\t\t\t//let ret = await this.cApp.store.miApi.call('t_tagstock$add', [this.user.id, tag.id, this.baseItem.id]); //.uqs.mi.TagStock.add(param);\r\n\t\t\tawait this.cApp.store.addTagStock(this.baseItem as any);\r\n\t\t\t//let ret = this.cApp.miNet.t_tagstock$add(tag.id, this.baseItem.id);\r\n\t\t\tlet newTag = {\r\n\t\t\t\ttag: {\r\n\t\t\t\t\tid: tag.id,\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.stockTags.push(newTag);\r\n\t\t}\r\n\t\telse {\r\n\t\t\t//let ret = await this.cApp.store.miApi.call('t_tagstock$del', [this.user.id, tag.id, this.baseItem.id]); // //await this.uqs.mi.TagStock.del(param);\r\n\t\t\t//let ret = this.cApp.miNet.t_tagstock$del(tag.id, this.baseItem.id);\r\n\t\t\tawait this.cApp.store.removeTagStock(this.baseItem as any);\r\n\t\t\tlet i = this.stockTags.findIndex(v => v.tag.id === tag.id);\r\n\t\t\tthis.stockTags.splice(i, 1);\r\n\t\t}\r\n\t}\r\n\r\n\tonClickDefaultTag = async (isSelected: boolean) => {\r\n\t\t//let tagid = this.cApp.store.defaultListTagID;\r\n\t\tlet {store} = this.cApp;\r\n\t\tlet {id: groupId} = store.stockGroups.defaultGroup;\r\n\t\tif (isSelected === true) {\r\n\t\t\t//let ret = this.cApp.miNet.t_tagstock$add(tagid, this.baseItem.id);\r\n\t\t\tawait store.addTagStock(this.baseItem as any);\r\n\t\t\tlet newTag = {\r\n\t\t\t\ttag: {\r\n\t\t\t\t\tid: store.stockGroups.defaultGroup.id,\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.stockTags.push(newTag);\r\n\t\t}\r\n\t\telse {\r\n\t\t\t//let ret = await this.cApp.store.miApi.call('t_tagstock$del', [this.user.id, tagid, this.baseItem.id]); // //await this.uqs.mi.TagStock.del(param);\r\n\t\t\tawait this.cApp.store.removeTagStock(this.baseItem as any);\r\n\t\t\t//let ret = this.cApp.miNet.t_tagstock$del(tagid, this.baseItem.id);\r\n\t\t\tlet i = this.stockTags.findIndex(v => v.tag.id === groupId);\r\n\t\t\tthis.stockTags.splice(i, 1);\r\n\t\t}\r\n\t}\r\n\r\n\tshowSelectStock = async (day:number): Promise<any> => {\r\n\t\tlet cStock = new CSelectStock(this.cApp);\r\n\t\tlet item = await cStock.call() as any;\r\n\t\tlet b = {...item}\r\n\t\tb.day = day;\r\n\t\tthis.baseItem = b;\r\n\t\tthis.loaded = false;\r\n\t\tawait this.load();\r\n\t}\r\n\r\n\tchangeDay = async (day:number) => {\r\n\t\tif (this.baseItem.day === day) return;\r\n\t\tlet {id, name, code, symbol} = this.baseItem;\r\n\t\tlet ni = {id:id, name:name, code:code, symbol:symbol, day:day ===0 ? undefined : day};\r\n\t\tthis.baseItem = ni;\r\n\t\tthis.loaded = false;\r\n\t\tawait this.load();\r\n\t}\r\n}\r\n","import { Res, UI } from \"tonva-react\";\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { FieldItem, FieldItemInt, FieldItemNum, FieldItemString, FieldItemId } from \"tonva-react\";\r\nimport { OrderMaster } from \"./BzHelloTonva\";\r\n\r\n/*--fields--*/\r\nconst fields = {\r\n\tid: {\r\n\t\t\"name\": \"id\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Id\"\r\n\t} as FieldItemId,\r\n\tno: {\r\n\t\t\"name\": \"no\",\r\n\t\t\"type\": \"string\",\r\n\t\t\"isKey\": true,\r\n\t\t\"widget\": \"string\",\r\n\t\t\"label\": \"No\"\r\n\t} as FieldItemString,\r\n\tcustomer: {\r\n\t\t\"name\": \"customer\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Customer\"\r\n\t} as FieldItemId,\r\n};\r\n/*==fields==*/\r\n\r\nexport const fieldArr: FieldItem[] = [\r\n\tfields.no, fields.customer, \r\n];\r\n\r\nexport const ui: UI = {\r\n\tlabel: \"OrderMaster\",\r\n\tfieldArr,\r\n\tfields,\r\n};\r\n\r\nexport const res: Res<any> = {\r\n\tzh: {\r\n\t},\r\n\ten: {\r\n\t}\r\n};\r\n\r\nexport function render(item: OrderMaster):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","import { Res, UI } from \"tonva-react\";\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { FieldItem, FieldItemInt, FieldItemNum, FieldItemString, FieldItemId } from \"tonva-react\";\r\nimport { OrderDetail } from \"./BzHelloTonva\";\r\nimport { render as renderCustomer } from './Customer.ui';\r\n\r\n/*--fields--*/\r\nconst fields = {\r\n\tid: {\r\n\t\t\"name\": \"id\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Id\"\r\n\t} as FieldItemId,\r\n\tparent: {\r\n\t\t\"name\": \"parent\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": true,\r\n\t\t\"label\": \"Parent\"\r\n\t} as FieldItemId,\r\n\trow: {\r\n\t\t\"name\": \"row\",\r\n\t\t\"type\": \"integer\",\r\n\t\t\"isKey\": true,\r\n\t\t\"widget\": \"updown\",\r\n\t\t\"label\": \"Row\"\r\n\t} as FieldItemInt,\r\n\tproduct: {\r\n\t\t\"name\": \"product\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Product\"\r\n\t} as FieldItemId,\r\n\tprice: {\r\n\t\t\"name\": \"price\",\r\n\t\t\"type\": \"number\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"number\",\r\n\t\t\"label\": \"Price\"\r\n\t} as FieldItemNum,\r\n\tquantity: {\r\n\t\t\"name\": \"quantity\",\r\n\t\t\"type\": \"number\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"number\",\r\n\t\t\"label\": \"Quantity\"\r\n\t} as FieldItemNum,\r\n\tamount: {\r\n\t\t\"name\": \"amount\",\r\n\t\t\"type\": \"number\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"number\",\r\n\t\t\"label\": \"Amount\"\r\n\t} as FieldItemNum,\r\n};\r\n/*==fields==*/\r\n\r\nexport const fieldArr: FieldItem[] = [\r\n\tfields.parent, fields.row, fields.product, fields.price, fields.quantity, fields.amount, \r\n];\r\n\r\nexport const ui: UI = {\r\n\tlabel: \"OrderDetail\",\r\n\tfieldArr,\r\n\tfields,\r\n};\r\n\r\nexport const res: Res<any> = {\r\n\tzh: {\r\n\t},\r\n\ten: {\r\n\t}\r\n};\r\n\r\nexport function render(item: OrderDetail):JSX.Element {\r\n\tlet {product, price, quantity, amount} = item;\r\n\treturn <div>\r\n\t\t<div>{renderCustomer(product as any)}</div>\r\n\t\t<div className=\"d-flex\">\r\n\t\t\t<div className=\"w-3c\"></div>\r\n\t\t\t<div className=\"w-8c\"><span>数量:</span>{quantity}</div>\r\n\t\t\t单价:{price}\r\n\t\t\t金额:{amount}\r\n\t\t</div>\r\n\t</div>;\r\n};\r\n","import { Res, UI } from \"tonva-react\";\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { FieldItem, FieldItemInt, FieldItemNum, FieldItemString, FieldItemId } from \"tonva-react\";\r\nimport { Tag } from \"./BzHelloTonva\";\r\n\r\n/*--fields--*/\r\nconst fields = {\r\n\tid: {\r\n\t\t\"name\": \"id\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Id\"\r\n\t} as FieldItemId,\r\n\tparent: {\r\n\t\t\"name\": \"parent\",\r\n\t\t\"type\": \"integer\",\r\n\t\t\"isKey\": true,\r\n\t\t\"widget\": \"updown\",\r\n\t\t\"label\": \"Parent\"\r\n\t} as FieldItemInt,\r\n\tname: {\r\n\t\t\"name\": \"name\",\r\n\t\t\"isKey\": true,\r\n\t\t\"label\": \"Name\"\r\n\t} as undefined,\r\n};\r\n/*==fields==*/\r\n\r\nexport const fieldArr: FieldItem[] = [\r\n\tfields.parent, fields.name, \r\n];\r\n\r\nexport const ui: UI = {\r\n\tlabel: \"Tag\",\r\n\tfieldArr,\r\n\tfields,\r\n};\r\n\r\nexport const res: Res<any> = {\r\n\tzh: {\r\n\t},\r\n\ten: {\r\n\t}\r\n};\r\n\r\nexport function render(item: Tag):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","import { Res, UI } from \"tonva-react\";\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { FieldItem, FieldItemInt, FieldItemNum, FieldItemString, FieldItemId } from \"tonva-react\";\r\nimport { Staff } from \"./BzHelloTonva\";\r\n\r\n/*--fields--*/\r\nconst fields = {\r\n\tid: {\r\n\t\t\"name\": \"id\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Id\"\r\n\t} as FieldItemId,\r\n\tno: {\r\n\t\t\"name\": \"no\",\r\n\t\t\"type\": \"string\",\r\n\t\t\"isKey\": true,\r\n\t\t\"widget\": \"string\",\r\n\t\t\"label\": \"No\"\r\n\t} as FieldItemString,\r\n\tfirstName: {\r\n\t\t\"name\": \"firstName\",\r\n\t\t\"type\": \"string\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"string\",\r\n\t\t\"label\": \"FirstName\"\r\n\t} as FieldItemString,\r\n\tlastName: {\r\n\t\t\"name\": \"lastName\",\r\n\t\t\"type\": \"string\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"string\",\r\n\t\t\"label\": \"LastName\"\r\n\t} as FieldItemString,\r\n};\r\n/*==fields==*/\r\n\r\nexport const fieldArr: FieldItem[] = [\r\n\tfields.no, fields.firstName, fields.lastName, \r\n];\r\n\r\nexport const ui: UI = {\r\n\tlabel: \"Staff\",\r\n\tfieldArr,\r\n\tfields,\r\n};\r\n\r\nexport const res: Res<any> = {\r\n\tzh: {\r\n\t},\r\n\ten: {\r\n\t}\r\n};\r\n\r\nexport function render(item: Staff):JSX.Element {\r\n\tlet {firstName, lastName, no} = item;\r\n\treturn <><span>{firstName} {lastName}</span> <span className=\"text-muted ml-auto\">{no}</span></>;\r\n};\r\n","import { Res, UI } from \"tonva-react\";\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { FieldItem, FieldItemInt, FieldItemNum, FieldItemString, FieldItemId } from \"tonva-react\";\r\nimport { $Piecewise } from \"./BzHelloTonva\";\r\n\r\n/*--fields--*/\r\nconst fields = {\r\n\tid: {\r\n\t\t\"name\": \"id\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Id\"\r\n\t} as FieldItemId,\r\n\tname: {\r\n\t\t\"name\": \"name\",\r\n\t\t\"isKey\": true,\r\n\t\t\"label\": \"Name\"\r\n\t} as undefined,\r\n\tmul: {\r\n\t\t\"name\": \"mul\",\r\n\t\t\"type\": \"integer\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"updown\",\r\n\t\t\"label\": \"Mul\"\r\n\t} as FieldItemInt,\r\n\tdiv: {\r\n\t\t\"name\": \"div\",\r\n\t\t\"type\": \"integer\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"updown\",\r\n\t\t\"label\": \"Div\"\r\n\t} as FieldItemInt,\r\n\toffset: {\r\n\t\t\"name\": \"offset\",\r\n\t\t\"type\": \"integer\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"updown\",\r\n\t\t\"label\": \"Offset\"\r\n\t} as FieldItemInt,\r\n\tasc: {\r\n\t\t\"name\": \"asc\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Asc\"\r\n\t} as undefined,\r\n};\r\n/*==fields==*/\r\n\r\nexport const fieldArr: FieldItem[] = [\r\n\tfields.name, fields.mul, fields.div, fields.offset, fields.asc, \r\n];\r\n\r\nexport const ui: UI = {\r\n\tlabel: \"$Piecewise\",\r\n\tfieldArr,\r\n\tfields,\r\n};\r\n\r\nexport const res: Res<any> = {\r\n\tzh: {\r\n\t},\r\n\ten: {\r\n\t}\r\n};\r\n\r\nexport function render(item: $Piecewise):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","import { Res, UI } from \"tonva-react\";\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { FieldItem, FieldItemInt, FieldItemNum, FieldItemString, FieldItemId } from \"tonva-react\";\r\nimport { $PiecewiseDetail } from \"./BzHelloTonva\";\r\n\r\n/*--fields--*/\r\nconst fields = {\r\n\tid: {\r\n\t\t\"name\": \"id\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Id\"\r\n\t} as FieldItemId,\r\n\tparent: {\r\n\t\t\"name\": \"parent\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": true,\r\n\t\t\"label\": \"Parent\"\r\n\t} as FieldItemId,\r\n\trow: {\r\n\t\t\"name\": \"row\",\r\n\t\t\"type\": \"integer\",\r\n\t\t\"isKey\": true,\r\n\t\t\"widget\": \"updown\",\r\n\t\t\"label\": \"Row\"\r\n\t} as FieldItemInt,\r\n\tsec: {\r\n\t\t\"name\": \"sec\",\r\n\t\t\"type\": \"integer\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"updown\",\r\n\t\t\"label\": \"Sec\"\r\n\t} as FieldItemInt,\r\n\tvalue: {\r\n\t\t\"name\": \"value\",\r\n\t\t\"type\": \"integer\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"updown\",\r\n\t\t\"label\": \"Value\"\r\n\t} as FieldItemInt,\r\n};\r\n/*==fields==*/\r\n\r\nexport const fieldArr: FieldItem[] = [\r\n\tfields.parent, fields.row, fields.sec, fields.value, \r\n];\r\n\r\nexport const ui: UI = {\r\n\tlabel: \"$PiecewiseDetail\",\r\n\tfieldArr,\r\n\tfields,\r\n};\r\n\r\nexport const res: Res<any> = {\r\n\tzh: {\r\n\t},\r\n\ten: {\r\n\t}\r\n};\r\n\r\nexport function render(item: $PiecewiseDetail):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","import { Res, UI } from \"tonva-react\";\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { FieldItem, FieldItemInt, FieldItemNum, FieldItemString, FieldItemId } from \"tonva-react\";\r\nimport { Achieve } from \"./BzHelloTonva\";\r\n\r\n/*--fields--*/\r\nconst fields = {\r\n\tid: {\r\n\t\t\"name\": \"id\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Id\"\r\n\t} as FieldItemId,\r\n\tsaleAmount: {\r\n\t\t\"name\": \"saleAmount\",\r\n\t\t\"type\": \"number\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"number\",\r\n\t\t\"label\": \"SaleAmount\"\r\n\t} as FieldItemNum,\r\n\tdeliver: {\r\n\t\t\"name\": \"deliver\",\r\n\t\t\"type\": \"number\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"number\",\r\n\t\t\"label\": \"Deliver\"\r\n\t} as FieldItemNum,\r\n};\r\n/*==fields==*/\r\n\r\nexport const fieldArr: FieldItem[] = [\r\n\tfields.saleAmount, fields.deliver, \r\n];\r\n\r\nexport const ui: UI = {\r\n\tlabel: \"Achieve\",\r\n\tfieldArr,\r\n\tfields,\r\n};\r\n\r\nexport const res: Res<any> = {\r\n\tzh: {\r\n\t},\r\n\ten: {\r\n\t}\r\n};\r\n\r\nexport function render(item: Achieve):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","import { Res, UI } from \"tonva-react\";\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { FieldItem, FieldItemInt, FieldItemNum, FieldItemString, FieldItemId } from \"tonva-react\";\r\nimport { Hours } from \"./BzHelloTonva\";\r\n\r\n/*--fields--*/\r\nconst fields = {\r\n\tid: {\r\n\t\t\"name\": \"id\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Id\"\r\n\t} as FieldItemId,\r\n\tonsite: {\r\n\t\t\"name\": \"onsite\",\r\n\t\t\"type\": \"integer\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"updown\",\r\n\t\t\"label\": \"Onsite\"\r\n\t} as FieldItemInt,\r\n\toffsite: {\r\n\t\t\"name\": \"offsite\",\r\n\t\t\"type\": \"integer\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"updown\",\r\n\t\t\"label\": \"Offsite\"\r\n\t} as FieldItemInt,\r\n\tbreak: {\r\n\t\t\"name\": \"break\",\r\n\t\t\"type\": \"integer\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"updown\",\r\n\t\t\"label\": \"Break\"\r\n\t} as FieldItemInt,\r\n\tsick: {\r\n\t\t\"name\": \"sick\",\r\n\t\t\"type\": \"integer\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"updown\",\r\n\t\t\"label\": \"Sick\"\r\n\t} as FieldItemInt,\r\n\tover: {\r\n\t\t\"name\": \"over\",\r\n\t\t\"type\": \"integer\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"updown\",\r\n\t\t\"label\": \"Over\"\r\n\t} as FieldItemInt,\r\n\tnoTimeLog: {\r\n\t\t\"name\": \"noTimeLog\",\r\n\t\t\"type\": \"integer\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"updown\",\r\n\t\t\"label\": \"NoTimeLog\"\r\n\t} as FieldItemInt,\r\n};\r\n/*==fields==*/\r\n\r\nexport const fieldArr: FieldItem[] = [\r\n\tfields.onsite, fields.offsite, fields.break, fields.sick, fields.over, fields.noTimeLog, \r\n];\r\n\r\nexport const ui: UI = {\r\n\tlabel: \"Hours\",\r\n\tfieldArr,\r\n\tfields,\r\n};\r\n\r\nexport const res: Res<any> = {\r\n\tzh: {\r\n\t},\r\n\ten: {\r\n\t}\r\n};\r\n\r\nexport function render(item: Hours):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","import { Res, UI } from \"tonva-react\";\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { FieldItem, FieldItemInt, FieldItemNum, FieldItemString, FieldItemId } from \"tonva-react\";\r\nimport { CustomerTag } from \"./BzHelloTonva\";\r\n\r\n/*--fields--*/\r\nconst fields = {\r\n\tid: {\r\n\t\t\"name\": \"id\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Id\"\r\n\t} as FieldItemId,\r\n\tid2: {\r\n\t\t\"name\": \"id2\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Id2\"\r\n\t} as FieldItemId,\r\n};\r\n/*==fields==*/\r\n\r\nexport const fieldArr: FieldItem[] = [\r\n\t\r\n];\r\n\r\nexport const ui: UI = {\r\n\tlabel: \"CustomerTag\",\r\n\tfieldArr,\r\n\tfields,\r\n};\r\n\r\nexport const res: Res<any> = {\r\n\tzh: {\r\n\t},\r\n\ten: {\r\n\t}\r\n};\r\n\r\nexport function render(item: CustomerTag):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","import { Res, UI } from \"tonva-react\";\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { FieldItem, FieldItemInt, FieldItemNum, FieldItemString, FieldItemId } from \"tonva-react\";\r\nimport { UserStaff } from \"./BzHelloTonva\";\r\n\r\n/*--fields--*/\r\nconst fields = {\r\n\tid: {\r\n\t\t\"name\": \"id\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Id\"\r\n\t} as FieldItemId,\r\n\tid2: {\r\n\t\t\"name\": \"id2\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Id2\"\r\n\t} as FieldItemId,\r\n};\r\n/*==fields==*/\r\n\r\nexport const fieldArr: FieldItem[] = [\r\n\t\r\n];\r\n\r\nexport const ui: UI = {\r\n\tlabel: \"UserStaff\",\r\n\tfieldArr,\r\n\tfields,\r\n};\r\n\r\nexport const res: Res<any> = {\r\n\tzh: {\r\n\t},\r\n\ten: {\r\n\t}\r\n};\r\n\r\nexport function render(item: UserStaff):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","import { Res, UI } from \"tonva-react\";\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { FieldItem, FieldItemInt, FieldItemNum, FieldItemString, FieldItemId } from \"tonva-react\";\r\nimport { Account } from \"./BruceYuMi\";\r\n\r\n/*--fields--*/\r\nconst fields = {\r\n\tid: {\r\n\t\t\"name\": \"id\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Id\"\r\n\t} as FieldItemId,\r\n\tno: {\r\n\t\t\"name\": \"no\",\r\n\t\t\"type\": \"string\",\r\n\t\t\"isKey\": true,\r\n\t\t\"widget\": \"string\",\r\n\t\t\"label\": \"No\"\r\n\t} as FieldItemString,\r\n\tname: {\r\n\t\t\"name\": \"name\",\r\n\t\t\"type\": \"string\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"string\",\r\n\t\t\"label\": \"Name\"\r\n\t} as FieldItemString,\r\n};\r\n/*==fields==*/\r\n\r\nexport const fieldArr: FieldItem[] = [\r\n\tfields.no, fields.name, \r\n];\r\n\r\nexport const ui: UI = {\r\n\tlabel: \"Account\",\r\n\tfieldArr,\r\n\tfields,\r\n};\r\n\r\nexport const res: Res<any> = {\r\n\tzh: {\r\n\t},\r\n\ten: {\r\n\t}\r\n};\r\n\r\nexport function render(item: Account):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","import { Res, UI } from \"tonva-react\";\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { FieldItem, FieldItemInt, FieldItemNum, FieldItemString, FieldItemId } from \"tonva-react\";\r\nimport { Holding } from \"./BruceYuMi\";\r\n\r\n/*--fields--*/\r\nconst fields = {\r\n\tid: {\r\n\t\t\"name\": \"id\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Id\"\r\n\t} as FieldItemId,\r\n\taccount: {\r\n\t\t\"name\": \"account\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": true,\r\n\t\t\"label\": \"Account\"\r\n\t} as FieldItemId,\r\n\tstock: {\r\n\t\t\"name\": \"stock\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": true,\r\n\t\t\"label\": \"Stock\"\r\n\t} as FieldItemId,\r\n};\r\n/*==fields==*/\r\n\r\nexport const fieldArr: FieldItem[] = [\r\n\tfields.account, fields.stock, \r\n];\r\n\r\nexport const ui: UI = {\r\n\tlabel: \"Holding\",\r\n\tfieldArr,\r\n\tfields,\r\n};\r\n\r\nexport const res: Res<any> = {\r\n\tzh: {\r\n\t},\r\n\ten: {\r\n\t}\r\n};\r\n\r\nexport function render(item: Holding):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","import { Res, UI } from \"tonva-react\";\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { FieldItem, FieldItemInt, FieldItemNum, FieldItemString, FieldItemId } from \"tonva-react\";\r\nimport { Transaction } from \"./BruceYuMi\";\r\n\r\n/*--fields--*/\r\nconst fields = {\r\n\tid: {\r\n\t\t\"name\": \"id\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Id\"\r\n\t} as FieldItemId,\r\n\tholding: {\r\n\t\t\"name\": \"holding\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": true,\r\n\t\t\"label\": \"Holding\"\r\n\t} as FieldItemId,\r\n\ttick: {\r\n\t\t\"name\": \"tick\",\r\n\t\t\"isKey\": true,\r\n\t\t\"label\": \"Tick\"\r\n\t} as undefined,\r\n\tprice: {\r\n\t\t\"name\": \"price\",\r\n\t\t\"type\": \"integer\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"updown\",\r\n\t\t\"label\": \"Price\"\r\n\t} as FieldItemInt,\r\n\tquantity: {\r\n\t\t\"name\": \"quantity\",\r\n\t\t\"type\": \"integer\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"updown\",\r\n\t\t\"label\": \"Quantity\"\r\n\t} as FieldItemInt,\r\n\tamount: {\r\n\t\t\"name\": \"amount\",\r\n\t\t\"type\": \"integer\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"updown\",\r\n\t\t\"label\": \"Amount\"\r\n\t} as FieldItemInt,\r\n};\r\n/*==fields==*/\r\n\r\nexport const fieldArr: FieldItem[] = [\r\n\tfields.holding, fields.tick, fields.price, fields.quantity, fields.amount, \r\n];\r\n\r\nexport const ui: UI = {\r\n\tlabel: \"Transaction\",\r\n\tfieldArr,\r\n\tfields,\r\n};\r\n\r\nexport const res: Res<any> = {\r\n\tzh: {\r\n\t},\r\n\ten: {\r\n\t}\r\n};\r\n\r\nexport function render(item: Transaction):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","import { Res, UI } from \"tonva-react\";\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { FieldItem, FieldItemInt, FieldItemNum, FieldItemString, FieldItemId } from \"tonva-react\";\r\nimport { Stock } from \"./BruceYuMi\";\r\n\r\n/*--fields--*/\r\nconst fields = {\r\n\tid: {\r\n\t\t\"name\": \"id\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Id\"\r\n\t} as FieldItemId,\r\n\tmarket: {\r\n\t\t\"name\": \"market\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": true,\r\n\t\t\"label\": \"Market\"\r\n\t} as FieldItemId,\r\n\tcode: {\r\n\t\t\"name\": \"code\",\r\n\t\t\"type\": \"string\",\r\n\t\t\"isKey\": true,\r\n\t\t\"widget\": \"string\",\r\n\t\t\"label\": \"Code\"\r\n\t} as FieldItemString,\r\n\tname: {\r\n\t\t\"name\": \"name\",\r\n\t\t\"type\": \"string\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"string\",\r\n\t\t\"label\": \"Name\"\r\n\t} as FieldItemString,\r\n};\r\n/*==fields==*/\r\n\r\nexport const fieldArr: FieldItem[] = [\r\n\tfields.market, fields.code, fields.name, \r\n];\r\n\r\nexport const ui: UI = {\r\n\tlabel: \"Stock\",\r\n\tfieldArr,\r\n\tfields,\r\n};\r\n\r\nexport const res: Res<any> = {\r\n\tzh: {\r\n\t},\r\n\ten: {\r\n\t}\r\n};\r\n\r\nexport function render(item: Stock):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","import { Res, UI } from \"tonva-react\";\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { FieldItem, FieldItemInt, FieldItemNum, FieldItemString, FieldItemId } from \"tonva-react\";\r\nimport { Market } from \"./BruceYuMi\";\r\n\r\n/*--fields--*/\r\nconst fields = {\r\n\tid: {\r\n\t\t\"name\": \"id\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Id\"\r\n\t} as FieldItemId,\r\n\tname: {\r\n\t\t\"name\": \"name\",\r\n\t\t\"type\": \"string\",\r\n\t\t\"isKey\": true,\r\n\t\t\"widget\": \"string\",\r\n\t\t\"label\": \"Name\"\r\n\t} as FieldItemString,\r\n\tcurrency: {\r\n\t\t\"name\": \"currency\",\r\n\t\t\"type\": \"string\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"string\",\r\n\t\t\"label\": \"Currency\"\r\n\t} as FieldItemString,\r\n};\r\n/*==fields==*/\r\n\r\nexport const fieldArr: FieldItem[] = [\r\n\tfields.name, fields.currency, \r\n];\r\n\r\nexport const ui: UI = {\r\n\tlabel: \"Market\",\r\n\tfieldArr,\r\n\tfields,\r\n};\r\n\r\nexport const res: Res<any> = {\r\n\tzh: {\r\n\t},\r\n\ten: {\r\n\t}\r\n};\r\n\r\nexport function render(item: Market):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","import { Res, UI } from \"tonva-react\";\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { FieldItem, FieldItemInt, FieldItemNum, FieldItemString, FieldItemId } from \"tonva-react\";\r\nimport { Portfolio } from \"./BruceYuMi\";\r\n\r\n/*--fields--*/\r\nconst fields = {\r\n\tid: {\r\n\t\t\"name\": \"id\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Id\"\r\n\t} as FieldItemId,\r\n\tquantity: {\r\n\t\t\"name\": \"quantity\",\r\n\t\t\"type\": \"integer\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"updown\",\r\n\t\t\"label\": \"Quantity\"\r\n\t} as FieldItemInt,\r\n};\r\n/*==fields==*/\r\n\r\nexport const fieldArr: FieldItem[] = [\r\n\tfields.quantity, \r\n];\r\n\r\nexport const ui: UI = {\r\n\tlabel: \"Portfolio\",\r\n\tfieldArr,\r\n\tfields,\r\n};\r\n\r\nexport const res: Res<any> = {\r\n\tzh: {\r\n\t},\r\n\ten: {\r\n\t}\r\n};\r\n\r\nexport function render(item: Portfolio):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","import { Res, UI } from \"tonva-react\";\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { FieldItem, FieldItemInt, FieldItemNum, FieldItemString, FieldItemId } from \"tonva-react\";\r\nimport { StockValue } from \"./BruceYuMi\";\r\n\r\n/*--fields--*/\r\nconst fields = {\r\n\tid: {\r\n\t\t\"name\": \"id\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Id\"\r\n\t} as FieldItemId,\r\n\tmiRate: {\r\n\t\t\"name\": \"miRate\",\r\n\t\t\"type\": \"integer\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"updown\",\r\n\t\t\"label\": \"MiRate\"\r\n\t} as FieldItemInt,\r\n\tttm: {\r\n\t\t\"name\": \"ttm\",\r\n\t\t\"type\": \"integer\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"updown\",\r\n\t\t\"label\": \"Ttm\"\r\n\t} as FieldItemInt,\r\n\tdivident: {\r\n\t\t\"name\": \"divident\",\r\n\t\t\"type\": \"integer\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"updown\",\r\n\t\t\"label\": \"Divident\"\r\n\t} as FieldItemInt,\r\n\tprice: {\r\n\t\t\"name\": \"price\",\r\n\t\t\"type\": \"integer\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"updown\",\r\n\t\t\"label\": \"Price\"\r\n\t} as FieldItemInt,\r\n\troe: {\r\n\t\t\"name\": \"roe\",\r\n\t\t\"type\": \"integer\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"updown\",\r\n\t\t\"label\": \"Roe\"\r\n\t} as FieldItemInt,\r\n\tinc1: {\r\n\t\t\"name\": \"inc1\",\r\n\t\t\"type\": \"integer\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"updown\",\r\n\t\t\"label\": \"Inc1\"\r\n\t} as FieldItemInt,\r\n\tinc2: {\r\n\t\t\"name\": \"inc2\",\r\n\t\t\"type\": \"integer\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"updown\",\r\n\t\t\"label\": \"Inc2\"\r\n\t} as FieldItemInt,\r\n\tinc3: {\r\n\t\t\"name\": \"inc3\",\r\n\t\t\"type\": \"integer\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"updown\",\r\n\t\t\"label\": \"Inc3\"\r\n\t} as FieldItemInt,\r\n\tinc4: {\r\n\t\t\"name\": \"inc4\",\r\n\t\t\"type\": \"integer\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"updown\",\r\n\t\t\"label\": \"Inc4\"\r\n\t} as FieldItemInt,\r\n\tpreInc: {\r\n\t\t\"name\": \"preInc\",\r\n\t\t\"type\": \"integer\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"updown\",\r\n\t\t\"label\": \"PreInc\"\r\n\t} as FieldItemInt,\r\n\tmarketValue: {\r\n\t\t\"name\": \"marketValue\",\r\n\t\t\"type\": \"integer\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"updown\",\r\n\t\t\"label\": \"MarketValue\"\r\n\t} as FieldItemInt,\r\n};\r\n/*==fields==*/\r\n\r\nexport const fieldArr: FieldItem[] = [\r\n\tfields.miRate, fields.ttm, fields.divident, fields.price, fields.roe, fields.inc1, fields.inc2, fields.inc3, fields.inc4, fields.preInc, fields.marketValue, \r\n];\r\n\r\nexport const ui: UI = {\r\n\tlabel: \"StockValue\",\r\n\tfieldArr,\r\n\tfields,\r\n};\r\n\r\nexport const res: Res<any> = {\r\n\tzh: {\r\n\t},\r\n\ten: {\r\n\t}\r\n};\r\n\r\nexport function render(item: StockValue):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","import { Res, UI } from \"tonva-react\";\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { FieldItem, FieldItemInt, FieldItemNum, FieldItemString, FieldItemId } from \"tonva-react\";\r\nimport { AccountValue } from \"./BruceYuMi\";\r\n\r\n/*--fields--*/\r\nconst fields = {\r\n\tid: {\r\n\t\t\"name\": \"id\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Id\"\r\n\t} as FieldItemId,\r\n\tmi: {\r\n\t\t\"name\": \"mi\",\r\n\t\t\"type\": \"integer\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"updown\",\r\n\t\t\"label\": \"Mi\"\r\n\t} as FieldItemInt,\r\n\tmarket: {\r\n\t\t\"name\": \"market\",\r\n\t\t\"type\": \"integer\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"updown\",\r\n\t\t\"label\": \"Market\"\r\n\t} as FieldItemInt,\r\n\tcount: {\r\n\t\t\"name\": \"count\",\r\n\t\t\"type\": \"integer\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"updown\",\r\n\t\t\"label\": \"Count\"\r\n\t} as FieldItemInt,\r\n};\r\n/*==fields==*/\r\n\r\nexport const fieldArr: FieldItem[] = [\r\n\tfields.mi, fields.market, fields.count, \r\n];\r\n\r\nexport const ui: UI = {\r\n\tlabel: \"AccountValue\",\r\n\tfieldArr,\r\n\tfields,\r\n};\r\n\r\nexport const res: Res<any> = {\r\n\tzh: {\r\n\t},\r\n\ten: {\r\n\t}\r\n};\r\n\r\nexport function render(item: AccountValue):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","import { Res, UI } from \"tonva-react\";\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { FieldItem, FieldItemInt, FieldItemNum, FieldItemString, FieldItemId } from \"tonva-react\";\r\nimport { UserAccount } from \"./BruceYuMi\";\r\n\r\n/*--fields--*/\r\nconst fields = {\r\n\tid: {\r\n\t\t\"name\": \"id\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Id\"\r\n\t} as FieldItemId,\r\n\tid2: {\r\n\t\t\"name\": \"id2\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Id2\"\r\n\t} as FieldItemId,\r\n};\r\n/*==fields==*/\r\n\r\nexport const fieldArr: FieldItem[] = [\r\n\t\r\n];\r\n\r\nexport const ui: UI = {\r\n\tlabel: \"UserAccount\",\r\n\tfieldArr,\r\n\tfields,\r\n};\r\n\r\nexport const res: Res<any> = {\r\n\tzh: {\r\n\t},\r\n\ten: {\r\n\t}\r\n};\r\n\r\nexport function render(item: UserAccount):JSX.Element {\r\n\treturn <>{JSON.stringify(item)}</>;\r\n};\r\n","export class SlrForEarning {\r\n  slope: number;\r\n  intercept: number;\r\n  y: number[];\r\n  slopeR: number;\r\n  endY: number;\r\n  r2: number;\r\n\r\n  constructor(y:number[]) {\r\n    this.y = y;\r\n    this.regress();\r\n    let score = this.score();\r\n    this.r2 = score.r2;\r\n  }\r\n\r\n  regress() {\r\n    const n = this.y.length;\r\n    let xSum = 0;\r\n    let ySum = 0;\r\n  \r\n    let xSquared = 0;\r\n    let xY = 0;\r\n  \r\n    for (let x = 0; x < n; ++x) {\r\n      xSum += x;\r\n      ySum += this.y[x];\r\n      xSquared += x * x;\r\n      xY += x * this.y[x];\r\n    }\r\n  \r\n    const numerator = n * xY - xSum * ySum;\r\n    this.slope = numerator / (n * xSquared - xSum * xSum);\r\n    this.intercept = (1 / n) * ySum - this.slope * (1 / n) * xSum;\r\n\r\n    let ym = this.slope > 0 ? this.predict(n-2) : this.predict(1);\r\n    this.slopeR = ym < 0.01 ? undefined : this.slope / ym;\r\n  }\r\n\r\n  score() {\r\n    const n = this.y.length;\r\n    const y2 = new Array(n);\r\n    for (let i = 0; i < n; i++) {\r\n      y2[i] = this.predict(i);\r\n    }\r\n\r\n    let xSum = 0;\r\n    let ySum = 0;\r\n    let chi2 = 0;\r\n    let rmsd = 0;\r\n    let xSquared = 0;\r\n    let ySquared = 0;\r\n    let xY = 0;\r\n    for (let i = 0; i < n; i++) {\r\n      let yi2 = y2[i];\r\n      xSum += yi2;\r\n      let yi = this.y[i];\r\n      ySum += yi;\r\n      xSquared += yi2 * yi2;\r\n      ySquared += yi * yi;\r\n      xY += yi2 * yi;\r\n      let yiyi2 = yi - yi2;\r\n      if (yi !== 0) {\r\n        chi2 += (yiyi2 * yiyi2) / yi;\r\n      }\r\n      rmsd += yiyi2 * yiyi2;\r\n    }\r\n\r\n    const r =\r\n      (n * xY - xSum * ySum) /\r\n      Math.sqrt((n * xSquared - xSum * xSum) * (n * ySquared - ySum * ySum));\r\n\r\n    return {\r\n      r: r,\r\n      r2: r * r,\r\n      chi2: chi2,\r\n      rmsd: Math.sqrt(rmsd / n)\r\n    };\r\n  }\r\n\r\n\r\n  predict(x:number) {\r\n    return this.slope * x + this.intercept;\r\n  }\r\n\r\n  computeX(y:number) {\r\n    return (y - this.intercept) / this.slope;\r\n  }\r\n}\r\n","export class ErForEarning {\r\n  A:number;\r\n  B:number;\r\n  y: number[];\r\n  r2: number;\r\n\r\n  constructor(y:number[]) {\r\n    this.y = y;\r\n    this.regress();\r\n    let score = this.score();\r\n    this.r2 = score.r2;\r\n  }\r\n\r\n  regress() {\r\n    const n = this.y.length;\r\n    let xSum = 0;\r\n    let ySum = 0;\r\n  \r\n    let xSquared = 0;\r\n    let xY = 0;\r\n  \r\n    for (let x = 0; x < n; ++x) {\r\n      xSum += x;\r\n      let yx = Math.log(this.y[x]);\r\n      ySum += yx;\r\n      xSquared += x * x;\r\n      xY += x * yx;\r\n    }\r\n  \r\n    const numerator = n * xY - xSum * ySum;\r\n    let slope = numerator / (n * xSquared - xSum * xSum);\r\n    let intercept = (1 / n) * ySum - slope * (1 / n) * xSum;\r\n    this.A = Math.exp(intercept);\r\n    this.B = slope;\r\n  }\r\n\r\n  score() {\r\n    const n = this.y.length;\r\n    const y2 = new Array(n);\r\n    for (let i = 0; i < n; i++) {\r\n      y2[i] = this.predict(i);\r\n    }\r\n\r\n    let xSum = 0;\r\n    let ySum = 0;\r\n    let chi2 = 0;\r\n    let rmsd = 0;\r\n    let xSquared = 0;\r\n    let ySquared = 0;\r\n    let xY = 0;\r\n    for (let i = 0; i < n; i++) {\r\n      let yi2 = y2[i];\r\n      xSum += yi2;\r\n      let yi = this.y[i];\r\n      ySum += yi;\r\n      xSquared += yi2 * yi2;\r\n      ySquared += yi * yi;\r\n      xY += yi2 * yi;\r\n      let yiyi2 = yi - yi2;\r\n      if (yi !== 0) {\r\n        chi2 += (yiyi2 * yiyi2) / yi;\r\n      }\r\n      rmsd += yiyi2 * yiyi2;\r\n    }\r\n\r\n    const r =\r\n      (n * xY - xSum * ySum) /\r\n      Math.sqrt((n * xSquared - xSum * xSum) * (n * ySquared - ySum * ySum));\r\n\r\n    return {\r\n      r: r,\r\n      r2: r * r,\r\n      chi2: chi2,\r\n      rmsd: Math.sqrt(rmsd / n)\r\n    };\r\n  }\r\n\r\n  predict(x:number) {\r\n    return this.A * Math.exp(x * this.B);\r\n  }\r\n}\r\n","/*eslint @typescript-eslint/no-unused-vars: [\"off\", { \"vars\": \"all\" }]*/\r\nimport { FA, LMR } from 'tonva-react';\r\nimport { NStockInfo } from '../stockinfo';\r\nimport {percent0, percent1, number, numberToMarketValue, calculateZZ3} from '../tool';\r\n\r\nfunction renderSortCol(radioName:string, sortMethod:string, caption:string, \r\n\tsort: (sortMethod:string) => void, defaultSort:string) {\r\n\treturn <label className=\"btn btn-outline-info mb-0\">\r\n\t\t<input type=\"radio\" className=\"btn-sm btn-check mr-1\"\r\n\t\t\tname={radioName} defaultChecked={sortMethod === defaultSort}\r\n\t\t\tonClick={() => sort(sortMethod)} />\r\n\t\t{caption}\r\n\t</label>\r\n}\r\n\r\nexport function renderSortHeaders(radioName:string, defaultSort:string, sort: (sortMethod:string) => void) {\r\n\tif (!defaultSort) defaultSort = 'tagv';\r\n\treturn <div className=\"btn-group\" role=\"group\" aria-label=\"Basic radio toggle button group\">\r\n\t\t{renderSortCol(radioName, 'tagv', '米息分', sort, defaultSort)}\r\n\t\t{renderSortCol(radioName, 'tagpe', 'TTM', sort, defaultSort)}\r\n\t\t{renderSortCol(radioName, 'tagdp', '股息率', sort, defaultSort)}\r\n\t</div>;\r\n}\r\n\r\nfunction renderValue(caption:string, value:number, valueType:'p0'|'p1'|'n1'|'n2'|'yi'):JSX.Element {\r\n\tconst _cn = 'px-2 mb-1 text-right '; \r\n\tlet cn = _cn + 'c5';\r\n\tlet cnYI = _cn + 'c5'\r\n\tlet vStr:string;\r\n\tif (isNaN(value) === true) {\r\n\t\tvStr = '-'\r\n\t}\r\n\telse {\r\n\t\tswitch (valueType) {\r\n\t\t\tcase 'p0': vStr = percent0(value); break;\r\n\t\t\tcase 'p1': vStr = percent1(value); break;\r\n\t\t\tcase 'n1': vStr = number(value, 1); break;\r\n\t\t\tcase 'n2': vStr = number(value, 2); break;\r\n\t\t\tcase 'yi': \r\n\t\t\t\tvStr = numberToMarketValue(value);\r\n\t\t\t\tcn = cnYI;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\treturn <div key={caption} className={cn}>\r\n\t\t<span className=\"text-muted small\">{caption}</span><br />\r\n\t\t{vStr}\r\n\t</div>;\r\n}\r\n\r\nexport function renderStockInfoRow(row: NStockInfo, onClickName: (row:NStockInfo) => void, inputSelect:JSX.Element, right:JSX.Element):JSX.Element {\r\n  \tlet { id, name, code, pe, roe, price, divyield, v, order, symbol, l, e, ep, e3, total } = row;\r\n  \tlet zzl = calculateZZ3((row as any).dataArr);\r\n  \tlet left = <div className=\"cursor-pointer\" onClick={()=>onClickName(row)}>\r\n\t\t<span className=\"text-primary\">{name}</span>\r\n\t\t&nbsp; \r\n\t\t<span className=\"text-info\">{code}</span>\r\n\t  \t&nbsp;\r\n\t\t<small className=\"small ml-1\"><span className=\"text-danger\">{order}</span></small>\r\n  \t</div>;\r\n\tlet rows:[string,number,'p0'|'p1'|'n1'|'n2'|'yi'][] = [\r\n\t\t['米息分', Math.log2(v), 'n1'],\r\n\t\t['米息率', v, 'n1'],\r\n\t\t['股息率', divyield*100, 'n1'],\r\n\t\t['TTM', pe, 'n1'],\r\n\t\t['价格', price, 'n2'],\r\n\t\t['ROE', roe*100, 'n1'],\r\n\t\t['预增', l, 'p0'],\r\n\t\t['现增', zzl[3], 'p0'],\r\n\t\t['增 1', zzl[2], 'p0'],\r\n\t\t['增 2', zzl[1], 'p0'],\r\n\t\t['增 3', zzl[0], 'p0'],\r\n\t\t['市值', total*price, 'yi'],\r\n  \t];\r\n\tlet inputSelectSpan:any;\r\n\tif (inputSelect) {\r\n\t\tinputSelectSpan = <span className=\"ml-4\">{inputSelect}</span>\r\n\t}\r\n  \treturn <div className=\"d-block border-top\">\r\n\t\t<LMR className=\"px-2 py-1 bg-light\" left={left} right = {right}>{inputSelectSpan}</LMR>\r\n\t\t<div className=\"d-flex flex-wrap p-1\" >\r\n\t\t\t{rows.map(v => renderValue(v[0], v[1], v[2]))}\r\n\t  \t</div>\r\n  \t</div>;\r\n}\r\n\r\nexport function renderStockUrl(row: NStockInfo) {\r\n    let { symbol } = row;\r\n\treturn <a className=\"text-info\" href={`https://finance.sina.com.cn/realstock/company/${symbol}/nc.shtml`} target=\"_blank\" rel=\"noopener noreferrer\" onClick={(e)=>{e.stopPropagation();}}>\r\n\t\t<FA name=\"angle-double-right\" />\r\n\t</a>;\r\n}","export function numberToFixString(n: number, w = 2) {\r\n    return n === undefined ? '' : n.toFixed(w);\r\n}\r\n\r\nexport function number(n: number, w=2) {\r\n\treturn n === undefined ? '' : n.toFixed(w);\r\n}\r\n\r\nexport function numberToMarketValue(n: number) {\r\n\treturn n === undefined || isNaN(n) ? '' : Math.round(n/10000).toString(); // + '亿';\r\n}\r\n\r\nexport function numberToString(n: number, precision = 2) {\r\n\treturn n === undefined ? '' : n.toPrecision(precision);\r\n}\r\n\r\nexport function numberToPrecision(n: number, precision = 4) {\r\n\treturn n === undefined ? undefined : Number.parseFloat(n.toPrecision(precision));\r\n}\r\n\r\nexport function percentToFixString(n: number) {\r\n\treturn n === undefined || isNaN(n) ? '' : (n * 100).toFixed(2) + '%';\r\n}\r\n\r\nexport function percent0(n: number) {\r\n\treturn n === undefined || isNaN(n) ? '' : (n * 100).toFixed(0) + '%';\r\n}\r\nexport function percent1(n: number) {\r\n\treturn n === undefined || isNaN(n) ? '' : (n * 100).toFixed(1) + '%';\r\n}\r\n\r\nexport function warningTypeString(t: string) {\r\n\tswitch (t) {\r\n\t\tcase 'gt': return '大于';\r\n\t\tcase 'lt': return '小于';\r\n\t\tdefault: return t;\r\n\t}\r\n}\r\n\r\nexport function predictCutRatio(r2:number) {\r\n\treturn r2 * 2 - r2 * r2;\r\n}\r\n\r\nexport function evaluatePricePrice(iRate:number, e1:number, e2:number, e3:number) {\r\n\tlet r = 1 + iRate;\r\n\tlet r2 = r * r;\r\n\tlet r3 = r2 * r;\r\n\treturn (e1/r + e2 /r2 + e3 / r3 + e3 / iRate / r3) / 2;\r\n}\r\n\r\nexport function calculateV(z:number, divyield:number, pe:number) {\r\n\tif (pe === undefined || isNaN(pe)) {\r\n\t\treturn undefined;\r\n\t}\r\n\r\n\tlet r = 0;\r\n\tif (z !== undefined) {\r\n\t\tif (z > 0.25) {\r\n\t\tz = 0.25;\r\n\t\t}\r\n\t\tr += z * 100;\r\n\t}\r\n\tif (divyield !== undefined) {\r\n\t\tr += divyield * 100;\r\n\t}\r\n\treturn r / pe;\r\n}\r\n\r\nexport function calculateVN(z:number, e:number, bonus:number, price:number) {\r\n\tif (price === undefined || isNaN(price) || e === undefined || isNaN(e)) {\r\n\t\treturn undefined;\r\n\t}\r\n\r\n\tlet r = 0;\r\n\tif (z !== undefined && e > 0) {\r\n\t\tif (z > 0.25) {\r\n\t\tz = 0.24 + Math.pow((z-0.24)*100, 0.6667) / 100;\r\n\t\t}\r\n\t\tz = 1 + z;\r\n\t\tz = z * z * z - 1;\r\n\t\tr += z * e * 100;\r\n\t}\r\n\tif (bonus !== undefined && !isNaN(bonus)) {\r\n\t\tr += bonus * 100;\r\n\t}\r\n\treturn r / price;\r\n}\r\n\r\nexport function calculateZZ3(data:number[]) {\r\n\tlet ret:number[] = [undefined, undefined, undefined, undefined] ;\r\n\tif (data === undefined)\r\n\t\treturn ret;\r\n\tlet len = data.length;\r\n\tif (len < 5)\r\n\t\treturn ret;\r\n\r\n\tlet funcz = (n:number, p:number) => {\r\n\t\tif (p <= 0 || n <= 0)\r\n\t\treturn undefined;\r\n\t\treturn ((n / p) - 1);\r\n\t}\r\n\tfor (let i = 0; i < 4; ++i) {\r\n\t\tret[i] = funcz(data[i+1], data[i]);\r\n\t}\r\n\treturn ret;\r\n}\r\n\r\n//export function caption = (value:string) => <span className=\"text-muted small\">{value}</span>;\r\n\r\nexport function MonthnoFromDay(day:number) {\r\n\tlet year = Math.floor(day/10000);\r\n\tlet month = Math.floor((day%10000)/100) - 1;\r\n\treturn (year-1995)*12+month;\r\n}\r\n\r\nexport function SeasonnoFromDay(day:number) {\r\n\tlet year = Math.floor(day/10000);\r\n\tlet month = Math.floor((day%10000)/100) - 1;\r\n\tlet season = Math.floor(month / 3);\r\n\treturn (year-1995)*4 + season;\r\n}\r\n\r\nexport function SeasonnoFromYearMonth(year:number, month:number) {\r\n\tlet season = Math.floor((month-1) / 3);\r\n\treturn (year-1995)*4 + season;\r\n}\r\n\r\nexport function SeasonnoToYearMonth(no: number) {\r\n\tlet year = Math.floor(no / 4) + 1995;\r\n\tlet month = (Math.floor(no % 4) + 1) * 3;\r\n\treturn year * 100 + month;\r\n}\r\n\r\nexport function SeasonnoToBeginEnd(season:number) {\r\n\tlet year = (1995 + Math.floor(season / 4)) * 10000;\r\n\tlet s = season % 4;\r\n\tif (s === 0) {\r\n\t\treturn {begin: year + 101, end: year + 331};\r\n\t} \r\n\tif (s === 1) {\r\n\t\treturn {begin: year + 401, end: year + 630};\r\n\t}\r\n\tif (s === 2) {\r\n\t\treturn {begin: year + 701, end: year + 930};\r\n\t}\r\n\treturn {begin: year + 1001, end: year + 1231};\r\n}\r\n\r\nexport function CalculatePredictAvg(arr: {predictpe:number}[]) {\r\n\tlet ret : {avg20:number, avg50:number, avg100:number} = {avg20:undefined, avg50:undefined, avg100:undefined};\r\n\r\n\tlet length = arr.length;\r\n\tlet calcuOne = (count:number) : number => {\r\n\t\tlet endIndex = count;\r\n\t\tif (endIndex > length)\r\n\t\tendIndex = length;\r\n\t\tif (endIndex >= 10) {\r\n\t\tlet sum = 0;\r\n\t\tfor (let i = 3; i < endIndex; ++i) {\r\n\t\t\tsum += arr[i].predictpe\r\n\t\t}\r\n\t\treturn sum / (endIndex - 3);\r\n\t\t}\r\n\t\telse {\r\n\t\treturn undefined;\r\n\t\t}\r\n\t}\r\n\r\n\tret.avg20 = calcuOne(20);\r\n\tret.avg50 = calcuOne(50);\r\n\tret.avg100 = calcuOne(100);\r\n\treturn ret;\r\n}\r\n\r\nexport function CalculateValueAvg(arr: {v:number}[]) {\r\n\tlet ret : {avg20:number, avg50:number, avg100:number, avg:number} = {avg20:undefined, avg50:undefined, avg100:undefined, avg:undefined};\r\n\r\n\tlet length = arr.length;\r\n\tlet calcuOne = (count:number) : number => {\r\n\t\tlet endIndex = count;\r\n\t\tif (count === 0 || endIndex > length)\r\n\t\tendIndex = length;\r\n\t\tif (endIndex >= 10) {\r\n\t\tlet sum = 0;\r\n\t\tfor (let i = 3; i < endIndex; ++i) {\r\n\t\t\tsum += arr[i].v;\r\n\t\t}\r\n\t\treturn sum / (endIndex - 3);\r\n\t\t}\r\n\t\telse {\r\n\t\treturn undefined;\r\n\t\t}\r\n\t}\r\n\r\n\tret.avg20 = calcuOne(20);\r\n\tret.avg50 = calcuOne(50);\r\n\tret.avg100 = calcuOne(100);\r\n\tret.avg = calcuOne(0);\r\n\treturn ret;\r\n}\r\n","export * from './types';\r\nexport * from './store';\r\nexport * from './sortStocks';\r\nexport * from './stockGroup';\r\nexport * from './stockGroups';\r\n","import { ReportHandler } from 'web-vitals';\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport 'bootstrap/dist/css/bootstrap.css';\r\nimport './index.css';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport { App } from 'uq-app';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n","function getsortFunc(sortType:string) {\r\n\tswitch (sortType) {\r\n\t\tcase 'tagpe':\r\n\t\t\treturn (a:any, b:any) => a.pe - b.pe;\r\n\t\tcase 'tagdp': \r\n\t\t\treturn (a:any, b:any) => b.divyield - a.divyield;\r\n\t\tdefault:\r\n\t\t\treturn (a:any, b:any) => b.v - a.v;\r\n\t}\r\n}\r\n\r\nexport function sortStocks(sortType:string, arr:any[]) {\r\n\tarr.sort(getsortFunc(sortType));\r\n\tlet o = 1;\r\n\tfor (let item of arr) {\r\n\t\titem.order = o;\r\n\t\t++o;\r\n\t}\r\n}\r\n","//=== UqApp builder created on Wed Mar 10 2021 17:59:38 GMT-0500 (GMT-05:00) ===//\r\nimport { CSub, CBase, CAppBase, IConstructor } from 'tonva-react';\r\nimport { UQs } from './uqs';\r\nimport { CApp } from './CApp';\r\n\r\nexport abstract class CUqBase extends CBase<CApp, UQs> {\r\n}\r\n\r\nexport abstract class CUqSub<A extends CAppBase<U>, U, T extends CBase<A,U>> extends CSub<A, U, T> {\r\n}\r\n\r\nexport abstract class CUqApp extends CAppBase<UQs> {\r\n\tprotected newC<T extends CUqBase>(type: IConstructor<T>): T {\r\n\t\tlet c = new type(this);\r\n\t\tc.init();\r\n\t\treturn c;\r\n\t}\r\n}\r\n","import { zh } from \"./zh\";\r\nimport { en } from \"./en\";\r\n\r\nexport const res = {\r\n\t$zh: zh,\r\n\t$en: en,\r\n}\r\n","export const zh = {\r\n\thome: '首页',\r\n\trelation: '关系',\r\n\tdiscover: '发现',\r\n\ttest: '测试',\r\n\tdebug: 'Debug',\r\n\tme: '我',\r\n\r\n\tchangePassword: '修改密码',\r\n\taboutTheApp: '关于本APP',\r\n\tlogout: '退出登录',\r\n\tpleaseLogin: '登录',\r\n\r\n\tcontent: '内容',\r\n\tbackend: '后台管理',\r\n}\r\n","export const en = {\r\n\thome: 'Home',\r\n\trelation: 'Relation',\r\n\tdiscover: 'Discover',\r\n\ttest: 'Test',\r\n\tdebug: 'Debug',\r\n\tme: 'Me',\r\n\r\n\tchangePassword: 'Change password',\r\n\taboutTheApp: 'About the APP',\r\n\tlogout: 'Logout',\r\n\tpleaseLogin: 'Login',\r\n\r\n\tcontent: 'Content',\r\n\tbackend: 'Backend Management',\r\n}\r\n","//=== UqApp builder created on Tue Jan 05 2021 18:41:24 GMT-0500 (GMT-05:00) ===//\r\nimport { VPage, TabProp, TabCaptionComponent, TabsProps } from 'tonva-react';\r\nimport { CApp } from './CApp';\r\n\r\nconst color = (selected: boolean) => selected === true ? 'text-primary' : 'text-muted';\r\nfunction caption(label:string, icon:string) {\r\n\treturn (selected: boolean) => TabCaptionComponent(label, icon, color(selected));\r\n}\r\n\r\nexport class VMain extends VPage<CApp> {\r\n\theader() {return false;}\r\n\r\n\tprotected get tabsProps(): TabsProps {\r\n\t\t/*\r\n\t\tlet { cHome, cBug, cMe, cUI } = this.controller;\r\n\t\tlet tabs: TabProp[] = [\r\n\t\t\t{name: 'home', caption: caption(t('home'), 'home'), content: cHome.tab},\r\n\t\t\t{name: 'me', caption: caption(t('me'), 'user-o'), content: cMe.tab, load: cMe.load},\r\n\t\t];\r\n\t\tif (this.isDev === true) {\r\n\t\t\ttabs.push({\r\n\t\t\t\tname: 'UI', caption: caption(t('UI'), 'television'), content: cUI.tab\r\n\t\t\t});\r\n\t\t\ttabs.push({\r\n\t\t\t\tname: 'debug', caption: caption(t('debug'), 'bug'), content: cBug.tab, onShown: cBug.load\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn {tabs};\r\n\t\t*/\r\n\t\tlet { cHome, cHolding, cExporer, cMe } = this.controller;\r\n\t\tlet tabs: TabProp[] = [\r\n\t\t\t{ \r\n\t\t\t\tname: 'home', label: '首页', icon: 'home', content: cHome.tab, \r\n\t\t\t\tnotify: undefined, \r\n\t\t\t\tload: cHome.load, \r\n\t\t\t\tonShown: cHome.load,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tname: 'explorer', label: '持仓', icon: 'money', content: cHolding.tab, load: cHolding.load \r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tname: 'explorer', label: '选股', icon: 'search', content: cExporer.tab, load: cExporer.load\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tname: 'me', label: '我的', icon: 'user', content: cMe.tab, onShown: undefined\r\n\t\t\t}\r\n\t\t].map(v => {\r\n\t\t\tlet { name, label, icon, content, notify, load, onShown } = v;\r\n\t\t\treturn {\r\n\t\t\t\tname,\r\n\t\t\t\tcaption: (selected: boolean) => TabCaptionComponent(label, icon, color(selected)),\r\n\t\t\t\tcontent,\r\n\t\t\t\tnotify,\r\n\t\t\t\tload,\r\n\t\t\t\tonShown,\r\n\t\t\t};\r\n\t\t});\r\n\t\treturn {tabs};\r\n\t}\r\n\r\n\t/*\r\n\tprotected get webNav(): PageWebNav {\r\n\t\treturn {\r\n\t\t\tnavHeader: <div>webNav header</div>, \r\n\t\t\tnavFooter: <div>webNav footer</div>,\r\n\t\t};\r\n\t}\r\n\t*/\r\n}\r\n","export default __webpack_public_path__ + \"static/media/logo.2d27ead7.svg\";","/*eslint @typescript-eslint/no-unused-vars: [\"off\", { \"vars\": \"all\" }]*/\r\nimport * as React from 'react';\r\nimport { View, nav } from 'tonva-react';\r\nimport { LMR, FA, SearchBox } from 'tonva-react';\r\nimport logo from '../images/logo.svg';\r\nimport { CHome } from './CHome';\r\n\r\nexport class VSiteHeader extends View<CHome> {\r\n    render() {\r\n        let currentSalesRegion = <FA name=\"globe\" />\r\n        let login = <div>\r\n            登录\r\n        </div>\r\n        let left = <img className=\"m-1\" src={logo} alt=\"logo\" style={{height: \"3rem\", width: \"3rem\"}} />;\r\n        //let cart = this.controller.cApp.cCart.renderCartLabel();\r\n        let right = undefined;\r\n        /*\r\n        <div className=\"d-flex flex-row mr-1 align-items-center\">\r\n            {currentSalesRegion} &nbsp;\r\n            <button onClick={()=>nav.start()}>Try</button>\r\n        </div>;*/\r\n        return <LMR\r\n            className=\"mb-3 align-items-center bg-white\"\r\n            left={left} right={right}>\r\n            <div className=\"\">\r\n                {this.controller.renderSearchHeader('md')}\r\n            </div>\r\n        </LMR>\r\n    }\r\n}","import * as React from 'react';\r\nimport { View } from 'tonva-react';\r\nimport { CHome } from './CHome';\r\nimport { SearchBox } from 'tonva-react';\r\n\r\nexport class VSearchHeader extends View<CHome> {\r\n\r\n    private onSearch = async (key: string) => {\r\n        // let { cProduct } = this.controller.cApp;\r\n        // cProduct.start(key);\r\n    }\r\n\r\n    render(param: any) {\r\n        return <SearchBox className=\"px-1 w-100\" \r\n            size={param}\r\n            onSearch={this.onSearch} \r\n            placeholder=\"功能...\" />\r\n    }\r\n}","/*eslint @typescript-eslint/no-unused-vars: [\"off\", { \"vars\": \"all\" }]*/\r\nimport * as React from 'react';\r\nimport { observer } from 'mobx-react';\r\nimport { VPage, List, LMR, FA, Scroller, DropdownActions, DropdownAction } from 'tonva-react';\r\nimport { NStockInfo } from '../stockinfo';\r\nimport { CHome } from './CHome';\r\nimport { renderSortHeaders, renderStockInfoRow, renderStockUrl } from '../tool';\r\n\r\nexport class VHome extends VPage<CHome> {\r\n\theader() {\r\n\t\treturn React.createElement(observer(() => {\r\n\t\t\treturn <span className=\"ml-3\">首页 - {this.controller.stockGroup.name}</span>;\r\n\t\t}));\r\n\t}\r\n\tright() {\r\n\t\treturn React.createElement(observer(() => {\r\n\t\t/*\r\n\t\treturn <button className=\"btn btn-sm btn-info mr-2\"\r\n\t\tonClick={()=>{this.controller.openMarketPE()}}>\r\n\t\t市场平均PE\r\n\t\t</button>;\r\n\t\t*/\r\n\t\tlet {store} = this.controller;\r\n\t\tlet groups = store.stockGroups.groups.map(v => (\r\n\t\t\t{\r\n\t\t\t\tcaption: v.name,\r\n\t\t\t\taction: () => this.controller.changeGroup(v)\r\n\t\t\t}\r\n\t\t));\r\n\t\tlet actions: DropdownAction[] = [\r\n\t\t\t{\r\n\t\t\t\tcaption: '市场平均PE',\r\n\t\t\t\taction: this.controller.openMarketPE,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tcaption: '选择股票',\r\n\t\t\t\taction: this.controller.onAddStock,\r\n\t\t\t},\r\n\t\t\tundefined,\r\n\t\t\t...groups,\r\n\t\t\tundefined,\r\n\t\t\t{\r\n\t\t\t\tcaption: '管理自选组',\r\n\t\t\t\taction: this.controller.manageGroups,\r\n\t\t\t},\r\n\t\t];\r\n\t\treturn <DropdownActions actions={actions} icon=\"bars\" className=\"mr-2 text-white bg-transparent border-0\" />;\r\n\t}));\r\n\t}\r\n\r\n\tprotected onPageScrollBottom(scroller: Scroller): Promise<void> {\r\n\t\tthis.controller.onPage();\r\n\t\treturn;\r\n\t}\r\n\r\n\tcontent() {\r\n\t\treturn React.createElement(observer(() => {\r\n\t\t\tlet {setSortType, stockGroup, sortType} = this.controller;\r\n\t\t\t/*\r\n\t\t\tlet {store} = cApp;\r\n\t\t\tlet {config} = store;\r\n\t\t\tlet title = config.groupName;\r\n\t\t\tlet { items } = home;\r\n\t\t\t*/\r\n\t\t\tlet title = stockGroup.name;\r\n\t\t\tlet items = stockGroup.stocks;\r\n\r\n\t\t\tlet {  onSelectTag, onAddStock } = this.controller;\r\n\t\t\t/*\r\n\t\t\tlet right = <div className=\"d-flex\">\r\n\t\t\t\t<div className=\"btn cursor-pointer\" onClick={onAddStock}><FA name=\"plus\" inverse={false} /></div>\r\n\t\t\t\t<div className=\"btn cursor-pointer ml-2\" onClick={onSelectTag}><FA name=\"bars\" inverse={false} /></div>\r\n\t\t\t</div>;\r\n\t\t\tlet left = <div className=\"align-self-center\">{title}</div>\r\n\t\t\t<LMR className=\"px-2 py-1\" left={left} right={right}></LMR>\r\n\t\t\t*/\r\n\t\t\treturn <div>\r\n\t\t\t\t<div className=\"d-flex justify-content-end mr-2 my-1\">\r\n\t\t\t\t\t{renderSortHeaders('radioHome', sortType, setSortType)}\r\n\t\t\t\t</div>\r\n\t\t\t\t<List items={items}\r\n\t\t\t\t\titem={{ render: this.renderRow, key: this.rowKey }}\r\n\t\t\t\t\tbefore={'...'}\r\n\t\t\t\t\tnone={<small className=\"px-3 py-3 text-info\">无自选股, 请选股</small>}\r\n\t\t\t\t/>\r\n\t\t\t</div>;\r\n\t\t}));\r\n\t}\r\n\r\n\trenderRow = (item: any, index: number): JSX.Element => { //<this.rowContent {...item} />;\r\n\t\treturn this.rowContent(item);\r\n\t} \r\n\tprotected rowContent = (row: any): JSX.Element => {\r\n\t\tlet right = renderStockUrl(row);\r\n\t\treturn renderStockInfoRow(row, this.onClickName, null, right);\r\n\t}\r\n\r\n\tprivate rowKey = (item: any) => {\r\n\t\tlet { id } = item;\r\n\t\treturn id;\r\n\t}\r\n\r\n\tprotected onClickName = (item: NStockInfo) => {\r\n\t\tthis.controller.openStockInfo(item);\r\n\t}\r\n\r\n\tprotected onSelected = async (item: any): Promise<void> => {\r\n\t\tlet a = 0;\r\n\t}\r\n\r\n\tprivate callOnSelected(item: any) {\r\n\t\tif (this.onSelected === undefined) {\r\n\t\talert('onSelect is undefined');\r\n\t\treturn;\r\n\t\t}\r\n\t\tthis.onSelected(item);\r\n\t}\r\n\tclickRow = (item: any) => {\r\n\t\tthis.callOnSelected(item);\r\n\t}\r\n}","import * as React from 'react';\r\nimport { observer } from 'mobx-react-lite';\r\nimport { VPage, Page, List } from 'tonva-react';\r\nimport { CHome } from './CHome';\r\n\r\nexport class VSelectTag extends VPage<CHome> {\r\n    async open(param?: any) {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private renderTag = (tag:any) => {\r\n        return <div className=\"px-3 py-2 cursor-pointer\">{tag.name}</div>;\r\n    }\r\n\r\n    private page = observer(() => {\r\n        let {stockGroups} = this.controller.cApp.store;\r\n        let { onClickTag } = this.controller;\r\n        return <Page header=\"选择分组\" headerClassName=\"bg-primary\">\r\n            <List items={stockGroups.groups} item={{onClick:onClickTag, render:this.renderTag}} />\r\n        </Page>;\r\n    })\r\n}\r\n","/*eslint @typescript-eslint/no-unused-vars: [\"off\", { \"vars\": \"all\" }]*/\r\nimport * as React from 'react';\r\nimport classNames from 'classnames';\r\nimport { VPage, Page, View, List, LMR, left0, FA } from 'tonva-react';\r\nimport { observable } from 'mobx';\r\nimport { observer } from 'mobx-react';\r\nimport RC2 from 'react-chartjs-2'\r\nimport { GFunc } from '../tool/GFunc';\r\nimport {CMarketPE } from './CMarketPE'\r\n\r\nexport class VMarketPE extends VPage<CMarketPE> {\r\n  private input: HTMLInputElement;\r\n  private key: string = undefined;\r\n\r\n  async open(param?: any) {\r\n    this.openPage(this.page);\r\n  }\r\n\r\n  render(param: any): JSX.Element {\r\n    return <this.page />\r\n  }\r\n\r\n  checkLimitShow = (e:any)=> {\r\n    let check = e.target.checked as boolean;\r\n    let f = check ? 1:0;\r\n    this.controller.onLongShortFlag(f);\r\n  }\r\n\r\n  private page = observer(() => {\r\n  let head = <div >{''}</div>\r\n    return <Page header={head}\r\n      headerClassName='bg-primary'>\r\n      <this.pageContent />\r\n    </Page>;\r\n  })\r\n\r\n  private pageContent = observer(() => {\r\n    return <>\r\n      <this.historyChart />\r\n    </>\r\n  });\r\n\r\n  protected historyChart = observer(() => {\r\n    let {historyData} = this.controller;\r\n    if (historyData === undefined) \r\n      return <></>;\r\n    let chartHistory = <></>;\r\n    let labelList:any[] = [];\r\n    let peList:number[] = [];\r\n    let eList:number[] = [];\r\n    for (let item of historyData) {\r\n      let {day, pe, e} = item;\r\n      labelList.push(day);\r\n      peList.push(GFunc.numberToPrecision(pe, 4));\r\n      eList.push(e);\r\n    }\r\n    let chartdata1 = {\r\n      labels: labelList,\r\n      datasets: [\r\n        {\r\n          label: 'PE',\r\n          data: peList,\r\n          borderColor:'blue',\r\n          backgroundColor:'skyBlue',\r\n          borderWidth: 1,\r\n          fill: false,\r\n          yAxisID: 'y-axis-1',\r\n        },\r\n        {\r\n          label: 'e',\r\n          data: eList,\r\n          borderColor:'red',\r\n          backgroundColor:'pink',\r\n          borderWidth: 1,\r\n          fill: false,\r\n          yAxisID: 'y-axis-2',\r\n        }\r\n      ]\r\n    };\r\n    let options = {\r\n      scales:{\r\n        yAxes: [{\r\n          type: 'linear',\r\n          display: true,\r\n          position: 'right',\r\n          id: 'y-axis-1',\r\n        }, {\r\n          type: 'linear',\r\n          display: true,\r\n          position: 'left',\r\n          id: 'y-axis-2',\r\n          gridLines: {\r\n              drawOnChartArea: false\r\n          }\r\n        }],    \r\n      }\r\n    }\r\n    chartHistory = <RC2 data={chartdata1} type='line' options={options} />;\r\n    let right = <></>;\r\n    right = <label className=\"px-3\"> <input type=\"checkbox\" name=\"selectType\" defaultChecked={false}\r\n    onChange={this.checkLimitShow} />长期</label>;\r\n    return <><LMR className=\"px-3 py-2 bg-white\" left={'市场PE历史走势'} right={right}></LMR>\r\n      <div className=\"px-3\" style={{width:'95%'}}>{chartHistory}</div>\r\n    </>;\r\n  });\r\n\r\n\r\n}","/*eslint @typescript-eslint/no-unused-vars: [\"off\", { \"vars\": \"all\" }]*/\r\nimport { observable } from 'mobx';\r\nimport { CUqBase } from \"../uq-app\";\r\nimport { VMarketPE } from './VMarketPE';\r\n\r\nexport class CMarketPE extends CUqBase {\r\n    @observable historyData:{day:number, pe:number, e:number}[] =  [];\r\n    private longshortFlag:number = 0;\r\n\r\n    async internalStart(param: any) {\r\n        this.loadData();\r\n        this.openVPage(VMarketPE as any);\r\n    }\r\n\r\n    loadData = async () => {\r\n        let dt = new Date();\r\n        let param = [dt.getFullYear()*10000+(dt.getMonth()+1)*100+dt.getDate(), 750, this.longshortFlag];\r\n        //let rets = await this.cApp.store.miApi.query('q_marketpe', param) as {day:number, pe:number, e:number}[];\r\n\t\tlet rets = await this.cApp.miNet.q_marketpe(param);\r\n        this.historyData = rets.reverse();\r\n    }\r\n\r\n    onLongShortFlag(f:number) {\r\n        if (f === this.longshortFlag)\r\n            return;\r\n        this.longshortFlag = f;\r\n        this.loadData();\r\n    }\r\n}","/*eslint @typescript-eslint/no-unused-vars: [\"off\", { \"vars\": \"all\" }]*/\r\nimport { CApp, CUqBase } from '../uq-app';\r\nimport { CStockInfo, NStockInfo } from '../stockinfo';\r\nimport { VSiteHeader } from './VSiteHeader';\r\nimport { VSearchHeader } from './VSearchHeader';\r\nimport { VHome } from './VHome';\r\nimport { VSelectTag } from './VSelectTag';\r\nimport { CMarketPE } from './CMarketPE';\r\nimport { CSelectStock } from 'selectStock';\r\nimport { Stock, StockGroup, Store } from '../store';\r\nimport { makeObservable, observable } from 'mobx';\r\n\r\nexport class CHome extends CUqBase {\r\n\tstore: Store;\r\n\tstockGroup: StockGroup;\r\n\tsortType: string;\r\n\r\n\tconstructor(cApp: CApp) {\r\n\t\tsuper(cApp);\r\n\t\tmakeObservable(this, {\r\n\t\t\tstockGroup: observable,\r\n\t\t\tsortType: observable,\r\n\t\t});\r\n\t\tlet {store} = cApp;\r\n\t\tthis.store = store;\r\n\t}\r\n\r\n\tload = async () => {\r\n\t\tthis.stockGroup = this.store.getHomeStockGroup();\r\n\t\tif (!this.stockGroup) debugger;\r\n\t\tthis.sortType = this.store.config.userStock.sortType;\r\n\t\tif (!this.sortType) this.sortType = '';\r\n\t\tawait this.stockGroup.loadItems();\r\n\t\tthis.stockGroup.sort(this.sortType)\r\n\t\t/*\r\n\t\tlet tagID = this.store.tagID;\r\n\t\tif (tagID > 0) {\r\n\t\t\tif (this.lastLoadTick && Date.now() - this.lastLoadTick < 300*1000) return;\r\n\t\t\t\tawait this.store.loadHomeItems();\r\n\t\t\tthis.lastLoadTick = Date.now();\r\n\t\t}\r\n\t\t*/\r\n\t}\r\n\r\n\tasync changeGroup(stockGroup: StockGroup) {\r\n\t\tthis.stockGroup = stockGroup;\r\n\t\tawait this.stockGroup.loadItems();\r\n\t}\r\n\r\n\tmanageGroups = async () => {\r\n\t\tthis.cApp.showGroupsManage();\r\n\t}\r\n\r\n\tonSelectTag = async () => {\r\n\t\tthis.openVPage(VSelectTag);\r\n\t}\r\n\r\n\tonAddStock = async () => {\r\n\t\tlet cStock = new CSelectStock(this.cApp);\r\n\t\tlet r = await cStock.call() as Stock;\r\n\r\n\t\tif (r !== undefined) {\r\n\t\t\tawait this.stockGroup.addStock(r);\r\n\t\t}\r\n\t}\r\n\r\n\tonClickTag = async (item:any) => {\r\n\t\tawait this.cApp.store.selectTag(item);\r\n\t\tthis.closePage();\r\n\t}\r\n\r\n\tonPage = async () => {\r\n\t\t//this.PageItems.more();\r\n\t}\r\n\r\n\tonWarningConfg = () => {\r\n\t\tthis.cApp.cWarning.onWarningConfg();\r\n\t}\r\n\r\n\r\n\t// async searchMain(key: any) {\r\n\t//   if (key !== undefined) await this.PageItems.first(key);\r\n\t// }\r\n\r\n\t\t//作为tabs中的首页，internalStart不会被调用\r\n\tasync internalStart(param: any) {\r\n\t}\r\n\r\n\trenderSiteHeader = () => {\r\n\t\treturn this.renderView(VSiteHeader);\r\n\t}\r\n\r\n\trenderSearchHeader = (size?: string) => {\r\n\t\treturn this.renderView(VSearchHeader, size);\r\n\t}\r\n\r\n\ttab = () => this.renderView(VHome);\r\n\r\n\topenStockInfo = (item: NStockInfo) => {\r\n\t\tlet cStockInfo = this.newC(CStockInfo);\r\n\t\tcStockInfo.start(item);\r\n\t}\r\n\r\n\topenMarketPE = () => {\r\n\t\tlet cm = this.newC(CMarketPE);\r\n\t\tcm.start();\r\n\t}\r\n\r\n\tsetSortType = (type:string) => {\r\n\t\tthis.stockGroup.sort(type);\r\n\t\tthis.store.setUserSortType(type);\r\n\t}\r\n}","import * as React from 'react';\r\nimport { observable } from 'mobx';\r\nimport {\r\n    userApi, ItemSchema, StringSchema, ImageSchema, UiTextItem, UiImageItem, nav, Page,\r\n    Edit, UiSchema, VPage, Prop, FA, IconText, PropGrid\r\n} from 'tonva-react';\r\nimport { CMe } from './CMe';\r\n\r\nexport class VEditMe extends VPage<CMe>{\r\n\r\n    async open(param: any) {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private schema: ItemSchema[] = [\r\n        { name: 'nick', type: 'string' } as StringSchema,\r\n        { name: 'icon', type: 'image' } as ImageSchema,\r\n    ];\r\n    private uiSchema: UiSchema = {\r\n        items: {\r\n            nick: { widget: 'text', label: '别名', placeholder: '好的别名更方便记忆' } as UiTextItem,\r\n            icon: { widget: 'image', label: '头像' } as UiImageItem,\r\n        }\r\n    }\r\n    @observable private data: any;\r\n\r\n    constructor(props: any) {\r\n        super(props);\r\n        let { nick, icon } = nav.user;\r\n        this.data = {\r\n            nick: nick,\r\n            icon: icon,\r\n        };\r\n    }\r\n\r\n    private onItemChanged = async (itemSchema: ItemSchema, newValue: any, preValue: any) => {\r\n        let { name } = itemSchema;\r\n        await userApi.userSetProp(name, newValue);\r\n        this.data[name] = newValue;\r\n        nav.user.name = newValue;\r\n        nav.saveLocalUser();\r\n    }\r\n\r\n\tprivate onExit = () => {\r\n        nav.showLogout();\r\n    }\r\n\r\n\tprivate changePassword = async () => {\r\n        await nav.changePassword();\r\n    }\r\n\r\n    private page = () => {\r\n\t\tlet { schema, uiSchema, data, onItemChanged } = this;\r\n\t\tlet gridRows: Prop[] = [\r\n\t\t\t'',\r\n\t\t\t{\r\n\t\t\t\ttype: 'component',\r\n\t\t\t\tcomponent: <IconText iconClass=\"text-info mr-2\" icon=\"key\" text={this.t('changePassword')} />,\r\n\t\t\t\tonClick: this.changePassword\r\n\t\t\t},\r\n\t\t\t'',\r\n\t\t\t'',\r\n\t\t\t{\r\n\t\t\t\ttype: 'component',\r\n\t\t\t\tbk: '',\r\n\t\t\t\tcomponent: <div className=\"w-100 text-center\">\r\n\t\t\t\t\t<button className=\"btn btn-danger w-100 w-max-20c\" onClick={this.onExit}>\r\n\t\t\t\t\t\t<FA name=\"sign-out\" size=\"lg\" /> {this.t('logout')}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t},\r\n\t\t];\r\n\r\n\r\n\t\t/*\r\n\t\tlet vAdmin: any;\r\n\t\t\r\n\t\tlet { role } = this.controller;\r\n\t\tif ((role & 2) === 2) {\r\n\t\t\tvAdmin = <div className=\"px-3 py-2 cursor-pointer bg-white border-bottom\" onClick={this.controller.showAdmin}>管理员</div>;\r\n\t\t}\r\n\t\t{vAdmin}\r\n\t\t*/\r\n        return <Page header=\"个人信息\">\r\n            <Edit schema={schema} uiSchema={uiSchema}\r\n                data={data}\r\n                onItemChanged={onItemChanged} />\r\n\t\t\t<PropGrid rows={gridRows} values={{}} />\r\n        </Page>;\r\n    }\r\n}\r\n\r\nexport const webUserSchema: ItemSchema[] = [\r\n    { name: 'firstName', type: 'string', required: true } as StringSchema,\r\n    { name: 'gender', type: 'string' } as StringSchema,\r\n    { name: 'salutation', type: 'string' } as StringSchema,\r\n    { name: 'organizationName', type: 'string', required: true } as StringSchema,\r\n    { name: 'departmentName', type: 'string' } as StringSchema,\r\n];\r\n\r\n","//=== UqApp builder created on Tue Jan 12 2021 23:14:51 GMT-0500 (GMT-05:00) ===//\r\nimport { AppConfig, DevConfig } from \"tonva-react\";\r\n\r\nconst bz: DevConfig = {\r\n\tname: 'bizdev',\r\n\talias: 'bz',\r\n}\r\n\r\nconst bruce: DevConfig = {\r\n\tname: 'bruce',\r\n\talias: undefined,\r\n}\r\n\r\nexport const appConfig: AppConfig = {\r\n\tversion: '0.1.0',\r\n\tapp: undefined,\r\n\tuqs: [\r\n\t\t{\r\n\t\t\tdev: bz,\r\n\t\t\tname: 'hello-tonva',\r\n\t\t\talias: 'HelloTonva',\r\n\t\t\tversion: '0.1.0',\r\n\t\t},\r\n\t\t{\r\n\t\t\tdev: bruce,\r\n\t\t\tname: 'yumi',\r\n\t\t\talias: 'YuMi',\r\n\t\t\tversion: '0.1.0',\r\n\t\t},\r\n\t],\r\n\tnoUnit: true,\r\n    tvs: {},\r\n\toem: undefined,\r\n\thtmlTitle: '鱼米乡 - 私享投资圈',\r\n};\r\n","import { VPage } from \"tonva-react\";\r\nimport { CMe } from \"./CMe\";\r\n\r\nexport class VFaq extends VPage<CMe> {\r\n\theader() {return '基本概念'}\r\n\tcontent() {\r\n\t\treturn <ul>\r\n\t\t\t<li className=\"my-3\">\r\n\t\t\t\t<div className=\"my-2\">基本公理</div>\r\n\t\t\t\t<ul className=\"px-3 text-info\">\r\n\t\t\t\t\t<li><span className=\"mr-3\">公理1: </span>进步是社会的必然</li>\r\n\t\t\t\t\t<li><span className=\"mr-3\">公理2: </span>信任是经济的基石</li>\r\n\t\t\t\t\t<li><span className=\"mr-3\">公理3: </span>价值是价格的准心</li>\r\n\t\t\t\t\t<li><span className=\"mr-3\">公理4: </span>发展是企业的基因</li>\r\n\t\t\t\t</ul>\r\n\t\t\t</li>\r\n\t\t\t<li className=\"my-3\">\r\n\t\t\t\t<div className=\"my-2\">米投定律</div>\r\n\t\t\t\t<ul className=\"px-3 text-info\">\r\n\t\t\t\t\t<li><span className=\"mr-3\">定律1: </span>投资无风险</li>\r\n\t\t\t\t</ul>\r\n\t\t\t</li>\r\n\t\t\t<li className=\"my-3\">\r\n\t\t\t\t<div className=\"my-2\">米投原则</div>\r\n\t\t\t\t<ul className=\"px-3 text-info\">\r\n\t\t\t\t\t<li><span className=\"mr-3\">原则1: </span>低估</li>\r\n\t\t\t\t\t<li><span className=\"mr-3\">原则2: </span>分散</li>\r\n\t\t\t\t\t<li><span className=\"mr-3\">原则3: </span>不深研</li>\r\n\t\t\t\t</ul>\r\n\t\t\t</li>\r\n\t\t\t<li className=\"my-3\">\r\n\t\t\t\t<div className=\"my-2\">米息定义</div>\r\n\t\t\t\t<ul className=\"px-3 text-info\">\r\n\t\t\t\t\t<li><span className=\"mr-3\">定义1: </span>米息 = 增息 + 股息</li>\r\n\t\t\t\t\t<li><span className=\"mr-3\">定义2: </span>增息 = 企业未来三年利润增长值</li>\r\n\t\t\t\t\t<li><span className=\"mr-3\">定义3: </span>米息率 = 米息 / 股价</li>\r\n\t\t\t\t\t<li><span className=\"mr-3\">定义4: </span>米息率大一倍，米息分加1</li>\r\n\t\t\t\t\t<li><span className=\"mr-3\">定义5: </span>PE = 股价 / 利润</li>\r\n\t\t\t\t</ul>\r\n\t\t\t</li>\r\n\t\t</ul>\r\n\t}\r\n}","import { VPage } from \"tonva-react\";\r\nimport { appConfig } from \"../uq-app/appConfig\";\r\nimport { CMe } from \"./CMe\";\r\n\r\nexport class VAbout extends VPage<CMe> {\r\n\theader() {return '关于APP';}\r\n\tcontent() {\r\n\t\treturn <div className=\"py-5 px-3 my-3 w-max-30c mx-auto bg-white\">\r\n\t\t\t<div className=\"text-center mb-5 position-relative\">\r\n\t\t\t\t<small className=\"text-muted position-absolute\"\r\n\t\t\t\t\tstyle={{right:'0', top:'-2.8rem'}}>\r\n\t\t\t\t\t版本: {appConfig.version}\r\n\t\t\t\t</small>\r\n\t\t\t\t<i className=\"text-danger position-absolute top-0 start-0 fa fa-fire fa-2x\" \r\n\t\t\t\t\tstyle={{left:'2rem', top:'0.5rem'}} />\r\n\t\t\t\t<b className=\"text-danger h5 mb-0\">\r\n\t\t\t\t\t<span className=\"text-primary\">鱼</span>\r\n\t\t\t\t\t<b className=\"mx-1\">米</b>\r\n\t\t\t\t\t<span className=\"text-success\">乡</span>\r\n\t\t\t\t</b>\r\n\t\t\t\t<br/>\r\n\t\t\t\t<small className=\"text-info\">私享投资圈</small>\r\n\t\t\t</div>\r\n\t\t\t<ul>\r\n\t\t\t\t<li>跟家人和好友一起分享投资思考。</li>\r\n\t\t\t\t<li>世界级投资大师年化收益率11%。</li>\r\n\t\t\t\t<li>全球最大的成长经济体GDP增长率高于5%。</li>\r\n\t\t\t\t<li>以10%为基础，期待<b className=\"text-danger mx-1\">15%以上</b>的高水平。</li>\r\n\t\t\t</ul>\r\n\t\t\t<div className=\"mt-5 text-center\">\r\n\t\t\t\t<small className=\"text-muted mr-2\">by</small>\r\n\t\t\t\t同花投顾\r\n\t\t\t</div>\r\n\t\t</div>;\r\n\t}\r\n}\r\n","import React from 'react';\r\nimport { observer } from 'mobx-react';\r\nimport { Image, VPage, nav, IconText, PropGrid, LMR, FA, Prop } from 'tonva-react';\r\nimport { CMe } from './CMe';\r\nimport { appConfig } from \"../uq-app/appConfig\";\r\nimport { VFaq } from './VFaq';\r\nimport { VAbout } from './VAbout';\r\n\r\nexport class VMe extends VPage<CMe> {\r\n\theader() {return this.t('me')}\r\n\r\n\tcontent() {\r\n        const { user } = nav;\r\n        let aboutRows: Prop[] = [\r\n            '',\r\n            {\r\n                type: 'component',\r\n                component: <LMR className=\"w-100\" onClick={this.faq}\r\n\t\t\t\t\tright={<FA className=\"align-self-center\" name=\"angle-right\" />}>\r\n                    <IconText iconClass=\"text-info mr-2\" icon=\"comments-o\" text={this.t('基本概念')} />                    \r\n                </LMR>,\r\n            },\r\n            {\r\n                type: 'component',\r\n                component: <LMR className=\"w-100\" onClick={this.about}\r\n\t\t\t\t\tright={<FA className=\"align-self-center\" name=\"angle-right\" />}>\r\n                    <IconText iconClass=\"text-info mr-2\" \r\n\t\t\t\t\t\ticon=\"smile-o\" \r\n\t\t\t\t\t\ttext={<>{this.t('aboutTheApp')} <small>版本 {appConfig.version}</small></>} />                    \r\n                </LMR>,\r\n            },\r\n        ];\r\n\r\n        let rows: Prop[];\r\n        if (user === undefined) {\r\n            rows = aboutRows;\r\n            rows.push(\r\n                {\r\n                    type: 'component',\r\n                    component: <button className=\"btn btn-success w-100 my-2\" onClick={() => nav.logout()}>\r\n                        <FA name=\"sign-out\" size=\"lg\" /> {this.t('pleaseLogin')}\r\n                    </button>\r\n                },\r\n            );\r\n        }\r\n        else {\r\n            let logOutRows: Prop[] = [\r\n            ];\r\n\r\n            rows = [\r\n                '',\r\n                {\r\n                    type: 'component',\r\n                    component: <this.meInfo />\r\n                },\r\n            ]\r\n            rows.push(...aboutRows, ...logOutRows);\r\n        }\r\n        return <PropGrid rows={[...rows]} values={{}} />;\r\n\t}\r\n\r\n\tprivate meInfo = observer(() => {\r\n        let { user } = nav;\r\n        if (user === undefined) return null;\r\n        let { id, name, nick, icon } = user;\r\n        return <LMR className=\"py-2 cursor-pointer w-100\"\r\n            left={<Image className=\"w-3c h-3c mr-3\" src={icon || '.user-o'} />}\r\n            right={<FA className=\"align-self-end\" name=\"angle-right\" />}\r\n            onClick={this.controller.showEditMe}>\r\n            <div>\r\n                <div>{userSpan(name, nick)}</div>\r\n                <div className=\"small\"><span className=\"text-muted\">ID:</span> {id > 10000 ? id : String(id + 10000).substr(1)}</div>\r\n            </div>\r\n        </LMR>;\r\n    });\r\n\r\n\tprivate faq = () => {\r\n\t\tthis.openVPage(VFaq);\r\n\t}\r\n\r\n\tprivate about = () => {\r\n\t\tthis.openVPage(VAbout);\r\n\t}\r\n}\r\n\r\nfunction userSpan(name: string, nick: string): JSX.Element {\r\n    return nick ?\r\n        <><b>{nick} &nbsp; <small className=\"muted\">{name}</small></b></>\r\n        : <b>{name}</b>\r\n}\r\n","import { QueryPager, User } from \"tonva-react\";\r\nimport { CUqBase } from \"../uq-app\";\r\nimport { VEditMe } from \"./VEditMe\";\r\nimport { VMe } from \"./VMe\";\r\n//import { VAdmin } from \"./VAdmin\";\r\n\r\nexport interface RootUnitItem {\r\n\tid: number;\t\t\t\t\t// root unit id\r\n\towner: any;\r\n\tname: string;\t\t\t\t// 唯一\r\n\tcontent: string;\r\n\ttonvaUnit: number;\t\t\t// 跟tonva机构对应的值\r\n\tx: number;\r\n}\r\n\r\nexport class CMe extends CUqBase {\r\n\trole: number;\r\n\tunitOwner: User;\r\n\trootUnits: QueryPager<any>;\r\n\r\n    protected async internalStart() {\r\n\t}\r\n\r\n\ttab = () => this.renderView(VMe);\r\n\r\n\tshowEditMe = async () => {\r\n\t\t//let result = await this.uqs.Notes.GetSystemRole.query({});\r\n\t\tthis.role = undefined; // result.ret[0]?.role;\r\n\t\tthis.openVPage(VEditMe);\r\n\t}\r\n\t/*\r\n\tshowAdmin = async () => {\r\n\t\tthis.rootUnits = new QueryPager<any>(this.uqs.Notes.GetRootUnits, undefined, undefined, true);\r\n\t\tthis.rootUnits.first({});\r\n\t\tthis.openVPage(VAdmin);\r\n\t}\r\n\r\n\tasync createRootUnit(param: {name:string; content:string; owner:number}): Promise<number> {\r\n\t\tlet result = await this.uqs.Notes.CreateRootUnit.submit(param);\r\n\t\treturn result.id;\r\n\t}\r\n\r\n\tasync changeRootUnitName(item:RootUnitItem, name:string) {\r\n\t\tawait this.uqs.Notes.ChangeRootUnitProp.submit({unit:item.id, prop:'name', value: name})\r\n\t\titem.name = name;\r\n\t}\r\n\r\n\tasync changeRootUnitTonva(item:RootUnitItem, tonvaUnit:any) {\r\n\t\tawait this.uqs.Notes.ChangeRootUnitProp.submit({unit:item.id, prop:'tonvaUnit', value: tonvaUnit})\r\n\t\titem.tonvaUnit = tonvaUnit;\r\n\t}\r\n\r\n\tasync changeRootUnitX(item:RootUnitItem, x:number) {\r\n\t\tawait this.uqs.Notes.ChangeRootUnitProp.submit({unit:item.id, prop:'x', value: x as any})\r\n\t\titem.x = x;\r\n\t}\r\n\t*/\r\n}\r\n","/*eslint @typescript-eslint/no-unused-vars: [\"off\", { \"vars\": \"all\" }]*/\r\nimport { LMR, View } from 'tonva-react';\r\nimport logo from '../images/logo.svg';\r\nimport { CExplorer } from './CExplorer';\r\n\r\nexport class VSiteHeader extends View<CExplorer> {\r\n    render() {\r\n        let left = <img className=\"m-1\" src={logo} alt=\"logo\" style={{height: \"3rem\", width: \"3rem\"}} />;\r\n        let right = undefined;\r\n        return <LMR\r\n            className=\"mb-3 align-items-center bg-white\"\r\n            left={left} right={right}>\r\n            <div className=\"\">\r\n                {this.controller.renderSiteHeader()}\r\n            </div>\r\n        </LMR>\r\n    }\r\n}","/*eslint @typescript-eslint/no-unused-vars: [\"off\", { \"vars\": \"all\" }]*/\r\nimport * as React from 'react';\r\nimport { observer } from 'mobx-react';\r\nimport { VPage, List, LMR, FA, Scroller } from 'tonva-react';\r\nimport { NStockInfo } from '../stockinfo';\r\nimport { GFunc } from '../tool/GFunc';\r\nimport { CExplorer } from './CExplorer';\r\nimport { renderSortHeaders, renderStockInfoRow, renderStockUrl } from '../tool';\r\n\r\nexport class VExplorer extends VPage<CExplorer> {\r\n\theader() {return '股票发现'}\r\n\tprotected onPageScrollBottom(scroller: Scroller): Promise<void> {\r\n\t\tthis.controller.onPage();\r\n\t\treturn;\r\n\t}\r\n\r\n\tright() {\r\n\t\tlet { onConfig } = this.controller;\r\n\t\treturn <div className=\"btn align-self-center cursor-pointer \" onClick={onConfig}><FA name=\"cog\" size=\"lg\" inverse={true} /></div>\r\n\t}\r\n\r\n\tcontent() {\r\n\t\treturn React.createElement(observer(() => {\r\n\t\t\tlet {explore, load, setSortType} = this.controller;\r\n\t\t\tlet {items, avgs, sortType } = explore;\r\n\r\n\t\t\tlet left: any;\r\n\t\t\tlet right = <div className=\"btn btn-link cursor-pointer py-1\" onClick={load}>刷新</div>;\r\n\t\t\t/*if (avgs.avg20 !== undefined || avgs.avg50 !== undefined || avgs.avg100 !== undefined) {\r\n\t\t\t\tlet avgStr = ` top20 : ${GFunc.numberToFixString(avgs.avg20)} \r\n  -  top50 : ${GFunc.numberToFixString(avgs.avg50)}\r\n  -  top100 : ${GFunc.numberToFixString(avgs.avg100)}\r\n  -  all : ${GFunc.numberToFixString(avgs.avg)}\r\n  ...查看历史走势`;\r\n\t\t\t\tleft = <div className=\"px-3 cursor-pointer align-self-center\"\r\n\t\t\t\t\tonClick={this.controller.onClickPredictAVG}>\r\n\t\t\t\t\t\t{GFunc.caption('价值指数均值')}{avgStr}\r\n\t\t\t\t\t</div>;\r\n\t\t\t}*/\r\n\t\t\tif (avgs.avg !== undefined) {\r\n\t\t\t\tlet avgStr = ` : ${GFunc.numberToFixString(Math.log(avgs.avg), 1)}`;\r\n\t\t\t\tleft = <div className=\"px-3 cursor-pointer align-self-center\">\r\n\t\t\t\t\t\t{GFunc.caption('米息分均值')}{avgStr}\r\n\t\t\t\t\t</div>;\r\n\t\t\t}\t\t\t\r\n\t\t\treturn <>\r\n\t\t\t\t<LMR left={left} right={right} />\r\n\t\t\t\t<div className=\"d-flex justify-content-end mr-2 my-1\">\r\n\t\t\t\t\t{renderSortHeaders('radioHome', sortType, setSortType)}\r\n\t\t\t\t</div>\r\n\t\t\t\t<List items={items}\r\n\t\t\t\t\titem={{ render: this.renderRow, key: this.rowKey }}\r\n\t\t\t\t\tbefore={'选股'}\r\n\t\t\t\t/>\r\n\t\t\t</>\r\n\t\t}));\r\n\t}\r\n\r\n\trenderRow = (item: any, index: number): JSX.Element => {\r\n\t\treturn this.rowContent(item);\r\n\t} \r\n\tprotected rowContent = (row: any): JSX.Element => {\r\n\t\tlet {store} = this.controller.cApp;\r\n\t\tlet { id, symbol } = row as NStockInfo;\r\n\t\tif (store.isMyBlack(id) === true) return null;\r\n\t\tlet labelId = 'vexl_' + id;\r\n\t\tlet isMySelect = store.isMySelect(id); // defList.findIndex(v=>v===id);\r\n\t\tlet middle = <label className=\"mb-0 cursor-pointer\">\r\n\t\t\t<input className=\"mr-1\" type=\"checkbox\" value=\"\" id={labelId}\r\n\t\t\tdefaultChecked={isMySelect}\r\n\t\t\tonChange={e => this.onSelect(row, e.target.checked)}/>\r\n\t\t\t<small className=\"text-muted\">自选</small>\r\n\t\t</label>;\r\n\r\n\t\tlet right = <div className=\"d-flex\">\r\n\t\t\t{renderStockUrl(row)}\r\n\t\t</div>;\r\n\t\treturn renderStockInfoRow(row, this.onClickName, middle, right);\r\n\t};\r\n\r\n\tprivate rowKey = (item: any) => {\r\n\t\tif (item.item !== undefined) {\r\n\t\t\treturn item.item.id;\r\n\t\t}\r\n\t\tlet { id } = item;\r\n\t\treturn id;\r\n\t}\r\n\r\n\tprotected onClickName = (item: NStockInfo) => {\r\n\t\tthis.controller.openStockInfo(item);\r\n\t}\r\n\r\n\tprotected onSelect = async (item: any, isSelected:boolean): Promise<void> => {\r\n\t\tthis.controller.onSelectItem(item, isSelected);\r\n\t}\r\n\r\n\tprotected onClickItem = async (item: any): Promise<void> => {\r\n\t\tthis.controller.openStockInfo(item);\r\n\t}\r\n}","/*eslint @typescript-eslint/no-unused-vars: [\"off\", { \"vars\": \"all\" }]*/\r\nimport * as React from 'react';\r\nimport { observer } from 'mobx-react';\r\nimport { VPage, Page, FA, List, Form, ItemSchema, StringSchema, UiInputItem, UiSchema, Context, IdSchema, UiIdItem, LMR, UiSelect, UiTextItem } from 'tonva-react';\r\nimport { CExplorer } from './CExplorer';\r\n\r\nconst schema: ItemSchema[] = [\r\n  { name: 'irate', type: 'number', required: true},\r\n  { name: 'bmin', type: 'number', required: true},\r\n  { name: 'bmax', type: 'number', required: true},\r\n  { name: 'r2', type: 'number', required: true},\r\n  { name: 'lmin', type: 'number', required: true},\r\n  { name: 'lmax', type: 'number', required: true},\r\n  { name: 'lr2', type: 'number', required: true},\r\n  { name: 'mcount', type: 'integer', required: true},\r\n  { name: 'lr4', type: 'number', required: true},\r\n  { name: 'r210', type: 'number', required: true},\r\n  { name: 'submit', type: 'submit', },\r\n];\r\n\r\nconst uiSchema: UiSchema = {\r\n  items: {\r\n    irate: { widget: 'number', label: '无风险收益率', placeholder: '0.04'} as UiInputItem,\r\n    bmin: { widget: 'number', label: '指数回归最小值', placeholder: '0.00'} as UiInputItem,\r\n    bmax: { widget: 'number', label: '指数回归最大值', placeholder: '0.00'} as UiInputItem,\r\n    r2: { widget: 'number', label: '指数回归R2', placeholder: '0.00'} as UiInputItem,\r\n    lmin: { widget: 'number', label: '线性回归最小值', placeholder: '0.00'} as UiInputItem,\r\n    lmax: { widget: 'number', label: '线性回归最大值', placeholder: '0.00'} as UiInputItem,\r\n    lr2: { widget: 'number', label: '线性回归R2', placeholder: '0.00'} as UiInputItem,\r\n    lr4: { widget: 'number', label: '末年与前4年均值最大比值', placeholder: '0.00'} as UiInputItem,\r\n    mcount: { widget: 'number', label: '5年内单季亏损最多允许出现次数', placeholder: '0.00'} as UiInputItem,\r\n    r210: { widget: 'number', label: '十年回归R2', placeholder: '0.00'} as UiInputItem,\r\n    submit: { widget: 'button', label: '保存', className: 'btn btn-primary' },\r\n  }\r\n};\r\n\r\n\r\nexport class VExplorerCfg extends VPage<CExplorer> {\r\n  async open(param?: any) {\r\n    this.openPage(this.page);\r\n  }\r\n\r\n  sortChage = (e:any)=> {\r\n    let newType = e.target.value;\r\n\r\n    this.controller.cApp.store.setStockSortType(newType);\r\n  }\r\n\r\n  selectChange = (e:any)=> {\r\n    let newType = e.target.value;\r\n\r\n    this.controller.cApp.store.setStockSelectType(newType);\r\n  }\r\n\r\n  onChange = (e:any) => {\r\n    let {name, value} = e.target;\r\n  }\r\n\r\n  private onFormButtonClick = async (name: string, context: Context) => {\r\n    //await this.controller.onSaveNewWarning(context.data);\r\n    let {bmin, bmax, r2, lmin, lmax, lr2, mcount, lr4, r210, irate} = context.data;\r\n    let cfg = {bmin:bmin, bmax:bmax, r2:r2, lmin:lmin, lmax:lmax, lr2:lr2, mcount:mcount, lr4:lr4, r210:r210, irate:irate};\r\n    await this.controller.cApp.store.setRegressionConfig(cfg);\r\n    this.controller.closePage();\r\n  }\r\n\r\n\r\n  private page = observer(() => {\r\n    let scfg = this.controller.cApp.store.findStockConfg;\r\n    //let findType = scfg.sortType;\r\n    // let selectType = scfg.selectType;\r\n    // if (selectType === undefined) {\r\n    //   selectType = 'all';\r\n    // }\r\n    let fData = this.controller.cApp.store.config.regression;\r\n    if (fData.irate === undefined)\r\n      fData.irate = 0.04;\r\n\r\n    return <Page header=\"选股设置\" headerClassName=\"bg-primary\">\r\n      {/* <div className=\"px-3 py-2\">方法</div>\r\n      <div className=\"px-3 py-2 d-flex flex-wrap\">\r\n        <label className=\"px-3 c8\"> <input type=\"radio\" name=\"selectType\" value=\"all\" checked={selectType===\"all\"}\r\n          onChange={this.selectChange} />预期PE</label><br />\r\n        <label className=\"px-3 c8\"> <input type=\"radio\" name=\"selectType\" value=\"value\" checked={selectType===\"value\"}\r\n          onChange={this.selectChange} />价值指数</label><br />\r\n      </div> */}\r\n      <div className=\"px-3 py-2\">回归参数</div>\r\n      <Form schema={schema}\r\n          uiSchema={uiSchema}\r\n          formData={fData}\r\n          onButtonClick={this.onFormButtonClick}\r\n        />\r\n    </Page>;\r\n  })\r\n}\r\n","import { makeObservable, observable, runInAction } from \"mobx\";\r\nimport { SlrForEarning } from \"regression\";\r\nimport { GFunc } from \"../tool\";\r\nimport { Store, sortStocks } from \"../store\";\r\n\r\ninterface Avg {\r\n\tavg20?: number;\r\n\tavg50?: number;\r\n\tavg100?: number;\r\n\tavg?: number;\r\n}\r\n\r\nexport class Explore {\r\n\tprivate store: Store;\r\n\titems: any[]; // = observable.array<any>([], { deep: true });\r\n\tavgs: Avg = {};\r\n\tlastTradeDay: number;\r\n\tsortType: string;\r\n\tselectedItems: any[] = [];\r\n  \r\n\tconstructor(store: Store) {\r\n\t\tthis.store = store;\r\n\t\tmakeObservable(this, {\r\n\t\t\tavgs: observable,\r\n\t\t\titems: observable,\r\n\t\t\tsortType: observable,\r\n\t\t});\r\n\t}\r\n\t\r\n\tload = async () => {\r\n\t\tthis.selectedItems = [];\r\n\t\tlet items = await this.loadItems();\r\n\t\trunInAction(() => {\r\n\t\t\tthis.sortType = this.store.config.userStock.sortType;\r\n\t\t\tsortStocks(this.sortType, items);\r\n\t\t\tif (!this.items) {\r\n\t\t\t\tthis.items = items;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.items.splice(0, this.items.length, items);\r\n\t\t\t}\t\r\n\t\t});\r\n\t}\r\n\r\n\tprivate async loadItems():Promise<any[]> {\r\n\t\tlet queryName = 'all';\r\n\t\tlet rets = await this.store.loadExportItems(queryName);\r\n\t\tlet lastDayRet = rets[1] as {day:number}[];\r\n\t\tif (Array.isArray(lastDayRet) && lastDayRet.length > 0) {\r\n\t\t\tthis.lastTradeDay = lastDayRet[0].day;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.lastTradeDay = undefined;\r\n\t\t}\r\n\t\tlet result = rets[0];\r\n\t\tif (Array.isArray(result) === false) {\r\n\t\t\treturn;\r\n\t\t};\r\n\t\tlet arr = result as {id:number, data?:string, v:number, pe:number, e:number, ep:number, price:number, exprice:number, divyield:number, r2:number, lr2:number, e3:number, predictpe:number, order:number, ma:number, dataArr?:number[]}[];\r\n\t\tfor (let item of arr) {\r\n\t\t\tlet dataArray = JSON.parse(item.data) as number[];\r\n\t\t\titem.dataArr = dataArray;\r\n\t\t\tlet sl = new SlrForEarning(dataArray);\r\n\t\t\t//let ep = GFunc.evaluatePricePrice(irate, sl.predict(5), sl.predict(6), sl.predict(7));\r\n\t\t\titem.ep = (sl.predict(4) + item.e) / 2;\r\n\t\t\titem.v = GFunc.calculateVN(sl.slopeR, item.ep, item.divyield * item.price, item.exprice);\r\n\t\t\titem.e3 = sl.predict(7);\r\n\t\t}\r\n\t\trunInAction(() => {\r\n\t\t\tif (queryName === 'all') {\r\n\t\t\t\tthis.avgs = GFunc.CalculateValueAvg(arr);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.avgs = {};\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn arr;\r\n\t}\r\n\r\n\tasync onItemSelected(item:any) {\r\n\t\tthis.store.addTagStock(item);\r\n\t}\r\n\r\n\tasync onItemUnselected(item:any) {\r\n\t\tthis.store.removeTagStock(item);\r\n\t}\r\n\r\n\tsetSortType(type:string) {\r\n\t\trunInAction(() => {\r\n\t\t\tsortStocks(type, this.items);\r\n\t\t\tthis.store.setUserSortType(type);\t\r\n\t\t});\r\n\t}\r\n}\r\n","/*eslint @typescript-eslint/no-unused-vars: [\"off\", { \"vars\": \"all\" }]*/\r\nimport { CApp, CUqBase } from \"../uq-app\";\r\nimport { CStockInfo, NStockInfo } from '../stockinfo';\r\nimport { VSiteHeader } from './VSiteHeader';\r\nimport { VExplorer } from './VExplorer';\r\nimport { VExplorerCfg } from './VExplorerCfg';\r\nimport { PredictHistoryParam } from 'predicthistory/CPredictHistory';\r\nimport { Explore } from './explore';\r\n\r\nexport class CExplorer extends CUqBase {\r\n\texplore: Explore;\r\n\r\n\tconstructor(cApp: CApp) {\r\n\t\tsuper(cApp);\r\n\t\tlet {store} = cApp;\r\n\t\tthis.explore = new Explore(store);\r\n\t}\r\n\r\n\tload = async () => {\r\n\t\tthis.explore.load();\r\n\t}\r\n\r\n\tonPage = async () => {\r\n\t\t//this.PageItems.more();\r\n\t}\r\n\r\n\tonConfig = async () => {\r\n\t\tthis.openVPage(VExplorerCfg);\r\n\t}\r\n\r\n\tasync internalStart(param: any) {\r\n\t}\r\n\r\n\tonSelectItem = async (item:any, isSelected:boolean) => {\r\n\t\tif (isSelected === true) {\r\n\t\t\tthis.explore.onItemSelected(item);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.explore.onItemUnselected(item);\r\n\t\t}\r\n\t}\r\n\r\n\tsetSortType = (type:string) => this.explore.setSortType(type);\r\n\r\n\trenderSiteHeader = () => {\r\n\t\treturn this.renderView(VSiteHeader);\r\n\t}\r\n\r\n\trenderHome = () => {\r\n\t\treturn this.renderView(VExplorer);\r\n\t}\r\n\r\n\r\n\topenMetaView = () => {}\r\n\r\n\ttab = () => this.renderHome();\r\n\r\n\topenStockInfo = (item: NStockInfo) => {\r\n\t\tlet cStockInfo = this.newC(CStockInfo);\r\n\t\tcStockInfo.start(item);\r\n\t}\r\n\r\n\tonClickPredictAVG = () => {\r\n\t\tlet {avgs, lastTradeDay} = this.explore;\r\n\t\tlet param: PredictHistoryParam = {\r\n\t\t  day:undefined,\r\n\t\t  priceDay:lastTradeDay,\r\n\t\t  avg20:avgs.avg20,\r\n\t\t  avg50:avgs.avg50,\r\n\t\t  avg100:avgs.avg100,\r\n\t\t  avg:avgs.avg,\r\n\t\t}\r\n\t\tthis.cApp.openPredictAVG(param);\r\n\t}\r\n}\r\n","/*eslint @typescript-eslint/no-unused-vars: [\"off\", { \"vars\": \"all\" }]*/\r\nimport * as React from 'react';\r\nimport { observer } from 'mobx-react-lite';\r\nimport { VPage, Page, FA, List, Form, ItemSchema, StringSchema, UiInputItem, UiSchema, Context, IdSchema, UiIdItem, LMR, UiSelect, UiTextItem } from 'tonva-react';\r\nimport { CWarning } from './CWarning';\r\nimport { GFunc } from 'tool/GFunc';\r\n\r\nexport class VWarningConfig extends VPage<CWarning> {\r\n  async open(param?: any) {\r\n    this.openPage(this.page);\r\n  }\r\n\r\n  private onSelect = (item: any, isSelected: boolean, anySelected: boolean) => {\r\n    //this.controller.onTaged(item, isSelected);\r\n  }\r\n\r\n  private page = observer(() => {\r\n    let { warnings } = this.controller;\r\n    let divNewTag = warnings.length >= 100 ? '' :\r\n      <div className=\"px-3 py-2 cursor-pointer\" onClick={this.controller.onNewWarning}><FA name=\"plus\" className=\"text-primary\" /> &nbsp; 新建预警</div>;\r\n    return <Page header=\"预警\" headerClassName=\"bg-primary\">\r\n      {divNewTag}\r\n      <List items={warnings} \r\n        item={{ render: this.renderWarning }} \r\n        none={'--'} />\r\n    </Page>;\r\n  })\r\n\r\n  private renderWarning = (witem: any) => {\r\n    let {name, code, type, price} = witem;\r\n    let left = <div className=\"px-3 cursor-pointer\">\r\n      {name}\r\n      <small className=\" mx-3\" >{code}</small></div>;\r\n    return <LMR className=\"mx-3 my-2\" left={left} >\r\n      <div className=\"d-flex flex-wrap\">\r\n        <div className=\"px-3 c6\">{GFunc.warningTypeString(type)}</div>\r\n        <div className=\"px-3 c6\">{GFunc.numberToFixString(price)}</div>\r\n      </div>\r\n    </LMR>;\r\n  }\r\n}\r\n\r\nconst schema: ItemSchema[] = [\r\n  { name: 'id', type: 'id' } as IdSchema,\r\n  { name: 'type', type: 'string', required: true, maxLength: 2 } as StringSchema,\r\n  { name: 'price', type: 'number', required: true},\r\n  { name: 'submit', type: 'submit', },\r\n];\r\n\r\nconst uiSchema: UiSchema = {\r\n  items: {\r\n    id: { widget: 'id',\r\n      label: '股票',\r\n      visible: true} as UiIdItem,\r\n    type: { widget: 'select', label: '类型', \r\n    list: [{value:'gt', title:'大于'}, {value:'lt', title:'小于'}] } as UiSelect,\r\n    price: { widget: 'text', label: '价格', placeholder: '0.00'} as UiTextItem,\r\n    submit: { widget: 'button', label: '保存', className: 'btn btn-primary' },\r\n  }\r\n};\r\n\r\nexport class VNewWarning extends VPage<CWarning> {\r\n  async open(param?: any) {\r\n    this.openPage(this.page);\r\n  }\r\n\r\n  private newuiSchema: UiSchema = {\r\n    items: {\r\n      id: { widget: 'id',\r\n        label: '股票',\r\n        visible: true,\r\n        placeholder: <small className=\"text-muted\">请选择股票</small>,\r\n        pickId: async (context: Context, name: string, value: number) => {\r\n          return await this.controller.showSelectStock(context, name, value)\r\n        },\r\n        Templet: (item: any) => {\r\n          let { name, code } = item;\r\n          if (!item) return <small className=\"text-muted\">请选择股票</small>;\r\n          return <div>\r\n              {name}\r\n              <small className=\" mx-3\" >{code}</small>\r\n          </div>;\r\n        }\r\n      } as UiIdItem,\r\n      type: { widget: 'select', label: '类型', \r\n      list: [{value:'gt', title:'大于'}, {value:'lt', title:'小于'}] } as UiSelect,\r\n      price: { widget: 'text', label: '价格', placeholder: '0.00'} as UiTextItem,\r\n      submit: { widget: 'button', label: '保存', className: 'btn btn-primary' },\r\n    }\r\n  };\r\n  \r\n  private onFormButtonClick = async (name: string, context: Context) => {\r\n    await this.controller.onSaveNewWarning(context.data);\r\n  }\r\n\r\n  private page = () => {\r\n    let fData = {type:'lt'};\r\n    return <Page header=\"新建预警\" headerClassName=\"bg-primary\">\r\n      <div className=\"px-3 py-3\">\r\n        <Form schema={schema}\r\n          uiSchema={this.newuiSchema}\r\n          formData={fData}\r\n          onButtonClick={this.onFormButtonClick}\r\n        />\r\n      </div>\r\n    </Page>;\r\n  }\r\n}\r\n\r\nexport class VEditWarning extends VPage<CWarning> {\r\n  async open(param?: any) {\r\n    this.openPage(this.page, param);\r\n  }\r\n\r\n  private onFormButtonClick = async (name: string, context: Context) => {\r\n    await this.controller.onSaveWarning(context.data);\r\n  }\r\n\r\n  private page = (param?: any) => {\r\n    let {id, type, price} = param;\r\n    let fData = {id:id, type:type, price:price};\r\n    return <Page header=\"编辑预警\" headerClassName=\"bg-primary\">\r\n      <div className=\"px-3 py-3\">\r\n        <Form schema={schema}\r\n          uiSchema={uiSchema}\r\n          formData={fData}\r\n          onButtonClick={this.onFormButtonClick}\r\n        />\r\n      </div>\r\n    </Page>;\r\n  }\r\n}\r\n","/*eslint @typescript-eslint/no-unused-vars: [\"off\", { \"vars\": \"all\" }]*/\r\nimport { Context } from 'tonva-react';\r\nimport { observable } from 'mobx';\r\nimport { CUqBase } from \"../uq-app\";\r\nimport { CSelectStock } from '../selectStock';\r\nimport { VWarningConfig, VNewWarning } from './VWarningConfig';\r\n\r\nexport class CWarning extends CUqBase {\r\n\t//get cApp(): CApp { return this._cApp as CApp };\r\n\t@observable warnings:any[] = [];\r\n\r\n\tasync internalStart(param: any) {\r\n\t\tlet a = 1;\r\n\t}\r\n\r\n\tasync loadWarnings() {\r\n\t\t//let r = await this.cApp.store.miApi.call('t_stockwarning$all', [this.user.id]);//await this.uqs.mi.StockWarningAll.query(undefined);\r\n\t\tlet r = await this.cApp.miNet.t_stockwarning$all();\r\n\t\tlet ret = r as any[];\r\n\t\tthis.warnings = ret;\r\n\t}\r\n\r\n\tonNewWarning = () => {\r\n\t\tthis.openVPage(VNewWarning);\r\n\t}\r\n\r\n\tonWarningConfg = async () => {\r\n\t\tawait this.loadWarnings();\r\n\t\tthis.openVPage(VWarningConfig);\r\n\t}\r\n\r\n\tonSaveNewWarning = async (data: any) => {\r\n\t\tlet { id, type, price } = data;\r\n\t\t// let param = {\r\n\t\t//   user: this.cApp.user.id,\r\n\t\t//   stock: id,\r\n\t\t//   arr1: [\r\n\t\t//     { type: type, price: price }\r\n\t\t//   ]};\r\n\t\t//let ret = await this.uqs.mi.StockWarning.add(param);\r\n\t\t//await this.cApp.store.miApi.call('t_stockwarning$add', [this.cApp.user.id, id.id, type, price]);\r\n\t\tawait this.cApp.miNet.t_stockwarning$add(id.id, type, price);\r\n\t\tthis.closePage();\r\n\t}\r\n\r\n\tonSaveWarning = async (data: any) => {\r\n\r\n\t}\r\n\r\n\tshowSelectStock = async (context: Context, name: string, value: number): Promise<any> => {\r\n\t\tlet cStock = new CSelectStock(this.cApp);\r\n\t\treturn await cStock.call();\r\n\t}\r\n}","/*eslint @typescript-eslint/no-unused-vars: [\"off\", { \"vars\": \"all\" }]*/\r\nimport * as React from 'react';\r\nimport { observer } from 'mobx-react';\r\nimport RC2 from 'react-chartjs-2'\r\nimport { VPage, Page, View, List, LMR, FA } from 'tonva-react';\r\nimport { CPredictHistory } from './CPredictHistory';\r\n\r\nexport class VPredictHistory extends VPage<CPredictHistory> {\r\n  async open(param?: any) {\r\n    this.openPage(this.page);\r\n  }\r\n\r\n  render(param: any): JSX.Element {\r\n    return <this.page />\r\n  }\r\n\r\n  private page = observer(() => {\r\n    return <Page header=\"预期收益比均值历史\">\r\n      <this.pageContent />\r\n    </Page>;\r\n  })\r\n\r\n  private pageContent = observer(() => {\r\n    return <>\r\n    <this.historyChart />\r\n    </>\r\n  });\r\n\r\n  protected historyChart = observer(() => {\r\n    let {items} = this.controller;\r\n    if (items === undefined) \r\n      return <></>;\r\n    let chartHistory = <></>;\r\n    let labelList:any[] = [];\r\n    let avg20List:number[] = [];\r\n    let avg50List:number[] = [];\r\n    let avg100List:number[] = [];\r\n    for (let item of items) {\r\n      let {day, avg20, avg50, avg100} = item;\r\n      labelList.push(day);\r\n      avg20List.push(avg20);\r\n      avg50List.push(avg50);\r\n      avg100List.push(avg100);\r\n    }\r\n    let chartdata1 = {\r\n      labels: labelList,\r\n      datasets: [\r\n        {\r\n          label: 'avg20',\r\n          data: avg20List,\r\n          borderColor:'blue',\r\n          backgroundColor:'skyBlue',\r\n          borderWidth: 1,\r\n          fill: false,\r\n          yAxisID: 'y-axis-1',\r\n        },\r\n        {\r\n          label: 'avg50',\r\n          data: avg50List,\r\n          borderColor:'red',\r\n          backgroundColor:'pink',\r\n          borderWidth: 1,\r\n          fill: false,\r\n          yAxisID: 'y-axis-1',\r\n        },\r\n        {\r\n          label: 'avg100',\r\n          data: avg100List,\r\n          borderColor:'DarkGreen',\r\n          backgroundColor:'green',\r\n          borderWidth: 1,\r\n          fill: false,\r\n          yAxisID: 'y-axis-1',\r\n        },\r\n      ]\r\n    };\r\n    let options = {\r\n      scales:{\r\n        yAxes: [{\r\n            type: 'linear',\r\n            display: true,\r\n            position: 'right',\r\n            id: 'y-axis-1',\r\n        }],       \r\n      }\r\n    }\r\n\r\n    chartHistory = <RC2 data={chartdata1} type='line' options={options}/>;\r\n    return <><LMR className=\"px-3 py-2 bg-white\" left={'历史走势'}></LMR>\r\n      <div className=\"px-3\" style={{width:'95%'}}>{chartHistory}</div>\r\n    </>;\r\n  });\r\n\r\n}","/*eslint @typescript-eslint/no-unused-vars: [\"off\", { \"vars\": \"all\" }]*/\r\nimport { observable, IObservableArray } from 'mobx';\r\nimport { CUqBase } from \"../uq-app\";\r\nimport { VPredictHistory } from './VPredictHistory'\r\n\r\nexport interface PredictHistoryParam {\r\n\tday?:number,\r\n\tpriceDay?:number,\r\n\tavg20?:number,\r\n\tavg50?:number,\r\n\tavg100?:number,\r\n\tavg?:number,\r\n}\r\n\r\ninterface PredictItem {\r\n\tday:number, \r\n\tavg20:number, \r\n\tavg50:number,\r\n\tavg100:number,\r\n\tavg?:number\r\n}\r\n\r\nexport class CPredictHistory extends CUqBase {\r\n\titems: IObservableArray<PredictItem> = observable.array<PredictItem>([], { deep: true });\r\n\tday: number;\r\n\tprotected lastItem: PredictItem;\r\n\r\n\tasync internalStart(param: any) {\r\n\t\tlet p = param as PredictHistoryParam;\r\n\t\tif (p !== undefined) {\r\n\t\tthis.day = p.day;\r\n\t\tif (p.priceDay !== undefined) {\r\n\t\t\tthis.lastItem = {day:p.priceDay, avg20:p.avg20, avg50:p.avg50, avg100:p.avg100};\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.lastItem = undefined;\r\n\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\tthis.day = undefined;\r\n\t\tthis.lastItem = undefined;\r\n\t\t}\r\n\t\tawait this.load();\r\n\t\tthis.openVPage(VPredictHistory as any);\r\n\t}\r\n\r\n\tasync load() {\r\n\t\t//let ret = await this.cApp.store.miApi.call('t_toppredictavg$query', [this.day]) as PredictItem[];\r\n\t\tlet ret:PredictItem[] = await this.cApp.miNet.t_toppredictavg$query(this.day);\r\n\t\tthis.items.clear();\r\n\t\tif (!Array.isArray(ret))\r\n\t\treturn;\r\n\t\tthis.items.push(...ret);\r\n\t\tif (this.lastItem !== undefined) {\r\n\t\tlet li = {...this.lastItem};\r\n\t\tthis.items.push(li);\r\n\t\t}\r\n\t}\r\n}","import { FA, List, LMR, VPage } from \"tonva-react\";\r\nimport { CHolding } from \"./CHolding\";\r\nimport { Account, AccountValue } from \"../uq-app/uqs/BruceYuMi\";\r\n\r\nexport class VHolding extends VPage<CHolding> {\r\n\theader() {return <span className=\"ml-3\">持仓组合 <small className=\"text-muted\">正在设计实现中...</small></span>}\r\n\tcontent() {\r\n\t\treturn <div>\r\n\t\t\t<List items={this.controller.accounts} item={{render: this.renderAccount, onClick: this.onClickAccount}} />\r\n\t\t</div>;\r\n\t}\r\n\r\n\tprivate renderAccount = (item:Account&AccountValue, index:number):JSX.Element => {\r\n\t\tfunction renderValue(caption:string, value:number) {\r\n\t\t\treturn <span className=\"mr-3\"><small className=\"text-muted\">{caption}: </small>{value??0}</span>;\r\n\t\t}\r\n\t\tlet {name, mi, market, count} = item;\r\n\t\tlet right = <div className=\"px-2 d-flex align-items-center\">\r\n\t\t\t<FA className=\"align-\" name=\"angle-right\" />\r\n\t\t</div>;\r\n\t\treturn <LMR right={right}>\r\n\t\t\t<div className=\"px-3 py-2 bg-white d-block\">\r\n\t\t\t\t<div>{name}</div>\r\n\t\t\t\t<div className=\"mt-2\">\r\n\t\t\t\t\t<span className=\"mr-3 small\">共{count??0}只</span>\r\n\t\t\t\t\t{renderValue('总米值', mi as number)}\r\n\t\t\t\t\t{renderValue('总市值', market as number)}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</LMR>;\r\n\t}\r\n\r\n\tprivate onClickAccount = (item:Account&AccountValue) => {\r\n\t\tthis.controller.showAccount(item);\r\n\t}\r\n}","import { LMR, VPage } from \"tonva-react\";\r\nimport { CHolding } from \"./CHolding\";\r\n\r\nexport class VAccount extends VPage<CHolding> {\r\n\theader() {return this.controller.account.name}\r\n\tcontent() {\r\n\t\tfunction renderValue(caption:string, value:number) {\r\n\t\t\treturn <span className=\"mr-3\"><small className=\"text-muted\">{caption}: </small>{value??0}</span>;\r\n\t\t}\r\n\t\tlet {no, name, mi, market, count} = this.controller.account;\r\n\t\treturn <div className=\"mt-3 px-3 py-2 bg-white d-block\">\r\n\t\t\t<LMR right={<small className=\"text-muted\">组合编号: {no}</small>}>\r\n\t\t\t\t{name}\r\n\t\t\t</LMR>\r\n\t\t\t<div className=\"mt-2\">\r\n\t\t\t\t<span className=\"mr-3 small\">共{count??0}只</span>\r\n\t\t\t\t{renderValue('总米值', mi as number)}\r\n\t\t\t\t{renderValue('总市值', market as number)}\r\n\t\t\t</div>\r\n\t\t</div>;\r\n\t}\r\n}\r\n","import { makeObservable, observable } from \"mobx\";\r\nimport { ParamID, ParamIDinIX } from \"tonva-react\";\r\nimport { CApp, CUqBase } from \"../uq-app\";\r\nimport { Account, AccountValue } from \"../uq-app/uqs/BruceYuMi\";\r\nimport { VHolding } from \"./VHolding\";\r\nimport { VAccount } from \"./VAccount\";\r\n\r\nexport class CHolding extends CUqBase {\r\n\taccounts: (Account&AccountValue)[];\r\n\taccount: Account&AccountValue;\r\n\r\n\tconstructor(cApp: CApp) {\r\n\t\tsuper(cApp);\r\n\t\tmakeObservable(this, {\r\n\t\t\taccounts: observable,\r\n\t\t});\r\n\t}\r\n\r\n\tprotected async internalStart() {\r\n\t}\r\n\t\r\n\ttab = () => {\r\n\t\treturn this.renderView(VHolding);\r\n\t}\r\n\r\n\tload = async () => {\r\n\t\tlet {BruceYuMi} = this.uqs;\r\n\t\tlet {Account, UserAccount} = BruceYuMi;\r\n\t\tlet param:ParamIDinIX = {\r\n\t\t\tID: Account,\r\n\t\t\tIX: UserAccount,\r\n\t\t\tid: this.user.id,\r\n\t\t};\r\n\t\tlet ret = await BruceYuMi.IDinIX<Account>(param);\r\n\t\tif (ret.length === 0) {\r\n\t\t\t// 没有持仓账号，则创建默认账号\r\n\t\t\tlet accountNO = await BruceYuMi.IDNO({ID: Account});\r\n\t\t\tlet retActs = await BruceYuMi.IDActs({\r\n\t\t\t\taccount: [{\r\n\t\t\t\t\tid: undefined, \r\n\t\t\t\t\tno: accountNO, \r\n\t\t\t\t\tname: '我的持仓组合', \r\n\t\t\t\t}]\r\n\t\t\t});\r\n\t\t\tret = await BruceYuMi.IDinIX(param);\r\n\t\t}\r\n\t\tlet paramValue:ParamID = {\r\n\t\t\tIDX: BruceYuMi.AccountValue,\r\n\t\t\tid: ret.map((v:any) => (v as unknown as Account).id),\r\n\t\t}\r\n\t\tlet values = await BruceYuMi.ID<AccountValue>(paramValue);\r\n\t\tthis.accounts = ret as unknown as (Account&AccountValue)[];\r\n\t\tthis.accounts.forEach(account => {\r\n\t\t\tlet {id} = account;\r\n\t\t\tlet value = values.find((v:any) => v.id === id);\r\n\t\t\tif (value) {\r\n\t\t\t\tObject.assign(account, value);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tshowAccount = async (item:Account&AccountValue) => {\r\n\t\tthis.account = item;\r\n\t\tthis.openVPage(VAccount);\r\n\t};\r\n}\r\n","import {FetchError} from './fetchError';\r\nimport {HttpChannelUI} from './httpChannelUI';\r\nimport {nav} from 'tonva-react';\r\nimport { consts } from '../consts';\r\n\r\nexport async function httpGet(url:string, params?:any):Promise<any> {\r\n    let channel = new HttpChannel(url, undefined, undefined);\r\n    let ret = await channel.get('', params);\r\n    return ret;\r\n}\r\n\r\nexport async function httpPost(url:string, params?:any):Promise<any> {\r\n    let channel = new HttpChannel(url, undefined, undefined);\r\n    let ret = await channel.post('', params);\r\n    return ret;\r\n}\r\n\r\nexport class HttpChannel {\r\n    private hostUrl: string;\r\n    private apiToken: string;\r\n    private ui?: HttpChannelUI;\r\n    private timeout: number;\r\n\r\n    constructor(hostUrl: string, apiToken:string, ui?: HttpChannelUI) {\r\n        this.hostUrl = hostUrl;\r\n        this.apiToken = apiToken;\r\n        this.ui = ui;\r\n        this.timeout = consts.isDevelopment === true? 500000:20000;\r\n    }\r\n\r\n    private startWait = () => {\r\n        if (this.ui !== undefined) this.ui.startWait();\r\n    }\r\n\r\n    private endWait = (url?:string, reject?:(reason?:any)=>void) => {\r\n        if (this.ui !== undefined) this.ui.endWait();\r\n        if (reject !== undefined) reject('访问webapi超时 ' + url);\r\n    }\r\n\r\n    private showError = async (error:FetchError) => {\r\n        if (this.ui !== undefined) await this.ui.showError(error);\r\n    }\r\n\r\n    used() {\r\n        this.post('', {});\r\n    }\r\n\r\n    async get(url: string, params: any = undefined): Promise<any> {\r\n        if (params) {\r\n            let keys = Object.keys(params);\r\n            if (keys.length > 0) {\r\n                let c = '?';\r\n                for (let k of keys) {\r\n                    let v = params[k];\r\n                    if (v === undefined) continue;\r\n                    url += c + k + '=' + params[k];\r\n                    c = '&';\r\n                }\r\n            }\r\n        }\r\n        let options = this.buildOptions();\r\n        options.method = 'GET';\r\n        return await this.innerFetch(url, options);\r\n    }\r\n\r\n    async post(url: string, params: any): Promise<any> {\r\n        let options = this.buildOptions();\r\n        options.method = 'POST';\r\n        options.body = JSON.stringify(params);\r\n        return await this.innerFetch(url, options);\r\n    }\r\n\r\n    async put(url: string, params: any): Promise<any> {\r\n        let options = this.buildOptions();\r\n        options.method = 'PUT';\r\n        options.body = JSON.stringify(params);\r\n        return await this.innerFetch(url, options);\r\n    }\r\n\r\n    async delete(url: string, params: any): Promise<any> {\r\n        let options = this.buildOptions();\r\n        options.method = 'DELETE';\r\n        options.body = JSON.stringify(params);\r\n        return await this.innerFetch(url, options);\r\n    }\r\n    async fetch(url: string, options: any, resolve:(value?:any)=>any, reject:(reason?:any)=>void):Promise<void> {\r\n        let that = this;\r\n        this.startWait();\r\n        let path = url;\r\n        function buildError(err: string) {\r\n            return {\r\n                channel: that,\r\n                url: path,\r\n                options: options,\r\n                resolve: resolve,\r\n                reject: reject,\r\n                error: err,\r\n            }\r\n        }\r\n        try {\r\n            console.log('%s %s', options.method, path);\r\n            let timeOutHandler = setTimeout(() => that.endWait(url, reject), this.timeout);\r\n            let res = await fetch(encodeURI(path), options);\r\n            if (res.ok === false) {\r\n                clearTimeout(timeOutHandler);\r\n                that.endWait();\r\n                console.log('call error %s', res.statusText);\r\n                throw res.statusText;\r\n            }\r\n            let ct = res.headers.get('content-type');\r\n            if (ct && ct.indexOf('json')>=0) {\r\n                return res.json().then(async retJson => {\r\n                    clearTimeout(timeOutHandler);\r\n                    that.endWait();\r\n                    if (retJson.ok === true) {\r\n                        return resolve(retJson.res);\r\n                    }\r\n                    if (retJson.error === undefined) {\r\n                        await that.showError(buildError('not valid tonva json'));\r\n                    }\r\n                    else {\r\n                        await that.showError(buildError(retJson.error));\r\n                        reject(retJson.error);\r\n                    }\r\n                    //throw retJson.error;\r\n                }).catch(async error => {\r\n                    await that.showError(buildError(error.message));\r\n                });\r\n            }\r\n            else {\r\n                let text = await res.text();\r\n                clearTimeout(timeOutHandler);\r\n                that.endWait();\r\n                resolve(text);\r\n            }\r\n        }\r\n        catch(error) {\r\n            if (typeof error === 'string') {\r\n                if (error.toLowerCase().startsWith('unauthorized') === true) {\r\n                    nav.logout();\r\n                    return;\r\n                }\r\n            }\r\n            await this.showError(buildError(error.message));\r\n        };\r\n    }\r\n\r\n    private async innerFetch(url: string, options: any): Promise<any> {\r\n        let u = this.hostUrl + url;\r\n        return await new Promise<any>(async (resolve, reject) => {\r\n            await this.fetch(u, options, resolve, reject);\r\n        });\r\n    }\r\n\r\n    async callFetch(url:string, method:string, body:any):Promise<any> {\r\n        let options = this.buildOptions();\r\n        options.method = method;\r\n        options.body = body;\r\n        return await new Promise<any>(async (resolve, reject) => {\r\n            await this.fetch(url, options, resolve, reject);\r\n        });\r\n    }\r\n\r\n    private buildOptions(): any {\r\n        let {language, culture} = nav;\r\n        let headers = new Headers();\r\n        //headers.append('Access-Control-Allow-Origin', '*');\r\n        headers.append('Content-Type', 'application/json;charset=UTF-8');\r\n        let lang = language;\r\n        if (culture) lang += '-' + culture;\r\n        headers.append('Accept-Language', lang);\r\n        if (this.apiToken) { \r\n            headers.append('Authorization', this.apiToken); \r\n        }\r\n        let options = {\r\n            headers: headers,\r\n            // cache: 'no-cache',\r\n        };\r\n        return options;\r\n    }\r\n}\r\n","import {nav} from 'tonva-react';\r\n\r\nexport interface HttpChannelUI {\r\n    startWait():void;\r\n    endWait():void;\r\n    showError(error:any):Promise<void>;\r\n}\r\n\r\nexport class HttpChannelNavUI implements HttpChannelUI {\r\n    startWait() {\r\n        nav.startWait();\r\n    }\r\n    endWait() {\r\n        nav.endWait();\r\n    }\r\n    async showError(error:any):Promise<void> {\r\n        nav.endWait();\r\n        /*\r\n        if (error.name === 'SyntaxError') {\r\n            error = {\r\n                name: error.name,\r\n                message: error.message,\r\n            }\r\n        }*/\r\n        await nav.onError(error);\r\n    }\r\n}\r\n\r\n","//import {isDevelopment} from '../local';\r\nimport {HttpChannel} from './httpChannel';\r\n\r\nexport async function refetchApi(channel:HttpChannel, url:any, options:any, resolve:any, reject:any) {\r\n    await channel.fetch(url, options, resolve, reject);\r\n}\r\n\r\nexport abstract class ApiBase {\r\n    protected token: string;\r\n    protected path: string;\r\n    protected showWaiting: boolean;\r\n\r\n    constructor(path: string, showWaiting: boolean) {\r\n        this.path = path || '';\r\n        this.showWaiting = showWaiting;\r\n    }\r\n\r\n    protected abstract getHttpChannel(): Promise<HttpChannel>;\r\n\r\n    public async call(url:string, method:string, body:any):Promise<any> {\r\n        let channel = await this.getHttpChannel();\r\n        return await channel.callFetch(url, method, body);\r\n    }\r\n\r\n    public async get(path:string, params:any=undefined): Promise<any> {\r\n        let channel = await this.getHttpChannel();\r\n        return await channel.get(this.path + path, params);\r\n    }\r\n\r\n    public async post(path:string, params:any): Promise<any> {\r\n        let channel = await this.getHttpChannel();\r\n        return await channel.post(this.path + path, params);\r\n    }\r\n\r\n    public async put(path:string, params:any): Promise<any> {\r\n        let channel = await this.getHttpChannel();\r\n        return await channel.put(this.path + path, params);\r\n    }\r\n\r\n    public async delete(path:string, params:any): Promise<any> {\r\n        let channel = await this.getHttpChannel();\r\n        return await channel.delete(this.path + path, params);\r\n    }\r\n}\r\n","import _ from 'lodash';\r\nimport { HttpChannel } from './httpChannel';\r\nimport { HttpChannelNavUI } from './httpChannelUI';\r\nimport { ApiBase } from './apiBase';\r\n\r\nlet channelUIs: { [name: string]: HttpChannel } = {};\r\nlet channelNoUIs: { [name: string]: HttpChannel } = {};\r\n\r\nclass MiApiChannel extends ApiBase {\r\n\tprivate apiName: string;\r\n\turl: string;\r\n\r\n\tconstructor(url: string, basePath: string, apiName: string, uqToken: string, showWaiting?: boolean) {\r\n\t\tsuper(basePath, showWaiting);\r\n\t\tthis.showWaiting = showWaiting;\r\n\t\tthis.apiName = apiName;\r\n\t\tthis.token = uqToken;\r\n\t\tthis.url = url;\r\n\t}\r\n\r\n\tprotected async getHttpChannel(): Promise<HttpChannel> {\r\n\t\tlet channels: { [name: string]: HttpChannel };\r\n\t\tlet channelUI: HttpChannelNavUI;\r\n\t\tif (this.showWaiting === true || this.showWaiting === undefined) {\r\n\t\t\tchannels = channelUIs;\r\n\t\t\tchannelUI = new HttpChannelNavUI();\r\n\t\t}\r\n\t\telse {\r\n\t\t\tchannels = channelNoUIs;\r\n\t\t}\r\n\t\tlet channel = channels[this.apiName];\r\n\t\tif (channel !== undefined) return channel;\r\n\t\tchannel = new HttpChannel(this.url, this.token, channelUI);\r\n\t\treturn channels[this.apiName] = channel;\r\n\t}\r\n}\r\n\r\nexport class MiApi {\r\n\tprivate channel: MiApiChannel;\r\n\r\n\tconstructor(url: string, basePath: string, apiName: string, uqToken: string, showWaiting?: boolean) {\r\n\t\tthis.channel = new MiApiChannel(url, basePath, apiName, uqToken, showWaiting);\r\n\t}\r\n\r\n\tasync call(name: string, params: any[]): Promise<any> {\r\n\t\tlet pbody = { call: name, params: params };\r\n\t\treturn await this.channel.post('sql/call', pbody);\r\n\t}\r\n\r\n\tasync query(name: string, params: any[]): Promise<any> {\r\n\t\tlet pbody = { call: name, params: params };\r\n\t\treturn await this.channel.post('sql/call', pbody);\r\n\t}\r\n\r\n\tasync page(name: string, params: any[], pageStart: number, pageSize: number): Promise<any> {\r\n\t\tlet p: any[];\r\n\t\tswitch (typeof params) {\r\n\t\t\tcase 'undefined': p = []; break;\r\n\t\t\tdefault: p = _.clone(params); break;\r\n\t\t}\r\n\t\tp.push(pageStart);\r\n\t\tp.push(pageSize);\r\n\t\tlet pbody = { call: name, params: p };\r\n\t\treturn await this.channel.post('sql/call', pbody);\r\n\t}\r\n\r\n\tasync process(proc: any, params: any[]): Promise<any> {\r\n\t\tlet pbody = { proc: proc, params: params };\r\n\t\treturn await this.channel.post('sql/query', pbody);\r\n\t}\r\n}\r\n","import { consts } from \"consts\";\r\nimport { User } from \"tonva-react\";\r\nimport { MiApi } from \"./miApi\";\r\n\r\nexport class MiNet {\r\n\tprivate miApi: MiApi;\r\n\tprivate user: User;\r\n\r\n\tconstructor(user: User) {\r\n\t\tlet miHost = consts.miApiHost;\r\n\t\tif (document.baseURI.indexOf('localmiserver') > 0) {\r\n\t\t\tmiHost = consts.miApiHostDebug;\r\n\t\t}\r\n\t\tthis.user = user;\r\n\t\tthis.miApi = new MiApi(miHost, 'fsjs/', 'miapi', user.token, false);\r\n\t}\r\n\r\n\tget userId():number {return this.user.id;}\r\n\r\n\tasync process(proc:any, params:any[]) {\r\n\t\treturn await this.miApi.process(proc, params);\r\n\t}\r\n\r\n\tasync q_marketpe(param:any):Promise<{day:number, pe:number, e:number}[]> {\r\n\t\tlet rets = await this.miApi.query('q_marketpe', param) as {day:number, pe:number, e:number}[];\r\n\t\treturn rets;\r\n\t}\r\n\r\n\tasync t_toppredictavg$query(day:any):Promise<any[]> {\r\n\t\tlet ret = await this.miApi.call('t_toppredictavg$query', [day]);\r\n\t\treturn ret;\r\n\t}\r\n\r\n\tasync q_stocks$page(p:any, pageStart:any, pageSize:any):Promise<any> {\r\n\t\tlet ret = await this.miApi.page('q_stocks$page', p, pageStart, pageSize);\r\n\t\treturn ret;\r\n\t}\r\n\r\n\tasync q_stockallinfo(id:any, day:any) {\r\n\t\treturn this.miApi.query('q_stockallinfo', [id, day]);\r\n\t}\r\n\r\n\tasync t_tagstock$query(tagId:any, id:any) {\r\n\t\treturn this.miApi.query('t_tagstock$query', [this.user.id, tagId, id]) //this.uqs.mi.TagStock.query({ user: nav.user.id, stock: id })\r\n\t}\r\n\r\n\tasync t_tag$all() {\r\n\t\treturn await this.miApi.query('t_tag$all', [this.user.id]);\r\n\t}\r\n\r\n\tasync t_tag$save(name:string) {\r\n\t\treturn await this.miApi.call('t_tag$save', [this.user.id, undefined, name]);\r\n\t}\r\n\r\n\tasync t_tagstock$add(tagId:any, baseId:any) {\r\n\t\treturn await this.miApi.call('t_tagstock$add', [this.user.id, tagId, baseId]); //.uqs.mi.TagStock.add(param);\r\n\t}\r\n\r\n\tasync t_tagstock$del(tagId:any, baseId:any) {\r\n\t\treturn await this.miApi.call('t_tagstock$del', [this.user.id, tagId, baseId]); // //await this.uqs.mi.TagStock.del(param);\r\n\t}\r\n\r\n\tasync t_stockwarning$all() {\r\n\t\treturn await this.miApi.call('t_stockwarning$all', [this.user.id]);//await this.uqs.mi.StockWarningAll.query(undefined);\r\n\t}\r\n\r\n\tasync t_stockwarning$add(id:any, type:any, price:any) {\r\n\t\treturn await this.miApi.call('t_stockwarning$add', [this.user.id, id, type, price]);\r\n\t}\r\n\r\n\tasync t_usersettings$save(v:string) {\r\n\t\treturn await this.miApi.call('t_usersettings$save', [this.user.id, 'config', v]);\r\n\t}\r\n\r\n\tasync t_usersettings$query() {\r\n\t\treturn await this.miApi.query('t_usersettings$query', [this.user.id, 'config']);\r\n\t}\r\n\r\n\tasync t_allaccounts() {\r\n\t\treturn await this.miApi.query('t_allaccounts', [this.user.id]);\r\n\t}\r\n\r\n\tasync q_getlasttradeday() {\r\n\t\treturn await this.miApi.call('q_getlasttradeday', []);\r\n\t}\r\n}\r\n","import { VPage } from \"tonva-react\";\r\nimport { CGroup } from \"./CGroup\";\r\n\r\nexport class VGroup extends VPage<CGroup> {\r\n\theader() {return '自选组管理'}\r\n\tcontent() {\r\n\t\treturn <div className=\"p-3\">\r\n\t\t\t自选组管理\r\n\t\t</div>;\r\n\t}\r\n}","import { CUqBase } from \"../uq-app\";\r\nimport { VGroup } from \"./VGroup\";\r\n\r\nexport class CGroup extends CUqBase {\r\n\tasync internalStart(param: any) {\r\n\t\tthis.openVPage(VGroup);\r\n\t}\r\n}\r\n","//import { CHome } from \"./home\";\r\n//import { CMe } from \"./me\";\r\nimport { CBug } from \"./bug\";\r\nimport { CUqApp } from \"./CBase\";\r\nimport { res } from \"./res\";\r\nimport { VMain } from \"./VMain\";\r\nimport { CTester } from \"./test-uqui\";\r\nimport { setUI } from \"./uqs\";\r\nimport { CHome } from '../home';\r\nimport { CMe } from '../me';\r\nimport { CExplorer } from '../explorer';\r\nimport { CWarning } from '../warning';\r\nimport { CPredictHistory } from '../predicthistory';\r\n//import { CUqApp } from './CBase';\r\n//import { res } from './res';\r\nimport { CHolding } from 'holding';\r\n//import { VMain } from './VMain';\r\nimport { Store } from 'store';\r\nimport { MiNet } from '../net';\r\nimport { CGroup } from '../group';\r\n\r\nconst gaps = [10, 3,3,3,3,3,5,5,5,5,5,5,5,5,10,10,10,10,15,15,15,30,30,60];\r\n\r\nexport class CApp extends CUqApp {\r\n\tcHome: CHome;\r\n\tcBug: CBug;\r\n\tcMe: CMe;\r\n\tcUI: CTester;\r\n\tcHolding: CHolding;\r\n\tcExporer: CExplorer;\r\n\tcWarning: CWarning;\r\n\tmiNet: MiNet;\r\n\tstore: Store;\r\n\r\n\tprotected async internalStart(isUserLogin: boolean) {\r\n\t\tthis.setRes(res);\r\n\t\tsetUI(this.uqs);\r\n\t\t/*\r\n\t\tthis.cHome = this.newC(CHome);\r\n\t\tthis.cBug = this.newC(CBug);\r\n\t\tthis.cMe = this.newC(CMe);\r\n\t\tthis.cUI = this.newC(CTester) as CTester;\r\n\t\tthis.cHome.load();\r\n\t\t*/\r\n\t\tthis.miNet = new MiNet(this.user);\r\n\t\tthis.store = new Store(this.miNet);\r\n\t\tawait this.store.load();\r\n\t\t\r\n\t\tthis.cHome = this.newC(CHome);\r\n\t\tthis.cExporer = this.newC(CExplorer);\r\n\t\tthis.cHolding = this.newC(CHolding);\r\n\t\tthis.cMe = this.newC(CMe);\r\n\t\tthis.cWarning = this.newC(CWarning);\r\n\t\tthis.openVPage(VMain, undefined, this.dispose);\r\n\t\t// 加上下面一句，可以实现主动页面刷新\r\n\t\t// this.timer = setInterval(this.callTick, 1000);\r\n\t\t// uq 里面加入这一句，会让相应的$Poked查询返回poke=1：\r\n\t\t// TUID [$User] ID (member) SET poke=1;\r\n\t}\r\n\r\n\topenPredictAVG(param:any) {\r\n\t\tlet pc = this.newC(CPredictHistory);\r\n\t\tpc.start(param);\r\n\t}\r\n\r\n\tshowGroupsManage() {\r\n\t\tlet cGroup = this.newC(CGroup);\r\n\t\tcGroup.start();\r\n\t}\r\n\r\n\tprivate timer:any;\r\n\tprotected onDispose() {\r\n\t\tclearInterval(this.timer);\r\n\t\tthis.timer = undefined;\r\n\t}\r\n\r\n\tprivate tick = 0;\r\n\tprivate gapIndex = 0;\r\n\tprivate callTick = async () => {\r\n\t\ttry {\r\n\t\t\tif (!this.user) return;\r\n\t\t\t++this.tick;\r\n\t\t\tif (this.tick<gaps[this.gapIndex]) return;\r\n\t\t\t//console.error('tick ', new Date());\r\n\t\t\tthis.tick = 0;\r\n\t\t\tif (this.gapIndex < gaps.length - 1) ++this.gapIndex;\r\n\t\t\tlet ret = await this.uqs.BzHelloTonva.$poked.query(undefined, false);\r\n\t\t\tlet v = ret.ret[0];\r\n\t\t\tif (v === undefined) return;\r\n\t\t\tif (!v.poke) return;\r\n\t\t\tthis.gapIndex = 1;\r\n\r\n\t\t\t// 数据服务器提醒客户端刷新，下面代码重新调入的数据\r\n\t\t\t//this.cHome.refresh();\r\n\t\t}\r\n\t\tcatch {\r\n\t\t}\r\n\t}\r\n}\r\n","//=== UqApp builder created on Wed Mar 10 2021 17:59:44 GMT-0500 (GMT-05:00) ===//\r\nimport * as BzHelloTonva from './BzHelloTonva';\r\nimport * as BruceYuMi from './BruceYuMi';\r\n\r\nexport interface UQs {\r\n\tBzHelloTonva: BzHelloTonva.UqExt;\r\n\tBruceYuMi: BruceYuMi.UqExt;\r\n}\r\n\r\nexport * as BzHelloTonva from './BzHelloTonva';\r\nexport * as BruceYuMi from './BruceYuMi';\r\n\r\nexport function setUI(uqs:UQs) {\r\n\tBzHelloTonva.setUI(uqs.BzHelloTonva);\r\n\tBruceYuMi.setUI(uqs.BruceYuMi);\r\n}\r\n","//=== UqApp builder created on Wed Mar 10 2021 16:02:48 GMT-0500 (GMT-05:00) ===//\r\nimport { NavView, start, nav } from 'tonva-react';\r\nimport { CApp } from './CApp';\r\nimport { appConfig } from './appConfig';\r\n\r\nexport const App: React.FC = () => {\r\n\tnav.setSettings(appConfig);\r\n\tconst onLogined = async (isUserLogin?:boolean) => {\r\n\t\tawait start(CApp, appConfig, isUserLogin);\r\n\t}\r\n\treturn <NavView onLogined={onLogined} />;\r\n}\r\n\r\n","/*eslint @typescript-eslint/no-unused-vars: [\"off\", { \"vars\": \"all\" }]*/\r\nimport { VPage, List, LMR, SearchBox, Scroller } from 'tonva-react';\r\nimport { CSelectStock } from './CSelectStock'\r\n\r\nexport class VStockSelect extends VPage<CSelectStock> {\r\n\tprivate onClickStock = async (model: any) => {\r\n\t\tawait this.controller.returnStock(model);\r\n\t\tthis.closePage();\r\n\t}\r\n\r\n\theader() {return '选择股票'}\r\n\tget headerClassName() {return 'bg-primary'}\r\n\tprotected async onPageScrollBottom(scroller: Scroller) {\r\n\t\tawait this.controller.pageItems.more();\r\n\t}\r\n\r\n\tcontent() {\r\n\t\tlet { pageItems, searchByKey } = this.controller;\r\n\t\tlet none = <div className=\"p-3 small text-muted\">无结果</div>;\r\n\t\treturn <div>\r\n\t\t\t<SearchBox className=\"px-1 w-100  mt-2 mr-2\"\r\n\t\t\t\tsize='md'\r\n\t\t\t\tallowEmptySearch={true}\r\n\t\t\t\tonSearch={searchByKey}\r\n\t\t\t\tplaceholder=\"搜索股票\" />\r\n\t\t\t<List before={''} none={none} \r\n\t\t\t\titems={pageItems} \r\n\t\t\t\titem={{ render: this.renderStock, onClick: this.onClickStock }} />\r\n\t\t</div>\r\n\t}\r\n\r\n\tprivate renderStock = (stock: any, index: number) => {\r\n\t\tlet { name, code } = stock;\r\n\t\treturn <LMR className=\"px-3 py-2 \" >\r\n\t\t\t<div className=\"font-weight-bold\"></div>\r\n\t\t\t<div>{name + ' ' + code}</div>\r\n\t\t</LMR >\r\n\t}\r\n}","import { PageItems } from 'tonva-react';\r\nimport { Stock } from 'store';\r\nimport { MiNet } from '../net';\r\nimport { CUqBase } from \"../uq-app\";\r\nimport { VStockSelect } from './VSelectStock';\r\n\r\nclass PageStockItems<T> extends PageItems<T> {\r\n\tprivate miNet: MiNet;\r\n\r\n\tconstructor(miNet: MiNet) {\r\n\t\tsuper(true);\r\n\t\tthis.miNet = miNet;\r\n\t\tthis.firstSize = this.pageSize = 30;\r\n\t}\r\n\r\n\tprotected async loadResults(param: any, pageStart: any, pageSize: number): Promise<{\r\n\t\t\t[name: string]: any[];\r\n\t\t}> {\r\n\t\tif (pageStart === undefined) pageStart = 0;\r\n\t\tlet p = ['%' + param.key + '%'];\r\n\t\ttry {\r\n\t\t\t//let ret = await this.cStock.cApp.store.miApi.page('q_stocks$page', p, pageStart, pageSize);\r\n\t\t\tlet ret = await this.miNet.q_stocks$page(p, pageStart, pageSize);\r\n\t\t\treturn {$page: ret};\r\n\t\t}\r\n\t\tcatch (error) {\r\n\t\t\t//let e = error;\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t}\r\n\r\n\tprotected setPageStart(item: any): any {\r\n\t\tthis.pageStart = item === undefined ? 0 : item.id;\r\n\t}\r\n}\r\n\r\nexport class CSelectStock extends CUqBase {\r\n\tpageItems: PageStockItems<Stock>;\r\n\r\n\tasync internalStart(param: any) {\r\n\t\tthis.pageItems = new PageStockItems<any>(this.cApp.miNet);\r\n\t\tthis.openVPage(VStockSelect);\r\n\t}\r\n\r\n\tsearchByKey = async (key: string) => {\r\n\t\tthis.pageItems.first({ key: key });\r\n\t}\r\n\r\n\t//给调用页面返回id\r\n\treturnStock = async (item: any): Promise<any> => {\r\n\t\tthis.returnCall(item);\r\n\t}\r\n\r\n\tonPage = async () => {\r\n\t\tawait this.pageItems.more();\r\n\t}\r\n}\r\n","import { UqExt as Uq } from './BzHelloTonva';\r\nimport * as Customer from './Customer.ui';\r\nimport * as OrderMaster from './OrderMaster.ui';\r\nimport * as OrderDetail from './OrderDetail.ui';\r\nimport * as Tag from './Tag.ui';\r\nimport * as Staff from './Staff.ui';\r\nimport * as $Piecewise from './$Piecewise.ui';\r\nimport * as $PiecewiseDetail from './$PiecewiseDetail.ui';\r\nimport * as Achieve from './Achieve.ui';\r\nimport * as Hours from './Hours.ui';\r\nimport * as CustomerTag from './CustomerTag.ui';\r\nimport * as UserStaff from './UserStaff.ui';\r\n\r\nexport function setUI(uq: Uq) {\r\n\tObject.assign(uq.Customer, Customer);\r\n\tObject.assign(uq.OrderMaster, OrderMaster);\r\n\tObject.assign(uq.OrderDetail, OrderDetail);\r\n\tObject.assign(uq.Tag, Tag);\r\n\tObject.assign(uq.Staff, Staff);\r\n\tObject.assign(uq.$Piecewise, $Piecewise);\r\n\tObject.assign(uq.$PiecewiseDetail, $PiecewiseDetail);\r\n\tObject.assign(uq.Achieve, Achieve);\r\n\tObject.assign(uq.Hours, Hours);\r\n\tObject.assign(uq.CustomerTag, CustomerTag);\r\n\tObject.assign(uq.UserStaff, UserStaff);\r\n}\r\nexport * from './BzHelloTonva';\r\n","import { UqExt as Uq } from './BruceYuMi';\r\nimport * as Account from './Account.ui';\r\nimport * as Holding from './Holding.ui';\r\nimport * as Transaction from './Transaction.ui';\r\nimport * as Stock from './Stock.ui';\r\nimport * as Market from './Market.ui';\r\nimport * as Portfolio from './Portfolio.ui';\r\nimport * as StockValue from './StockValue.ui';\r\nimport * as AccountValue from './AccountValue.ui';\r\nimport * as UserAccount from './UserAccount.ui';\r\n\r\nexport function setUI(uq: Uq) {\r\n\tObject.assign(uq.Account, Account);\r\n\tObject.assign(uq.Holding, Holding);\r\n\tObject.assign(uq.Transaction, Transaction);\r\n\tObject.assign(uq.Stock, Stock);\r\n\tObject.assign(uq.Market, Market);\r\n\tObject.assign(uq.Portfolio, Portfolio);\r\n\tObject.assign(uq.StockValue, StockValue);\r\n\tObject.assign(uq.AccountValue, AccountValue);\r\n\tObject.assign(uq.UserAccount, UserAccount);\r\n}\r\nexport * from './BruceYuMi';\r\n","/*eslint @typescript-eslint/no-unused-vars: [\"off\", { \"vars\": \"all\" }]*/\r\nimport * as React from 'react';\r\nimport classNames from 'classnames';\r\nimport { VPage, Page, View, List, LMR, left0, FA } from 'tonva-react';\r\nimport { observable } from 'mobx';\r\nimport { observer } from 'mobx-react';\r\nimport RC2 from 'react-chartjs-2'\r\nimport { GFunc } from '../tool/GFunc';\r\nimport { CStockInfo } from './CStockInfo'\r\nimport { NStockInfo, StockCapitalearning, StockBonus } from './StockInfoType';\r\nimport { ErForEarning, SlrForEarning } from 'regression';\r\n\r\nexport class VStockInfo extends VPage<CStockInfo> {\r\n\tprivate input: HTMLInputElement;\r\n\tprivate key: string = undefined;\r\n\r\n\tasync open(param?: any) {\r\n\t\tthis.openPage(this.page);\r\n\t}\r\n\r\n\t@observable protected ttmLimit:boolean = false;\r\n\r\n\trender(param: any): JSX.Element {\r\n\t\treturn this.page();\r\n\t}\r\n\r\n\tcheckLimitShow = (e:any)=> {\r\n\t\tlet check = e.target.checked as boolean;\r\n\t\tthis.ttmLimit = check;\r\n\t}\r\n\r\n\tcheckShowLater = (e:any)=> {\r\n\t\tlet check = e.target.checked as boolean;\r\n\t\tthis.controller.loadHistoryData(check);\r\n\t}\r\n\r\n\tcheckDefaultTag = (e:any)=> {\r\n\t\tlet check = e.target.checked as boolean;\r\n\t\tthis.controller.onClickDefaultTag(check);\r\n\t}\r\n\r\n\tprivate page = observer(() => {\r\n\t\tlet { openMetaView, baseItem, onSelectTag, stockTags, isLogined } = this.controller;\r\n\t\tlet { name, code, day } = baseItem;\r\n\t\tlet viewMetaButton = <></>;\r\n\t\tif (isLogined) {\r\n\t\tviewMetaButton = <button type=\"button\" className=\"btn w-100\" onClick={openMetaView}>view</button>\r\n\t\t}\r\n\t\tlet right = stockTags && <button \r\n\t\t\tclassName=\"btn btn-sm mr-2 btn-outline-success bg-light align-self-center\"\r\n\t\t\tonClick={onSelectTag}>\r\n\t\t{stockTags.length === 0? '加自选' : '设分组'}\r\n\t\t</button>;\r\n\t\tlet headStr = name + ' ' + code;\r\n\t\tif (day !== undefined) {\r\n\t\theadStr += ' - ' + day;\r\n\t\t}\r\n\tlet head = <div onClick={()=>this.controller.showSelectStock(day)}>{headStr}</div>\r\n\t\treturn <Page header={head} right={right}\r\n\t\theaderClassName='bg-primary'>\r\n\t\t{React.createElement(this.pageContent)}\r\n\t\t</Page>;\r\n\t})\r\n\r\n\tprivate pageContent = observer(() => {\r\n\t\treturn <>\r\n\t\t{this.dateHead()}\r\n\t\t{React.createElement(this.baseInfo)}\r\n\t\t{React.createElement(this.historyChart)}\r\n\t\t{React.createElement(this.predictInfo)}\r\n\t\t{React.createElement(this.predictSeasonEarning)}\r\n\t\t{React.createElement(this.seasonEarning)}\r\n\t\t{React.createElement(this.capitalEarning)}\r\n\t\t{React.createElement(this.bonus)}\r\n\t\t</>\r\n\t});\r\n\r\n\tprivate onChange = (evt: React.ChangeEvent<any>) => {\r\n\t\tlet v = evt.target.value;\r\n\t\tlet n = Number(v);\r\n\t\tif (isNaN(n) === true || !Number.isInteger(n)) {\r\n\t\tif (this.input) {\r\n\t\t\tthis.input.value = this.key;\r\n\t\t}\r\n\t\treturn;\r\n\t\t}\r\n\t\tthis.key = evt.target.value;\r\n\t\tif (this.key !== undefined) {\r\n\t\t\tthis.key = this.key.trim();\r\n\t\t\tif (this.key === '') this.key = undefined;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate onSubmit = async (evt: React.FormEvent<any>) => {\r\n\t\tevt.preventDefault();\r\n\t\tif (this.key === undefined) this.key = '';\r\n\t\tlet n = Number(this.key);\r\n\t\tif (!isNaN(n) && Number.isInteger((n))) {\r\n\t\tif (n ===0 || (n >= 20000101 && n < 30000101)) {\r\n\t\t\tawait this.controller.changeDay(n);\r\n\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tprivate dateHead = () => {\r\n\t\tlet {day} = this.controller.baseItem;\r\n\t\tlet dayString = day === undefined || isNaN(day) ? '' : day.toString();\r\n\t\treturn <div className=\"px-3 py-2\">\r\n\t\t\t<form className=\"w-100\" onSubmit={this.onSubmit} >\r\n\t\t\t\t<div className=\"input-group input-group-sm\">\r\n\t\t\t\t\t<label className=\"input-group-addon mr-2 mb-0 align-self-center\">{'日期'}</label>\r\n\t\t\t\t\t<input ref={v=>this.input=v} onChange={this.onChange}\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tname=\"key\"\r\n\t\t\t\t\t\t\tdefaultValue={dayString}\r\n\t\t\t\t\t\t\tclassName=\"form-control border-primary px-2\"\r\n\t\t\t\t\t\t\tplaceholder={'yyyymmdd'}\r\n\t\t\t\t\t\t\tmaxLength={8} />\r\n\t\t\t\t\t<div className=\"input-group-append\">\r\n\t\t\t\t\t\t\t<button className=\"btn btn-primary px-2\"\r\n\t\t\t\t\t\t\t\ttype=\"submit\">\r\n\t\t\t\t\t\t\t\t<i className='fa fa-search' />\r\n\t\t\t\t\t\t\t\t<i className=\"fa\"/>\r\n\t\t\t\t\t\t\t\t{'跳转'}\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</form>\r\n\t\t</div>;\r\n\t}\r\n\r\n\r\n\tprivate baseInfo = observer(() => {\r\n\t\tlet {baseItem, isMySelect} = this.controller;\r\n\t\tlet { id, name, code, symbol, pe, roe, price, order, divyield, e, capital, bonus } = baseItem;\r\n\r\n\t\t//let list = this.controller.cApp.store.defaultList;\r\n\t\t//let fInList = list.findIndex(v=>v===id) >= 0;\r\n\t\t//let fInList = this.controller.cApp.store.isMySelect(id);\r\n\t\tlet right = <label className=\"align-self-center px-3\"> <input type=\"checkbox\" name=\"checkDefaultList\" defaultChecked={isMySelect}\r\n\t\tonChange={this.checkDefaultTag} />自选股</label>;\r\n\t\treturn <LMR className=\"bg-white\" right={right}> <div className=\"px-3 py-2\" >\r\n\t\t<div className=\"d-flex flex-wrap\">\r\n\t\t\t<div className=\"px-3 c8\">{GFunc.caption('TTM')}{GFunc.numberToFixString(pe)}</div>\r\n\t\t\t<div className=\"px-3 c8\">{GFunc.caption('股息率')}{GFunc.percentToFixString(divyield)}</div>\r\n\t\t\t<div className=\"px-3 c8\">{GFunc.caption('ROE')}{GFunc.percentToFixString(roe)}</div>\r\n\t\t\t<div className=\"px-3 c8\">{GFunc.caption('价格')}{GFunc.numberToFixString(price)}</div>\r\n\t\t\t<a className=\"px-3 text-info\" href={`https://finance.sina.com.cn/realstock/company/${symbol}/nc.shtml`} target=\"_blank\" rel=\"noopener noreferrer\" onClick={(e) =>{e.stopPropagation() }}>新浪财经</a>\r\n\t\t</div>    \r\n\t\t</div>\r\n\t\t</LMR>;\r\n\t});\r\n\r\n\tprotected onClickName = async (item: NStockInfo) => {\r\n\t\tlet { symbol } = item;\r\n\t\tlet url = `http://finance.sina.com.cn/realstock/company/${symbol}/nc.shtml`;\r\n\t\tlet w = window.open(url, '');\r\n\t\tw.opener = undefined;\r\n\t}\r\n\r\n\tprotected historyChart = observer(() => {\r\n\t\tlet {historyData, baseItem} = this.controller;\r\n\t\tif (historyData === undefined) \r\n\t\treturn <></>;\r\n\t\tlet chartHistory = <></>;\r\n\t\tlet labelList:any[] = [];\r\n\t\tlet priceList:number[] = [];\r\n\t\tlet ttmList:number[] = [];\r\n\t\tfor (let item of historyData) {\r\n\t\tlet {day, price, ttm} = item;\r\n\t\tlabelList.push(day);\r\n\t\tpriceList.push(GFunc.numberToPrecision(price, 4));\r\n\t\tif (ttm <= 0) \r\n\t\t\tttmList.push(undefined);\r\n\t\telse {\r\n\t\t\tif (this.ttmLimit && ttm >= 35) {\r\n\t\t\tttmList.push(35);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\tttmList.push(GFunc.numberToPrecision(ttm, 4));\r\n\t\t\t}\r\n\t\t}\r\n\t\t}\r\n\t\tlet chartdata1 = {\r\n\t\tlabels: labelList,\r\n\t\tdatasets: [\r\n\t\t\t{\r\n\t\t\tlabel: '价格',\r\n\t\t\tdata: priceList,\r\n\t\t\tborderColor:'blue',\r\n\t\t\tbackgroundColor:'skyBlue',\r\n\t\t\tborderWidth: 1,\r\n\t\t\tfill: false,\r\n\t\t\tyAxisID: 'y-axis-1',\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\tlabel: 'TTM',\r\n\t\t\tdata: ttmList,\r\n\t\t\tborderColor:'red',\r\n\t\t\tbackgroundColor:'pink',\r\n\t\t\tborderWidth: 1,\r\n\t\t\tfill: false,\r\n\t\t\tyAxisID: 'y-axis-2',\r\n\t\t\t}\r\n\t\t]\r\n\t\t};\r\n\t\tlet options = {\r\n\t\tscales:{\r\n\t\t\tyAxes: [{\r\n\t\t\t\ttype: 'linear',\r\n\t\t\t\tdisplay: true,\r\n\t\t\t\tposition: 'left',\r\n\t\t\t\tid: 'y-axis-1',\r\n\t\t\t}, {\r\n\t\t\t\ttype: 'linear',\r\n\t\t\t\tdisplay: true,\r\n\t\t\t\tposition: 'right',\r\n\t\t\t\tid: 'y-axis-2',\r\n\t\t\t\tgridLines: {\r\n\t\t\t\t\tdrawOnChartArea: false\r\n\t\t\t\t}\r\n\t\t\t}],       \r\n\t\t}\r\n\t\t}\r\n\t\tchartHistory = <RC2 data={chartdata1} type='line' options={options} />;\r\n\t\tlet right = <></>;\r\n\t\tif (baseItem.day !== undefined) {\r\n\t\tright = <><label className=\"px-3\"> <input type=\"checkbox\" name=\"showLater\" defaultChecked={false}\r\n\t\t\t\tonChange={this.checkShowLater} />显示后面数据</label>\r\n\t\t\t<label className=\"px-3\"> <input type=\"checkbox\" name=\"selectType\" defaultChecked={this.ttmLimit}\r\n\t\t\tonChange={this.checkLimitShow} />限制TTM显示范围</label>\r\n\t\t\t</>;\r\n\r\n\t\t}\r\n\t\telse {\r\n\t\tright = <label className=\"px-3\"> <input type=\"checkbox\" name=\"selectType\" defaultChecked={this.ttmLimit}\r\n\t\t\tonChange={this.checkLimitShow} />限制TTM显示范围</label>;\r\n\t\t}\r\n\t\treturn <><LMR className=\"px-3 py-2 bg-white\" left={'历史走势'} right={right}></LMR>\r\n\t\t<div className=\"px-3\" style={{width:'95%'}}>{chartHistory}</div>\r\n\t\t</>;\r\n\t});\r\n\r\n\tprotected predictInfo = observer(() => {\r\n\t\tlet {predictData, ypredict} = this.controller;\r\n\t\tif (predictData === undefined) \r\n\t\treturn <></>;\r\n\t\tlet { e, b, r2, epre, l, lr2, lpre } = predictData;\r\n\t\tlet chart1 = <></>;\r\n\t\tif (ypredict.length === 5) {\r\n\t\tlet er = new ErForEarning(ypredict);\r\n\t\tlet chartdata1 = {\r\n\t\t\tlabels: ['0', '1', '2', '3', '4'],\r\n\t\t\tdatasets: [\r\n\t\t\t{\r\n\t\t\t\tlabel: '原值',\r\n\t\t\t\tdata: ypredict.map(v=>GFunc.numberToPrecision(v)),\r\n\t\t\t\tborderColor:'black',\r\n\t\t\t\tbackgroundColor:'skyBlue',\r\n\t\t\t\tshowLine: false,\r\n\t\t\t\tpointStyle: \"crossRot\",\r\n\t\t\t\tborderWidth: 1,\r\n\t\t\t\tpointRadius: 5,\r\n\t\t\t\tfill: false,\r\n\t\t\t} as any\r\n\t\t\t]\r\n\t\t};\r\n\t\tif (!(isNaN(er.B) || isNaN(er.A))) {\r\n\t\t\tlet per:number[] = [];\r\n\t\t\tfor (let i = 0; i < 5; ++i) {\r\n\t\t\tper.push(GFunc.numberToPrecision(er.predict(i), 4));\r\n\t\t\t}\r\n\t\t\tchartdata1.datasets.push(\r\n\t\t\t{\r\n\t\t\t\tlabel: '指数回归',\r\n\t\t\t\tdata: per,\r\n\t\t\t\tborderColor:'red',\r\n\t\t\t\tbackgroundColor:'pink',\r\n\t\t\t\tborderWidth: 1,\r\n\t\t\t\tfill: false,\r\n\t\t\t});\r\n\t\t}\r\n\t\tlet lr = new SlrForEarning(ypredict);\r\n\t\tif (!(isNaN(lr.slope) || isNaN(lr.intercept))) {\r\n\t\t\tlet plr:number[] = [];\r\n\t\t\tfor (let i = 0; i < 5; ++i) {\r\n\t\t\tplr.push(GFunc.numberToPrecision(lr.predict(i), 4));\r\n\t\t\t}\r\n\t\t\tchartdata1.datasets.push(\r\n\t\t\t{\r\n\t\t\t\tlabel: '线性回归',\r\n\t\t\t\tdata: plr,\r\n\t\t\t\tborderColor:'blue',\r\n\t\t\t\tbackgroundColor:'pink',\r\n\t\t\t\tborderWidth: 1,\r\n\t\t\t\tfill: false,\r\n\t\t\t});\r\n\t\t}\r\n\t\tchart1 = <RC2 data={chartdata1} type='line' />;\r\n\t\t}\r\n\t\tlet chart2 = this.predictChartFullInfo();\r\n\t\tlet chart3 = this.predictChartROE();\r\n\t\treturn <><div className=\"px-3 py-2 bg-white\">指数回归预测</div>\r\n\t\t<div className=\"d-flex flex-wrap\">\r\n\t\t\t<div className=\"px-3 c12\">{GFunc.caption('e')}{GFunc.numberToString(e, 4)}</div>\r\n\t\t\t<div className=\"px-3 c12\">{GFunc.caption('指数b')}{GFunc.numberToString(b, 4)}</div>\r\n\t\t\t<div className=\"px-3 c12\">{GFunc.caption('r2')}{GFunc.numberToString(r2, 4)}</div>\r\n\t\t\t<div className=\"px-3 c12\">{GFunc.caption('e预测')}{GFunc.numberToString(epre)}</div>\r\n\t\t</div>\r\n\t\t<div className=\"px-3 py-2 bg-white\">线性回归预测</div>\r\n\t\t<div className=\"d-flex flex-wrap\">\r\n\t\t<div className=\"px-3 c12\">{GFunc.caption('e')}{GFunc.numberToString(e, 4)}</div>\r\n\t\t\t<div className=\"px-3 c12\">{GFunc.caption('增长率')}{GFunc.numberToString(l, 4)}</div>\r\n\t\t\t<div className=\"px-3 c12\">{GFunc.caption('r2')}{GFunc.numberToString(lr2, 4)}</div>\r\n\t\t\t<div className=\"px-3 c12\">{GFunc.caption('e预测')}{GFunc.numberToString(lpre)}</div>\r\n\t\t</div>\r\n\t\t<div className=\"d-flex\">\r\n\t\t\t<div className=\"px-2\" style={{width:'50%'}}>{chart1}</div>\r\n\t\t\t<div className=\"px-2\" style={{width:'50%'}}>{chart2}</div>\r\n\t\t</div>\r\n\t\t<div className=\"d-flex\">\r\n\t\t\t<div className=\"px-2\" style={{width:'50%'}}>{chart3}</div>\r\n\t\t</div>\r\n\t\t</>;\r\n\t});\r\n\r\n\tprotected predictChartFullInfo = () => {\r\n\t\tlet { predictSeasonDataFull } = this.controller;\r\n\t\tlet len = predictSeasonDataFull.length;\r\n\t\tif (len <= 0)\r\n\t\treturn <></>;\r\n\t\tlet label = [];\r\n\t\tlet y:number[] = [];\r\n\t\tfor (let i = len - 1; i >= 0; --i) {\r\n\t\tlet item = predictSeasonDataFull[i];\r\n\t\tif (item.esum === undefined)\r\n\t\t\tcontinue;\r\n\t\tlabel.push(GFunc.SeasonnoToYearMonth(item.season));\r\n\t\ty.push(item.esum);\r\n\t\t}\r\n\r\n\t\tlet er = new ErForEarning(y);\r\n\t\tlet chartdataFull = {\r\n\t\tlabels: label,\r\n\t\tdatasets: [\r\n\t\t\t{\r\n\t\t\tlabel: '原值',\r\n\t\t\tdata: y.map(v=>GFunc.numberToPrecision(v)),\r\n\t\t\tborderColor:'black',\r\n\t\t\tbackgroundColor:'skyBlue',\r\n\t\t\tshowLine: false,\r\n\t\t\tpointStyle: \"crossRot\",\r\n\t\t\tborderWidth: 1,\r\n\t\t\tpointRadius: 5,\r\n\t\t\tfill: false,\r\n\t\t\t} as any\r\n\t\t]\r\n\t\t};\r\n\t\tif (!(isNaN(er.B) || isNaN(er.A))) {\r\n\t\tlet per:number[] = [];\r\n\t\tfor (let i = 0; i < len; ++i) {\r\n\t\t\tper.push(GFunc.numberToPrecision(er.predict(i), 4));\r\n\t\t}\r\n\t\tchartdataFull.datasets.push(\r\n\t\t\t{\r\n\t\t\tlabel: '指数 R2:' + GFunc.numberToString(er.r2, 4),\r\n\t\t\tdata: per,\r\n\t\t\tborderColor:'red',\r\n\t\t\tbackgroundColor:'pink',\r\n\t\t\tborderWidth: 1,\r\n\t\t\tfill: false,\r\n\t\t});\r\n\t\t}\r\n\t\tlet lr = new SlrForEarning(y);\r\n\t\tif (!(isNaN(lr.slope) || isNaN(lr.intercept))) {\r\n\t\tlet plr:number[] = [];\r\n\t\tfor (let i = 0; i < len; ++i) {\r\n\t\t\tplr.push(GFunc.numberToPrecision(lr.predict(i), 4));\r\n\t\t}\r\n\t\tchartdataFull.datasets.push(\r\n\t\t\t{\r\n\t\t\tlabel: '线性 R2:' + GFunc.numberToString(lr.r2, 4),\r\n\t\t\tdata: plr,\r\n\t\t\tborderColor:'blue',\r\n\t\t\tbackgroundColor:'pink',\r\n\t\t\tborderWidth: 1,\r\n\t\t\tfill: false,\r\n\t\t});\r\n\t\t}\r\n\t\treturn <RC2 data={chartdataFull} type='line' />;\r\n\t};\r\n\r\n\tprotected predictChartROE = () => {\r\n\t\tlet { predictSeasonDataFull } = this.controller;\r\n\t\tlet len = predictSeasonDataFull.length;\r\n\t\tif (len <= 0)\r\n\t\treturn <></>;\r\n\t\tlet label = [];\r\n\t\tlet y:number[] = [];\r\n\t\tfor (let i = len - 1; i >= 0; --i) {\r\n\t\tlet item = predictSeasonDataFull[i];\r\n\t\tif (item.esum === undefined)\r\n\t\t\tcontinue;\r\n\t\tlabel.push(GFunc.SeasonnoToYearMonth(item.season));\r\n\t\ty.push(item.esumorg / item.corg);\r\n\t\t}\r\n\r\n\t\tlet chartdataFull = {\r\n\t\tlabels: label,\r\n\t\tdatasets: [\r\n\t\t\t{\r\n\t\t\tlabel: 'ROE原值',\r\n\t\t\tdata: y.map(v=>GFunc.numberToPrecision(v)),\r\n\t\t\tborderColor:'black',\r\n\t\t\tbackgroundColor:'skyBlue',\r\n\t\t\tshowLine: false,\r\n\t\t\tpointStyle: \"crossRot\",\r\n\t\t\tborderWidth: 1,\r\n\t\t\tpointRadius: 5,\r\n\t\t\tfill: false,\r\n\t\t\t} as any\r\n\t\t]\r\n\t\t};\r\n\t\tlet lr = new SlrForEarning(y);\r\n\t\tif (!(isNaN(lr.slope) || isNaN(lr.intercept))) {\r\n\t\tlet plr:number[] = [];\r\n\t\tfor (let i = 0; i < len; ++i) {\r\n\t\t\tplr.push(Number.parseFloat(lr.predict(i).toPrecision(4)));\r\n\t\t}\r\n\t\tchartdataFull.datasets.push(\r\n\t\t\t{\r\n\t\t\tlabel: '线性 R2:' + GFunc.numberToString(lr.r2, 4),\r\n\t\t\tdata: plr,\r\n\t\t\tborderColor:'blue',\r\n\t\t\tbackgroundColor:'pink',\r\n\t\t\tborderWidth: 1,\r\n\t\t\tfill: false,\r\n\t\t});\r\n\t\t}\r\n\t\treturn <RC2 data={chartdataFull} type='line' />;\r\n\t};\r\n\r\n\tprivate predictSeasonEarning = observer(() => {\r\n\t\tlet items = this.controller.predictSeasonData;\r\n\t\tlet header = <div className=\"px-3\">\r\n\t\t<div className=\"px-3 c6\">年月</div>\r\n\t\t<div className=\"px-3 c6 text-right\">股本</div>\r\n\t\t<div className=\"px-3 c6 text-right\">季收益</div>\r\n\t\t<div className=\"px-3 c6 text-right\">年收益</div>\r\n\t\t<div className=\"px-3 c6 text-right\">ROE</div>\r\n\t\t<div className=\"px-3 c6 text-right\">股本o</div>\r\n\t\t<div className=\"px-3 c6 text-right\">季收益o</div>\r\n\t\t<div className=\"px-3 c6 text-right\">年收益o</div>\r\n\t\t</div>;\r\n\t\treturn <>\r\n\t\t<div className=\"px-3 py-1\">历年股本收益-用于回归计算</div>\r\n\t\t<List header={header} loading=\"...\"\r\n\t\t\titems={items}\r\n\t\t\titem={{\r\n\t\t\trender: (row: {season:number, c:number, e:number, esum:number, corg:number, eorg:number, esumorg:number}) => {\r\n\t\t\t\tlet {season, c, e, esum, corg, eorg, esumorg} = row;\r\n\t\t\t\tlet ym = GFunc.SeasonnoToYearMonth(season);\r\n\t\t\t\tlet a = 0;\r\n\t\t\t\treturn <div className=\"px-3 py-2 d-flex flex-wrap\">\r\n\t\t\t\t<div className=\"px-3 c6\">{ym.toString()}</div>\r\n\t\t\t\t<div className=\"px-3 c6 text-right\">{GFunc.numberToFixString(c)}</div>\r\n\t\t\t\t<div className=\"px-3 c6 text-right\">{GFunc.numberToFixString(e)}</div>\r\n\t\t\t\t<div className=\"px-3 c6 text-right\">{GFunc.numberToFixString(esum)}</div>\r\n\t\t\t\t<div className=\"px-3 c6 text-right\">{GFunc.percentToFixString(esum/c)}</div>\r\n\t\t\t\t<div className=\"px-3 c6 text-right\">{GFunc.numberToFixString(corg)}</div>\r\n\t\t\t\t<div className=\"px-3 c6 text-right\">{GFunc.numberToFixString(eorg)}</div>\r\n\t\t\t\t<div className=\"px-3 c6 text-right\">{GFunc.numberToFixString(esumorg)}</div>\r\n\t\t\t\t</div>\r\n\t\t\t}\r\n\t\t\t}}\r\n\t\t/>\r\n\t\t</>\r\n\t});\r\n\r\n\r\n\tprivate seasonEarning = observer(() => {\r\n\t\tlet items = this.controller.seasonData;\r\n\t\tlet header = <div className=\"px-3\">\r\n\t\t<div className=\"px-3 c6\">年月</div>\r\n\t\t<div className=\"px-3 c6 text-right\">股本</div>\r\n\t\t<div className=\"px-3 c6 text-right\">季收益</div>\r\n\t\t<div className=\"px-3 c6 text-right\">年收益</div>\r\n\t\t<div className=\"px-3 c6 text-right\">ROE</div>\r\n\t\t<div className=\"px-3 c6 text-right\">股本o</div>\r\n\t\t<div className=\"px-3 c6 text-right\">季收益o</div>\r\n\t\t<div className=\"px-3 c6 text-right\">年收益o</div>\r\n\t\t</div>;\r\n\t\treturn <>\r\n\t\t<div className=\"px-3 py-1\">历年季度股本收益</div>\r\n\t\t<List header={header} loading=\"...\"\r\n\t\t\titems={items}\r\n\t\t\titem={{\r\n\t\t\trender: (row: {season:number, c:number, e:number, esum:number, corg:number, eorg:number, esumorg:number}) => {\r\n\t\t\t\tlet {season, c, e, esum, corg, eorg, esumorg} = row;\r\n\t\t\t\tlet ym = GFunc.SeasonnoToYearMonth(season);\r\n\t\t\t\tlet a = 0;\r\n\t\t\t\treturn <div className=\"px-3 py-2 d-flex flex-wrap\">\r\n\t\t\t\t<div className=\"px-3 c6\">{ym.toString()}</div>\r\n\t\t\t\t<div className=\"px-3 c6 text-right\">{GFunc.numberToFixString(c)}</div>\r\n\t\t\t\t<div className=\"px-3 c6 text-right\">{GFunc.numberToFixString(e)}</div>\r\n\t\t\t\t<div className=\"px-3 c6 text-right\">{GFunc.numberToFixString(esum)}</div>\r\n\t\t\t\t<div className=\"px-3 c6 text-right\">{GFunc.percentToFixString(esum/c)}</div>\r\n\t\t\t\t<div className=\"px-3 c6 text-right\">{GFunc.numberToFixString(corg)}</div>\r\n\t\t\t\t<div className=\"px-3 c6 text-right\">{GFunc.numberToFixString(eorg)}</div>\r\n\t\t\t\t<div className=\"px-3 c6 text-right\">{GFunc.numberToFixString(esumorg)}</div>\r\n\t\t\t\t</div>\r\n\t\t\t}\r\n\t\t\t}}\r\n\t\t/>\r\n\t\t</>\r\n\t});\r\n\r\n\r\n\tprivate capitalEarning = observer(() => {\r\n\t\tlet items = this.controller.capitalearning;\r\n\t\tlet header = <div className=\"px-3\">\r\n\t\t<div className=\"px-3 c6\">年</div>\r\n\t\t<div className=\"px-3 c6 text-right\">股本</div>\r\n\t\t<div className=\"px-3 c6 text-right\">收益</div>\r\n\t\t<div className=\"px-3 c6 text-right\">ROE</div>\r\n\t\t</div>;\r\n\t\treturn <>\r\n\t\t<div className=\"px-3 py-1\">历年股本收益</div>\r\n\t\t<List header={header} loading=\"...\"\r\n\t\t\titems={items}\r\n\t\t\titem={{\r\n\t\t\trender: (row: StockCapitalearning) => {\r\n\t\t\t\tlet {capital, earning} = row;\r\n\t\t\t\treturn <div className=\"px-3 py-2 d-flex flex-wrap\">\r\n\t\t\t\t<div className=\"px-3 c6\">{row.year}</div>\r\n\t\t\t\t<div className=\"px-3 c6 text-right\"> {capital.toFixed(2)}</div>\r\n\t\t\t\t<div className=\"px-3 c6 text-right\"> {earning.toFixed(2)}</div>\r\n\t\t\t\t<div className=\"px-3 c6 text-right\"> {(earning/capital*100).toFixed(1)}%</div>\r\n\t\t\t\t</div>\r\n\t\t\t}\r\n\t\t\t}}\r\n\t\t/>\r\n\t\t</>\r\n\t});\r\n\r\n\tprivate bonus = observer(() => {\r\n\t\tlet items = this.controller.bonus;\r\n\t\tlet header = <div className=\"px-3\">\r\n\t\t<div className=\"px-3 c8\">日期</div>\r\n\t\t<div className=\"px-3 c6 text-right\">分红</div>\r\n\t\t</div>;\r\n\t\treturn <>\r\n\t\t<div className=\"px-3 py-1\">历年分红</div>\r\n\t\t<List header={header} loading=\"...\"\r\n\t\t\titems={items}\r\n\t\t\titem={{\r\n\t\t\trender: (row: StockBonus) => {\r\n\t\t\t\treturn <div className=\"px-3 py-2 d-flex flex-wrap\">\r\n\t\t\t\t<div className=\"px-3 c8\">{row.day}</div>\r\n\t\t\t\t<div className=\"px-3 c6 text-right\"> {row.bonus.toFixed(2)}</div>\r\n\t\t\t\t</div>\r\n\t\t\t}\r\n\t\t\t}}\r\n\t\t/>\r\n\t\t</>\r\n\t});\r\n}","import { defaultBlackListGroupName, defaultGroupName } from \"consts\";\r\nimport { IObservableArray, observable } from \"mobx\";\r\nimport { MiNet } from \"../net\";\r\nimport { StockGroup } from \"./stockGroup\";\r\n\r\nexport class StockGroups {\r\n\tprivate miNet: MiNet;\r\n\treadonly groups: IObservableArray<StockGroup>;\r\n\tdefaultGroup: StockGroup;\r\n\tblackGroup: StockGroup;\r\n\r\n\tconstructor(miNet: MiNet) {\r\n\t\tthis.miNet = miNet;\r\n\t\tthis.groups = observable.array<StockGroup>([], { deep: true });\r\n\t}\r\n\r\n\tasync init() {\r\n\t\tthis.defaultGroup = this.groupFromName(defaultGroupName);\r\n\t\tthis.blackGroup = this.groupFromName(defaultBlackListGroupName);\r\n\t\tawait Promise.all([\r\n\t\t\tthis.defaultGroup?.loadItems(),\r\n\t\t\tthis.blackGroup?.loadItems(),\r\n\t\t]);\r\n\t}\r\n\t\r\n\tgroupFromName(groupName:string) {\r\n\t\treturn this.groups.find(v => v.name === groupName);\r\n\t}\r\n\r\n\tgroupFromId(id:number) {\r\n\t\treturn this.groups.find(v => v.id === id);\r\n\t}\r\n\r\n\tget group0() {return this.groups[0]}\r\n\r\n\tgetSelected(tags:{tag:number}[]) {\r\n\t\tlet ret = this.groups.filter(v => {\r\n\t\t\tlet i = tags.findIndex(st => st.tag === v.id);\r\n\t\t\treturn i >= 0;\r\n\t\t});\r\n\t\treturn ret;\r\n\t}\r\n\r\n\tadd(group: StockGroup) {\r\n\t\tthis.groups.push(group);\r\n\t}\r\n\r\n\texists(id:number, name:string): boolean {\r\n\t\treturn this.groups.findIndex(v => v.id === id && v.name === name) >= 0;\r\n\t}\r\n\t\r\n\tisMySelect(id:number): boolean {\r\n\t\tfor (let group of this.groups) {\r\n\t\t\tif (group.exists(id) === true) return true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\t\r\n\tisMyBlack(id:number): boolean {\r\n\t\tif (!this.blackGroup) return false;\r\n\t\treturn this.blackGroup.exists(id);\r\n\t}\r\n\r\n\tasync load(): Promise<void> {\r\n\t\tlet r = await this.miNet.t_tag$all();\r\n\t\tlet ret = r as any[];\r\n\t\tlet bc = await this.checkDefaultTags(ret);\r\n\t\tif (bc) {\r\n\t\t\t//r = await this.miApi.query('t_tag$all', [this.user.id]);\r\n\t\t\tr = await this.miNet.t_tag$all();\r\n\t\t\tret = r as any[];\r\n\t\t}\r\n\t\tlet r1 = [];\r\n\t\tlet i = ret.findIndex(v=>v.name === defaultGroupName);\r\n\t\tif (i >= 0) {\r\n\t\t\tr1.push(ret[i]);\r\n\t\t\tret.splice(i, 1);\r\n\t\t}\r\n\t\ti = ret.findIndex(v=> v.name === defaultBlackListGroupName);\r\n\t\tif (i >= 0) {\r\n\t\t\tr1.push(ret[i]);\r\n\t\t\tret.splice(i, 1);\r\n\t\t}\r\n\t\tr1.push(...ret);\r\n\t\tthis.groups.replace(r1.map(v => new StockGroup(v.name, v.id, this.miNet)));\r\n\t}\r\n\r\n\tprivate async checkDefaultTags(list:any[]): Promise<boolean> {\r\n\t\tlet br = false;\r\n\t\tif (list === undefined) {\r\n\t\t\tawait this.miNet.t_tag$save(defaultGroupName);\r\n\t\t\tawait this.miNet.t_tag$save(defaultBlackListGroupName);\r\n\t\t\tbr = true;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tlet i = list.findIndex(v => v.name === defaultGroupName);\r\n\t\t\tif (i < 0) {\r\n\t\t\t\tawait this.miNet.t_tag$save(defaultGroupName);\r\n\t\t\t\tbr = true;\r\n\t\t\t}\r\n\t\t\ti = list.findIndex(v => v.name === defaultBlackListGroupName);\r\n\t\t\tif (i < 0) {\r\n\t\t\t\tawait this.miNet.t_tag$save(defaultBlackListGroupName);\r\n\t\t\t\tbr = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn br;\r\n\t}\r\n}\r\n","import { IObservableArray, observable, runInAction } from \"mobx\";\r\nimport { SlrForEarning } from \"regression\";\r\nimport { GFunc } from \"tool\";\r\nimport { MiNet } from \"../net\";\r\nimport { sortStocks } from \"./sortStocks\";\r\nimport { Stock } from \"./types\";\r\n\r\nexport class StockGroup {\r\n\tprivate miNet: MiNet;\r\n\tprivate sortType: string;\r\n\r\n\tid: number;\r\n\tname: string;\r\n\tstocks: IObservableArray<Stock>;\r\n\r\n\tconstructor(groupName:string, groupId:number, miNet: MiNet) {\r\n\t\tthis.name = groupName;\r\n\t\tthis.id = groupId;\r\n\t\tthis.miNet = miNet;\r\n\t\tthis.stocks = observable.array<Stock>([], { deep: true });\r\n\t}\r\n\r\n\tasync loadItems() {\r\n\t\t// 距离上次\r\n\t\tlet queryName = 'taguser';\r\n\r\n\t\tlet query = {\r\n\t\t\tname: queryName,\r\n\t\t\tpageStart: 0,\r\n\t\t\tpageSize: 1000,\r\n\t\t\tuser: this.miNet.userId,\r\n\t\t\ttag: this.id,\r\n\t\t\tyearlen: 1,\r\n\t\t};\r\n\t\tlet result = await this.miNet.process(query, []);\r\n\t\tif (Array.isArray(result) === false) return;\r\n\r\n\t\tlet arr: Stock[] = result;\r\n\t\tfor (let item of arr) {\r\n\t\t\tlet dataArray = JSON.parse(item.data) as number[];\r\n\t\t\titem.dataArr = dataArray;\r\n\t\t\tlet sl = new SlrForEarning(dataArray);\r\n\t\t\titem.ep = (sl.predict(4) + item.e) / 2;\r\n\t\t\titem.e3 = sl.predict(7);\r\n\t\t\titem.v = GFunc.calculateVN(sl.slopeR, item.ep, item.divyield * item.price, item.exprice);\r\n\t\t\titem.predictpe = item.price / item.e3;\r\n\t\t}\r\n\t\tsortStocks(undefined, arr);\r\n\r\n\t\trunInAction(() => {\r\n\t\t\tthis.stocks.clear();\r\n\t\t\tthis.stocks.push(...arr);\t\r\n\t\t});\r\n\t}\r\n\r\n\tsort(sortType: string) {\r\n\t\tthis.sortType = sortType;\r\n\t\tsortStocks(sortType, this.stocks);\r\n\t}\r\n\r\n\tasync addStock(stock: Stock) {\r\n\t\tawait this.miNet.t_tagstock$add(this.id, stock.id);\r\n\t\tlet index = this.stocks.findIndex(v => v.id === stock.id);\r\n\t\tif (index >= 0) {\r\n\t\t\tlet rows = this.stocks.splice(index, 1);\r\n\t\t\tthis.stocks.unshift(rows[0]);\r\n\t\t}\r\n\t\telse {\r\n\t\t\t// 重新加载stock的其它值\r\n\t\t\t// await ...\r\n\t\t\t//this.stocks.unshift(stock);\r\n\t\t\tawait this.loadItems();\r\n\t\t\tsortStocks(this.sortType, this.stocks);\r\n\t\t}\r\n\t}\r\n\r\n\tasync removeStock(stock: Stock) {\r\n\t\tawait this.miNet.t_tagstock$del(this.id, stock.id);\r\n\t\tlet index = this.stocks.findIndex(v => v.id === stock.id);\r\n\t\tif (index >= 0) this.stocks.splice(index, 1);\r\n\t}\r\n\r\n\texists(stockId: number): boolean {\r\n\t\tfor (let stock of this.stocks) {\r\n\t\t\tif (stock.id === stockId) return true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n}\r\n","import { Res, UI } from \"tonva-react\";\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { FieldItem, FieldItemInt, FieldItemNum, FieldItemString, FieldItemId } from \"tonva-react\";\r\nimport { Customer } from \"./BzHelloTonva\";\r\n\r\n/*--fields--*/\r\nconst fields = {\r\n\tid: {\r\n\t\t\"name\": \"id\",\r\n\t\t\"type\": \"id\",\r\n\t\t\"isKey\": false,\r\n\t\t\"label\": \"Id\"\r\n\t} as FieldItemId,\r\n\tno: {\r\n\t\t\"name\": \"no\",\r\n\t\t\"type\": \"string\",\r\n\t\t\"isKey\": true,\r\n\t\t\"widget\": \"string\",\r\n\t\t\"label\": \"No\"\r\n\t} as FieldItemString,\r\n\tfirstName: {\r\n\t\t\"name\": \"firstName\",\r\n\t\t\"type\": \"string\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"string\",\r\n\t\t\"label\": \"名字\"\r\n\t} as FieldItemString,\r\n\tlastName: {\r\n\t\t\"name\": \"lastName\",\r\n\t\t\"type\": \"string\",\r\n\t\t\"isKey\": false,\r\n\t\t\"widget\": \"string\",\r\n\t\t\"label\": \"LastName\"\r\n\t} as FieldItemString,\r\n};\r\n/*==fields==*/\r\n\r\nexport const fieldArr: FieldItem[] = [\r\n\tfields.no, fields.firstName, fields.lastName, \r\n];\r\n\r\nexport const ui: UI = {\r\n\tlabel: \"Customer\",\r\n\tfieldArr,\r\n\tfields,\r\n};\r\n\r\nexport const res: Res<any> = {\r\n\tzh: {\r\n\t},\r\n\ten: {\r\n\t}\r\n};\r\n\r\nexport function render(item: Customer):JSX.Element {\r\n\tlet {firstName, lastName, no} = item;\r\n\treturn <span>\r\n\t\t<small className=\"d-inline-block w-3c\">{no}</small> <b>{firstName} {lastName}</b>\r\n\t</span>;\r\n};\r\n","export * from './StockInfoType';\r\nexport { CStockInfo } from './CStockInfo';\r\nexport { VStockInfo } from './VStockInfo';"],"sourceRoot":""}